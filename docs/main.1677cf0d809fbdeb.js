"use strict";(self.webpackChunkToDo=self.webpackChunkToDo||[]).push([[179],{2011:(ut,be,P)=>{P.d(be,{Dh:()=>de,GT:()=>le,cc:()=>Se,hO:()=>Le,on:()=>U,pX:()=>ie,xv:()=>he});var g=P(4650),X=P(127),O=P(5813);ut=P.hmd(ut);const se=["ngOnDestroy"],ie=(fe,Ye,rt,Ae={})=>new Proxy(fe,{get:(ve,Ie)=>rt.runOutsideAngular(()=>{var Be;if(fe[Ie])return!(null===(Be=Ae?.spy)||void 0===Be)&&Be.get&&Ae.spy.get(Ie,fe[Ie]),fe[Ie];if(se.indexOf(Ie)>-1)return()=>{};const je=Ye.toPromise().then(V=>{const pe=V&&V[Ie];return"function"==typeof pe?pe.bind(V):pe&&pe.then?pe.then(z=>rt.run(()=>z)):rt.run(()=>pe)});return new Proxy(()=>{},{get:(V,pe)=>je[pe],apply:(V,pe,z)=>je.then(Q=>{var ne;const te=Q&&Q(...z);return!(null===(ne=Ae?.spy)||void 0===ne)&&ne.apply&&Ae.spy.apply(Ie,z,te),te})})})}),le=(fe,Ye)=>{Ye.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(Ae=>{Object.defineProperty(fe.prototype,Ae,Object.getOwnPropertyDescriptor(rt.prototype||rt,Ae))})})};class ue{constructor(Ye){return Ye}}const de=new g.OlP("angularfire2.app.options"),he=new g.OlP("angularfire2.app.name");function U(fe,Ye,rt){const ve="object"==typeof rt&&rt||{};ve.name=ve.name||"string"==typeof rt&&rt||"[DEFAULT]";const Be=X.Z.apps.filter(je=>je&&je.name===ve.name)[0]||Ye.runOutsideAngular(()=>X.Z.initializeApp(fe,ve));try{JSON.stringify(fe)!==JSON.stringify(Be.options)&&B("error",`${Be.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Be)}const B=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)},q={provide:ue,useFactory:U,deps:[de,g.R0b,[new g.FiY,he]]};let Le=(()=>{class fe{constructor(rt){X.Z.registerVersion("angularfire",O.q4.full,"core"),X.Z.registerVersion("angularfire",O.q4.full,"app-compat"),X.Z.registerVersion("angular",g.q4F.full,rt.toString())}static initializeApp(rt,Ae){return{ngModule:fe,providers:[{provide:de,useValue:rt},{provide:he,useValue:Ae}]}}}return fe.\u0275fac=function(rt){return new(rt||fe)(g.LFG(g.Lbi))},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({providers:[q]}),fe})();function Se(fe,Ye,rt,Ae,ve){const[,Ie,Be]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(Ie)return function we(fe,Ye){try{return fe.toString()===Ye.toString()}catch{return fe===Ye}}(ve,Be)||(ge("error",`${Ye} was already initialized on the ${rt} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:ve,was:Be})),Ie;{const je=Ae();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,ve]),je}}const Xe=!!ut.hot,ge=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,be,P)=>{P.d(be,{q4:()=>at,iC:()=>Xi,HU:()=>Po,vb:()=>As,JM:()=>Aa});var g=P(4650),X=P(5867),O=P(5861),se=P(9681),ie=P(2090),le=P(4859),ue=P(1877),de=P(8766);const he="@firebase/installations",U="0.5.16",q=`w:${U}`,Le="FIS_v2",Ye=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(D){return D instanceof ie.ZR&&D.code.includes("request-failed")}function Ae({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:Q(D.expiresIn),creationTime:Date.now()}}function Ie(D,b){return Be.apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:b}){const x=je(D);return x.append("Authorization",function ne(D){return`${Le} ${D}`}(b)),x}function pe(D){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function Q(D){return Number(D.replace("s","000"))}function te(D,b){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const F=Ae(D),K=je(D),ee=b.getImmediate({optional:!0});if(ee){const mt=yield ee.getHeartbeatsHeader();mt&&K.append("x-firebase-client",mt)}const Me={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:Le,appId:D.appId,sdkVersion:q})},et=yield pe(()=>fetch(F,Me));if(et.ok){const mt=yield et.json();return{fid:mt.fid||x,registrationStatus:2,refreshToken:mt.refreshToken,authToken:ve(mt.authToken)}}throw yield Ie("Create Installation",et)})).apply(this,arguments)}function ke(D){return new Promise(b=>{setTimeout(b,D)})}const Kt=/^[cdef][\w-]{21}$/;function qe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function rn(D){return function ct(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Kt.test(x)?x:""}catch{return""}}function mn(D){return`${D.appName}!${D.appId}`}const Wt=new Map;function Zt(D,b){const x=mn(D);un(x,b),function $i(D,b){const x=function Ar(){return!fi&&"BroadcastChannel"in self&&(fi=new BroadcastChannel("[Firebase] FID Change"),fi.onmessage=D=>{un(D.data.key,D.data.fid)}),fi}();x&&x.postMessage({key:D,fid:b}),function Lr(){0===Wt.size&&fi&&(fi.close(),fi=null)}()}(x,b)}function un(D,b){const x=Wt.get(D);if(x)for(const F of x)F(b)}let fi=null;const Jr="firebase-installations-store";let Xr=null;function na(){return Xr||(Xr=(0,de.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Jr)}})),Xr}function Ke(D,b){return mr.apply(this,arguments)}function mr(){return(mr=(0,O.Z)(function*(D,b){const x=mn(D),K=(yield na()).transaction(Jr,"readwrite"),ee=K.objectStore(Jr),Ee=yield ee.get(x);return yield ee.put(b,x),yield K.done,(!Ee||Ee.fid!==b.fid)&&Zt(D,b.fid),b})).apply(this,arguments)}function ds(D){return $n.apply(this,arguments)}function $n(){return($n=(0,O.Z)(function*(D){const b=mn(D),F=(yield na()).transaction(Jr,"readwrite");yield F.objectStore(Jr).delete(b),yield F.done})).apply(this,arguments)}function ei(D,b){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,O.Z)(function*(D,b){const x=mn(D),K=(yield na()).transaction(Jr,"readwrite"),ee=K.objectStore(Jr),Ee=yield ee.get(x),Me=b(Ee);return void 0===Me?yield ee.delete(x):yield ee.put(Me,x),yield K.done,Me&&(!Ee||Ee.fid!==Me.fid)&&Zt(D,Me.fid),Me})).apply(this,arguments)}function Mn(D){return kn.apply(this,arguments)}function kn(){return(kn=(0,O.Z)(function*(D){let b;const x=yield ei(D.appConfig,F=>{const K=hn(F),ee=ft(D,K);return b=ee.registrationPromise,ee.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function hn(D){return Ct(D||{fid:qe(),registrationStatus:0})}function ft(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function st(D,b){return tn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:or(D)}:{installationEntry:b}}function tn(){return(tn=(0,O.Z)(function*(D,b){try{const x=yield te(D,b);return Ke(D.appConfig,x)}catch(x){throw rt(x)&&409===x.customData.serverCode?yield ds(D.appConfig):yield Ke(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function or(D){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,O.Z)(function*(D){let b=yield Vr(D.appConfig);for(;1===b.registrationStatus;)yield ke(100),b=yield Vr(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Mn(D);return F||x}return b})).apply(this,arguments)}function Vr(D){return ei(D,b=>{if(!b)throw Ye.create("installation-not-found");return Ct(b)})}function Ct(D){return function hs(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Yt(D,b){return Si.apply(this,arguments)}function Si(){return(Si=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const F=Qt(D,x),K=V(D,x),ee=b.getImmediate({optional:!0});if(ee){const mt=yield ee.getHeartbeatsHeader();mt&&K.append("x-firebase-client",mt)}const Me={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:q,appId:D.appId}})},et=yield pe(()=>fetch(F,Me));if(et.ok)return ve(yield et.json());throw yield Ie("Generate Auth Token",et)})).apply(this,arguments)}function Qt(D,{fid:b}){return`${Ae(D)}/${b}/authTokens:generate`}function Hn(D){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,O.Z)(function*(D,b=!1){let x;const F=yield ei(D.appConfig,ee=>{if(!Nt(ee))throw Ye.create("not-registered");const Ee=ee.authToken;if(!b&&j(Ee))return ee;if(1===Ee.requestStatus)return x=Je(D,b),ee;{if(!navigator.onLine)throw Ye.create("app-offline");const Me=W(ee);return x=_t(D,Me),Me}});return x?yield x:F.authToken})).apply(this,arguments)}function Je(D,b){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(D,b){let x=yield Qe(D.appConfig);for(;1===x.authToken.requestStatus;)yield ke(100),x=yield Qe(D.appConfig);const F=x.authToken;return 0===F.requestStatus?Hn(D,b):F})).apply(this,arguments)}function Qe(D){return ei(D,b=>{if(!Nt(b))throw Ye.create("not-registered");return function _e(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function _t(D,b){return gt.apply(this,arguments)}function gt(){return(gt=(0,O.Z)(function*(D,b){try{const x=yield Yt(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield Ke(D.appConfig,F),x}catch(x){if(!rt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Ke(D.appConfig,F)}else yield ds(D.appConfig);throw x}})).apply(this,arguments)}function Nt(D){return void 0!==D&&2===D.registrationStatus}function j(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function W(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Ge(){return(Ge=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield Mn(b);return F?F.catch(console.error):Hn(b).catch(console.error),x.fid})).apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(D,b=!1){const x=D;return yield ln(x),(yield Hn(x,b)).token})).apply(this,arguments)}function ln(D){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,O.Z)(function*(D){const{registrationPromise:b}=yield Mn(D);b&&(yield b)})).apply(this,arguments)}function fs(D){return Ye.create("missing-app-config-values",{valueName:D})}const vo="installations",_n=D=>{const b=D.getProvider("app").getImmediate(),x=function yn(D){if(!D||!D.options)throw fs("App Configuration");if(!D.name)throw fs("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw fs(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Vs=D=>{const b=D.getProvider("app").getImmediate(),x=(0,se._getProvider)(b,vo).getImmediate();return{getId:()=>function Z(D){return Ge.apply(this,arguments)}(x),getToken:K=>function lt(D){return qt.apply(this,arguments)}(x,K)}};(function Ka(){(0,se._registerComponent)(new le.wA(vo,_n,"PUBLIC")),(0,se._registerComponent)(new le.wA("installations-internal",Vs,"PRIVATE"))})(),(0,se.registerVersion)(he,U),(0,se.registerVersion)(he,U,"esm2017");const xi="@firebase/remote-config",Ln=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $h{constructor(b,x,F,K){this.client=b,this.storage=x,this.storageCache=F,this.logger=K}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,K=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${K}.`),K}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return K;b.eTag=K&&K.eTag;const ee=yield x.client.fetch(b),Ee=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Ee.push(x.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Ee),ee})()}}function Dc(D=navigator){return D.languages&&D.languages[0]||D.language}class Cc{constructor(b,x,F,K,ee,Ee){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=K,this.apiKey=ee,this.appId=Ee}fetch(b){var x=this;return(0,O.Z)(function*(){var F,K,ee;const[Ee,Me]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,bt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},dt={sdk_version:x.sdkVersion,app_instance_id:Ee,app_instance_id_token:Me,app_id:x.appId,language_code:Dc()},In={method:"POST",headers:bt,body:JSON.stringify(dt)},lr=fetch(mt,In),Fo=new Promise((Lo,Xs)=>{b.signal.addEventListener(()=>{const Ii=new Error("The operation was aborted.");Ii.name="AbortError",Xs(Ii)})});let Ms;try{yield Promise.race([lr,Fo]),Ms=yield lr}catch(Lo){let Xs="fetch-client-network";throw"AbortError"===(null===(F=Lo)||void 0===F?void 0:F.name)&&(Xs="fetch-timeout"),Ln.create(Xs,{originalErrorMessage:null===(K=Lo)||void 0===K?void 0:K.message})}let Tt=Ms.status;const ki=Ms.headers.get("ETag")||void 0;let Rs,si;if(200===Ms.status){let Lo;try{Lo=yield Ms.json()}catch(Xs){throw Ln.create("fetch-client-parse",{originalErrorMessage:null===(ee=Xs)||void 0===ee?void 0:ee.message})}Rs=Lo.entries,si=Lo.state}if("INSTANCE_STATE_UNSPECIFIED"===si?Tt=500:"NO_CHANGE"===si?Tt=304:("NO_TEMPLATE"===si||"EMPTY_CONFIG"===si)&&(Rs={}),304!==Tt&&200!==Tt)throw Ln.create("fetch-status",{httpStatus:Tt});return{status:Tt,eTag:ki,config:Rs}})()}}class Vp{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var K=this;return(0,O.Z)(function*(){yield function zn(D,b){return new Promise((x,F)=>{const K=Math.max(b-Date.now(),0),ee=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(ee),F(Ln.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const ee=yield K.client.fetch(b);return yield K.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Wl(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ee))throw ee;const Ee={throttleEndTimeMillis:Date.now()+(0,ie.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Ee),K.attemptFetch(b,Ee)}})()}}class ql{constructor(b,x,F,K,ee){this.app=b,this._client=x,this._storageCache=F,this._storage=K,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function bc(D,b){var x;const F=D.target.error||void 0;return Ln.create(b,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const ys="app_namespace_store";class $p{constructor(b,x,F,K=function jp(){return new Promise((D,b)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=K=>{b(bc(K,"storage-open"))},F.onsuccess=K=>{D(K.target.result)},F.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(ys,{keyPath:"compositeKey"})}}catch(F){b(Ln.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,ee)=>{var Ee;const et=F.transaction([ys],"readonly").objectStore(ys),mt=x.createCompositeKey(b);try{const bt=et.get(mt);bt.onerror=dt=>{ee(bc(dt,"storage-get"))},bt.onsuccess=dt=>{const In=dt.target.result;K(In?In.value:void 0)}}catch(bt){ee(Ln.create("storage-get",{originalErrorMessage:null===(Ee=bt)||void 0===Ee?void 0:Ee.message}))}})})()}set(b,x){var F=this;return(0,O.Z)(function*(){const K=yield F.openDbPromise;return new Promise((ee,Ee)=>{var Me;const mt=K.transaction([ys],"readwrite").objectStore(ys),bt=F.createCompositeKey(b);try{const dt=mt.put({compositeKey:bt,value:x});dt.onerror=In=>{Ee(bc(In,"storage-set"))},dt.onsuccess=()=>{ee()}}catch(dt){Ee(Ln.create("storage-set",{originalErrorMessage:null===(Me=dt)||void 0===Me?void 0:Me.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((K,ee)=>{var Ee;const et=F.transaction([ys],"readwrite").objectStore(ys),mt=x.createCompositeKey(b);try{const bt=et.delete(mt);bt.onerror=dt=>{ee(bc(dt,"storage-delete"))},bt.onsuccess=()=>{K()}}catch(bt){ee(Ln.create("storage-delete",{originalErrorMessage:null===(Ee=bt)||void 0===Ee?void 0:Ee.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Zl{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),K=b.storage.getActiveConfig(),ee=yield x;ee&&(b.lastFetchStatus=ee);const Ee=yield F;Ee&&(b.lastSuccessfulFetchTimestampMillis=Ee);const Me=yield K;Me&&(b.activeConfig=Me)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Qa(){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function vs(){(0,se._registerComponent)(new le.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),K=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ln.create("registration-window");if(!(0,ie.hl)())throw Ln.create("indexed-db-unavailable");const{projectId:ee,apiKey:Ee,appId:Me}=F.options;if(!ee)throw Ln.create("registration-project-id");if(!Ee)throw Ln.create("registration-api-key");if(!Me)throw Ln.create("registration-app-id");const et=new $p(Me,F.name,x=x||"firebase"),mt=new Zl(et),bt=new ue.Yd(xi);bt.logLevel=ue.in.ERROR;const dt=new Cc(K,se.SDK_VERSION,x,ee,Ee,Me),In=new Vp(dt,et),lr=new $h(In,et,mt,bt),Fo=new ql(F,lr,mt,et,bt);return function ur(D){const b=(0,ie.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Fo),Fo},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(xi,"0.3.15"),(0,se.registerVersion)(xi,"0.3.15","esm2017")}();const Mi="/firebase-messaging-sw.js",Gi="/firebase-cloud-messaging-push-scope",zi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sa="google.c.a.c_id",Ja="google.c.a.c_l",Tc="google.c.a.ts",Gh="google.c.a.e";var Wi=(()=>{return(D=Wi||(Wi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Wi;var D})();function ti(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Br(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),K=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)K[ee]=F.charCodeAt(ee);return K}const _o="fcm_token_details_db",cr="fcm_token_object_Store";function zh(D){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(_o))return null;let b=null;return(yield(0,de.X3)(_o,5,{upgrade:(F=(0,O.Z)(function*(K,ee,Ee,Me){var et;if(ee<2||!K.objectStoreNames.contains(cr))return;const mt=Me.objectStore(cr),bt=yield mt.index("fcmSenderId").get(D);if(yield mt.clear(),bt)if(2===ee){const dt=bt;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;b={token:dt.fcmToken,createTime:null!==(et=dt.createTime)&&void 0!==et?et:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:ti(dt.vapidKey)}}}else if(3===ee){const dt=bt;b={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:ti(dt.auth),p256dh:ti(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:ti(dt.vapidKey)}}}else if(4===ee){const dt=bt;b={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:ti(dt.auth),p256dh:ti(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:ti(dt.vapidKey)}}}}),function(ee,Ee,Me,et){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(_o),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),Dn(b)?b:null;var F}),Wh.apply(this,arguments)}function Dn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const ni="firebase-messaging-store";let vr=null;function eu(){return vr||(vr=(0,de.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(ni)}})),vr}function wo(D){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(function*(D){const b=mi(D),F=yield(yield eu()).transaction(ni).objectStore(ni).get(b);if(F)return F;{const K=yield zh(D.appConfig.senderId);if(K)return yield zt(D,K),K}})).apply(this,arguments)}function zt(D,b){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(D,b){const x=mi(D),K=(yield eu()).transaction(ni,"readwrite");return yield K.objectStore(ni).put(b,x),yield K.done,b})).apply(this,arguments)}function $s(D){return nu.apply(this,arguments)}function nu(){return(nu=(0,O.Z)(function*(D){const b=mi(D),F=(yield eu()).transaction(ni,"readwrite");yield F.objectStore(ni).delete(b),yield F.done})).apply(this,arguments)}function mi({appConfig:D}){return D.appId}const En=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function It(D,b){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(D,b){var x;const F=yield Sc(D),K=De(b),ee={method:"POST",headers:F,body:JSON.stringify(K)};let Ee;try{Ee=yield(yield fetch(Ki(D.appConfig),ee)).json()}catch(Me){throw En.create("token-subscribe-failed",{errorInfo:null===(x=Me)||void 0===x?void 0:x.toString()})}if(Ee.error)throw En.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw En.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function Kh(D,b){return su.apply(this,arguments)}function su(){return(su=(0,O.Z)(function*(D,b){var x;const F=yield Sc(D),K=De(b.subscriptionOptions),ee={method:"PATCH",headers:F,body:JSON.stringify(K)};let Ee;try{Ee=yield(yield fetch(`${Ki(D.appConfig)}/${b.token}`,ee)).json()}catch(Me){throw En.create("token-update-failed",{errorInfo:null===(x=Me)||void 0===x?void 0:x.toString()})}if(Ee.error)throw En.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw En.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function ou(D,b){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,O.Z)(function*(D,b){var x;const K={method:"DELETE",headers:yield Sc(D)};try{const Ee=yield(yield fetch(`${Ki(D.appConfig)}/${b}`,K)).json();if(Ee.error)throw En.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(ee){throw En.create("token-unsubscribe-failed",{errorInfo:null===(x=ee)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Ki({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Sc(D){return aa.apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function De({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const K={web:{endpoint:x,auth:b,p256dh:D}};return F!==zi&&(K.web.applicationPubKey=F),K}const jt=6048e5;function au(D){return uu.apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(D){const b=yield xc(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:ti(b.getKey("auth")),p256dh:ti(b.getKey("p256dh"))},F=yield wo(D.firebaseDependencies);if(F){if(Xl(F.subscriptionOptions,x))return Date.now()>=F.createTime+jt?Io(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield ou(D.firebaseDependencies,F.token)}catch(K){console.warn(K)}return ua(D.firebaseDependencies,x)}return ua(D.firebaseDependencies,x)})).apply(this,arguments)}function Cn(D){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(D){const b=yield wo(D.firebaseDependencies);b&&(yield ou(D.firebaseDependencies,b.token),yield $s(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Io(D,b){return ri.apply(this,arguments)}function ri(){return(ri=(0,O.Z)(function*(D,b){try{const x=yield Kh(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield zt(D.firebaseDependencies,F),x}catch(x){throw yield Cn(D),x}})).apply(this,arguments)}function ua(D,b){return ca.apply(this,arguments)}function ca(){return(ca=(0,O.Z)(function*(D,b){const F={token:yield It(D,b),createTime:Date.now(),subscriptionOptions:b};return yield zt(D,F),F.token})).apply(this,arguments)}function xc(D,b){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Br(b)})})).apply(this,arguments)}function Xl(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function la(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function bn(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const K=b.notification.image;K&&(D.notification.image=K);const ee=b.notification.icon;ee&&(D.notification.icon=ee)}(b,D),function Ri(D,b){!b.data||(D.data=b.data)}(b,D),function Rc(D,b){var x,F,K,ee,Ee;if(!(b.fcmOptions||null!==(x=b.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Me=null!==(K=null===(F=b.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==K?K:null===(ee=b.notification)||void 0===ee?void 0:ee.click_action;Me&&(D.fcmOptions.link=Me);const et=null===(Ee=b.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;et&&(D.fcmOptions.analyticsLabel=et)}(b,D),b}function Hs(D){return"object"==typeof D&&!!D&&sa in D}function Zi(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function da(D){return En.create("missing-app-config-values",{valueName:D})}Zi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gp{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Hp(D){if(!D||!D.options)throw da("App Configuration Object");if(!D.name)throw da("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw da(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:K,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Nc(D){return lu.apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(D){var b;try{D.swRegistration=yield navigator.serviceWorker.register(Mi,{scope:Gi}),D.swRegistration.update().catch(()=>{})}catch(x){throw En.create("failed-service-worker-registration",{browserErrorMessage:null===(b=x)||void 0===b?void 0:b.message})}})).apply(this,arguments)}function ha(D,b){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield Nc(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw En.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function fa(D,b){return kc.apply(this,arguments)}function kc(){return(kc=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=zi)})).apply(this,arguments)}function hu(){return(hu=(0,O.Z)(function*(D,b){if(!navigator)throw En.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw En.create("permission-blocked");return yield fa(D,b?.vapidKey),yield ha(D,b?.serviceWorkerRegistration),au(D)})).apply(this,arguments)}function Pc(D,b,x){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,O.Z)(function*(D,b,x){const F=Lc(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[sa],message_name:x[Ja],message_time:x[Tc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Lc(D){switch(D){case Wi.NOTIFICATION_CLICKED:return"notification_open";case Wi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Gs(){return(Gs=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Wi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(la(x)):D.onMessageHandler.next(la(x)));const F=x.data;Hs(F)&&"1"===F[Gh]&&(yield Pc(D,x.messageType,F))})).apply(this,arguments)}const zs="@firebase/messaging",Wn=D=>{const b=new Gp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function ed(D,b){return Gs.apply(this,arguments)}(b,x)),b},jr=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function du(D,b){return hu.apply(this,arguments)}(b,F)}};function td(){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function fn(){(0,se._registerComponent)(new le.wA("messaging",Wn,"PUBLIC")),(0,se._registerComponent)(new le.wA("messaging-internal",jr,"PRIVATE")),(0,se.registerVersion)(zs,"0.11.0"),(0,se.registerVersion)(zs,"0.11.0","esm2017")}();const Do="analytics",id="firebase_id",qs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mu="https://www.googletagmanager.com/gtag/js",Tn=new ue.Yd("@firebase/analytics");function yu(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function vu(D,b){const x=document.createElement("script");x.src=`${mu}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function Yh(D,b,x,F,K,ee){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(D,b,x,F,K,ee){const Ee=F[K];try{if(Ee)yield b[Ee];else{const et=(yield yu(x)).find(mt=>mt.measurementId===K);et&&(yield b[et.appId])}}catch(Me){Tn.error(Me)}D("config",K,ee)})).apply(this,arguments)}function bo(D,b,x,F,K){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(D,b,x,F,K){try{let ee=[];if(K&&K.send_to){let Ee=K.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Me=yield yu(x);for(const et of Ee){const mt=Me.find(dt=>dt.measurementId===et),bt=mt&&b[mt.appId];if(!bt){ee=[];break}ee.push(bt)}}0===ee.length&&(ee=Object.values(b)),yield Promise.all(ee),D("event",F,K||{})}catch(ee){Tn.error(ee)}})).apply(this,arguments)}function od(D){const b=window.document.getElementsByTagName("script");for(const x of Object.values(b))if(x.src&&x.src.includes(mu)&&x.src.includes(D))return x;return null}const tr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ya=new class Ni{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function ud(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function va(D){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,K={method:"GET",headers:ud(F)},ee=qs.replace("{app-id}",x),Ee=yield fetch(ee,K);if(200!==Ee.status&&304!==Ee.status){let Me="";try{const et=yield Ee.json();null!==(b=et.error)&&void 0!==b&&b.message&&(Me=et.error.message)}catch{}throw tr.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Me})}return Ee.json()})).apply(this,arguments)}function Rn(D){return yi.apply(this,arguments)}function yi(){return(yi=(0,O.Z)(function*(D,b=ya,x){const{appId:F,apiKey:K,measurementId:ee}=D.options;if(!F)throw tr.create("no-app-id");if(!K){if(ee)return{measurementId:ee,appId:F};throw tr.create("no-api-key")}const Ee=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Me=new Eu;return setTimeout((0,O.Z)(function*(){Me.abort()}),void 0!==x?x:6e4),wu({appId:F,apiKey:K,measurementId:ee},Ee,Me,b)})).apply(this,arguments)}function wu(D,b,x){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,K=ya){var ee,Ee;const{appId:Me,measurementId:et}=D;try{yield _a(F,b)}catch(mt){if(et)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${null===(ee=mt)||void 0===ee?void 0:ee.message}]`),{appId:Me,measurementId:et};throw mt}try{const mt=yield va(D);return K.deleteThrottleMetadata(Me),mt}catch(mt){const bt=mt;if(!Iu(bt)){if(K.deleteThrottleMetadata(Me),et)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:Me,measurementId:et};throw mt}const dt=503===Number(null===(Ee=bt?.customData)||void 0===Ee?void 0:Ee.httpStatus)?(0,ie.$s)(x,K.intervalMillis,30):(0,ie.$s)(x,K.intervalMillis),In={throttleEndTimeMillis:Date.now()+dt,backoffCount:x+1};return K.setThrottleMetadata(Me,In),Tn.debug(`Calling attemptFetch again in ${dt} millis`),wu(D,In,F,K)}})).apply(this,arguments)}function _a(D,b){return new Promise((x,F)=>{const K=Math.max(b-Date.now(),0),ee=setTimeout(x,K);D.addEventListener(()=>{clearTimeout(ee),F(tr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Iu(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class Eu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let Is,Ia;function Es(){return(Es=(0,O.Z)(function*(D,b,x,F,K){if(K&&K.global)D("event",x,F);else{const ee=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function Qs(D){Ia=D}function Hc(D){Is=D}function Qi(){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,O.Z)(function*(){var D;if(!(0,ie.hl)())return Tn.warn(tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(b){return Tn.warn(tr.create("indexeddb-unavailable",{errorInfo:null===(D=b)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function So(){return(So=(0,O.Z)(function*(D,b,x,F,K,ee,Ee){var Me;const et=Rn(D);et.then(lr=>{x[lr.measurementId]=lr.appId,D.options.measurementId&&lr.measurementId!==D.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${lr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(lr=>Tn.error(lr)),b.push(et);const mt=Qi().then(lr=>{if(lr)return F.getId()}),[bt,dt]=yield Promise.all([et,mt]);od(ee)||vu(ee,bt.measurementId),Ia&&(K("consent","default",Ia),Qs(void 0)),K("js",new Date);const In=null!==(Me=Ee?.config)&&void 0!==Me?Me:{};return In.origin="firebase",In.update=!0,null!=dt&&(In[id]=dt),K("config",bt.measurementId,In),Is&&(K("set",Is),Hc(void 0)),bt.measurementId})).apply(this,arguments)}class bu{constructor(b){this.app=b}_delete(){return delete $r[this.app.options.appId],Promise.resolve()}}let $r={},Ds=[];const xo={};let Ro,Js,Mo="dataLayer",Ea=!1;function py(D,b,x){!function zp(){const D=[];if((0,ie.ru)()&&D.push("This is a browser extension environment."),(0,ie.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,K)=>`(${K+1}) ${F}`).join(" "),x=tr.create("invalid-analytics-context",{errorInfo:b});Tn.warn(x.message)}}();const F=D.options.appId;if(!F)throw tr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw tr.create("no-api-key");Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$r[F])throw tr.create("already-exists",{id:F});if(!Ea){!function sd(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Mo);const{wrappedGtag:ee,gtagCore:Ee}=function pa(D,b,x,F,K){let ee=function(...Ee){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ee=window[K]),window[K]=function _u(D,b,x,F){function ee(){return(ee=(0,O.Z)(function*(Ee,Me,et){try{"event"===Ee?yield bo(D,b,x,Me,et):"config"===Ee?yield Yh(D,b,x,F,Me,et):"consent"===Ee?D("consent","update",et):D("set",Me)}catch(mt){Tn.error(mt)}})).apply(this,arguments)}return function K(Ee,Me,et){return ee.apply(this,arguments)}}(ee,D,b,x),{gtagCore:ee,wrappedGtag:window[K]}}($r,Ds,xo,Mo,"gtag");Js=ee,Ro=Ee,Ea=!0}return $r[F]=function Ao(D,b,x,F,K,ee,Ee){return So.apply(this,arguments)}(D,Ds,xo,b,Ro,Mo,x),new bu(D)}function my(){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const ot="@firebase/analytics";!function wn(){(0,se._registerComponent)(new le.wA(Do,(b,{options:x})=>py(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new le.wA("analytics-internal",function D(b){try{const x=b.getProvider(Do).getImmediate();return{logEvent:(F,K,ee)=>function cn(D,b,x,F){D=(0,ie.m9)(D),function cd(D,b,x,F,K){return Es.apply(this,arguments)}(Js,$r[D.app.options.appId],b,x,F).catch(K=>Tn.error(K))}(x,F,K,ee)}}catch(x){throw tr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(ot,"0.8.4"),(0,se.registerVersion)(ot,"0.8.4","esm2017")}();var _i=P(4408),Mr=P(7565);const Au=new class Cs extends Mr.v{}(class Da extends _i.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):(b.flush(this),0)}});var zc=P(4986),Ca=P(8505),No=P(9468),bs=P(5363);const at=new g.GfV("7.5.0"),ba="__angularfire_symbol__analyticsIsSupportedValue",Ts="__angularfire_symbol__analyticsIsSupported",Ta="__angularfire_symbol__remoteConfigIsSupportedValue",Oo="__angularfire_symbol__remoteConfigIsSupported",qn="__angularfire_symbol__messagingIsSupportedValue",Wc="__angularfire_symbol__messagingIsSupported";function Aa(D,b,x){if(b){if(1===b.length)return b[0];const ee=b.filter(Ee=>Ee.app===x);if(1===ee.length)return ee[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Ts]||(globalThis[Ts]=my().then(D=>globalThis[ba]=D).catch(()=>globalThis[ba]=!1)),globalThis[Wc]||(globalThis[Wc]=td().then(D=>globalThis[qn]=D).catch(()=>globalThis[qn]=!1)),globalThis[Oo]||(globalThis[Oo]=Qa().then(D=>globalThis[Ta]=D).catch(()=>globalThis[Ta]=!1));const As=(D,b)=>{const x=b?[b]:(0,X.C6)(),F=[];return x.forEach(K=>{K.container.getProvider(D).instances.forEach(Ee=>{F.includes(Ee)||F.push(Ee)})}),F};function Ss(){}class wi{constructor(b,x=Au){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const K=this.zone;return this.delegate.schedule(function(Ee){K.runGuarded(()=>{b.apply(this,[Ee])})},x,F)}}class Kc{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ss,{},Ss,Ss)),x.pipe((0,Ca.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Po=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new wi(Zone.current)),this.insideAngular=x.run(()=>new wi(Zone.current,zc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Hr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Xi(D){return Hr(),function Vn(D){return function(x){return(x=x.lift(new Kc(D.ngZone))).pipe((0,No.R)(D.outsideAngular),(0,bs.Q)(D.insideAngular))}}(Hr())(D)}},2090:(ut,be,P)=>{P.d(be,{$s:()=>Qe,BH:()=>Ut,G6:()=>Ie,L:()=>de,LL:()=>Wt,Pz:()=>Kt,Sg:()=>qe,UG:()=>we,US:()=>le,ZB:()=>B,ZR:()=>mn,aH:()=>ct,b$:()=>fe,eu:()=>je,hl:()=>Be,jU:()=>Xe,m9:()=>Nt,ne:()=>kn,pd:()=>Ai,r3:()=>pi,ru:()=>ge,tV:()=>he,uI:()=>Se,vZ:()=>Ke,w1:()=>rt,xO:()=>$n,xb:()=>Xr,z$:()=>Le,zI:()=>V,zd:()=>ei});const se=function(j){const L=[];let W=0;for(let _e=0;_e<j.length;_e++){let Z=j.charCodeAt(_e);Z<128?L[W++]=Z:Z<2048?(L[W++]=Z>>6|192,L[W++]=63&Z|128):55296==(64512&Z)&&_e+1<j.length&&56320==(64512&j.charCodeAt(_e+1))?(Z=65536+((1023&Z)<<10)+(1023&j.charCodeAt(++_e)),L[W++]=Z>>18|240,L[W++]=Z>>12&63|128,L[W++]=Z>>6&63|128,L[W++]=63&Z|128):(L[W++]=Z>>12|224,L[W++]=Z>>6&63|128,L[W++]=63&Z|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,L){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let Z=0;Z<j.length;Z+=3){const Ge=j[Z],lt=Z+1<j.length,qt=lt?j[Z+1]:0,ln=Z+2<j.length,Gt=ln?j[Z+2]:0;let Ft=(15&qt)<<2|Gt>>6,Xn=63&Gt;ln||(Xn=64,lt||(Ft=64)),_e.push(W[Ge>>2],W[(3&Ge)<<4|qt>>4],W[Ft],W[Xn])}return _e.join("")},encodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(j):this.encodeByteArray(se(j),L)},decodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(j):function(j){const L=[];let W=0,_e=0;for(;W<j.length;){const Z=j[W++];if(Z<128)L[_e++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const Ge=j[W++];L[_e++]=String.fromCharCode((31&Z)<<6|63&Ge)}else if(Z>239&&Z<365){const ln=((7&Z)<<18|(63&j[W++])<<12|(63&j[W++])<<6|63&j[W++])-65536;L[_e++]=String.fromCharCode(55296+(ln>>10)),L[_e++]=String.fromCharCode(56320+(1023&ln))}else{const Ge=j[W++],lt=j[W++];L[_e++]=String.fromCharCode((15&Z)<<12|(63&Ge)<<6|63&lt)}}return L.join("")}(this.decodeStringToByteArray(j,L))},decodeStringToByteArray(j,L){this.init_();const W=L?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let Z=0;Z<j.length;){const Ge=W[j.charAt(Z++)],qt=Z<j.length?W[j.charAt(Z)]:0;++Z;const Gt=Z<j.length?W[j.charAt(Z)]:64;++Z;const $e=Z<j.length?W[j.charAt(Z)]:64;if(++Z,null==Ge||null==qt||null==Gt||null==$e)throw Error();_e.push(Ge<<2|qt>>4),64!==Gt&&(_e.push(qt<<4&240|Gt>>2),64!==$e&&_e.push(Gt<<6&192|$e))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},de=function(j){return function(j){const L=se(j);return le.encodeByteArray(L,!0)}(j).replace(/\./g,"")},he=function(j){try{return le.decodeString(j,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function B(j,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return L}for(const W in L)!L.hasOwnProperty(W)||!q(W)||(j[W]=B(j[W],L[W]));return j}function q(j){return"__proto__"!==j}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xe(){return"object"==typeof self&&self.self===self}function ge(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ie(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){return"object"==typeof indexedDB}function je(){return new Promise((j,L)=>{try{let W=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(_e);Z.onsuccess=()=>{Z.result.close(),W||self.indexedDB.deleteDatabase(_e),j(!0)},Z.onupgradeneeded=()=>{W=!1},Z.onerror=()=>{var Ge;L((null===(Ge=Z.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(W){L(W)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=j&&he(j[1]);return L&&JSON.parse(L)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},ct=()=>{var j;return null===(j=te())||void 0===j?void 0:j.config},Kt=j=>{var L;return null===(L=te())||void 0===L?void 0:L[`_${j}`]};class Ut{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,W)=>{this.resolve=L,this.reject=W})}wrapCallback(L){return(W,_e)=>{W?this.reject(W):this.resolve(_e),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(W):L(W,_e))}}}function qe(j,L){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=L||"demo-project",Z=j.iat||0,Ge=j.sub||j.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const lt=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:Z,exp:Z+3600,auth_time:Z,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},j);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(lt)),""].join(".")}class mn extends Error{constructor(L,W,_e){super(W),this.code=L,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wt.prototype.create)}}class Wt{constructor(L,W,_e){this.service=L,this.serviceName=W,this.errors=_e}create(L,...W){const _e=W[0]||{},Z=`${this.service}/${L}`,Ge=this.errors[L],lt=Ge?function Zt(j,L){return j.replace(Tr,(W,_e)=>{const Z=L[_e];return null!=Z?String(Z):`<${_e}?>`})}(Ge,_e):"Error";return new mn(Z,`${this.serviceName}: ${lt} (${Z}).`,_e)}}const Tr=/\{\$([^}]+)}/g;function pi(j,L){return Object.prototype.hasOwnProperty.call(j,L)}function Xr(j){for(const L in j)if(Object.prototype.hasOwnProperty.call(j,L))return!1;return!0}function Ke(j,L){if(j===L)return!0;const W=Object.keys(j),_e=Object.keys(L);for(const Z of W){if(!_e.includes(Z))return!1;const Ge=j[Z],lt=L[Z];if(mr(Ge)&&mr(lt)){if(!Ke(Ge,lt))return!1}else if(Ge!==lt)return!1}for(const Z of _e)if(!W.includes(Z))return!1;return!0}function mr(j){return null!==j&&"object"==typeof j}function $n(j){const L=[];for(const[W,_e]of Object.entries(j))Array.isArray(_e)?_e.forEach(Z=>{L.push(encodeURIComponent(W)+"="+encodeURIComponent(Z))}):L.push(encodeURIComponent(W)+"="+encodeURIComponent(_e));return L.length?"&"+L.join("&"):""}function ei(j){const L={};return j.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[Z,Ge]=_e.split("=");L[decodeURIComponent(Z)]=decodeURIComponent(Ge)}}),L}function Ai(j){const L=j.indexOf("?");if(!L)return"";const W=j.indexOf("#",L);return j.substring(L,W>0?W:void 0)}function kn(j,L){const W=new hn(j,L);return W.subscribe.bind(W)}class hn{constructor(L,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{L(this)}).catch(_e=>{this.error(_e)})}next(L){this.forEachObserver(W=>{W.next(L)})}error(L){this.forEachObserver(W=>{W.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,W,_e){let Z;if(void 0===L&&void 0===W&&void 0===_e)throw new Error("Missing Observer.");Z=function st(j,L){if("object"!=typeof j||null===j)return!1;for(const W of L)if(W in j&&"function"==typeof j[W])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:W,complete:_e},void 0===Z.next&&(Z.next=tn),void 0===Z.error&&(Z.error=tn),void 0===Z.complete&&(Z.complete=tn);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),Ge}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,L)}sendOne(L,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{W(this.observers[L])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}function Qe(j,L=1e3,W=2){const _e=L*Math.pow(W,j),Z=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+Z)}function Nt(j){return j&&j._delegate?j._delegate:j}},4825:(ut,be,P)=>{var g=P(4650);let X=null;function O(){return X}const ue=new g.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function he(){return(0,g.LFG)(B)}()},providedIn:"platform"}),n})();const U=new g.OlP("Location Initialized");let B=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Le(){return new B((0,g.LFG)(ue))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Ye)},providedIn:"root"}),n})();const fe=new g.OlP("appBaseHref");let Ye=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Xe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Xe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Xe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rt=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Be(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xe(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=Se,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(g.LFG(ge))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return new Ae((0,g.LFG)(ge))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}let sn=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class ra{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bs=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new ra(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),ms(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ms(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ms(n,e){n.context.$implicit=e.item}let oa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function cr(n){return"server"===n}let Xa=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new qh((0,g.LFG)(ue),window)}),n})();class qh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function vr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ni(this.window.history)||ni(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ni(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Gs extends class ed extends class le{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){X||(X=n)}(new Gs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function fu(){return zs=zs||document.querySelector("base"),zs?zs.getAttribute("href"):null}();return null==t?null:function jr(n){Wn=Wn||document.createElement("a"),Wn.setAttribute("href",n);const e=Wn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Za(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Wn,zs=null;const fn=new g.OlP("TRANSITION_ID"),Vc=[{provide:g.ip1,useFactory:function td(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[fn,ue,g.zs3],multi:!0}];let Uc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const pu=new g.OlP("EventManagerPlugins");let nd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pu),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class gu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ws=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Eo=(()=>{class n extends Ws{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(rd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(rd))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function rd(n){O().remove(n)}const Do={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},id=/%COMP%/g;function vu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?vu(n,o,t):(o=o.replace(id,n),t.push(o))}return t}function sd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Co=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new bo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new od(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new ad(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=vu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(nd),g.LFG(Eo),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class bo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Do[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(pa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(pa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Do[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Do[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,sd(r)):this.eventManager.addEventListener(e,t,sd(r))}}function pa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class od extends bo{constructor(e,t,r,o){super(e),this.component=r;const u=vu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Tn(n){return"_ngcontent-%COMP%".replace(id,n)}(o+"-"+r.id),this.hostAttr=function yu(n){return"_nghost-%COMP%".replace(id,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ad extends bo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=vu(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let tr=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ga=["alt","control","meta","shift"],ma={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ni={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ya=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),ga.forEach(C=>{const S=r.indexOf(C);S>-1&&(r.splice(S,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=ma[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ga.forEach(d=>{d!==o&&(0,Ni[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Eu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function wu(){Gs.makeCurrent()},multi:!0},{provide:ue,useFactory:function _a(){return(0,g.RDi)(document),document},deps:[]}]),Is=new g.OlP(""),cd=[{provide:g.rWj,useClass:class Zh{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Es=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Zs(){return new g.qLn},deps:[]},{provide:pu,useClass:tr,multi:!0,deps:[ue,g.R0b,g.Lbi]},{provide:pu,useClass:ya,multi:!0,deps:[ue]},{provide:Co,useClass:Co,deps:[nd,Eo,g.AFp]},{provide:g.FYo,useExisting:Co},{provide:Ws,useExisting:Eo},{provide:Eo,useClass:Eo,deps:[ue]},{provide:nd,useClass:nd,deps:[pu,g.R0b]},{provide:class wo{},useClass:Uc,deps:[]},[]];let jc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:fn,useExisting:g.AFp},Vc]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Is,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Es,...cd],imports:[oa,g.hGG]}),n})(),Yi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function To(){return new Yi((0,g.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var cn=P(8996),vi=P(7669);function ot(...n){const e=(0,vi.yG)(n);return(0,cn.D)(n,e)}var ii=P(7579);class wn extends ii.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Da=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Mr=P(9751);const{isArray:Cs}=Array,{getPrototypeOf:Au,prototype:qp,keys:zc}=Object;function Ca(n){if(1===n.length){const e=n[0];if(Cs(e))return{args:e,keys:null};if(function No(n){return n&&"object"==typeof n&&Au(n)===qp}(e)){const t=zc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var bs=P(4671),at=P(4004);const{isArray:ba}=Array;function Ta(n){return(0,at.U)(e=>function Ts(n,e){return ba(e)?n(...e):n(e)}(n,e))}function Oo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var qn=P(5403),Wc=P(9672);function ko(...n){const e=(0,vi.yG)(n),t=(0,vi.jO)(n),{args:r,keys:o}=Ca(n);if(0===r.length)return(0,cn.D)([],e);const u=new Mr.y(function Kp(n,e,t=bs.y){return r=>{qc(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)qc(e,()=>{const C=(0,cn.D)(n[w],e);let S=!1;C.subscribe((0,qn.x)(r,N=>{u[w]=N,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>Oo(o,d):bs.y));return t?u.pipe(Ta(t)):u}function qc(n,e,t){n?(0,Wc.f)(t,n,e):e()}var Su=P(8189);function As(...n){return function Aa(){return(0,Su.J)(1)}()((0,cn.D)(n,(0,vi.yG)(n)))}var Ss=P(8421);function wi(n){return new Mr.y(e=>{(0,Ss.Xf)(n()).subscribe(e)})}var Kc=P(9635),Po=P(576);function Hr(n,e){const t=(0,Po.m)(n)?n:()=>n,r=o=>o.error(t());return new Mr.y(e?o=>e.schedule(r,0,o):r)}var Ji=P(515),Oi=P(727),_r=P(4482);function xs(){return(0,_r.e)((n,e)=>{let t=null;n._refCount++;const r=(0,qn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Xi extends Mr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_r.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,qn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oi.w0.EMPTY)}return e}refCount(){return xs()(this)}}function Vn(n,e){return(0,_r.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,qn.x)(r,w=>{o?.unsubscribe();let C=0;const S=u++;(0,Ss.Xf)(n(w,S)).subscribe(o=(0,qn.x)(r,N=>r.next(e?e(w,N,S,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}function vn(n){return n<=0?()=>Ji.E:(0,_r.e)((e,t)=>{let r=0;e.subscribe((0,qn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function xu(...n){const e=(0,vi.yG)(n);return(0,_r.e)((t,r)=>{(e?As(n,t,e):As(n,t)).subscribe(r)})}function D(n,e){return(0,_r.e)((t,r)=>{let o=0;t.subscribe((0,qn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var b=P(5577);function x(n){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,qn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function F(n=K){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,qn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function K(){return new Da}function ee(n,e){const t=arguments.length>=2;return r=>r.pipe(n?D((o,u)=>n(o,u,r)):bs.y,vn(1),t?x(e):F(()=>new Da))}function Ee(n,e){return(0,Po.m)(e)?(0,b.z)(n,e,1):(0,b.z)(n,1)}var Me=P(8505);function et(n){return(0,_r.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,qn.x)(t,void 0,void 0,d=>{u=(0,Ss.Xf)(n(d,et(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function mt(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,qn.x)(d,S=>{const N=C++;w=m?n(w,S,N):(m=!0,S),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function bt(n,e){return(0,_r.e)(mt(n,e,arguments.length>=2,!0))}function dt(n){return n<=0?()=>Ji.E:(0,_r.e)((e,t)=>{let r=[];e.subscribe((0,qn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function In(n,e){const t=arguments.length>=2;return r=>r.pipe(n?D((o,u)=>n(o,u,r)):bs.y,dt(1),t?x(e):F(()=>new Da))}function Ms(n){return(0,_r.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Tt="primary",ki=Symbol("RouteTitle");class Rs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function si(n){return new Rs(n)}function Lo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Ii(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Jh(n[o],e[o]))return!1;return!0}function Jh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Zp(n){return Array.prototype.concat.apply([],n)}function Yp(n){return n.length>0?n[n.length-1]:null}function Kn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Pi(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,cn.D)(Promise.resolve(n)):ot(n)}const bw={exact:function Jp(n,e,t){if(!Nu(n.segments,e.segments)||!Mu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Jp(n.children[r],e.children[r],t))return!1;return!0},subset:nf},ef={exact:function Iy(n,e){return Ii(n,e)},subset:function tf(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Jh(n[t],e[t]))},ignored:()=>!0};function wy(n,e,t){return bw[t.paths](n.root,e.root,t.matrixParams)&&ef[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function nf(n,e,t){return Ey(n,e,e.segments,t)}function Ey(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Nu(o,t)||e.hasChildren()||!Mu(o,t,r))}if(n.segments.length===t.length){if(!Nu(n.segments,t)||!Mu(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!nf(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Nu(n.segments,o)&&Mu(n.segments,o,r)&&n.children[Tt])&&Ey(n.children[Tt],e,u,r)}}function Mu(n,e,t){return e.every((r,o)=>ef[t](n[o].parameters,r.parameters))}class Ru{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=si(this.queryParams)),this._queryParamMap}toString(){return hd.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Kn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yc(this)}}class dd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=si(this.parameters)),this._parameterMap}toString(){return sf(this)}}function Nu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let rf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new Zc},providedIn:"root"}),n})();class Zc{parse(e){const t=new eo(e);return new Ru(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vo(e.root,!0)}`,r=function Ay(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Qc(t)}=${Qc(o)}`).join("&"):`${Qc(t)}=${Qc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function by(n){return encodeURI(n)}(e.fragment)}`:""}`}}const hd=new Zc;function Yc(n){return n.segments.map(e=>sf(e)).join("/")}function Vo(n,e){if(!n.hasChildren())return Yc(n);if(e){const t=n.children[Tt]?Vo(n.children[Tt],!1):"",r=[];return Kn(n.children,(o,u)=>{u!==Tt&&r.push(`${u}:${Vo(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Cy(n,e){let t=[];return Kn(n.children,(r,o)=>{o===Tt&&(t=t.concat(e(r,o)))}),Kn(n.children,(r,o)=>{o!==Tt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Tt?[Vo(n.children[Tt],!1)]:[`${o}:${Vo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Tt]?`${Yc(n)}/${t[0]}`:`${Yc(n)}/(${t.join("//")})`}}function es(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qc(n){return es(n).replace(/%3B/gi,";")}function Jc(n){return es(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xc(n){return decodeURIComponent(n)}function el(n){return Xc(n.replace(/\+/g,"%20"))}function sf(n){return`${Jc(n.path)}${function Ty(n){return Object.keys(n).map(e=>`;${Jc(e)}=${Jc(n[e])}`).join("")}(n.parameters)}`}const Xp=/^[^\/()?;=#]+/;function fd(n){const e=n.match(Xp);return e?e[0]:""}const Sy=/^[^=?&#]+/,af=/^[^&#]+/;class eo{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new $t(e,t)),r}parseSegment(){const e=fd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new dd(Xc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=fd(this.remaining);o&&(r=o,this.capture(r))}e[Xc(t)]=Xc(r)}parseQueryParam(e){const t=function Rr(n){const e=n.match(Sy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function xy(n){const e=n.match(af);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=el(t),u=el(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fd(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Tt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Tt]:new $t([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function dr(n){return n.segments.length>0?new $t([],{[Tt]:n}):n}function Uo(n){const e={};for(const r of Object.keys(n.children)){const u=Uo(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function pd(n){if(1===n.numberOfChildren&&n.children[Tt]){const e=n.children[Tt];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function Sa(n){return n instanceof Ru}function Ny(n,e,t,r,o){if(0===t.length)return ku(e.root,e.root,e.root,r,o);const u=function eg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yd(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Kn(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new yd(t,e,r)}(t);return u.toRoot()?ku(e.root,e.root,new $t([],{}),r,o):function d(w){const C=function Ra(n,e,t,r){if(n.isAbsolute)return new Ma(e.root,!0,0);if(-1===r)return new Ma(t,t===e.root,0);return function ng(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new Ma(r,!1,o-u)}(t,r+(Ou(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=C.processChildren?to(C.segmentGroup,C.index,u.commands):Na(C.segmentGroup,C.index,u.commands);return ku(e.root,C.segmentGroup,S,r,o)}(n.snapshot?._lastPathIndex)}function Ou(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function xa(n){return"object"==typeof n&&null!=n&&n.outlets}function ku(n,e,t,r,o){let d,u={};r&&Kn(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),d=n===e?t:md(n,e,t);const m=dr(Uo(d));return new Ru(m,u,o)}function md(n,e,t){const r={};return Kn(n.children,(o,u)=>{r[u]=o===e?t:md(o,e,t)}),new $t(n.segments,r)}class yd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ou(r[0]))throw new g.vHH(4003,!1);const o=r.find(xa);if(o&&o!==Yp(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ma{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Na(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return to(n,e,t);const r=function rg(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(xa(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!uf(w,C,d))return u;r+=2}else{if(!uf(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new $t(n.segments.slice(0,r.pathIndex),{});return u.children[Tt]=new $t(n.segments.slice(r.pathIndex),n.children),to(u,0,o)}return r.match&&0===o.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?ig(n,e,t):r.match?to(n,0,o):ig(n,e,t)}function to(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function Oy(n){return xa(n[0])?n[0].outlets:{[Tt]:n}}(t),o={};return Kn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Na(n.children[d],e,u))}),Kn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new $t(n.segments,o)}}function ig(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(xa(u)){const w=no(u.outlets);return new $t(r,w)}if(0===o&&Ou(t[0])){r.push(new dd(n.segments[e].path,vd(t[0]))),o++;continue}const d=xa(u)?u.outlets[Tt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Ou(m)?(r.push(new dd(d,vd(m))),o+=2):(r.push(new dd(d,{})),o++)}return new $t(r,{})}function no(n){const e={};return Kn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ig(new $t([],{}),0,t))}),e}function vd(n){const e={};return Kn(n,(t,r)=>e[r]=`${t}`),e}function uf(n,e,t){return n==t.path&&Ii(e,t.parameters)}class ro{constructor(e,t){this.id=e,this.url=t}}class Pu extends ro{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oa extends ro{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _d extends ro{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class sg extends ro{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ky extends ro{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nl extends ro{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Py extends ro{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cf extends ro{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lf extends ro{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class og{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class df{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fy{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ag{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wd{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Id{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class io{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rl{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=hf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=hf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=oi(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return oi(e,this._root).map(t=>t.value)}}function hf(n,e){if(n===e.value)return e;for(const t of e.children){const r=hf(n,t);if(r)return r}return null}function oi(n,e){if(n===e.value)return[e];for(const t of e.children){const r=oi(n,t);if(r.length)return r.unshift(e),r}return[]}class Nr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ka(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ff extends rl{constructor(e,t){super(e),this.snapshot=t,sl(this,e)}toString(){return this.snapshot.toString()}}function il(n,e){const t=function Ed(n,e){const d=new ai([],{},{},"",{},Tt,e,null,n.root,-1,{});return new bd("",new Nr(d,[]))}(n,e),r=new wn([new dd("",{})]),o=new wn({}),u=new wn({}),d=new wn({}),m=new wn(""),w=new so(r,o,d,m,u,Tt,e,t.root);return w.snapshot=t.root,new ff(new Nr(w,[]),t)}class so{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,at.U)(C=>C[ki]))??ot(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>si(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>si(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dd(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Cd(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ai{constructor(e,t,r,o,u,d,m,w,C,S,N,$){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[ki],this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=S,this._correctedLastPathIndex=$??S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=si(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=si(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bd extends rl{constructor(e,t){super(t),this.url=e,sl(this,t)}toString(){return Td(this._root)}}function sl(n,e){e.value._routerState=n,e.children.forEach(t=>sl(n,t))}function Td(n){const e=n.children.length>0?` { ${n.children.map(Td).join(", ")} } `:"";return`${n.value}${e}`}function ol(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ii(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ii(e.params,t.params)||n.params.next(t.params),function Xs(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ii(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ii(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Bo(n,e){const t=Ii(n.params,e.params)&&function Dy(n,e){return Nu(n,e)&&n.every((t,r)=>Ii(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Bo(n.parent,e.parent))}function jo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function pf(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return jo(n,r,o);return jo(n,r)})}(n,e,t);return new Nr(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>jo(n,m)),d}}const r=function Ly(n){return new so(new wn(n.url),new wn(n.params),new wn(n.queryParams),new wn(n.fragment),new wn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>jo(n,u));return new Nr(r,o)}}const Fi="ngNavigationCancelingError";function $o(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Sa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Fu(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Fu(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Fi]=!0,r.cancellationCode=e,t&&(r.url=t),r}function al(n){return Ho(n)&&Sa(n.url)}function Ho(n){return n&&n[Fi]}class gf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ul,this.attachRef=null}}let ul=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new gf,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mf=!1;let yf=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=o||Tt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,mf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,mf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,mf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,mf);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new vf(t,m,o.injector);if(r&&function y(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ul),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class vf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===so?this.route:e===ul?this.childContexts:this.parent.get(e,t)}}let h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[yf],encapsulation:2}),n})();function p(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ht(n){const e=n.children&&n.children.map(ht),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=h),t}function on(n){return n.outlet||Tt}function rr(n,e){const t=n.filter(r=>on(r)===e);return t.push(...n.filter(r=>on(r)!==e)),t}function Li(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class lg{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ol(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ka(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Kn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ka(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ka(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ka(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Id(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ag(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(ol(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),ol(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=Li(o.snapshot),w=m?.get(g._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class dg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ad{constructor(e,t){this.component=e,this.route=t}}function hg(n,e,t){const r=n._root;return Pa(r,e?e._root:null,t,[r.value])}function Go(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function Pa(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ka(e);return n.children.forEach(d=>{(function fg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function Uy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Nu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Nu(n.url,e.url)||!Ii(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bo(n,e)||!Ii(n.queryParams,e.queryParams);default:return!Bo(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new dg(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Pa(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Ad(m.outlet.component,d))}else d&&Fa(e,m,o),o.canActivateChecks.push(new dg(r)),Pa(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Kn(u,(d,m)=>Fa(d,t.getContext(m),o)),o}function Fa(n,e,t){const r=ka(n),o=n.value;Kn(r,(u,d)=>{Fa(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Ad(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function La(n){return"function"==typeof n}function wf(n){return n instanceof Da||"EmptyError"===n?.name}const Sd=Symbol("INITIAL_VALUE");function If(){return Vn(n=>ko(n.map(e=>e.pipe(vn(1),xu(Sd)))).pipe((0,at.U)(e=>{for(const t of e)if(!0!==t){if(t===Sd)return Sd;if(!1===t||t instanceof Ru)return t}return!0}),D(e=>e!==Sd),vn(1)))}function gg(n){return(0,Kc.z)((0,Me.b)(e=>{if(Sa(e))throw $o(0,e)}),(0,at.U)(e=>!0===e))}const Zn={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Rw(n,e,t,r,o){const u=By(n,e,t);return u.matched?function uD(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?ot(o.map(d=>{const m=Go(d,n);return Pi(function VA(n){return n&&La(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(If(),gg()):ot(!0)}(r=p(e,r),e,t).pipe((0,at.U)(d=>!0===d?u:{...Zn})):ot(u)}function By(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Zn}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Lo)(t,n,e);if(!o)return{...Zn};const u={};Kn(o.posParams,(m,w)=>{u[w]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function xd(n,e,t,r,o="corrected"){if(t.length>0&&function lD(n,e,t){return t.some(r=>mg(n,e,r)&&on(r)!==Tt)}(n,t,r)){const d=new $t(e,function cD(n,e,t,r){const o={};o[Tt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&on(u)!==Tt){const d=new $t([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[on(u)]=d}return o}(n,e,r,new $t(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function dD(n,e,t){return t.some(r=>mg(n,e,r))}(n,t,r)){const d=new $t(n.segments,function Nw(n,e,t,r,o,u){const d={};for(const m of r)if(mg(n,t,m)&&!o[on(m)]){const w=new $t([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[on(m)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new $t(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function mg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ow(n,e,t,r){return!!(on(n)===r||r!==Tt&&mg(e,t,n))&&("**"===n.path||By(e,n,t).matched)}function hD(n,e,t){return 0===e.length&&!n.children[t]}const jy=!1;class Lu{constructor(e){this.segmentGroup=e||null}}class yg{constructor(e){this.urlTree=e}}function Md(n){return Hr(new Lu(n))}function $y(n){return Hr(new yg(n))}class Fw{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=xd(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Tt).pipe((0,at.U)(u=>this.createUrlTree(Uo(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(et(u=>{if(u instanceof yg)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Lu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Tt).pipe((0,at.U)(o=>this.createUrlTree(Uo(o),e.queryParams,e.fragment))).pipe(et(o=>{throw o instanceof Lu?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,jy)}createUrlTree(e,t,r){const o=dr(e);return new Ru(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,at.U)(u=>new $t([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,cn.D)(o).pipe(Ee(u=>{const d=r.children[u],m=rr(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,at.U)(w=>({segment:w,outlet:u})))}),bt((u,d)=>(u[d.outlet]=d.segment,u),{}),In())}expandSegment(e,t,r,o,u,d){return(0,cn.D)(r).pipe(Ee(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(et(C=>{if(C instanceof Lu)return ot(null);throw C}))),ee(m=>!!m),et((m,w)=>{if(wf(m))return hD(t,o,u)?ot(new $t([],{})):Md(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Ow(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Md(t):Md(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$y(u):this.lineralizeSegments(r,u).pipe((0,b.z)(d=>{const m=new $t(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:S}=By(t,o,u);if(!m)return Md(t);const N=this.applyRedirectCommands(w,o.redirectTo,S);return o.redirectTo.startsWith("/")?$y(N):this.lineralizeSegments(o,N).pipe((0,b.z)($=>this.expandSegment(e,t,r,$.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=p(r,e),r.loadChildren?(r._loadedRoutes?ot({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,at.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new $t(o,{})))):ot(new $t(o,{}))):Rw(t,r,o,e).pipe(Vn(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,b.z)(S=>{const N=S.injector??e,$=S.routes,{segmentGroup:Y,slicedSegments:ae}=xd(t,m,w,$),Re=new $t(Y.segments,Y.children);if(0===ae.length&&Re.hasChildren())return this.expandChildren(N,$,Re).pipe((0,at.U)(Lt=>new $t(m,Lt)));if(0===$.length&&0===ae.length)return ot(new $t(m,{}));const Ne=on(r)===u;return this.expandSegment(N,Re,$,ae,Ne?Tt:u,!0).pipe((0,at.U)(kt=>new $t(m.concat(kt.segments),kt.children)))})):Md(t)))}getChildConfig(e,t,r){return t.children?ot({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ot({routes:t._loadedRoutes,injector:t._loadedInjector}):function aD(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?ot(!0):ot(o.map(d=>{const m=Go(d,n);return Pi(function _f(n){return n&&La(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(If(),gg())}(e,t,r).pipe((0,b.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Me.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function fD(n){return Hr(Fu(jy,3))}())):ot({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ot(r);if(o.numberOfChildren>1||!o.children[Tt])return Hr(new g.vHH(4e3,jy));o=o.children[Tt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Ru(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Kn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Kn(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new $t(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,jy);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class pD{}class Vw{constructor(e,t,r,o,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=xd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tt).pipe((0,at.U)(t=>{if(null===t)return null;const r=new ai([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Nr(r,t),u=new bd(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Dd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,cn.D)(Object.keys(r.children)).pipe(Ee(o=>{const u=r.children[o],d=rr(t,o);return this.processSegmentGroup(e,d,u,o)}),bt((o,u)=>o&&u?(o.push(...u),o):null),function lr(n,e=!1){return(0,_r.e)((t,r)=>{let o=0;t.subscribe((0,qn.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),x(null),In(),(0,at.U)(o=>{if(null===o)return null;const u=Ef(o);return function cl(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,cn.D)(t).pipe(Ee(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),ee(d=>!!d),et(d=>{if(wf(d))return hD(r,o,u)?ot([]):ot(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Ow(t,r,o,u))return ot(null);let d;if("**"===t.path){const m=o.length>0?Yp(o).parameters:{},w=Df(r)+o.length;d=ot({snapshot:new ai(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qy(t),on(t),t.component??t._loadedComponent??null,t,vg(r),w,_g(t),w),consumedSegments:[],remainingSegments:[]})}else d=Rw(r,t,o,e).pipe((0,at.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:S})=>{if(!m)return null;const N=Df(r)+w.length;return{snapshot:new ai(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qy(t),on(t),t.component??t._loadedComponent??null,t,vg(r),N,_g(t),N),consumedSegments:w,remainingSegments:C}}));return d.pipe(Vn(m=>{if(null===m)return ot(null);const{snapshot:w,consumedSegments:C,remainingSegments:S}=m;e=t._injector??e;const N=t._loadedInjector??e,$=function gD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Y,slicedSegments:ae}=xd(r,C,S,$.filter(Ne=>void 0===Ne.redirectTo),this.relativeLinkResolution);if(0===ae.length&&Y.hasChildren())return this.processChildren(N,$,Y).pipe((0,at.U)(Ne=>null===Ne?null:[new Nr(w,Ne)]));if(0===$.length&&0===ae.length)return ot([new Nr(w,[])]);const Re=on(t)===u;return this.processSegment(N,$,Y,ae,Re?Tt:u).pipe((0,at.U)(Ne=>null===Ne?null:[new Nr(w,Ne)]))}))}}function Wy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ef(n){const e=[],t=new Set;for(const r of n){if(!Wy(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Ef(r.children);e.push(new Nr(r.value,o))}return e.filter(r=>!t.has(r))}function vg(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Df(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function qy(n){return n.data||{}}function _g(n){return n.resolve||{}}function Bw(n){return"string"==typeof n.title||null===n.title}function Ky(n){return Vn(e=>{const t=n(e);return t?(0,cn.D)(t).pipe((0,at.U)(()=>e)):ot(e)})}let wg=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[ki]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(jw)},providedIn:"root"}),n})(),jw=(()=>{class n extends wg{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Yi))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ED{}class jA extends class $w{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Uu=new g.OlP("",{providedIn:"root",factory:()=>({})}),Bu=new g.OlP("ROUTES");let ll=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ot(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Pi(t.loadComponent()).pipe((0,Me.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Ms(()=>{this.componentLoaders.delete(t)})),o=new Xi(r,()=>new ii.x).pipe(xs());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ot({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,at.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,S=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=Zp(w.get(Bu,[],g.XFs.Self|g.XFs.Optional)));return{routes:C.map(ht),injector:w}}),Ms(()=>{this.childrenLoaders.delete(r)})),d=new Xi(u,()=>new ii.x).pipe(xs());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Pi(t()).pipe((0,b.z)(r=>r instanceof g.YKP||Array.isArray(r)?ot(r):(0,cn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class CD{}class $A{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function bD(n){throw n}function TD(n,e,t){return e.parse("/")}const AD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Gw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ig(){const n=(0,g.f3M)(rf),e=(0,g.f3M)(ul),t=(0,g.f3M)(Ae),r=(0,g.f3M)(g.zs3),o=(0,g.f3M)(g.Sil),u=(0,g.f3M)(Bu,{optional:!0})??[],d=(0,g.f3M)(Uu,{optional:!0})??{},m=(0,g.f3M)(jw),w=(0,g.f3M)(wg,{optional:!0}),C=(0,g.f3M)(CD,{optional:!0}),S=(0,g.f3M)(ED,{optional:!0}),N=new ir(null,n,e,t,r,o,Zp(u));return C&&(N.urlHandlingStrategy=C),S&&(N.routeReuseStrategy=S),N.titleStrategy=w??m,function zw(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N}let ir=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ii.x,this.errorHandler=bD,this.malformedUriErrorHandler=TD,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ot(void 0),this.urlHandlingStrategy=new $A,this.routeReuseStrategy=new jA,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(ll),this.configLoader.onLoadEndListener=$=>this.triggerEvent(new df($)),this.configLoader.onLoadStartListener=$=>this.triggerEvent(new og($)),this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Qp(){return new Ru(new $t([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=il(this.currentUrlTree,this.rootComponentType),this.transitions=new wn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(D(o=>0!==o.id),(0,at.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vn(o=>{let u=!1,d=!1;return ot(o).pipe((0,Me.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Vn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Eg(m.source)&&(this.browserUrlTree=m.extractedUrl),ot(m).pipe(Vn(N=>{const $=this.transitions.getValue();return r.next(new Pu(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),$!==this.transitions.getValue()?Ji.E:Promise.resolve(N)}),function Hy(n,e,t,r){return Vn(o=>function Pw(n,e,t,r,o){return new Fw(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,at.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Me.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},o.urlAfterRedirects=N.urlAfterRedirects}),function yD(n,e,t,r,o,u){return(0,b.z)(d=>function Lw(n,e,t,r,o,u,d="emptyOnly",m="legacy"){return new Vw(n,e,t,r,o,d,m,u).recognize().pipe(Vn(w=>null===w?function zy(n){return new Mr.y(e=>e.error(n))}(new pD):ot(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,at.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Me.b)(N=>{if(o.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Y,N)}this.browserUrlTree=N.urlAfterRedirects}const $=new ky(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next($)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:Y,source:ae,restoredState:Re,extras:Ne}=m,St=new Pu($,this.serializeUrl(Y),ae,Re);r.next(St);const kt=il(Y,this.rootComponentType).snapshot;return ot(o={...m,targetSnapshot:kt,urlAfterRedirects:Y,extras:{...Ne,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Ji.E}),(0,Me.b)(m=>{const w=new nl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,at.U)(m=>o={...m,guards:hg(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function BA(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?ot({...t,guardsResult:!0}):function xw(n,e,t,r){return(0,cn.D)(n).pipe((0,b.z)(o=>function pg(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ot(u.map(m=>{const w=Li(e)??o,C=Go(m,w);return Pi(function Sw(n){return n&&La(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(ee())})).pipe(If()):ot(!0)}(o.component,o.route,t,e,r)),ee(o=>!0!==o,!0))}(d,r,o,n).pipe((0,b.z)(m=>m&&function Va(n){return"boolean"==typeof n}(m)?function rD(n,e,t,r){return(0,cn.D)(e).pipe(Ee(o=>As(function sD(n,e){return null!==n&&e&&e(new Fy(n)),ot(!0)}(o.route.parent,r),function iD(n,e){return null!==n&&e&&e(new wd(n)),ot(!0)}(o.route,r),function Mw(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Vy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>wi(()=>ot(d.guards.map(w=>{const C=Li(d.node)??t,S=Go(w,C);return Pi(function Aw(n){return n&&La(n.canActivateChild)}(S)?S.canActivateChild(r,n):C.runInContext(()=>S(r,n))).pipe(ee())})).pipe(If())));return ot(u).pipe(If())}(n,o.path,t),function oD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ot(!0);const o=r.map(u=>wi(()=>{const d=Li(e)??t,m=Go(u,d);return Pi(function Tw(n){return n&&La(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(ee())}));return ot(o).pipe(If())}(n,o.route,t))),ee(o=>!0!==o,!0))}(r,u,n,e):ot(m)),(0,at.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Me.b)(m=>{if(o.guardsResult=m.guardsResult,Sa(m.guardsResult))throw $o(0,m.guardsResult);const w=new Py(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),D(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Ky(m=>{if(m.guards.canActivateChecks.length)return ot(m).pipe((0,Me.b)(w=>{const C=new cf(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Vn(w=>{let C=!1;return ot(w).pipe(function vD(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ot(t);let u=0;return(0,cn.D)(o).pipe(Ee(d=>function Uw(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!Bw(o)&&(u[ki]=o.title),function Rd(n,e,t,r){const o=function _D(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return ot({});const u={};return(0,cn.D)(o).pipe((0,b.z)(d=>function wD(n,e,t,r){const o=Li(e)??r,u=Go(n,o);return Pi(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(ee(),(0,Me.b)(m=>{u[d]=m}))),dt(1),function Fo(n){return(0,at.U)(()=>n)}(u),et(d=>wf(d)?Ji.E:Hr(d)))}(u,n,e,r).pipe((0,at.U)(d=>(n._resolvedData=d,n.data=Dd(n,t).resolve,o&&Bw(o)&&(n.data[ki]=o.title),null)))}(d.route,r,n,e)),(0,Me.b)(()=>u++),dt(1),(0,b.z)(d=>u===o.length?ot(t):Ji.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Me.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,Me.b)(w=>{const C=new lf(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),Ky(m=>{const w=C=>{const S=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,Me.b)(N=>{C.component=N}),(0,at.U)(()=>{})));for(const N of C.children)S.push(...w(N));return S};return ko(w(m.targetSnapshot.root)).pipe(x(),vn(1))}),Ky(()=>this.afterPreactivation()),(0,at.U)(m=>{const w=function ui(n,e,t){const r=jo(n,e._root,t?t._root:void 0);return new ff(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:w}}),(0,Me.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(r=>(new lg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Me.b)({next(){u=!0},complete(){u=!0}}),Ms(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),et(m=>{if(d=!0,Ho(m)){al(m)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new _d(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(w),al(m)){const C=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Eg(o.source)};this.scheduleNavigation(C,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new sg(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Ji.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(ht),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,S=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),Ny(C,this.currentUrlTree,t,N,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Sa(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function SD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...AD}:!1===r?{...Gw}:r,Sa(t))return wy(this.currentUrlTree,t,o);const u=this.parseUrl(t);return wy(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Oa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,C;d?(m=d.resolve,w=d.reject,C=d.promise):C=new Promise(($,Y)=>{m=$,w=Y});const S=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:S,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch($=>Promise.reject($))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new _d(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return Ig()},providedIn:"root"}),n})();function Eg(n){return"imperative"!==n}let bf=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ii.x,this.subscription=t.events.subscribe(u=>{u instanceof Oa&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,g.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,g.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,g.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){return!!(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ir),g.Y36(so),g.Y36(ge))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),n})();class Ww{}let ND=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(D(t=>t instanceof Oa),Ee(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,cn.D)(o).pipe((0,Su.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ot(null);const u=o.pipe((0,b.z)(d=>null===d?ot(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,cn.D)([u,d]).pipe((0,Su.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ir),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(Ww),g.LFG(ll))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ju=new g.OlP("");let zo=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Oa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof io&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new io(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Tf(n,e){return{\u0275kind:n,\u0275providers:e}}function Cg(n){return[{provide:Bu,multi:!0,useValue:n}]}function Zy(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(ir),o=n.get(kD);1===n.get(bg)&&r.initialNavigation(),n.get(Kw,null,g.XFs.Optional)?.setUpPreloading(),n.get(ju,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const kD=new g.OlP("",{factory:()=>new ii.x}),bg=new g.OlP("",{providedIn:"root",factory:()=>1});const Kw=new g.OlP("");function oo(n){return Tf(0,[{provide:Kw,useExisting:ND},{provide:Ww,useExisting:n}])}const Zw=new g.OlP("ROUTER_FORROOT_GUARD"),LD=[Ae,{provide:rf,useClass:Zc},{provide:ir,useFactory:Ig},ul,{provide:so,useFactory:function OD(n){return n.routerState.root},deps:[ir]},ll];function VD(){return new g.PXZ("Router",ir)}let Yy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[LD,[],Cg(t),{provide:Zw,useFactory:Ot,deps:[[ir,new g.FiY,new g.tp0]]},{provide:Uu,useValue:r||{}},r?.useHash?{provide:ge,useClass:rt}:{provide:ge,useClass:Ye},{provide:ju,useFactory:()=>{const n=(0,g.f3M)(ir),e=(0,g.f3M)(Xa),t=(0,g.f3M)(Uu);return t.scrollOffset&&e.setOffset(t.scrollOffset),new zo(n,e,t)}},r?.preloadingStrategy?oo(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:VD},r?.initialNavigation?Yw(r):[],[{provide:Qy,useFactory:Zy},{provide:g.tb,multi:!0,useExisting:Qy}]]}}static forChild(t){return{ngModule:n,providers:[Cg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Zw,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[h]}),n})();function Ot(n){return"guarded"}function Yw(n){return["disabled"===n.initialNavigation?Tf(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(ir);return()=>{e.setUpLocationChangeListener()}}},{provide:bg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Tf(2,[{provide:bg,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(U,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(ir),m=e.get(kD);(function o(u){e.get(ir).events.pipe(D(m=>m instanceof Oa||m instanceof _d||m instanceof sg),(0,at.U)(m=>m instanceof Oa||m instanceof _d&&(0===m.code||1===m.code)&&null),D(m=>null!==m),vn(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?ot(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const Qy=new g.OlP("");var $D=P(6451),Sf=P(5363),HD=P(6063);class Jw extends ii.x{constructor(e=1/0,t=1/0,r=HD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var GD=P(3099);function Xw(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,GD.B)({connector:()=>new Jw(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function zD(n,e){return(0,Po.m)(e)?Vn(()=>n,e):Vn(()=>n)}var Tg=P(9468),Or=P(5813),Gr=P(2011);P(5867);var ye=P(5861),hl=P(9681),Ag=P(4859),an=P(2090),Ua=P(1877);const ev=new Map,tv={activated:!1,tokenObservers:[]},r0={initialized:!1,enabled:!1};function wr(n){return ev.get(n)||Object.assign({},tv)}function Od(){return r0}class ao{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new an.BH,yield function o0(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new an.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const zr=new an.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xg(n){if(!wr(n).activated)throw zr.create("use-before-activation",{appName:n.name})}function a0(n,e){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,ye.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Y=yield d.getHeartbeatsHeader();Y&&(u["X-Firebase-Client"]=Y)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,C;try{w=yield fetch(n,m)}catch(Y){throw zr.create("fetch-network-error",{originalErrorMessage:null===(r=Y)||void 0===r?void 0:r.message})}if(200!==w.status)throw zr.create("fetch-status-error",{httpStatus:w.status});try{C=yield w.json()}catch(Y){throw zr.create("fetch-parse-error",{originalErrorMessage:null===(o=Y)||void 0===o?void 0:o.message})}const S=C.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw zr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const N=1e3*Number(S[1]),$=Date.now();return{token:C.token,expireTimeMillis:$+N,issuedAtTimeMillis:$}})).apply(this,arguments)}function Og(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const fl="firebase-app-check-store";let kg=null;function u0(){return kg||(kg=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(zr.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(fl,{keyPath:"compositeKey"})}}catch(r){e(zr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),kg)}function d0(){return(d0=(0,ye.Z)(function*(n,e){const r=(yield u0()).transaction(fl,"readwrite"),u=r.objectStore(fl).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(zr.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const pl=new Ua.Yd("@firebase/app-check");function p0(n,e){return(0,an.hl)()?function QD(n,e){return function l0(n,e){return d0.apply(this,arguments)}(function h0(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{pl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function JD(){return Od().enabled}function XD(){return m0.apply(this,arguments)}function m0(){return(m0=(0,ye.Z)(function*(){const n=Od();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const cS={error:"UNKNOWN_ERROR"};function $u(n){return an.US.encodeString(JSON.stringify(n),!1)}function Fd(n){return av.apply(this,arguments)}function av(){return(av=(0,ye.Z)(function*(n,e=!1){const t=n.app;xg(t);const r=wr(t);let u,o=r.token;if(o&&!ts(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(ts(w)?o=w:yield p0(t,void 0))}if(!e&&o&&ts(o))return{token:o.token};let m,d=!1;if(JD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=a0(Og(t,yield XD()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield p0(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield wr(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?pl.warn(w.message):pl.error(w),u=w}return o?u?m=ts(o)?{token:o.token,internalError:u}:lv(u):(m={token:o.token},r.token=o,yield p0(t,o)):m=lv(u),d&&y0(t,m),m})).apply(this,arguments)}function Mf(n,e){const t=wr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function uv(n){const{app:e}=n,t=wr(e);let r=t.tokenRefresher;r||(r=function cv(n){const{app:e}=n;return new ao((0,ye.Z)(function*(){let r;if(r=wr(e).token?yield Fd(n,!0):yield Fd(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function y0(n,e){const t=wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ts(n){return n.expireTimeMillis-Date.now()>0}function lv(n){return{token:$u(cS),error:n}}class eC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=wr(this.app);for(const t of e)Mf(this.app,t.next);return Promise.resolve()}}const uC="app-check-internal";!function cC(){(0,hl._registerComponent)(new Ag.wA("app-check",n=>function tC(n,e){return new eC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(uC).initialize()})),(0,hl._registerComponent)(new Ag.wA(uC,n=>function v0(n){return{getToken:e=>Fd(n,e),addTokenListener:e=>function Fg(n,e,t,r){const{app:o}=n,u=wr(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&ts(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),uv(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>uv(n))}(n,"INTERNAL",e),removeTokenListener:e=>Mf(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,hl.registerVersion)("@firebase/app-check","0.5.17")}();class mv{constructor(){return(0,Or.vb)("app-check")}}typeof window<"u"&&window;var C0=P(127);const b0=new g.OlP("angularfire2.auth.use-emulator"),T0=new g.OlP("angularfire2.auth.settings"),$g=new g.OlP("angularfire2.auth.tenant-id"),A0=new g.OlP("angularfire2.auth.langugage-code"),S0=new g.OlP("angularfire2.auth.use-device-language"),Nf=new g.OlP("angularfire.auth.persistence"),Hg=(n,e,t,r,o,u,d,m)=>(0,Gr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,S]of Object.entries(d))w.settings[C]=S;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let gl=(()=>{class n{constructor(t,r,o,u,d,m,w,C,S,N,$,Y){const ae=new ii.x,Re=ot(void 0).pipe((0,Sf.Q)(d.outsideAngular),Vn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,1277)))),(0,at.U)(()=>(0,Gr.on)(t,u,r)),(0,at.U)(Ne=>Hg(Ne,u,m,C,S,N,w,$)),Xw({bufferSize:1,refCount:!1}));if(cr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ot(null);else{Re.pipe(ee()).subscribe();const St=Re.pipe(Vn(Vt=>Vt.getRedirectResult().then(Pt=>Pt,()=>null)),Or.iC,Xw({bufferSize:1,refCount:!1})),kt=Re.pipe(Vn(Vt=>new Mr.y(Pt=>({unsubscribe:u.runOutsideAngular(()=>Vt.onAuthStateChanged(Ht=>Pt.next(Ht),Ht=>Pt.error(Ht),()=>Pt.complete()))})))),Lt=Re.pipe(Vn(Vt=>new Mr.y(Pt=>({unsubscribe:u.runOutsideAngular(()=>Vt.onIdTokenChanged(Ht=>Pt.next(Ht),Ht=>Pt.error(Ht),()=>Pt.complete()))}))));this.authState=St.pipe(zD(kt),(0,Tg.R)(d.outsideAngular),(0,Sf.Q)(d.insideAngular)),this.user=St.pipe(zD(Lt),(0,Tg.R)(d.outsideAngular),(0,Sf.Q)(d.insideAngular)),this.idToken=this.user.pipe(Vn(Vt=>Vt?(0,cn.D)(Vt.getIdToken()):ot(null))),this.idTokenResult=this.user.pipe(Vn(Vt=>Vt?(0,cn.D)(Vt.getIdTokenResult()):ot(null))),this.credential=(0,$D.T)(St,ae,this.authState.pipe(D(Vt=>!Vt))).pipe((0,at.U)(Vt=>Vt?.user?Vt:null),(0,Tg.R)(d.outsideAngular),(0,Sf.Q)(d.insideAngular))}return(0,Gr.pX)(this,Re,u,{spy:{apply:(Ne,St,kt)=>{(Ne.startsWith("signIn")||Ne.startsWith("createUser"))&&kt.then(Lt=>ae.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Gr.Dh),g.LFG(Gr.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Or.HU),g.LFG(b0,8),g.LFG(T0,8),g.LFG($g,8),g.LFG(A0,8),g.LFG(S0,8),g.LFG(Nf,8),g.LFG(mv,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var vv=P(4986);function x0(){return(0,_r.e)((n,e)=>{let t,r=!1;n.subscribe((0,qn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function R0(n,e){return n===e}P(1277);var it,N0=P(3942),_v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wr={},Bd=Bd||{},At=_v||self;function Gg(){}function jd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $d(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var wv="closure_uid_"+(1e9*Math.random()>>>0),Of=0;function IC(n,e,t){return n.call.apply(n.bind,arguments)}function gS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function ci(n,e,t){return(ci=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?IC:gS).apply(null,arguments)}function Iv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function qr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Hu(){this.s=this.s,this.o=this.o}Hu.prototype.s=!1,Hu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function wC(n){Object.prototype.hasOwnProperty.call(n,wv)&&n[wv]||(n[wv]=++Of)}(this)},Hu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ev=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function kf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function O0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(jd(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}kr.prototype.h=function(){this.defaultPrevented=!0};var DC=function(){if(!At.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{At.addEventListener("test",Gg,e),At.removeEventListener("test",Gg,e)}catch{}return n}();function zg(n){return/^[\s\xa0]*$/.test(n)}var k0=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Dv(n,e){return n<e?-1:n>e?1:0}function Wg(){var n=At.navigator;return n&&(n=n.userAgent)?n:""}function Wo(n){return-1!=Wg().indexOf(n)}function Hd(n){return Hd[" "](n),n}Hd[" "]=Gg;var Gu,n,mS=Wo("Opera"),qo=Wo("Trident")||Wo("MSIE"),P0=Wo("Edge"),Cv=P0||qo,qg=Wo("Gecko")&&!(-1!=Wg().toLowerCase().indexOf("webkit")&&!Wo("Edge"))&&!(Wo("Trident")||Wo("MSIE"))&&!Wo("Edge"),CC=-1!=Wg().toLowerCase().indexOf("webkit")&&!Wo("Edge");function uo(){var n=At.document;return n?n.documentMode:void 0}e:{var Pr="",ja=(n=Wg(),qg?/rv:([^\);]+)(\)|;)/.exec(n):P0?/Edge\/([\d\.]+)/.exec(n):qo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):CC?/WebKit\/(\S+)/.exec(n):mS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ja&&(Pr=ja?ja[1]:""),qo){var Gd=uo();if(null!=Gd&&Gd>parseFloat(Pr)){Gu=String(Gd);break e}}Gu=Pr}var Os={};var zd=At.document&&qo&&(uo()||parseInt(Gu,10))||void 0;function Ko(n,e){if(kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(qg){e:{try{Hd(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Wd[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ko.X.h.call(this)}}qr(Ko,kr);var Wd={2:"touch",3:"pen",4:"mouse"};Ko.prototype.h=function(){Ko.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Zo="closure_listenable_"+(1e6*Math.random()|0),qd=0;function Kd(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++qd,this.ba=this.ea=!1}function $a(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Kg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Tv(n){const e={};for(const t in n)e[t]=n[t];return e}const Av="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sv(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Av.length;u++)t=Av[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Pf(n){this.src=n,this.g={},this.h=0}function Zg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Ev(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&($a(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Yg(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Pf.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=Yg(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new Kd(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var Qg="closure_lm_"+(1e6*Math.random()|0),Jg={};function F0(n,e,t,r,o){if(r&&r.once)return U0(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)F0(n,e[u],t,r,o);return null}return t=Lf(t),n&&n[Zo]?n.N(e,t,$d(r)?!!r.capture:!!r,o):L0(n,e,t,!1,r,o)}function L0(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=$d(o)?!!o.capture:!!o,m=Zd(n);if(m||(n[Qg]=m=new Pf(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function V0(){const e=bC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)DC||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Xg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function U0(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)U0(n,e[u],t,r,o);return null}return t=Lf(t),n&&n[Zo]?n.O(e,t,$d(r)?!!r.capture:!!r,o):L0(n,e,t,!0,r,o)}function xv(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)xv(n,e[u],t,r,o);else r=$d(r)?!!r.capture:!!r,t=Lf(t),n&&n[Zo]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Yg(u=n.g[e],t,r,o))&&($a(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Zd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Yg(e,t,r,o)),(t=-1<n?e[n]:null)&&Ff(t))}function Ff(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Zo])Zg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Xg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Zd(e))?(Zg(t,n),0==t.h&&(t.src=null,e[Qg]=null)):$a(n)}}}function Xg(n){return n in Jg?Jg[n]:Jg[n]="on"+n}function bC(n,e){if(n.ba)n=!0;else{e=new Ko(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Ff(n),n=t.call(r,e)}return n}function Zd(n){return(n=n[Qg])instanceof Pf?n:null}var Yd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lf(n){return"function"==typeof n?n:(n[Yd]||(n[Yd]=function(e){return n.handleEvent(e)}),n[Yd])}function Fr(){Hu.call(this),this.i=new Pf(this),this.P=this,this.I=null}function Ir(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new kr(e,n);else if(e instanceof kr)e.target=e.target||n;else{var o=e;Sv(e=new kr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Qd(d,r,!0,e)&&o}if(o=Qd(d=e.g=n,r,!0,e)&&o,o=Qd(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Qd(d=e.g=t[u],r,!1,e)&&o}function Qd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,w=d.ha||d.src;d.ea&&Zg(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}qr(Fr,Hu),Fr.prototype[Zo]=!0,Fr.prototype.removeEventListener=function(n,e,t,r){xv(this,n,e,t,r)},Fr.prototype.M=function(){if(Fr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)$a(t[r]);delete n.g[e],n.h--}}this.I=null},Fr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var em=At.JSON.stringify;function B0(){var n=Pv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var kv,Rv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new j0,n=>n.reset());class j0{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Nv(n){At.setTimeout(()=>{throw n},0)}function Ov(n,e){kv||function $0(){var n=At.Promise.resolve(void 0);kv=function(){n.then(H0)}}(),tm||(kv(),tm=!0),Pv.add(n,e)}var tm=!1,Pv=new class Mv{constructor(){this.h=this.g=null}add(e,t){const r=Rv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function H0(){for(var n;n=B0();){try{n.h.call(n.g)}catch(t){Nv(t)}var e=Rv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}tm=!1}function nm(n,e){Fr.call(this),this.h=n||1,this.g=e||At,this.j=ci(this.lb,this),this.l=Date.now()}function Fv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Lv(n,e,t){if("function"==typeof n)t&&(n=ci(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ci(n.handleEvent,n)}return 2147483647<Number(e)?-1:At.setTimeout(n,e||0)}function Vv(n){n.g=Lv(()=>{n.g=null,n.i&&(n.i=!1,Vv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qr(nm,Fr),(it=nm.prototype).ca=!1,it.R=null,it.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ir(this,"tick"),this.ca&&(Fv(this),this.start()))}},it.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},it.M=function(){nm.X.M.call(this),Fv(this),delete this.g};class Uv extends Hu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Vv(this)}M(){super.M(),this.g&&(At.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jd(n){Hu.call(this),this.h=n,this.g={}}qr(Jd,Hu);var Bv=[];function jv(n,e,t,r){Array.isArray(t)||(t&&(Bv[0]=t.toString()),t=Bv);for(var o=0;o<t.length;o++){var u=F0(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function $v(n){Kg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ff(e)},n),n.g={}}function Vf(){this.g=!0}function vl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function TC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return em(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Jd.prototype.M=function(){Jd.X.M.call(this),$v(this)},Jd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vf.prototype.Aa=function(){this.g=!1},Vf.prototype.info=function(){};var _l={},Hv=null;function rm(){return Hv=Hv||new Fr}function hr(n){kr.call(this,_l.Pa,n)}function Xd(n){const e=rm();Ir(e,new hr(e))}function W0(n,e){kr.call(this,_l.STAT_EVENT,n),this.stat=e}function Di(n){const e=rm();Ir(e,new W0(e,n))}function Gv(n,e){kr.call(this,_l.Qa,n),this.size=e}function Uf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return At.setTimeout(function(){n()},e)}_l.Pa="serverreachability",qr(hr,kr),_l.STAT_EVENT="statevent",qr(W0,kr),_l.Qa="timingevent",qr(Gv,kr);var Bf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},zv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Wu(){}function K0(){}Wu.prototype.h=null;var Z0,eh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Wv(){kr.call(this,"d")}function im(){kr.call(this,"c")}function jf(){}function wl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Jd(this),this.O=AC,this.T=new nm(n=Cv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new co}function co(){this.i=null,this.g="",this.h=!1}qr(Wv,kr),qr(im,kr),qr(jf,Wu),jf.prototype.g=function(){return new XMLHttpRequest},jf.prototype.i=function(){return{}},Z0=new jf;var AC=45e3,qv={},ns={};function rs(n,e,t){n.K=1,n.v=Wf(Yo(e)),n.s=t,n.P=!0,ks(n,null)}function ks(n,e){n.F=Date.now(),$f(n),n.A=Yo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),rI(t.i,"t",r),n.C=0,t=n.l.H,n.h=new co,n.g=l_(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Uv(ci(n.La,n,n.g),n.N)),jv(n.S,n.g,"readystatechange",n.ib),e=n.H?Tv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Xd(),function G0(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var S=C[0];C=C[1];var N=S.split("_");d=2<=N.length&&"type"==N[1]?d+(S+"=")+C+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Kv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Zv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=SC(n,t),o==ns){4==e&&(n.o=4,Di(14),r=!1),vl(n.j,n.m,null,"[Incomplete Response]");break}if(o==qv){n.o=4,Di(15),vl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}vl(n.j,n.m,o,null),Yv(n,o)}Kv(n)&&o!=ns&&o!=qv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),c_(e),e.K=!0,Di(11))):(vl(n.j,n.m,t,"[Invalid Chunked Response]"),lo(n),Il(n))}function SC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ns:(t=Number(e.substring(t,r)),isNaN(t)?qv:(r+=1)+t>e.length?ns:(e=e.substr(r,t),n.C=r+t,e))}function $f(n){n.V=Date.now()+n.O,Y0(n,n.O)}function Y0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Uf(ci(n.gb,n),e)}function sm(n){n.B&&(At.clearTimeout(n.B),n.B=null)}function Il(n){0==n.l.G||n.I||lh(n.l,n)}function lo(n){sm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Fv(n.T),$v(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Yv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||e_(t.h,n)))if(!n.J&&e_(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;lm(t),Sn(t)}cm(t),Di(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Uf(ci(t.cb,t),6e3));if(1>=oI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Cl(t,11)}else if((n.J||t.g==n)&&lm(t),!zg(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const S=C[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const N=C[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const $=C[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const ae=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var u=r.h;u.g||-1==ae.indexOf("spdy")&&-1==ae.indexOf("quic")&&-1==ae.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(t_(u,u.h),u.h=null))}if(r.D){const Re=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Re&&(r.za=Re,An(r.F,r.D,Re))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=Xf(r,r.H?r.ka:null,r.V),d.J){aI(r.h,d);var m=d,w=r.J;w&&m.setTimeout(w),m.B&&(sm(m),$f(m)),r.g=d}else u_(r);0<t.i.length&&Jf(t)}else"stop"!=C[0]&&"close"!=C[0]||Cl(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Cl(t,7):uh(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}Xd()}catch{}}function Qv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(jd(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function xC(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(jd(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Q0(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(jd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(it=wl.prototype).setTimeout=function(n){this.O=n},it.ib=function(n){n=n.target;const e=this.L;e&&3==Ha(n)?e.l():this.La(n)},it.La=function(n){try{if(n==this.g)e:{const S=Ha(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||Cv||this.g&&(this.h.h||this.g.fa()||fI(this.g)))){this.I||4!=S||7==e||Xd(),sm(this);var t=this.g.aa();this.Y=t;t:if(Kv(this)){var r=fI(this.g);n="";var o=r.length,u=4==Ha(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){lo(this),Il(this);var d="";break t}this.h.i=new At.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function z0(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zg(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Di(12),lo(this),Il(this);break e}vl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yv(this,t)}this.P?(Zv(this,S,d),Cv&&this.i&&3==S&&(jv(this.S,this.T,"tick",this.hb),this.T.start())):(vl(this.j,this.m,d,null),Yv(this,d)),4==S&&lo(this),this.i&&!this.I&&(4==S?lh(this.l,this):(this.i=!1,$f(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Di(12)):(this.o=0,Di(13)),lo(this),Il(this)}}}catch{}},it.hb=function(){if(this.g){var n=Ha(this.g),e=this.g.fa();this.C<e.length&&(sm(this),Zv(this,n,e),this.i&&4!=n&&$f(this))}},it.cancel=function(){this.I=!0,lo(this)},it.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function yS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xd(),Di(17)),lo(this),this.o=2,Il(this)):Y0(this,this.V-n)};var Jv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function El(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof El){this.h=void 0!==e?e:n.h,Hf(this,n.j),this.s=n.s,this.g=n.g,Gf(this,n.m),this.l=n.l,e=n.i;var t=new qf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),zf(this,t),this.o=n.o}else n&&(t=String(n).match(Jv))?(this.h=!!e,Hf(this,t[1]||"",!0),this.s=th(t[2]||""),this.g=th(t[3]||"",!0),Gf(this,t[4]),this.l=th(t[5]||"",!0),zf(this,t[6]||"",!0),this.o=th(t[7]||"")):(this.h=!!e,this.i=new qf(null,this.h))}function Yo(n){return new El(n)}function Hf(n,e,t){n.j=t?th(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Gf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function zf(n,e,t){e instanceof qf?(n.i=e,function NC(n,e){e&&!n.j&&(qu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(tI(this,r),rI(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=nh(e,MC)),n.i=new qf(e,n.h))}function An(n,e,t){n.i.set(e,t)}function Wf(n){return An(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function th(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,J0),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function J0(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}El.prototype.toString=function(){var n=[],e=this.j;e&&n.push(nh(e,Xv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(nh(e,Xv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(nh(t,"/"==t.charAt(0)?eI:X0,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",nh(t,RC)),n.join("")};var Xv=/[#\/\?@]/g,X0=/[#\?:]/g,eI=/[#\?]/g,MC=/[#\?@]/g,RC=/#/g;function qf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function qu(n){n.g||(n.g=new Map,n.h=0,n.i&&function om(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function tI(n,e){qu(n),e=rh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function nI(n,e){return qu(n),e=rh(n,e),n.g.has(e)}function rI(n,e,t){tI(n,e),0<t.length&&(n.i=null,n.g.set(rh(n,e),kf(t)),n.h+=t.length)}function rh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function iI(n){this.l=n||kC,n=At.PerformanceNavigationTiming?0<(n=At.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(At.g&&At.g.Ga&&At.g.Ga()&&At.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(it=qf.prototype).add=function(n,e){qu(this),this.i=null,n=rh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},it.forEach=function(n,e){qu(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},it.oa=function(){qu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},it.W=function(n){qu(this);let e=[];if("string"==typeof n)nI(this,n)&&(e=e.concat(this.g.get(rh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},it.set=function(n,e){return qu(this),this.i=null,nI(this,n=rh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},it.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},it.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var kC=10;function sI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function oI(n){return n.h?1:n.g?n.g.size:0}function e_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function t_(n,e){n.g?n.g.add(e):n.h=e}function aI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function uI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return kf(n.i)}function am(){}function cI(){this.g=new am}function lI(n,e,t){const r=t||"";try{Qv(n,function(o,u){let d=o;$d(o)&&(d=em(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Kf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function ih(n){this.l=n.ac||null,this.j=n.jb||!1}function Zf(n,e){Fr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=um,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}iI.prototype.cancel=function(){if(this.i=uI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},am.prototype.stringify=function(n){return At.JSON.stringify(n,void 0)},am.prototype.parse=function(n){return At.JSON.parse(n,void 0)},qr(ih,Wu),ih.prototype.g=function(){return new Zf(this.l,this.j)},ih.prototype.i=function(n){return function(){return n}}({}),qr(Zf,Fr);var um=0;function n_(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function sh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,oh(n)}function oh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(it=Zf.prototype).open=function(n,e){if(this.readyState!=um)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,oh(this)},it.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||At).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},it.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sh(this)),this.readyState=um},it.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,oh(this)),this.g&&(this.readyState=3,oh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof At.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;n_(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},it.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sh(this):oh(this),3==this.readyState&&n_(this)}},it.Va=function(n){this.g&&(this.response=this.responseText=n,sh(this))},it.Ua=function(n){this.g&&(this.response=n,sh(this))},it.ga=function(){this.g&&sh(this)},it.setRequestHeader=function(n,e){this.v.append(n,e)},it.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},it.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Zf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Dl=At.JSON.parse;function Yn(n){Fr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hI,this.K=this.L=!1}qr(Yn,Fr);var hI="",ah=/^https?$/i,vS=["POST","PUT"];function PC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,i_(n),o_(n)}function i_(n){n.D||(n.D=!0,Ir(n,"complete"),Ir(n,"error"))}function s_(n){if(n.h&&typeof Bd<"u"&&(!n.C[1]||4!=Ha(n)||2!=n.aa()))if(n.v&&4==Ha(n))Lv(n.Ha,0,n);else if(Ir(n,"readystatechange"),4==Ha(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Jv)[1]||null;if(!o&&At.self&&At.self.location){var u=At.self.location.protocol;o=u.substr(0,u.length-1)}r=!ah.test(o?o.toLowerCase():"")}t=r}if(t)Ir(n,"complete"),Ir(n,"success");else{n.m=6;try{var d=2<Ha(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",i_(n)}}finally{o_(n)}}}function o_(n,e){if(n.g){vt(n);const t=n.g,r=n.C[0]?Gg:null;n.g=null,n.C=null,e||Ir(n,"ready");try{t.onreadystatechange=r}catch{}}}function vt(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(At.clearTimeout(n.A),n.A=null)}function Ha(n){return n.g?n.g.readyState:0}function fI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case hI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function pI(n){let e="";return Kg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Ku(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=pI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):An(n,e,t))}function Yf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Qf(n){this.Ca=0,this.i=[],this.j=new Vf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Yf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Yf("baseRetryDelayMs",5e3,n),this.bb=Yf("retryDelaySeedMs",1e4,n),this.$a=Yf("forwardChannelMaxRetries",2,n),this.ta=Yf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new iI(n&&n.concurrentRequestLimit),this.Fa=new cI,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function uh(n){if(FC(n),3==n.G){var e=n.U++,t=Yo(n.F);An(t,"SID",n.I),An(t,"RID",e),An(t,"TYPE","terminate"),ch(n,t),(e=new wl(n,n.j,e,void 0)).K=2,e.v=Wf(Yo(t)),t=!1,At.navigator&&At.navigator.sendBeacon&&(t=At.navigator.sendBeacon(e.v.toString(),"")),!t&&At.Image&&((new Image).src=e.v,t=!0),t||(e.g=l_(e.l,null),e.g.da(e.v)),e.F=Date.now(),$f(e)}_I(n)}function Sn(n){n.g&&(c_(n),n.g.cancel(),n.g=null)}function FC(n){Sn(n),n.u&&(At.clearTimeout(n.u),n.u=null),lm(n),n.h.cancel(),n.m&&("number"==typeof n.m&&At.clearTimeout(n.m),n.m=null)}function Jf(n){sI(n.h)||n.m||(n.m=!0,Ov(n.Ja,n),n.C=0)}function mI(n,e){var t;t=e?e.m:n.U++;const r=Yo(n.F);An(r,"SID",n.I),An(r,"RID",t),An(r,"AID",n.T),ch(n,r),n.o&&n.s&&Ku(r,n.o,n.s),t=new wl(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=a_(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),t_(n.h,t),rs(t,r,e)}function ch(n,e){n.ia&&Kg(n.ia,function(t,r){An(e,r,t)}),n.l&&Qv({},function(t,r){An(e,r,t)})}function a_(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ci(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const S=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{lI(S,d,"req"+C+"_")}catch{r&&r(S)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function u_(n){n.g||n.u||(n.Z=1,Ov(n.Ia,n),n.A=0)}function cm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Uf(ci(n.Ia,n),vI(n,n.A)),n.A++,0))}function c_(n){null!=n.B&&(At.clearTimeout(n.B),n.B=null)}function yI(n){n.g=new wl(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Yo(n.sa);An(e,"RID","rpc"),An(e,"SID",n.I),An(e,"CI",n.L?"0":"1"),An(e,"AID",n.T),An(e,"TYPE","xmlhttp"),ch(n,e),n.o&&n.s&&Ku(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Wf(Yo(e)),t.s=null,t.P=!0,ks(t,n)}function lm(n){null!=n.v&&(At.clearTimeout(n.v),n.v=null)}function lh(n,e){var t=null;if(n.g==e){lm(n),c_(n),n.g=null;var r=2}else{if(!e_(n.h,e))return;t=e.D,aI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Ir(r=rm(),new Gv(r,t)),Jf(n)}else u_(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function gI(n,e){return!(oI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Uf(ci(n.Ja,n,e),vI(n,n.C)),n.C++,0)))}(n,e)||2==r&&cm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Cl(n,5);break;case 4:Cl(n,10);break;case 3:Cl(n,6);break;default:Cl(n,2)}}function vI(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Cl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ci(n.kb,n);t||(t=new El("//www.google.com/images/cleardot.gif"),At.location&&"http"==At.location.protocol||Hf(t,"https"),Wf(t)),function dI(n,e){const t=new Vf;if(At.Image){const r=new Image;r.onload=Iv(Kf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Iv(Kf,t,r,"TestLoadImage: error",!1,e),r.onabort=Iv(Kf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Iv(Kf,t,r,"TestLoadImage: timeout",!1,e),At.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Di(2);n.G=0,n.l&&n.l.va(e),_I(n),FC(n)}function _I(n){if(n.G=0,n.la=[],n.l){const e=uI(n.h);(0!=e.length||0!=n.i.length)&&(O0(n.la,e),O0(n.la,n.i),n.h.i.length=0,kf(n.i),n.i.length=0),n.l.ua()}}function Xf(n,e,t){var r=t instanceof El?Yo(t):new El(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Gf(r,r.m);else{var o=At.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new El(null,void 0);r&&Hf(u,r),e&&(u.g=e),o&&Gf(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&An(r,t,e),An(r,"VER",n.ma),ch(n,r),r}function l_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yn(t&&n.Da&&!n.ra?new ih({jb:!0}):n.ra)).Ka(n.H),e}function d_(){}function ep(){if(qo&&!(10<=Number(zd)))throw Error("Environmental error: no available transport.")}function is(n,e){Fr.call(this),this.g=new Qf(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!zg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new fh(this)}function dh(n){Wv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function hh(){im.call(this),this.status=1}function fh(n){this.g=n}(it=Yn.prototype).Ka=function(n){this.L=n},it.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Z0.g(),this.C=function q0(n){return n.h||(n.h=n.i())}(this.u?this.u:Z0),this.g.onreadystatechange=ci(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void PC(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=At.FormData&&n instanceof At.FormData,!(0<=Ev(vS,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{vt(this),0<this.B&&((this.K=function r_(n){return qo&&function bv(){return function ml(n){var e=Os;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=k0(String(Gu)).split("."),t=k0("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Dv(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Dv(0==o[2].length,0==u[2].length)||Dv(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ci(this.qa,this)):this.A=Lv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){PC(this,u)}},it.qa=function(){typeof Bd<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ir(this,"timeout"),this.abort(8))},it.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ir(this,"complete"),Ir(this,"abort"),o_(this))},it.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),o_(this,!0)),Yn.X.M.call(this)},it.Ha=function(){this.s||(this.F||this.v||this.l?s_(this):this.fb())},it.fb=function(){s_(this)},it.aa=function(){try{return 2<Ha(this)?this.g.status:-1}catch{return-1}},it.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},it.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Dl(e)}},it.Ea=function(){return this.m},it.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(it=Qf.prototype).ma=8,it.G=1,it.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new wl(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Tv(u),Sv(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=a_(this,o,e),An(t=Yo(this.F),"RID",n),An(t,"CVER",22),this.D&&An(t,"X-HTTP-Session-Id",this.D),ch(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(pI(u)))+"&"+e:this.o&&Ku(t,this.o,u)),t_(this.h,o),this.Ya&&An(t,"TYPE","init"),this.O?(An(t,"$req",e),An(t,"SID","null"),o.Z=!0,rs(o,t,null)):rs(o,t,e),this.G=2}}else 3==this.G&&(n?mI(this,n):0==this.i.length||sI(this.h)||mI(this))},it.Ia=function(){if(this.u=null,yI(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Uf(ci(this.eb,this),n)}},it.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Di(10),Sn(this),yI(this))},it.cb=function(){null!=this.v&&(this.v=null,Sn(this),cm(this),Di(19))},it.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Di(2)):(this.j.info("Failed to ping google.com"),Di(1))},(it=d_.prototype).xa=function(){},it.wa=function(){},it.va=function(){},it.ua=function(){},it.Ra=function(){},ep.prototype.g=function(n,e){return new is(n,e)},qr(is,Fr),is.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Di(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Xf(n,null,n.V),Jf(n)},is.prototype.close=function(){uh(this.g)},is.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=em(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Jf(e)},is.prototype.M=function(){this.g.l=null,delete this.j,uh(this.g),delete this.g,is.X.M.call(this)},qr(dh,Wv),qr(hh,im),qr(fh,d_),fh.prototype.xa=function(){Ir(this.g,"a")},fh.prototype.wa=function(n){Ir(this.g,new dh(n))},fh.prototype.va=function(n){Ir(this.g,new hh)},fh.prototype.ua=function(){Ir(this.g,"b")},ep.prototype.createWebChannel=ep.prototype.g,is.prototype.send=is.prototype.u,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,Bf.NO_ERROR=0,Bf.TIMEOUT=8,Bf.HTTP_ERROR=6,zv.COMPLETE="complete",K0.EventType=eh,eh.OPEN="a",eh.CLOSE="b",eh.ERROR="c",eh.MESSAGE="d",Fr.prototype.listen=Fr.prototype.N,Yn.prototype.listenOnce=Yn.prototype.O,Yn.prototype.getLastError=Yn.prototype.Oa,Yn.prototype.getLastErrorCode=Yn.prototype.Ea,Yn.prototype.getStatus=Yn.prototype.aa,Yn.prototype.getResponseJson=Yn.prototype.Sa,Yn.prototype.getResponseText=Yn.prototype.fa,Yn.prototype.send=Yn.prototype.da,Yn.prototype.setWithCredentials=Yn.prototype.Ka;var LC=Wr.createWebChannelTransport=function(){return new ep},VC=Wr.getStatEventTarget=function(){return rm()},dm=Wr.ErrorCode=Bf,wI=Wr.EventType=zv,II=Wr.Event=_l,EI=Wr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},DI=Wr.FetchXmlHttpFactory=ih,hm=Wr.WebChannel=K0,UC=Wr.XhrIo=Yn;const BC="@firebase/firestore";class Kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");let tp="9.14.0";const bl=new Ua.Yd("@firebase/firestore");function fm(){return bl.logLevel}function Oe(n,...e){if(bl.logLevel<=Ua.in.DEBUG){const t=e.map(Tl);bl.debug(`Firestore (${tp}): ${n}`,...t)}}function sr(n,...e){if(bl.logLevel<=Ua.in.ERROR){const t=e.map(Tl);bl.error(`Firestore (${tp}): ${n}`,...t)}}function Zu(n,...e){if(bl.logLevel<=Ua.in.WARN){const t=e.map(Tl);bl.warn(`Firestore (${tp}): ${n}`,...t)}}function Tl(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${tp}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function Et(n,e){n||tt()}function We(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends an.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Er{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class CI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class np{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kr.UNAUTHENTICATED))}shutdown(){}}class $C{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bI{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Er;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Er,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,ye.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Er)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et("string"==typeof r.accessToken),new CI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(null===e||"string"==typeof e),new Kr(e)}}class HC{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Et(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class TI{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new HC(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SI{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Et("string"==typeof t.token),this.A=t.token,new AI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function h_(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class xI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=h_(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function Al(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function MI(n){return n+"\0"}class Nn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Nn(0,0))}static max(){return new Dt(new Nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Sl{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Sl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sl?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Sl{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const RI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends Sl{construct(e,t,r){return new Qn(e,t,r)}static isValidIdentifier(e){return RI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qn(t)}static emptyPath(){return new Qn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Jt.fromString(e))}static fromName(e){return new ze(Jt.fromString(e).popFirst(5))}static empty(){return new ze(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Jt(e.slice()))}}class gm{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function f_(n){return n.fields.find(e=>2===e.kind)}function xl(n){return n.fields.filter(e=>2!==e.kind)}gm.UNKNOWN_ID=-1;class mm{constructor(e,t){this.fieldPath=e,this.kind=t}}class ph{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ph(0,ss.min())}}function p_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Dt.fromTimestamp(1e9===r?new Nn(t+1,0):new Nn(t,r));return new ss(o,ze.empty(),e)}function NI(n){return new ss(n.readTime,n.key,-1)}class ss{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ss(Dt.min(),ze.empty(),-1)}static max(){return new ss(Dt.max(),ze.empty(),-1)}}function ym(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}const OI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Yu(n){return rp.apply(this,arguments)}function rp(){return rp=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==OI)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),rp.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(o=>o?re.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(S=>{d[C]=S,++m,m===u&&r(d)},S=>o(S))}})}static doWhile(e,t){return new re((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class ip{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Er,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new sp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=vm(r.target.error);this.P.reject(new sp(e,o))}}static open(e,t,r,o){try{return new ip(t,e.transaction(o,r))}catch(u){throw new sp(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qC(t)}}class os{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===os.D((0,an.z$)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Qu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,an.hl)())return!1;if(os.N())return!0;const e=(0,an.z$)(),t=os.D(e),r=0<t&&t<10,o=os.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new sp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new sp(e,m))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=ip.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(S=>(w.V(),S)).catch(S=>(w.abort(S),re.reject(S))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,S="FirebaseError"!==C.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",S),u.close(),!S)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class WC{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Qu(this.U.delete())}}class sp extends xe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qo(n){return"IndexedDbTransactionError"===n.name}class qC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qu(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Qu(this.store.add(e))}get(e){return Qu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Qu(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Qu(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new re((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new re((r,o)=>{t.onerror=u=>{const d=vm(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new re((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new WC(m),C=t(m.primaryKey,m.value,w);if(C instanceof re){const S=C.catch(N=>(w.done(),re.reject(N)));r.push(S)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qu(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=vm(r.target.error);t(o)}})}let Ml=!1;function vm(n){const e=os.D((0,an.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ml||(Ml=!0,setTimeout(()=>{throw r},0)),r}}return n}class KC{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Qo(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Yu(r)}yield t.nt(6e4)}))}}class wS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return re.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Oe("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(m=>(Oe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=NI(u);ym(d,r)>0&&(r=d)}),new ss(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ci{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function _m(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wm(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ci.at=-1;class Jn{constructor(e,t){this.comparator=e,this.root=t||Dr.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dr.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new op(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new op(this.root,e,this.comparator,!1)}getReverseIterator(){return new op(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new op(this.root,e,this.comparator,!0)}}class op{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Dr.RED,this.left=o??Dr.EMPTY,this.right=u??Dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Dr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Dr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Dr.EMPTY=null,Dr.RED=!0,Dr.BLACK=!1,Dr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Dr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new g_(this.data.getIterator())}getIteratorFrom(e){return new g_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class g_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nl(n){return n.hasNext()?n.getNext():void 0}class Vi{constructor(e){this.fields=e,e.sort(Qn.comparator)}static empty(){return new Vi([])}unionWith(e){let t=new gn(Qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Cr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const YC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ju(n){if(Et(!!n),"string"==typeof n){let e=0;const t=YC.exec(n);if(Et(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Un(n.seconds),nanos:Un(n.nanos)}}function Un(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function gh(n){return"string"==typeof n?Cr.fromBase64String(n):Cr.fromUint8Array(n)}function Im(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function PI(n){const e=n.mapValue.fields.__previous_value__;return Im(e)?PI(e):e}function ap(n){const e=Ju(n.mapValue.fields.__local_write_time__.timestampValue);return new Nn(e.seconds,e.nanos)}class IS{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Ol{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ol("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}function up(n){return null==n}function cp(n){return 0===n&&1/n==-1/0}function FI(n){return"number"==typeof n&&Number.isInteger(n)&&!cp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Xu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Em={nullValue:"NULL_VALUE"};function kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Im(n)?4:VI(n)?9007199254740991:10:tt()}function Jo(n,e){if(n===e)return!0;const t=kl(n);if(t!==kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ap(n).isEqual(ap(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ju(r.timestampValue),d=Ju(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,gh(n.bytesValue).isEqual(gh(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Un(r.geoPointValue.latitude)===Un(o.geoPointValue.latitude)&&Un(r.geoPointValue.longitude)===Un(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Un(r.integerValue)===Un(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Un(r.doubleValue),d=Un(o.doubleValue);return u===d?cp(u)===cp(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Al(n.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(_m(u)!==_m(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Jo(u[m],d[m])))return!1;return!0}(n,e);default:return tt()}var o}function lp(n,e){return void 0!==(n.values||[]).find(t=>Jo(t,e))}function ec(n,e){if(n===e)return 0;const t=kl(n),r=kl(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Un(o.integerValue||o.doubleValue),m=Un(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return LI(n.timestampValue,e.timestampValue);case 4:return LI(ap(n),ap(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=gh(o),m=gh(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=xt(d[w],m[w]);if(0!==C)return C}return xt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=xt(Un(o.latitude),Un(u.latitude));return 0!==d?d:xt(Un(o.longitude),Un(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=ec(d[w],m[w]);if(C)return C}return xt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Xu.mapValue&&u===Xu.mapValue)return 0;if(o===Xu.mapValue)return 1;if(u===Xu.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let S=0;S<m.length&&S<C.length;++S){const N=xt(m[S],C[S]);if(0!==N)return N;const $=ec(d[m[S]],w[C[S]]);if(0!==$)return $}return xt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw tt()}}function LI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=Ju(n),r=Ju(e),o=xt(t.seconds,r.seconds);return 0!==o?o:xt(t.nanos,r.nanos)}function mh(n){return m_(n)}function m_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ju(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?gh(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=m_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${m_(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function ho(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Dm(n){return!!n&&"integerValue"in n}function yh(n){return!!n&&"arrayValue"in n}function y_(n){return!!n&&"nullValue"in n}function v_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dp(n){return!!n&&"mapValue"in n}function hp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function VI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ES(n){return"nullValue"in n?Em:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ho(Ol.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function QC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ho(Ol.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Xu:tt()}function UI(n,e){const t=ec(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function BI(n,e){const t=ec(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hp(t)}setAll(e){let t=Qn.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=hp(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());dp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];dp(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Rl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Zr(hp(this.value))}}function jI(n){const e=[];return Rl(n.fields,(t,r)=>{const o=new Qn([t]);if(dp(r)){const u=jI(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Vi(e)}class dn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,Dt.min(),Dt.min(),Zr.empty(),0)}static newFoundDocument(e,t,r){return new dn(e,1,t,Dt.min(),r,0)}static newNoDocument(e,t){return new dn(e,2,t,Dt.min(),Zr.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Dt.min(),Zr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class JC{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ht=null}}function Cm(n,e=null,t=[],r=[],o=null,u=null,d=null){return new JC(n,e,t,r,o,u,d)}function li(n){const e=We(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+mh(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),up(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>mh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>mh(r)).join(",")),e.ht=t}return e.ht}function Pl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!I_(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Jo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!E_(n.startAt,e.startAt)&&E_(n.endAt,e.endAt)}function tc(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function bm(n,e){return n.filters.filter(t=>t instanceof fr&&t.field.isEqual(e))}function $I(n,e,t){let r=Em,o=!0;for(const u of bm(n,e)){let d=Em,m=!0;switch(u.op){case"<":case"<=":d=ES(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Em}UI({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];UI({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function HI(n,e,t){let r=Xu,o=!0;for(const u of bm(n,e)){let d=Xu,m=!0;switch(u.op){case">=":case">":d=QC(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Xu}BI({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];BI({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class fr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Tm(e,t,r):"array-contains"===t?new GI(e,r):"in"===t?new w_(e,r):"not-in"===t?new zI(e,r):"array-contains-any"===t?new nb(e,r):new fr(e,t,r)}static lt(e,t,r){return"in"===t?new eb(e,r):new tb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ec(t,this.value)):null!==t&&kl(this.value)===kl(t)&&this.ft(ec(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Tm extends fr{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.ft(t)}}class eb extends fr{constructor(e,t){super(e,"in",t),this.keys=__(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class tb extends fr{constructor(e,t){super(e,"not-in",t),this.keys=__(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function __(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class GI extends fr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yh(t)&&lp(t.arrayValue,this.value)}}class w_ extends fr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lp(this.value.arrayValue,t)}}class zI extends fr{constructor(e,t){super(e,"not-in",t)}matches(e){if(lp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!lp(this.value.arrayValue,t)}}class nb extends fr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lp(this.value.arrayValue,r))}}class nc{constructor(e,t){this.position=e,this.inclusive=t}}class fp{constructor(e,t="asc"){this.field=e,this.dir=t}}function I_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Am(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(d.referenceValue),t.key):ec(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function E_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jo(n.position[t],e.position[t]))return!1;return!0}class fo{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function Sm(n,e,t,r,o,u,d,m){return new fo(n,e,t,r,o,u,d,m)}function vh(n){return new fo(n)}function WI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function D_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function C_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function xm(n){return null!==n.collectionGroup}function rc(n){const e=We(n);if(null===e._t){e._t=[];const t=C_(e),r=D_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new fp(t)),e._t.push(new fp(Qn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new fp(Qn.keyField(),u))}}}return e._t}function di(n){const e=We(n);if(!e.wt)if("F"===e.limitType)e.wt=Cm(e.path,e.collectionGroup,rc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of rc(e))t.push(new fp(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new nc(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new nc(e.startAt.position,e.startAt.inclusive):null;e.wt=Cm(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function Mm(n,e,t){return new fo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _h(n,e){return Pl(di(n),di(e))&&n.limitType===e.limitType}function b_(n){return`${li(di(n))}|lt:${n.limitType}`}function T_(n){return`Query(target=${function XC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${mh(r.value)}`;var r}).join(", ")}]`),up(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>mh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>mh(t)).join(",")),`Target(${e})`}(di(n))}; limitType=${n.limitType})`}function Rm(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=Am(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,rc(t),r)||t.endAt&&!function(o,u,d){const m=Am(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,rc(t),r)));var t,r}function A_(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qI(n){return(e,t)=>{let r=!1;for(const o of rc(n)){const u=KI(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function KI(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?ec(m,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function ZI(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cp(e)?"-0":e}}function hi(n){return{integerValue:""+n}}function Fl(n,e){return FI(e)?hi(e):ZI(n,e)}class Nm{constructor(){this._=void 0}}function rb(n,e,t){return n instanceof Ll?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof ic?wh(n,e):n instanceof Vl?Om(n,e):function(r,o){const u=ib(r,o),d=S_(u)+S_(r.yt);return Dm(u)&&Dm(r.yt)?hi(d):ZI(r.It,d)}(n,e)}function DS(n,e,t){return n instanceof ic?wh(n,e):n instanceof Vl?Om(n,e):t}function ib(n,e){return n instanceof Ih?Dm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ll extends Nm{}class ic extends Nm{constructor(e){super(),this.elements=e}}function wh(n,e){const t=YI(e);for(const r of n.elements)t.some(o=>Jo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Vl extends Nm{constructor(e){super(),this.elements=e}}function Om(n,e){let t=YI(e);for(const r of n.elements)t=t.filter(o=>!Jo(o,r));return{arrayValue:{values:t}}}class Ih extends Nm{constructor(e,t){super(),this.It=e,this.yt=t}}function S_(n){return Un(n.integerValue||n.doubleValue)}function YI(n){return yh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class pp{constructor(e,t){this.field=e,this.transform=t}}class x_{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ul{}function km(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Dh(n.key,xn.none()):new po(n.key,n.data,xn.none());{const t=n.data,r=Zr.empty();let o=new gn(Qn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new Ga(n.key,r,new Vi(o.toArray()),xn.none())}}function CS(n,e,t){n instanceof po?function(r,o,u){const d=r.value.clone(),m=Pm(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ga?function(r,o,u){if(!gp(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=Pm(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(R_(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Eh(n,e,t,r){return n instanceof po?function(o,u,d,m){if(!gp(o.precondition,u))return d;const w=o.value.clone(),C=ab(o.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ga?function(o,u,d,m){if(!gp(o.precondition,u))return d;const w=ab(o.fieldTransforms,m,u),C=u.data;return C.setAll(R_(o)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,gp(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function ob(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=ib(r.transform,o||null);null!=u&&(null===t&&(t=Zr.empty()),t.set(r.field,u))}return t||null}function M_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Al(t,r,(o,u)=>function sb(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ic&&r instanceof ic||t instanceof Vl&&r instanceof Vl?Al(t.elements,r.elements,Jo):t instanceof Ih&&r instanceof Ih?Jo(t.yt,r.yt):t instanceof Ll&&r instanceof Ll);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class po extends Ul{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ga extends Ul{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function R_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Pm(n,e,t){const r=new Map;Et(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,DS(d,m,t[o]))}return r}function ab(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,rb(u,d,e))}return r}class Dh extends Ul{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QI extends Ul{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ub{constructor(e){this.count=e}}var pr,Xt;function N_(n){switch(n){default:return tt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function O_(n){if(void 0===n)return sr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case pr.OK:return ce.OK;case pr.CANCELLED:return ce.CANCELLED;case pr.UNKNOWN:return ce.UNKNOWN;case pr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case pr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case pr.INTERNAL:return ce.INTERNAL;case pr.UNAVAILABLE:return ce.UNAVAILABLE;case pr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case pr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case pr.NOT_FOUND:return ce.NOT_FOUND;case pr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case pr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case pr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case pr.ABORTED:return ce.ABORTED;case pr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case pr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case pr.DATA_LOSS:return ce.DATA_LOSS;default:return tt()}}(Xt=pr||(pr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class sc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Rl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return wm(this.inner)}size(){return this.innerSize}}const JI=new Jn(ze.comparator);function bi(){return JI}const XI=new Jn(ze.comparator);function mp(...n){let e=XI;for(const t of n)e=e.insert(t.key,t);return e}function k_(n){let e=XI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Xo(){return Ch()}function P_(){return Ch()}function Ch(){return new sc(n=>n.toString(),(n,e)=>n.isEqual(e))}const eE=new Jn(ze.comparator),tE=new gn(ze.comparator);function Bt(...n){let e=tE;for(const t of n)e=e.add(t);return e}const cb=new gn(xt);function F_(){return cb}class bh{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Fm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new bh(Dt.min(),o,F_(),bi(),Bt())}}class Fm{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Fm(r,t,Bt(),Bt(),Bt())}}class L_{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class lb{constructor(e,t){this.targetId=e,this.At=t}}class db{constructor(e,t,r=Cr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class hb{constructor(){this.Rt=0,this.bt=pb(),this.Pt=Cr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Bt(),t=Bt(),r=Bt();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new Fm(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=pb()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class bS{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=bi(),this.qt=fb(),this.Kt=new gn(xt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(tc(u))if(0===r){const d=new ze(u.path);this.jt(t,d,dn.newNoDocument(d,Dt.min()))}else Et(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&tc(m.target)){const w=new ze(m.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,dn.newNoDocument(w,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Bt();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.Xt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new bh(e,t,this.Kt,this.Ut,r);return this.Ut=bi(),this.qt=fb(),this.Kt=new gn(xt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new hb,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new gn(xt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new hb),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function fb(){return new Jn(ze.comparator)}function pb(){return new Jn(ze.comparator)}const Lm={asc:"ASCENDING",desc:"DESCENDING"},TS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class nE{constructor(e,t){this.databaseId=e,this.gt=t}}function oc(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V_(n,e){return n.gt?e.toBase64():e.toUint8Array()}function rE(n,e){return oc(n,e.toTimestamp())}function Yr(n){return Et(!!n),Dt.fromTimestamp(function(e){const t=Ju(e);return new Nn(t.seconds,t.nanos)}(n))}function yp(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function U_(n){const e=Jt.fromString(n);return Et(Um(e)),e}function vp(n,e){return yp(n.databaseId,e.path)}function go(n,e){const t=U_(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(sE(t))}function iE(n,e){return yp(n.databaseId,e)}function gb(n){const e=U_(n);return 4===e.length?Jt.emptyPath():sE(e)}function _p(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sE(n){return Et(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function wp(n,e,t){return{name:vp(n,e),fields:t.value.mapValue.fields}}function oE(n,e,t){const r=go(n,e.name),o=Yr(e.updateTime),u=new Zr({mapValue:{fields:e.fields}}),d=dn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Vm(n,e){let t;if(e instanceof po)t={update:wp(n,e.key,e.value)};else if(e instanceof Dh)t={delete:vp(n,e.key)};else if(e instanceof Ga)t={update:wp(n,e.key,e.data),updateMask:vb(e.fieldMask)};else{if(!(e instanceof QI))return tt();t={verify:vp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Ll)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ic)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Vl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ih)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:rE(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function B_(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?xn.updateTime(Yr(o.updateTime)):void 0!==o.exists?xn.exists(o.exists):xn.none():xn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(Et("REQUEST_TIME"===d.setToServerValue),m=new Ll):"appendMissingElements"in d?m=new ic(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Vl(d.removeAllFromArray.values||[]):"increment"in d?m=new Ih(u,d.increment):tt();const w=Qn.fromServerFormat(d.fieldPath);return new pp(w,m)}(n,o)):[];var o;if(e.update){const o=go(n,e.update.name),u=new Zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Vi((e.updateMask.fieldPaths||[]).map(C=>Qn.fromServerFormat(C)));return new Ga(o,u,d,t,r)}return new po(o,u,t,r)}if(e.delete){const o=go(n,e.delete);return new Dh(o,t)}if(e.verify){const o=go(n,e.verify);return new QI(o,t)}return tt()}function aE(n,e){return{documents:[iE(n,e.path)]}}function uE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=iE(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=iE(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(S=>function(N){if("=="===N.op){if(v_(N.value))return{unaryFilter:{field:Th(N.field),op:"IS_NAN"}};if(y_(N.value))return{unaryFilter:{field:Th(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(v_(N.value))return{unaryFilter:{field:Th(N.field),op:"IS_NOT_NAN"}};if(y_(N.value))return{unaryFilter:{field:Th(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Th(N.field),op:mo(N.op),value:N.value}}}(S));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Th((S=C).field),direction:xS(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.gt||up(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function cE(n){let e=gb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Et(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=j_(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new fp(ac((N=S).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,up(N)?null:N}(t.limit));let w=null;var S;t.startAt&&(w=new nc((S=t.startAt).values||[],!!S.before));let C=null;return t.endAt&&(C=function(S){return new nc(S.values||[],!S.before)}(t.endAt)),Sm(e,o,d,u,m,"F",w,C)}function j_(n){return n?void 0!==n.unaryFilter?[Ps(n)]:void 0!==n.fieldFilter?[yb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>j_(e)).reduce((e,t)=>e.concat(t)):tt():[]}function xS(n){return Lm[n]}function mo(n){return TS[n]}function Th(n){return{fieldPath:n.canonicalString()}}function ac(n){return Qn.fromServerFormat(n.fieldPath)}function yb(n){return fr.create(ac(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Ps(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ac(n.unaryFilter.field);return fr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ac(n.unaryFilter.field);return fr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ac(n.unaryFilter.field);return fr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ac(n.unaryFilter.field);return fr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function vb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Um(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ti(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Bm(e)),e=_b(n.get(t),e);return Bm(e)}function _b(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Bm(n){return n+"\x01\x01"}function yo(n){const e=n.length;if(Et(e>=2),2===e)return Et("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&tt(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:tt()}u=d+2}return new Jt(r)}const $_=["userId","batchId"];function jm(n,e){return[n,Ti(e)]}function H_(n,e,t){return[n,Ti(e),t]}const dE={},wb=["prefixPath","collectionGroup","readTime","documentId"],hE=["prefixPath","collectionGroup","documentId"],Ib=["collectionGroup","readTime","prefixPath","documentId"],G_=["canonicalId","targetId"],uc=["targetId","path"],fE=["path","targetId"],z_=["collectionId","parent"],za=["indexId","uid"],Eb=["uid","sequenceNumber"],MS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Db=["indexId","uid","orderedDocumentKey"],Cb=["userId","collectionPath","documentId"],bb=["userId","collectionPath","largestBatchId"],Tb=["userId","collectionGroup","largestBatchId"],W_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RS=[...W_,"documentOverlays"],q_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pE=q_,gE=[...pE,"indexConfiguration","indexState","indexEntries"];class mE extends kI{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function gr(n,e){const t=We(n);return os.M(t.ie,e)}class $m{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&CS(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Eh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Eh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=P_();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const w=km(d,m);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,(t,r)=>M_(t,r))&&Al(this.baseMutations,e.baseMutations,(t,r)=>M_(t,r))}}class Hm{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Et(e.mutations.length===r.length);let o=eE;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Hm(e,t,r,o)}}class Gm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Wa{constructor(e,t,r,o,u=Dt.min(),d=Dt.min(),m=Cr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Wa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class K_{constructor(e){this.re=e}}function Ip(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ep(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:vp(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:oc(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bl(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Bl(e.version)}}var o,u;return r}function Ep(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cc(n){const e=new Nn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function lc(n,e){const t=(e.baseMutations||[]).map(u=>B_(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>B_(n.re,u)),o=Nn.fromMillis(e.localWriteTimeMs);return new $m(e.batchId,o,t,r)}function Dp(n){const e=cc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cc(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var o;return void 0!==n.query.documents?(Et(1===(o=n.query).documents.length),r=di(vh(gb(o.documents[0])))):r=di(cE(n.query)),new Wa(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Cr.fromBase64String(n.resumeToken))}function yE(n,e){const t=Bl(e.snapshotVersion),r=Bl(e.lastLimboFreeSnapshotVersion);let o;o=tc(e.target)?aE(n.re,e.target):uE(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:li(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function vE(n){const e=cE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Mm(e,e.limit,"L"):e}function _E(n,e){return new Gm(e.largestBatchId,B_(n.re,e.overlayMutation))}function Z_(n,e){const t=e.path.lastSegment();return[n,Ti(e.path.popLast()),t]}function wE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Bl(r.readTime),documentKey:Ti(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ab{getBundleMetadata(e,t){return IE(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:cc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return IE(e).put({bundleId:(r=t).id,createTime:Bl(Yr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Sb(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:vE(o.bundledQuery),readTime:cc(o.readTime)};var o})}saveNamedQuery(e,t){return Sb(e).put({name:(r=t).name,readTime:Bl(Yr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function IE(n){return gr(n,"bundles")}function Sb(n){return gr(n,"namedQueries")}class Y_{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Y_(e,t.uid||"")}getOverlay(e,t){return Wm(e).get(Z_(this.userId,t)).next(r=>r?_E(this.It,r):null)}getOverlays(e,t){const r=Xo();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new Gm(t,d);o.push(this.ue(e,m))}),re.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ti(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Wm(e).Y("collectionPathOverlayIndex",m))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Xo(),u=Ti(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Wm(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=_E(this.It,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Xo();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wm(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,C,S)=>{const N=_E(this.It,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):S.done()}).next(()=>u)}ue(e,t){return Wm(e).put(function(r,o,u){const[d,m,w]=Z_(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Vm(r.re,u.mutation)}}(this.It,this.userId,t))}}function Wm(n){return gr(n,"documentOverlays")}class Ah{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Un(e.integerValue));else if("doubleValue"in e){const r=Un(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),cp(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(gh(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?VI(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):tt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function NS(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function EE(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=NS(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ah.Te=new Ah;class qm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=EE(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=EE(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class xb{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Mb{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Sh{constructor(){this.Be=new qm,this.Le=new xb(this.Be),this.Ue=new Mb(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class as{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new as(this.indexId,this.documentKey,this.arrayValue,r)}}function dc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Km(n.arrayValue,e.arrayValue),0!==t?t:(t=Km(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function Km(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Q_{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=f_(e);if(void 0!==t&&!this.ze(t))return!1;const r=xl(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Rb{constructor(){this.Ye=new Cp}addToCollectionParentIndex(e,t){return this.Ye.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ss.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class Cp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new gn(Jt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new gn(Jt.comparator)).toArray()}}const xh=new Uint8Array(0);class Zm{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Cp,this.Ze=new sc(r=>li(r),(r,o)=>Pl(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ti(o)};return Nb(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[MI(t),""],!1,!0);return Nb(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(yo(d.parent))}return r})}addFieldIndex(e,t){const r=J_(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=Qm(e);return u.next(m=>{d.put(wE(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=J_(e),o=Qm(e),u=Ym(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ym(e);let o=!0;const u=new Map;return re.forEach(this.tn(t),d=>this.en(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Bt();const m=[];return re.forEach(u,(w,C)=>{var S;Oe("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${li(t)}`);const N=function(Lt,Vt){const Pt=f_(Vt);if(void 0===Pt)return null;for(const Ht of bm(Lt,Pt.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(C,w),$=function(Lt,Vt){const Pt=new Map;for(const Ht of xl(Vt))for(const Qr of bm(Lt,Ht.fieldPath))switch(Qr.op){case"==":case"in":Pt.set(Ht.fieldPath.canonicalString(),Qr.value);break;case"not-in":case"!=":return Pt.set(Ht.fieldPath.canonicalString(),Qr.value),Array.from(Pt.values())}return null}(C,w),Y=function(Lt,Vt){const Pt=[];let Ht=!0;for(const Qr of xl(Vt)){const Dw=0===Qr.kind?$I(Lt,Qr.fieldPath,Lt.startAt):HI(Lt,Qr.fieldPath,Lt.startAt);Pt.push(Dw.value),Ht&&(Ht=Dw.inclusive)}return new nc(Pt,Ht)}(C,w),ae=function(Lt,Vt){const Pt=[];let Ht=!0;for(const Qr of xl(Vt)){const Dw=0===Qr.kind?HI(Lt,Qr.fieldPath,Lt.endAt):$I(Lt,Qr.fieldPath,Lt.endAt);Pt.push(Dw.value),Ht&&(Ht=Dw.inclusive)}return new nc(Pt,Ht)}(C,w),Re=this.nn(w,C,Y),Ne=this.nn(w,C,ae),St=this.sn(w,C,$),kt=this.rn(w.indexId,N,Re,Y.inclusive,Ne,ae.inclusive,St);return re.forEach(kt,Lt=>r.J(Lt,t.limit).next(Vt=>{Vt.forEach(Pt=>{const Ht=ze.fromSegments(Pt.documentKey);d.has(Ht)||(d=d.add(Ht),m.push(Ht))})}))}).next(()=>m)}return re.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),S=[];for(let N=0;N<w;++N){const $=t?this.on(t[N/C]):xh,Y=this.un(e,$,r[N%C],o),ae=this.cn(e,$,u[N%C],d),Re=m.map(Ne=>this.un(e,$,Ne,!0));S.push(...this.createRange(Y,ae,Re))}return S}un(e,t,r,o){const u=new as(e,ze.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new as(e,ze.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new Q_(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return re.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new gn(Qn.comparator),w=!1;for(const C of d.filters){const S=C;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:m=m.add(S.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Sh;for(const o of xl(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);Ah.Te.ce(u,d)}return r.$e()}on(e){const t=new Sh;return Ah.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Sh;return Ah.Te.ce(ho(this.databaseId,t),r.qe(function(o){const u=xl(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new Sh);let u=0;for(const d of xl(e)){const m=r[u++];for(const w of o)if(this.ln(t,d.fieldPath)&&yh(m))o=this.fn(o,d,m);else{const C=w.qe(d.kind);Ah.Te.ce(m,C)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new Sh;w.seed(m.$e()),Ah.Te.ce(d,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof fr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=J_(e),o=Qm(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return re.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,S){const N=S?new ph(S.sequenceNumber,new ss(cc(S.readTime),new ze(yo(S.documentKey)),S.largestBatchId)):ph.empty(),$=C.fields.map(([Y,ae])=>new mm(Qn.fromServerFormat(Y),ae));return new gm(C.indexId,C.collectionGroup,$,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=J_(e),u=Qm(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>re.forEach(m,w=>u.put(wE(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?re.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),re.forEach(m,w=>this.wn(e,o,w).next(C=>{const S=this.mn(u,w);return C.isEqual(S)?re.resolve():this.gn(e,u,w,C,S)}))))})}yn(e,t,r,o){return Ym(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return Ym(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=Ym(e);let u=new gn(dc);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{u=u.add(new as(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new gn(dc);const o=this.an(t,e);if(null==o)return r;const u=f_(t);if(null!=u){const d=e.data.field(u.fieldPath);if(yh(d))for(const m of d.arrayValue.values||[])r=r.add(new as(t.indexId,e.key,this.on(m),o))}else r=r.add(new as(t.indexId,e.key,xh,o));return r}gn(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,S,N){const $=m.getIterator(),Y=w.getIterator();let ae=Nl($),Re=Nl(Y);for(;ae||Re;){let Ne=!1,St=!1;if(ae&&Re){const kt=C(ae,Re);kt<0?St=!0:kt>0&&(Ne=!0)}else null!=ae?St=!0:Ne=!0;Ne?(S(Re),Re=Nl(Y)):St?(N(ae),ae=Nl($)):(ae=Nl($),Re=Nl(Y))}}(o,u,dc,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),re.waitFor(d)}_n(e){let t=1;return Qm(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>dc(d,m)).filter((d,m,w)=>!m||0!==dc(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=dc(d,e),w=dc(d,t);if(0===m)o[0]=e.Ke();else if(m>0&&w<0)o.push(d),o.push(d.Ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,xh,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,xh,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(X_)}getMinOffset(e,t){return re.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||tt())).next(X_)}}function Nb(n){return gr(n,"collectionParents")}function Ym(n){return gr(n,"indexEntries")}function J_(n){return gr(n,"indexConfiguration")}function Qm(n){return gr(n,"indexState")}function X_(n){Et(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;ym(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new ss(e.readTime,e.documentKey,t)}const DE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ui{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ui(e,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function CE(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(S,N,$)=>(m++,$.delete()));u.push(w.next(()=>{Et(1===m)}));const C=[];for(const S of t.mutations){const N=H_(e,S.key.path,t.batchId);u.push(o.delete(N)),C.push(S.key)}return re.waitFor(u).next(()=>C)}function Jm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}Ui.DEFAULT_COLLECTION_PERCENTILE=10,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ui.DEFAULT=new Ui(41943040,Ui.DEFAULT_COLLECTION_PERCENTILE,Ui.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ui.DISABLED=new Ui(-1,0,0);class bp{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){Et(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new bp(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qa(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Mh(e),d=qa(e);return d.add({}).next(m=>{Et("number"==typeof m);const w=new $m(m,t,r,o),C=function($,Y,ae){const Re=ae.baseMutations.map(St=>Vm($.re,St)),Ne=ae.mutations.map(St=>Vm($.re,St));return{userId:Y,batchId:ae.batchId,localWriteTimeMs:ae.localWriteTime.toMillis(),baseMutations:Re,mutations:Ne}}(this.It,this.userId,w),S=[];let N=new gn(($,Y)=>xt($.canonicalString(),Y.canonicalString()));for(const $ of o){const Y=H_(this.userId,$.key.path,m);N=N.add($.key.path.popLast()),S.push(d.put(C)),S.push(u.put(Y,dE))}return N.forEach($=>{S.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),re.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return qa(e).get(t).next(r=>r?(Et(r.userId===this.userId),lc(this.It,r)):null)}Tn(e,t){return this.In[t]?re.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return qa(e).Z({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(Et(m.batchId>=r),u=lc(this.It,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return qa(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qa(e).W("userMutationsIndex",t).next(r=>r.map(o=>lc(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Mh(e).Z({range:o},(d,m,w)=>{const[C,S,N]=d,$=yo(S);if(C===this.userId&&t.path.isEqual($))return qa(e).get(N).next(Y=>{if(!Y)throw tt();Et(Y.userId===this.userId),u.push(lc(this.It,Y))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(xt);const o=[];return t.forEach(u=>{const d=jm(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Mh(e).Z({range:m},(C,S,N)=>{const[$,Y,ae]=C,Re=yo(Y);$===this.userId&&u.path.isEqual(Re)?r=r.add(ae):N.done()});o.push(w)}),re.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=jm(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new gn(xt);return Mh(e).Z({range:d},(w,C,S)=>{const[N,$,Y]=w,ae=yo($);N===this.userId&&r.isPrefixOf(ae)?ae.length===o&&(m=m.add(Y)):S.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(qa(e).get(u).next(d=>{if(null===d)throw tt();Et(d.userId===this.userId),r.push(lc(this.It,d))}))}),re.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return CE(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),re.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Mh(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=yo(u[1]);o.push(w)}else m.done()}).next(()=>{Et(0===o.length)})})}containsKey(e,t){return ew(e,this.userId,t)}Rn(e){return bE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ew(n,e,t){const r=jm(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Mh(n).Z({range:u,X:!0},(m,w,C)=>{const[S,N,$]=m;S===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function qa(n){return gr(n,"mutations")}function Mh(n){return gr(n,"documentMutations")}function bE(n){return gr(n,"mutationQueues")}class hc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new hc(0)}static vn(){return new hc(-1)}}class tw{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new hc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Dt.fromTimestamp(new Nn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Tp(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Et(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Tp(e).Z((d,m)=>{const w=Dp(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>re.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Tp(e).Z((r,o)=>{const u=Dp(o);t(u)})}Vn(e){return nw(e).get("targetGlobalKey").next(t=>(Et(null!==t),t))}Sn(e,t){return nw(e).put("targetGlobalKey",t)}Dn(e,t){return Tp(e).put(yE(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=li(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Tp(e).Z({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Dp(m);Pl(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=ea(e);return t.forEach(d=>{const m=Ti(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),re.waitFor(o)}removeMatchingKeys(e,t,r){const o=ea(e);return re.forEach(t,u=>{const d=Ti(u.path);return re.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ea(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=ea(e);let u=Bt();return o.Z({range:r,X:!0},(d,m,w)=>{const C=yo(d[1]),S=new ze(C);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ti(t.path),o=IDBKeyRange.bound([r],[MI(r)],!1,!0);let u=0;return ea(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}se(e,t){return Tp(e).get(t).next(r=>r?Dp(r):null)}}function Tp(n){return gr(n,"targets")}function nw(n){return gr(n,"targetGlobal")}function ea(n){return gr(n,"targetDocuments")}function TE([n,e],[t,r]){const o=xt(n,t);return 0===o?xt(e,r):o}class Ob{constructor(e){this.xn=e,this.buffer=new gn(TE),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();TE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Qo(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Yu(r)}yield t.Fn(3e5)}))}}class kS{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Ci.at);const r=new Ob(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(DE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DE):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,m,w,C;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),fm()<=Ua.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-S}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class kb{constructor(e,t){this.db=e,this.garbageCollector=new kS(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return Xm(e,r)}removeReference(e,t,r){return Xm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Xm(e,t)}Gn(e,t){return function(r,o){let u=!1;return bE(r).tt(d=>ew(r,d,o).next(m=>(m&&(u=!0),re.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Dt.min()),ea(e).delete([0,Ti(d.path)])))});o.push(w)}}).next(()=>re.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Xm(e,t)}Kn(e,t){const r=ea(e);let o,u=Ci.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==Ci.at&&t(new ze(yo(o)),u),u=C,o=w):u=Ci.at}).next(()=>{u!==Ci.at&&t(new ze(yo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xm(n,e){return ea(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ti(e.path),sequenceNumber:r}));var r}class AE{constructor(){this.changes=new sc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PS{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Rh(e).put(r)}removeEntry(e,t,r){return Rh(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Ep(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return Rh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ap(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return Rh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ap(t))},(o,u)=>{r={document:this.jn(t,u),size:Jm(u)}}).next(()=>r)}getEntries(e,t){let r=bi();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=bi(),o=new Jn(ze.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),o=o.insert(u,Jm(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return re.resolve();let o=new gn(Vb);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Ap(o.first()),Ap(o.last())),d=o.getIterator();let m=d.getNext();return Rh(e).Z({index:"documentKeyIndex",range:u},(w,C,S)=>{const N=ze.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Vb(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?S.j(Ap(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Ep(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rh(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=bi();for(const w of d){const C=this.jn(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=bi();const d=Lb(t,r),m=Lb(t,ss.max());return Rh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,S)=>{const N=this.jn(ze.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new FS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Fb(e).get("remoteDocumentGlobalKey").next(t=>(Et(!!t),t))}Qn(e,t){return Fb(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function zm(n,e){let t;if(e.document)t=oE(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),o=cc(e.noDocument.readTime);t=dn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=ze.fromSegments(e.unknownDocument.path),o=cc(e.unknownDocument.version);t=dn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Nn(r[0],r[1]);return Dt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return dn.newInvalidDocument(e)}}function Pb(n){return new PS(n)}class FS extends AE{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new sc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new gn((u,d)=>xt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=Ip(this.Yn.It,d);o=o.add(u.path.popLast()),r+=Jm(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=Ip(this.Yn.It,d.convertToNoDocument(Dt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Fb(n){return gr(n,"remoteDocumentGlobal")}function Rh(n){return gr(n,"remoteDocumentsV14")}function Ap(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Lb(n,e){const t=e.documentKey.path.toArray();return[n,Ep(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Vb(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=xt(t[u],r[u]),o)return o;return o=xt(t.length,r.length),o||(o=xt(t[t.length-2],r[r.length-2]),o||xt(t[t.length-1],r[r.length-1]))}class LS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ub{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&Eh(r.mutation,o,Vi.empty(),Nn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const o=Xo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=mp();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Xo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=bi();const d=Ch(),m=Ch();return t.forEach((w,C)=>{const S=r.get(C.key);o.has(C.key)&&(void 0===S||S.mutation instanceof Ga)?u=u.insert(C.key,C):void 0!==S&&(d.set(C.key,S.mutation.getFieldMask()),Eh(S.mutation,C,S.mutation.getFieldMask(),Nn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,S)=>d.set(C,S)),t.forEach((C,S)=>{var N;return m.set(C,new LS(S,null!==(N=d.get(C))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Ch();let o=new Jn((d,m)=>d-m),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let S=r.get(w)||Vi.empty();S=m.applyToLocalView(C,S),r.set(w,S);const N=(o.get(m.batchId)||Bt()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,S=w.value,N=P_();S.forEach($=>{if(!u.has($)){const Y=km(t.get($),r.get($));null!==Y&&N.set($,Y),u=u.add($)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,N))}return re.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):xm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):re.resolve(Xo());let m=-1,w=u;return d.next(C=>re.forEach(C,(S,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(S)?re.resolve():this.getBaseDocument(e,S,N).next($=>{w=w.insert(S,$)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,Bt())).next(S=>({batchId:m,changes:k_(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let o=mp();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=mp();return this.indexManager.getCollectionParents(e,o).next(d=>re.forEach(d,m=>{const w=(C=t,S=m.child(o),new fo(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const C=w.getKey();null===o.get(C)&&(o=o.insert(C,dn.newInvalidDocument(C)))});let d=mp();return o.forEach((m,w)=>{const C=u.get(m);void 0!==C&&Eh(C.mutation,w,Vi.empty(),Nn.now()),Rm(t,w)&&(d=d.insert(m,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):re.resolve(dn.newInvalidDocument(t))}}class VS{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Yr(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:vE(r.bundledQuery),readTime:Yr(r.readTime)}),re.resolve();var r}}class US{constructor(){this.overlays=new Jn(ze.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xo();return re.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const o=Xo(),u=t.length+1,d=new ze(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Jn((C,S)=>C-S);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let S=u.get(C.largestBatchId);null===S&&(S=Xo(),u=u.insert(C.largestBatchId,S)),S.set(C.getKey(),C)}}const m=Xo(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,S)=>m.set(C,S)),!(m.size()>=o)););return re.resolve(m)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Gm(t,r));let u=this.es.get(t);void 0===u&&(u=Bt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class i{constructor(){this.ns=new gn(s.ss),this.rs=new gn(s.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new s(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new s(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ze(new Jt([])),r=new s(t,e),o=new s(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ze(new Jt([])),r=new s(t,e),o=new s(t,e+1);let u=Bt();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new s(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class s{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ze.comparator(e.key,t.key)||xt(e._s,t._s)}static os(e,t){return xt(e._s,t._s)||ze.comparator(e.key,t.key)}}class a{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new gn(s.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new $m(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.gs=this.gs.add(new s(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(d)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new s(t,0),o=new s(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const m=this.ys(d._s);u.push(m)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(xt);return t.forEach(o=>{const u=new s(o,0),d=new s(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),re.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const d=new s(new ze(u),0);let m=new gn(xt);return this.gs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w._s)),!0)},d),re.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Et(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return re.forEach(t.mutations,o=>{const u=new s(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new s(t,0),o=this.gs.firstAfterOrEqual(r);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class c{constructor(e){this.Es=e,this.docs=new Jn(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():dn.newInvalidDocument(o))}),re.resolve(r)}getAllFromCollection(e,t,r){let o=bi();const u=new ze(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||ym(NI(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}As(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new l(this)}getSize(e){return re.resolve(this.size)}}class l extends AE{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class f{constructor(e){this.persistence=e,this.Rs=new sc(t=>li(t),Pl),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new i,this.targetCount=0,this.vs=hc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new hc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),re.waitFor(u).next(()=>o)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class v{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ci(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new f(this),this.indexManager=new Rb,this.remoteDocumentCache=new c(r=>this.referenceDelegate.xs(r)),this.It=new K_(t),this.Ns=new VS(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new US,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new a(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new I(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return re.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class I extends kI{constructor(e){super(),this.currentSequenceNumber=e}}class E{constructor(e){this.persistence=e,this.Fs=new i,this.$s=null}static Bs(e){return new E(e)}get Ls(){if(this.$s)return this.$s;throw tt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,r=>{const o=ze.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,Dt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class T{constructor(e){this.It=e}$(e,t,r,o){const u=new ip("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$_,{unique:!0}),m.createObjectStore("documentMutations"),M(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=re.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),M(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$_,{unique:!0});const S=w.store("mutations"),N=C.map($=>S.put($));return re.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:Cb});w.createIndex("collectionPathOverlayIndex",bb,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",Tb,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:wb});w.createIndex("documentKeyIndex",hE),w.createIndex("collectionGroupIndex",Ib)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:za}).createIndex("sequenceNumberIndex",Eb,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:MS}).createIndex("documentKeyIndex",Db,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=Jm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>re.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>re.forEach(m,w=>{Et(w.userId===u.userId);const C=lc(this.It,w);return CE(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,m)=>{const w=new Jt(d),C=[0,Ti(w)];u.push(t.get(C).next(S=>S?re.resolve():t.put({targetId:0,path:Ti(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:z_});const r=t.store("collectionParents"),o=new Cp,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:Ti(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new Jt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],C)=>{const S=yo(m);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Dp(o),d=yE(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new ze(Jt.fromString(C.document.name).popFirst(5)):C.noDocument?ze.fromSegments(C.noDocument.path):C.unknownDocument?ze.fromSegments(C.unknownDocument.path):tt()).path.toArray();var C;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(S))}).next(()=>re.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=Pb(this.It),u=new v(E.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var C;let S=null!==(C=m.get(w.userId))&&void 0!==C?C:Bt();lc(this.It,w).keys().forEach(N=>S=S.add(N)),m.set(w.userId,S)}),re.forEach(m,(w,C)=>{const S=new Kr(C),N=Y_.oe(this.It,S),$=u.getIndexManager(S),Y=bp.oe(S,this.It,$,u.referenceDelegate);return new Ub(o,Y,N,$).recalculateAndSaveOverlaysForDocumentKeys(new mE(t,Ci.at),w).next()})})}}function M(n){n.createObjectStore("targetDocuments",{keyPath:uc}).createIndex("documentTargetsIndex",fE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",G_,{unique:!0}),n.createObjectStore("targetGlobal")}const k="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class H{constructor(e,t,r,o,u,d,m,w,C,S,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=C,this.Ys=S,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$=>Promise.resolve(),!H.C())throw new xe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kb(this,o),this.ii=t+"main",this.It=new K_(w),this.ri=new os(this.ii,this.Xs,new T(this.It)),this.Cs=new tw(this.referenceDelegate,this.It),this.remoteDocumentCache=Pb(this.It),this.Ns=new Ab,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,k);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ci(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>me(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Qo(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return J(e).get("owner").next(t=>re.resolve(this.mi(t)))}gi(e){return me(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=gr(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return re.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?re.resolve(!0):J(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,k);return!1}}return!(!this.networkEnabled||!this.inForeground)||me(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new mE(t,Ci.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>me(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return bp.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Zm(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Y_.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?gE:14===d?pE:13===d?q_:12===d?RS:11===d?W_:void tt();var d;let m;return this.ri.runTransaction(e,o,u,w=>(m=new mE(w,this.Ss?this.Ss.next():Ci.at),"readwrite-primary"===t?this.fi(m).next(C=>!!C||this.di(m)).next(C=>{if(!C)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xe(ce.FAILED_PRECONDITION,OI);return r(m)}).next(C=>this.wi(m).next(()=>C)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return J(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ce.FAILED_PRECONDITION,k)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return J(e).put("owner",t)}static C(){return os.C()}_i(e){const t=J(e);return t.get("owner").next(r=>this.mi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,an.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function J(n){return gr(n,"owner")}function me(n){return gr(n,"clientMetadata")}function Pe(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class He{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Bt(),o=Bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new He(e,t.fromCache,r,o)}}class nt{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(WI(t))return re.resolve(null);let r=di(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Mm(t,null,"F"),r=di(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Bt(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Fi(t,m);return this.$i(t,C,d,w.readTime)?this.ki(e,Mm(t,null,"F")):this.Bi(e,C,t,w)}))})))}Oi(e,t,r,o){return WI(t)||o.isEqual(Dt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Mi(e,t):(fm()<=Ua.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),T_(t)),this.Bi(e,d,t,p_(o,-1)))})}Fi(e,t){let r=new gn(qI(e));return t.forEach((o,u)=>{Rm(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return fm()<=Ua.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",T_(t)),this.Ni.getDocumentsMatchingQuery(e,t,ss.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class pt{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new Jn(xt),this.qi=new sc(u=>li(u),Pl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ub(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Te(n,e,t,r){return new pt(n,e,t,r)}function wt(n,e){return nn.apply(this,arguments)}function nn(){return nn=(0,ye.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Bt();for(const C of o){d.push(C.batchId);for(const S of C.mutations)w=w.add(S.key)}for(const C of u){m.push(C.batchId);for(const S of C.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(C=>({ji:C,removedBatchIds:d,addedBatchIds:m}))})})}),nn.apply(this,arguments)}function On(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const S=w.batch,N=S.keys();let $=re.resolve();return N.forEach(Y=>{$=$.next(()=>C.getEntry(m,Y)).next(ae=>{const Re=w.docVersions.get(Y);Et(null!==Re),ae.version.compareTo(Re)<0&&(S.applyToRemoteDocument(ae,w),ae.isValidDocument()&&(ae.setReadTime(w.commitVersion),C.addEntry(ae)))})}),$.next(()=>d.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Bt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function fc(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function rw(n,e){const t=We(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const m=[];e.targetChanges.forEach((S,N)=>{const $=o.get(N);if(!$)return;m.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,N)));let Y=$.withSequenceNumber(u.currentSequenceNumber);var ae,Re,Ne;e.targetMismatches.has(N)?Y=Y.withResumeToken(Cr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):S.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(S.resumeToken,r)),o=o.insert(N,Y),Re=Y,Ne=S,(0===(ae=$).resumeToken.approximateByteSize()||Re.snapshotVersion.toMicroseconds()-ae.snapshotVersion.toMicroseconds()>=3e8||Ne.addedDocuments.size+Ne.modifiedDocuments.size+Ne.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,Y))});let w=bi(),C=Bt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(ey(u,d,e.documentUpdates).next(S=>{w=S.Wi,C=S.zi})),!r.isEqual(Dt.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return re.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Ui=o,u))}function ey(n,e,t){let r=Bt(),o=Bt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=bi();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(Dt.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Oe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{Wi:d,zi:o}})}function iw(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pc(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,re.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new Wa(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function gc(n,e,t){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,ye.Z)(function*(n,e,t){const r=We(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Qo(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),Sp.apply(this,arguments)}function Nh(n,e,t){const r=We(n);let o=Dt.min(),u=Bt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const S=We(m),N=S.qi.get(C);return void 0!==N?re.resolve(S.Ui.get(N)):S.Cs.getTargetData(w,C)}(r,d,di(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:Dt.min(),t?u:Bt())).next(m=>(BS(r,A_(e),m),{documents:m,Hi:u})))}function ty(n,e){const t=We(n),r=We(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function ny(n,e){const t=We(n),r=t.Ki.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,p_(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(BS(t,e,o),o))}function BS(n,e,t){let r=n.Ki.get(e)||Dt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function Bb(){return Bb=(0,ye.Z)(function*(n,e,t,r){const o=We(n);let u=Bt(),d=bi();for(const C of t){const S=e.Ji(C.metadata.name);C.document&&(u=u.add(S));const N=e.Yi(C);N.setReadTime(e.Xi(C.metadata.readTime)),d=d.insert(S,N)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield pc(o,(C=r,di(vh(Jt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>ey(C,m,d).next(S=>(m.apply(C),S)).next(S=>o.Cs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.Cs.addMatchingKeys(C,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,S.Wi,S.zi)).next(()=>S.Wi)))}),Bb.apply(this,arguments)}function bR(n,e){return jb.apply(this,arguments)}function jb(){return jb=(0,ye.Z)(function*(n,e,t=Bt()){const r=yield pc(n,di(vE(e.bundledQuery))),o=We(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Yr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Cr.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),jb.apply(this,arguments)}function jS(n,e){return`firestore_clients_${n}_${e}`}function $S(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function $b(n,e){return`firestore_targets_${n}_${e}`}class SE{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new SE(e,t,o.state,u):(sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new sw(e,r.state,o):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=F_();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=FI(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new xE(e,u):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Hb{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Hb(t.clientId,t.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Gb{constructor(){this.activeTargetIds=F_()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zb{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Jn(xt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=jS(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Gb),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(jS(e.persistenceKey,o));if(u){const d=xE.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem($b(this.persistenceKey,e));if(r){const o=sw.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($b(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=Ci.at;if(null!=u)try{const m=JSON.parse(u);Et("number"==typeof m),d=m}catch(m){sr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Ci.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new SE(this.currentUser,e,t,r),u=$S(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=$S(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=$b(this.persistenceKey,e),u=new sw(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return xE.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return SE.Zi(new Kr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return sw.Zi(o,t)}yr(e){return Hb.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=F_();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class HS{constructor(){this.Lr=new Gb,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Gb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class TR{qr(e){}shutdown(){}}class GS{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const AR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SR{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class xR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const d=this.ho(e,t);Oe("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(Oe("RestConnection","Received: ",w),w),w=>{throw Zu("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u,d){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+tp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${AR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new UC;m.setWithCredentials(!0),m.listenOnce(wI.COMPLETE,()=>{var C;try{switch(m.getLastErrorCode()){case dm.NO_ERROR:const S=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(S)),u(S);break;case dm.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),d(new xe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case dm.HTTP_ERROR:const N=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',N,"response text:",m.getResponseText()),N>0){let $=m.getResponseJson();Array.isArray($)&&($=$[0]);const Y=null===(C=$)||void 0===C?void 0:C.error;if(Y&&Y.status&&Y.message){const ae=function(Re){const Ne=Re.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Ne)>=0?Ne:ce.UNKNOWN}(Y.status);d(new xe(ae,Y.message))}else d(new xe(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ce.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=LC(),d=VC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new DI({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Oe("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let S=!1,N=!1;const $=new SR({Hr:ae=>{N?Oe("Connection","Not sending because WebChannel is closed:",ae):(S||(Oe("Connection","Opening WebChannel transport."),C.open(),S=!0),Oe("Connection","WebChannel sending:",ae),C.send(ae))},Jr:()=>C.close()}),Y=(ae,Re,Ne)=>{ae.listen(Re,St=>{try{Ne(St)}catch(kt){setTimeout(()=>{throw kt},0)}})};return Y(C,hm.EventType.OPEN,()=>{N||Oe("Connection","WebChannel transport opened.")}),Y(C,hm.EventType.CLOSE,()=>{N||(N=!0,Oe("Connection","WebChannel transport closed"),$.io())}),Y(C,hm.EventType.ERROR,ae=>{N||(N=!0,Zu("Connection","WebChannel transport errored:",ae),$.io(new xe(ce.UNAVAILABLE,"The operation could not be completed")))}),Y(C,hm.EventType.MESSAGE,ae=>{var Re;if(!N){const Ne=ae.data[0];Et(!!Ne);const St=Ne,kt=St.error||(null===(Re=St[0])||void 0===Re?void 0:Re.error);if(kt){Oe("Connection","WebChannel received error:",kt);const Lt=kt.status;let Vt=function(Ht){const Qr=pr[Ht];if(void 0!==Qr)return O_(Qr)}(Lt),Pt=kt.message;void 0===Vt&&(Vt=ce.INTERNAL,Pt="Unknown error status: "+Lt+" with message "+kt.message),N=!0,$.io(new xe(Vt,Pt)),C.close()}else Oe("Connection","WebChannel received:",Ne),$.ro(Ne)}}),Y(d,II.STAT_EVENT,ae=>{ae.stat===EI.PROXY?Oe("Connection","Detected buffering proxy"):ae.stat===EI.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.so()},0),$}}function zS(){return typeof window<"u"?window:null}function ME(){return typeof document<"u"?document:null}function ow(n){return new nE(n,!0)}class Wb{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class WS{constructor(e,t,r,o,u,d,m,w){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Wb(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ye.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new xe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MR extends WS{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function SS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),o=e.targetChange.targetIds||[],u=function(w,C){return w.gt?(Et(void 0===C||"string"==typeof C),Cr.fromBase64String(C||"")):(Et(void 0===C||C instanceof Uint8Array),Cr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?ce.UNKNOWN:O_(w.code);return new xe(C,w.message||"")}(d);t=new db(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=go(n,r.document.name),u=Yr(r.document.updateTime),d=new Zr({mapValue:{fields:r.document.fields}}),m=dn.newFoundDocument(o,u,d);t=new L_(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=go(n,r.document),u=r.readTime?Yr(r.readTime):Dt.min(),d=dn.newNoDocument(o,u);t=new L_([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=go(n,r.document);t=new L_([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new ub(r.count||0);t=new lb(r.targetId,u)}}var w;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return Dt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?Yr(u.readTime):Dt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=_p(this.It),t.addTarget=function(o,u){let d;const m=u.target;return d=tc(m)?{documents:aE(o,m)}:{query:uE(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=V_(o,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(d.readTime=oc(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function lE(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=_p(this.It),t.removeTarget=e,this.Bo(t)}}class RR extends WS{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function mb(n,e){return n&&n.length>0?(Et(void 0!==e),n.map(t=>function(r,o){let u=Yr(r.updateTime?r.updateTime:o);return u.isEqual(Dt.min())&&(u=Yr(o)),new x_(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.Zo(r,t)}return Et(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=_p(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Vm(this.It,r))};this.Bo(t)}}class NR extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ce.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection._o(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class kR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(sr(t),this.ou=!1):Oe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class PR{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var w;jl(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ye.Z)(function*(C){const S=We(C);S._u.add(4),yield ry(S),S.gu.set("Unknown"),S._u.delete(4),yield aw(S)}),function(C){return w.apply(this,arguments)})(d))}))}),this.gu=new kR(r,o)}}function aw(n){return Kb.apply(this,arguments)}function Kb(){return Kb=(0,ye.Z)(function*(n){if(jl(n))for(const e of n.wu)yield e(!0)}),Kb.apply(this,arguments)}function ry(n){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,ye.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Zb.apply(this,arguments)}function RE(n,e){const t=We(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Jb(t)?Qb(t):sy(t).ko()&&Yb(t,e))}function uw(n,e){const t=We(n),r=sy(t);t.du.delete(e),r.ko()&&qS(t,e),0===t.du.size&&(r.ko()?r.Fo():jl(t)&&t.gu.set("Unknown"))}function Yb(n,e){n.yu.Mt(e.targetId),sy(n).zo(e)}function qS(n,e){n.yu.Mt(e),sy(n).Ho(e)}function Qb(n){n.yu=new bS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),sy(n).start(),n.gu.uu()}function Jb(n){return jl(n)&&!sy(n).No()&&n.du.size>0}function jl(n){return 0===We(n)._u.size}function KS(n){n.yu=void 0}function FR(n){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,ye.Z)(function*(n){n.du.forEach((e,t)=>{Yb(n,e)})}),Xb.apply(this,arguments)}function LR(n,e){return eT.apply(this,arguments)}function eT(){return eT=(0,ye.Z)(function*(n,e){KS(n),Jb(n)?(n.gu.hu(e),Qb(n)):n.gu.set("Unknown")}),eT.apply(this,arguments)}function VR(n,e,t){return tT.apply(this,arguments)}function tT(){return tT=(0,ye.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof db&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield NE(n,r)}else if(e instanceof L_?n.yu.Gt(e):e instanceof lb?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Dt.min()))try{const r=yield fc(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.te(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.du.get(w);C&&o.du.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(Cr.EMPTY_BYTE_STRING,w.snapshotVersion)),qS(o,m);const C=new Wa(w.target,m,1,w.sequenceNumber);Yb(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield NE(n,r)}var r}),tT.apply(this,arguments)}function NE(n,e,t){return nT.apply(this,arguments)}function nT(){return nT=(0,ye.Z)(function*(n,e,t){if(!Qo(e))throw e;n._u.add(1),yield ry(n),n.gu.set("Offline"),t||(t=()=>fc(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield aw(n)}))}),nT.apply(this,arguments)}function ZS(n,e){return e().catch(t=>NE(n,t,e))}function iy(n){return rT.apply(this,arguments)}function rT(){return rT=(0,ye.Z)(function*(n){const e=We(n),t=Oh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;UR(e);)try{const o=yield iw(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,BR(e,o)}catch(o){yield NE(e,o)}YS(e)&&QS(e)}),rT.apply(this,arguments)}function UR(n){return jl(n)&&n.fu.length<10}function BR(n,e){n.fu.push(e);const t=Oh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function YS(n){return jl(n)&&!Oh(n).No()&&n.fu.length>0}function QS(n){Oh(n).start()}function jR(n){return iT.apply(this,arguments)}function iT(){return iT=(0,ye.Z)(function*(n){Oh(n).eu()}),iT.apply(this,arguments)}function $R(n){return sT.apply(this,arguments)}function sT(){return sT=(0,ye.Z)(function*(n){const e=Oh(n);for(const t of n.fu)e.Xo(t.mutations)}),sT.apply(this,arguments)}function HR(n,e,t){return oT.apply(this,arguments)}function oT(){return oT=(0,ye.Z)(function*(n,e,t){const r=n.fu.shift(),o=Hm.from(r,e,t);yield ZS(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield iy(n)}),oT.apply(this,arguments)}function GR(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,ye.Z)(function*(n,e){var t;e&&Oh(n).Yo&&(yield(t=(0,ye.Z)(function*(r,o){if(N_(u=o.code)&&u!==ce.ABORTED){const d=r.fu.shift();Oh(r).Mo(),yield ZS(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield iy(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),YS(n)&&QS(n)}),aT.apply(this,arguments)}function JS(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,ye.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=jl(t);t._u.add(3),yield ry(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield aw(t)}),uT.apply(this,arguments)}function cT(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,ye.Z)(function*(n,e){const t=We(n);e?(t._u.delete(2),yield aw(t)):e||(t._u.add(2),yield ry(t),t.gu.set("Unknown"))}),lT.apply(this,arguments)}function sy(n){return n.pu||(n.pu=function(e,t,r){const o=We(e);return o.su(),new MR(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:FR.bind(null,n),Zr:LR.bind(null,n),Wo:VR.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.pu.Mo(),Jb(n)?Qb(n):n.gu.set("Unknown")):(yield n.pu.stop(),KS(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Oh(n){return n.Iu||(n.Iu=function(e,t,r){const o=We(e);return o.su(),new RR(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:jR.bind(null,n),Zr:GR.bind(null,n),tu:$R.bind(null,n),Zo:HR.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Mo(),yield iy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class dT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new dT(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oy(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Qo(n))return new xe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class ay{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=mp(),this.sortedSet=new Jn(this.comparator)}static emptySet(e){return new ay(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ay)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ay;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class XS{constructor(){this.Tu=new Jn(ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):tt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class uy{constructor(e,t,r,o,u,d,m,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new uy(e,t,ay.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class zR{constructor(){this.Au=void 0,this.listeners=[]}}class WR{constructor(){this.queries=new sc(e=>b_(e),_h),this.onlineState="Unknown",this.Ru=new Set}}function hT(n,e){return fT.apply(this,arguments)}function fT(){return fT=(0,ye.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new zR),o)try{u.Au=yield t.onListen(r)}catch(d){const m=oy(d,`Initialization of query '${T_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&mT(t)}),fT.apply(this,arguments)}function pT(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,ye.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),gT.apply(this,arguments)}function qR(n,e){const t=We(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Pu(o)&&(r=!0);d.Au=o}}r&&mT(t)}function KR(n,e,t){const r=We(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function mT(n){n.Ru.forEach(e=>{e.next()})}class yT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new uy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=uy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class ZR{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class ex{constructor(e){this.It=e}Ji(e){return go(this.It,e)}Yi(e){return e.metadata.exists?oE(this.It,e.document,!1):dn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Yr(e)}}class YR{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tx(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Jt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new ex(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Bt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function CR(n,e,t,r){return Bb.apply(this,arguments)}(e.localStore,new ex(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield bR(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function tx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class nx{constructor(e){this.key=e}}class rx{constructor(e){this.key=e}}class ix{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Bt(),this.mutatedKeys=Bt(),this.Gu=qI(e),this.Qu=new ay(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new XS,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,N)=>{const $=o.get(S),Y=Rm(this.query,N)?N:null,ae=!!$&&this.mutatedKeys.has($.key),Re=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let Ne=!1;$&&Y?$.data.isEqual(Y.data)?ae!==Re&&(r.track({type:3,doc:Y}),Ne=!0):this.Hu($,Y)||(r.track({type:2,doc:Y}),Ne=!0,(w&&this.Gu(Y,w)>0||C&&this.Gu(Y,C)<0)&&(m=!0)):!$&&Y?(r.track({type:0,doc:Y}),Ne=!0):$&&!Y&&(r.track({type:1,doc:$}),Ne=!0,(w||C)&&(m=!0)),Ne&&(Y?(d=d.add(Y),u=Re?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:d,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((C,S)=>function(N,$){const Y=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return Y(N)-Y($)}(C.type,S.type)||this.Gu(C.doc,S.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new uy(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new XS,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Bt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new rx(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new nx(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Bt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return uy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class QR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JR{constructor(e){this.key=e,this.nc=!1}}class XR{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new sc(m=>b_(m),_h),this.rc=new Map,this.oc=new Set,this.uc=new Jn(ze.comparator),this.cc=new Map,this.ac=new i,this.hc={},this.lc=new Map,this.fc=hc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function eN(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,ye.Z)(function*(n,e){const t=jT(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const d=yield pc(t.localStore,di(e));t.isPrimaryClient&&RE(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield _T(t,e,r,"current"===m,d.resumeToken)}return o}),vT.apply(this,arguments)}function _T(n,e,t,r,o){return wT.apply(this,arguments)}function wT(){return wT=(0,ye.Z)(function*(n,e,t,r,o){n._c=(N,$,Y)=>{return(ae=(0,ye.Z)(function*(Re,Ne,St,kt){let Lt=Ne.view.Wu(St);Lt.$i&&(Lt=yield Nh(Re.localStore,Ne.query,!1).then(({documents:Ht})=>Ne.view.Wu(Ht,Lt)));const Vt=kt&&kt.targetChanges.get(Ne.targetId),Pt=Ne.view.applyChanges(Lt,Re.isPrimaryClient,Vt);return MT(Re,Ne.targetId,Pt.Xu),Pt.snapshot}),function(Re,Ne,St,kt){return ae.apply(this,arguments)})(n,N,$,Y);var ae};const u=yield Nh(n.localStore,e,!0),d=new ix(e,u.Hi),m=d.Wu(u.documents),w=Fm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=d.applyChanges(m,n.isPrimaryClient,w);MT(n,t,C.Xu);const S=new QR(e,t,d);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),wT.apply(this,arguments)}function tN(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,ye.Z)(function*(n,e){const t=We(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!_h(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield gc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),uw(t.remoteStore,r.targetId),cy(t,r.targetId)}).catch(Yu))):(cy(t,r.targetId),yield gc(t.localStore,r.targetId,!0))}),IT.apply(this,arguments)}function ET(){return ET=(0,ye.Z)(function*(n,e,t){const r=$T(n);try{const o=yield function(u,d){const m=We(u),w=Nn.now(),C=d.reduce(($,Y)=>$.add(Y.key),Bt());let S,N;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Y=bi(),ae=Bt();return m.Gi.getEntries($,C).next(Re=>{Y=Re,Y.forEach((Ne,St)=>{St.isValidDocument()||(ae=ae.add(Ne))})}).next(()=>m.localDocuments.getOverlayedDocuments($,Y)).next(Re=>{S=Re;const Ne=[];for(const St of d){const kt=ob(St,S.get(St.key).overlayedDocument);null!=kt&&Ne.push(new Ga(St.key,kt,jI(kt.value.mapValue),xn.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,Ne,d)}).next(Re=>{N=Re;const Ne=Re.applyToLocalDocumentSet(S,ae);return m.documentOverlayCache.saveOverlays($,Re.batchId,Ne)})}).then(()=>({batchId:N.batchId,changes:k_(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.hc[u.currentUser.toKey()];w||(w=new Jn(xt)),w=w.insert(d,m),u.hc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield $l(r,o.changes),yield iy(r.remoteStore)}catch(o){const u=oy(o,"Failed to persist write");t.reject(u)}}),ET.apply(this,arguments)}function sx(n,e){return DT.apply(this,arguments)}function DT(){return DT=(0,ye.Z)(function*(n,e){const t=We(n);try{const r=yield rw(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.cc.get(u);d&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.nc=!0:o.modifiedDocuments.size>0?Et(d.nc):o.removedDocuments.size>0&&(Et(d.nc),d.nc=!1))}),yield $l(t,r,e)}catch(r){yield Yu(r)}}),DT.apply(this,arguments)}function ox(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=We(u);m.onlineState=d;let w=!1;m.queries.forEach((C,S)=>{for(const N of S.listeners)N.bu(d)&&(w=!0)}),w&&mT(m)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rN(n,e,t){return CT.apply(this,arguments)}function CT(){return CT=(0,ye.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let d=new Jn(ze.comparator);d=d.insert(u,dn.newNoDocument(u,Dt.min()));const m=Bt().add(u),w=new bh(Dt.min(),new Map,new gn(xt),d,m);yield sx(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),RT(r)}else yield gc(r.localStore,e,!1).then(()=>cy(r,e,t)).catch(Yu)}),CT.apply(this,arguments)}function iN(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,ye.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const o=yield On(t.localStore,e);xT(t,r,null),ST(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $l(t,o)}catch(o){yield Yu(o)}}),bT.apply(this,arguments)}function sN(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,ye.Z)(function*(n,e,t){const r=We(n);try{const o=yield function(u,d){const m=We(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,d).next(S=>(Et(null!==S),C=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);xT(r,e,t),ST(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $l(r,o)}catch(o){yield Yu(o)}}),TT.apply(this,arguments)}function AT(){return AT=(0,ye.Z)(function*(n,e){const t=We(n);jl(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=We(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=oy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),AT.apply(this,arguments)}function ST(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function xT(n,e,t){const r=We(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function cy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||ax(n,r)})}function ax(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(uw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),RT(n))}function MT(n,e,t){for(const r of t)r instanceof nx?(n.ac.addReference(r.key,e),aN(n,r)):r instanceof rx?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||ax(n,r.key)):tt()}function aN(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oc.add(r),RT(n))}function RT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ze(Jt.fromString(e)),r=n.fc.next();n.cc.set(r,new JR(t)),n.uc=n.uc.insert(t,r),RE(n.remoteStore,new Wa(di(vh(t.path)),r,2,Ci.at))}}function $l(n,e,t){return NT.apply(this,arguments)}function NT(){return NT=(0,ye.Z)(function*(n,e,t){const r=We(n),o=[],u=[],d=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{d.push(r._c(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const S=He.Ci(w.targetId,C);u.push(S)}}))}),yield Promise.all(d),r.sc.Wo(o),yield(m=(0,ye.Z)(function*(w,C){const S=We(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>re.forEach(C,$=>re.forEach($.Si,Y=>S.persistence.referenceDelegate.addReference(N,$.targetId,Y)).next(()=>re.forEach($.Di,Y=>S.persistence.referenceDelegate.removeReference(N,$.targetId,Y)))))}catch(N){if(!Qo(N))throw N;Oe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const $=N.targetId;if(!N.fromCache){const Y=S.Ui.get($),Re=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);S.Ui=S.Ui.insert($,Re)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),NT.apply(this,arguments)}function uN(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ye.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield wt(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(d=>{d.forEach(m=>{m.reject(new xe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $l(t,r.ji)}var o}),OT.apply(this,arguments)}function cN(n,e){const t=We(n),r=t.cc.get(e);if(r&&r.nc)return Bt().add(r.key);{let o=Bt();const u=t.rc.get(e);if(!u)return o;for(const d of u){const m=t.ic.get(d);o=o.unionWith(m.view.ju)}return o}}function lN(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,ye.Z)(function*(n,e){const t=We(n),r=yield Nh(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&MT(t,e.targetId,o.Xu),o}),kT.apply(this,arguments)}function dN(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,ye.Z)(function*(n,e){const t=We(n);return ny(t.localStore,e).then(r=>$l(t,r))}),PT.apply(this,arguments)}function hN(n,e,t,r){return FT.apply(this,arguments)}function FT(){return FT=(0,ye.Z)(function*(n,e,t,r){const o=We(n),u=yield function(d,m){const w=We(d),C=We(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>C.Tn(S,m).next(N=>N?w.localDocuments.getDocuments(S,N):re.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield iy(o.remoteStore):"acknowledged"===t||"rejected"===t?(xT(o,e,r||null),ST(o,e),m=e,We(We(o.localStore).mutationQueue).An(m)):tt(),yield $l(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),FT.apply(this,arguments)}function LT(){return LT=(0,ye.Z)(function*(n,e){const t=We(n);if(jT(t),$T(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield ux(t,r.toArray());t.dc=!0,yield cT(t.remoteStore,!0);for(const u of o)RE(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(cy(t,d),gc(t.localStore,d,!0))),uw(t.remoteStore,d)}),yield o,yield ux(t,r),function(u){const d=We(u);d.cc.forEach((m,w)=>{uw(d.remoteStore,w)}),d.ac.fs(),d.cc=new Map,d.uc=new Jn(ze.comparator)}(t),t.dc=!1,yield cT(t.remoteStore,!1)}}),LT.apply(this,arguments)}function ux(n,e,t){return VT.apply(this,arguments)}function VT(){return VT=(0,ye.Z)(function*(n,e,t){const r=We(n),o=[],u=[];for(const d of e){let m;const w=r.rc.get(d);if(w&&0!==w.length){m=yield pc(r.localStore,di(w[0]));for(const C of w){const S=r.ic.get(C),N=yield lN(r,S);N.snapshot&&u.push(N.snapshot)}}else{const C=yield ty(r.localStore,d);m=yield pc(r.localStore,C),yield _T(r,cx(C),d,!1,m.resumeToken)}o.push(m)}return r.sc.Wo(u),o}),VT.apply(this,arguments)}function cx(n){return Sm(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pN(n){const e=We(n);return We(We(e.localStore).persistence).vi()}function gN(n,e,t,r){return UT.apply(this,arguments)}function UT(){return UT=(0,ye.Z)(function*(n,e,t,r){const o=We(n);if(o.dc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield ny(o.localStore,A_(u[0])),m=bh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Cr.EMPTY_BYTE_STRING);yield $l(o,d,m);break}case"rejected":yield gc(o.localStore,e,!0),cy(o,e,r);break;default:tt()}}),UT.apply(this,arguments)}function mN(n,e,t){return BT.apply(this,arguments)}function BT(){return BT=(0,ye.Z)(function*(n,e,t){const r=jT(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield ty(r.localStore,o),d=yield pc(r.localStore,u);yield _T(r,cx(u),d.targetId,!1,d.resumeToken),RE(r.remoteStore,d)}for(const o of t)r.rc.has(o)&&(yield gc(r.localStore,o,!1).then(()=>{uw(r.remoteStore,o),cy(r,o)}).catch(Yu))}}),BT.apply(this,arguments)}function jT(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rN.bind(null,e),e.sc.Wo=qR.bind(null,e.eventManager),e.sc.wc=KR.bind(null,e.eventManager),e}function $T(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sN.bind(null,e),e}class lx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.It=ow(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Te(this.persistence,new nt,e.initialUser,this.It)}yc(e){return new v(E.Bs,this.It)}gc(e){return new HS}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class dx extends lx{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield $T(r.Ac.syncEngine),yield iy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Te(this.persistence,new nt,e.initialUser,this.It)}Tc(e,t){return new OS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new wS(t,this.persistence);return new KC(e.asyncQueue,r)}yc(e){const t=Pe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ui.withCacheSize(this.cacheSizeBytes):Ui.DEFAULT;return new H(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,zS(),ME(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new HS}}class vN extends dx{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof zb&&(r.sharedClientState.syncEngine={Fr:hN.bind(null,o),$r:gN.bind(null,o),Br:mN.bind(null,o),vi:pN.bind(null,o),Mr:dN.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ye.Z)(function*(d){yield function fN(n,e){return LT.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=zS();if(!zb.C(t))throw new xe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Pe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new zb(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class HT{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>ox(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=uN.bind(null,r.syncEngine),yield cT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new WR}createDatastore(e){const t=ow(e.databaseInfo.databaseId),r=new xR(e.databaseInfo);return new NR(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>ox(this.syncEngine,m,0),d=GS.C()?new GS:new TR,new PR(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const S=new XR(r,o,u,d,m,w);return C&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=We(t);Oe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield ry(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function GT(n,e,t){if(!t)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hx(n,e,t,r){if(!0===e&&!0===r)throw new xe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fx(n){if(!ze.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function px(n){if(ze.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function OE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=OE(n);throw new xe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function gx(n,e){if(e<=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const mx=new Map;class yx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cw{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new np;switch(t.type){case"gapi":return new TI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mx.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),mx.delete(e),t.terminate())}(this),Promise.resolve()}}class Bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bn(this.firestore,e,this._key)}}class Bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class mc extends Bi{constructor(e,t,r){super(e,t,vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bn(this.firestore,null,new ze(e))}withConverter(e){return new mc(this.firestore,e,this._path)}}function _x(n,e,...t){if(n=(0,an.m9)(n),GT("collection","path",e),n instanceof cw){const r=Jt.fromString(e,...t);return px(r),new mc(n,null,r)}{if(!(n instanceof Bn||n instanceof mc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return px(r),new mc(n.firestore,null,r)}}function kE(n,e,...t){if(n=(0,an.m9)(n),1===arguments.length&&(e=xI.R()),GT("doc","path",e),n instanceof cw){const r=Jt.fromString(e,...t);return fx(r),new Bn(n,null,new ze(r))}{if(!(n instanceof Bn||n instanceof mc))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return fx(r),new Bn(n.firestore,n instanceof mc?n.converter:null,new ze(r))}}function wx(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),(n instanceof Bn||n instanceof mc)&&(e instanceof Bn||e instanceof mc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function zT(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),n instanceof Bi&&e instanceof Bi&&n.firestore===e.firestore&&_h(n._query,e._query)&&n.converter===e.converter}function Ix(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class PE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wN{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Er,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new ZR(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ye.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class DN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,d){const m=We(u),w=_p(m.It)+"/documents",C={documents:d.map(Y=>vp(m.It,Y))},S=yield m._o("BatchGetDocuments",w,C,d.length),N=new Map;S.forEach(Y=>{const ae=function AS(n,e){return"found"in e?function(t,r){Et(!!r.found);const o=go(t,r.found.name),u=Yr(r.found.updateTime),d=new Zr({mapValue:{fields:r.found.fields}});return dn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Et(!!r.missing),Et(!!r.readTime);const o=go(t,r.missing),u=Yr(r.readTime);return dn.newNoDocument(o,u)}(n,e):tt()}(m.It,Y);N.set(ae.key.toString(),ae)});const $=[];return d.forEach(Y=>{const ae=N.get(Y.toString());Et(!!ae),$.push(ae)}),$}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=ze.fromPath(o);e.mutations.push(new QI(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const d=We(o),m=_p(d.It)+"/documents",w={writes:u.map(C=>Vm(d.It,C))};yield d.ao("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?xn.exists(!1):xn.updateTime(t):xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new xe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xn.updateTime(t)}return xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CN{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new Wb(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ye.Z)(function*(){const t=new DN(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!up(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!N_(t)}return!1}}class bN{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Kr.UNAUTHENTICATED,this.clientId=xI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=oy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Ex(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield wt(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),WT.apply(this,arguments)}function Dx(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield KT(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>JS(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>JS(e.remoteStore,u)),n.onlineComponents=e}),qT.apply(this,arguments)}function KT(n){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ye.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield Ex(n,new lx)),n.offlineComponents}),ZT.apply(this,arguments)}function FE(n){return YT.apply(this,arguments)}function YT(){return YT=(0,ye.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield Dx(n,new HT)),n.onlineComponents}),YT.apply(this,arguments)}function Cx(n){return KT(n).then(e=>e.persistence)}function LE(n){return KT(n).then(e=>e.localStore)}function QT(n){return FE(n).then(e=>e.remoteStore)}function JT(n){return FE(n).then(e=>e.syncEngine)}function ly(n){return XT.apply(this,arguments)}function XT(){return XT=(0,ye.Z)(function*(n){const e=yield FE(n),t=e.eventManager;return t.onListen=eN.bind(null,e.syncEngine),t.onUnlisten=tN.bind(null,e.syncEngine),t}),XT.apply(this,arguments)}function Tx(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,w){const C=new PE({next:N=>{u.enqueueAndForget(()=>pT(o,S));const $=N.docs.has(d);!$&&N.fromCache?w.reject(new xe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&m&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new yT(vh(d.path),C,{includeMetadataChanges:!0,Nu:!0});return hT(o,S)}(yield ly(n),n.asyncQueue,e,t,r)})),r.promise}function Ax(n,e,t={}){const r=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,w){const C=new PE({next:N=>{u.enqueueAndForget(()=>pT(o,S)),N.fromCache&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new yT(d,C,{includeMetadataChanges:!0,Nu:!0});return hT(o,S)}(yield ly(n),n.asyncQueue,e,t,r)})),r.promise}class ON{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Wb(this,"async_queue_retry"),this.Wc=()=>{const t=ME();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=ME();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=ME();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Er;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Qo(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,sr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=dT.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&tt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function eA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class kN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class jn extends cw{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new ON,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Sx(this),this._firestoreClient.terminate()}}function br(n){return n._firestoreClient||Sx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Sx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new IS(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new bN(n._authCredentials,n._appCheckCredentials,n._queue,r)}function xx(n,e,t){const r=new Er;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield Ex(n,t),yield Dx(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;Zu("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function Mx(n){if(n._initialized||n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yc(Cr.fromBase64String(e))}catch(t){throw new xe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yc(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xp{constructor(e){this._methodName=e}}class VE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const GN=/^__.*__$/;class zN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ga(e,this.data,this.fieldMask,t,this.fieldTransforms):new po(e,this.data,t,this.fieldTransforms)}}class Rx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ga(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class UE{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new UE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return $E(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Nx(this.sa)&&GN.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class WN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||ow(e)}da(e,t,r,o=!1){return new UE({sa:e,methodName:t,fa:r,path:Qn.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Mp(n){const e=n._freezeSettings(),t=ow(n._databaseId);return new WN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BE(n,e,t,r,o,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,o);iA("Data must be an object, but it was:",d,r);const m=Px(r,d);let w,C;if(u.merge)w=new Vi(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const $=sA(e,N,t);if(!d.contains($))throw new xe(ce.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);Lx(S,$)||S.push($)}w=new Vi(S),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new zN(new Zr(m),w,C)}class lw extends xp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lw}}function Ox(n,e,t){return new UE({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class tA extends xp{_toFieldTransform(e){return new pp(e.path,new Ll)}isEqual(e){return e instanceof tA}}class qN extends xp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Ox(this,e,!0),r=this._a.map(u=>Rp(u,t)),o=new ic(r);return new pp(e.path,o)}isEqual(e){return this===e}}class KN extends xp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Ox(this,e,!0),r=this._a.map(u=>Rp(u,t)),o=new Vl(r);return new pp(e.path,o)}isEqual(e){return this===e}}class ZN extends xp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Ih(e.It,Fl(e.It,this.wa));return new pp(e.path,t)}isEqual(e){return this===e}}function nA(n,e,t,r){const o=n.da(1,e,t);iA("Data must be an object, but it was:",o,r);const u=[],d=Zr.empty();Rl(r,(w,C)=>{const S=jE(e,w,t);C=(0,an.m9)(C);const N=o.ca(S);if(C instanceof lw)u.push(S);else{const $=Rp(C,N);null!=$&&(u.push(S),d.set(S,$))}});const m=new Vi(u);return new Rx(d,m,o.fieldTransforms)}function rA(n,e,t,r,o,u){const d=n.da(1,e,t),m=[sA(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(sA(e,u[$])),w.push(u[$+1]);const C=[],S=Zr.empty();for(let $=m.length-1;$>=0;--$)if(!Lx(C,m[$])){const Y=m[$];let ae=w[$];ae=(0,an.m9)(ae);const Re=d.ca(Y);if(ae instanceof lw)C.push(Y);else{const Ne=Rp(ae,Re);null!=Ne&&(C.push(Y),S.set(Y,Ne))}}const N=new Vi(C);return new Rx(S,N,d.fieldTransforms)}function kx(n,e,t,r=!1){return Rp(t,n.da(r?4:3,e))}function Rp(n,e){if(Fx(n=(0,an.m9)(n)))return iA("Unsupported field value:",e,n),Px(n,e);if(n instanceof xp)return function(t,r){if(!Nx(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Rp(d,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,an.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fl(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Nn.fromDate(t);return{timestampValue:oc(r.It,o)}}if(t instanceof Nn){const o=new Nn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:oc(r.It,o)}}if(t instanceof VE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yc)return{bytesValue:V_(r.It,t._byteString)};if(t instanceof Bn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${OE(t)}`)}(n,e)}function Px(n,e){const t={};return wm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rl(n,(r,o)=>{const u=Rp(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Fx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nn||n instanceof VE||n instanceof yc||n instanceof Bn||n instanceof xp)}function iA(n,e,t){if(!Fx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=OE(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function sA(n,e,t){if((e=(0,an.m9)(e))instanceof Hl)return e._internalPath;if("string"==typeof e)return jE(n,e);throw $E("Field path arguments must be of type string or ",n,!1,void 0,t)}const YN=new RegExp("[~\\*/\\[\\]]");function jE(n,e,t){if(e.search(YN)>=0)throw $E(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hl(...e.split("."))._internalPath}catch{throw $E(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $E(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(ce.INVALID_ARGUMENT,m+n+w)}function Lx(n,e){return n.some(t=>t.isEqual(e))}class dw{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(HE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class QN extends dw{data(){return super.data()}}function HE(n,e){return"string"==typeof e?jE(n,e):e instanceof Hl?e._internalPath:e._delegate._internalPath}function Vx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hw{}function kh(n,...e){for(const t of e)n=t._apply(n);return n}class JN extends hw{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Mp(e.firestore),r=function(o,u,d,m,w,C,S){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){Gx(S,C);const Y=[];for(const ae of S)Y.push(Hx(m,o,ae));N={arrayValue:{values:Y}}}else N=Hx(m,o,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||Gx(S,C),N=kx(d,"where",S,"in"===C||"not-in"===C);const $=fr.create(w,C,N);return function(Y,ae){if(ae.dt()){const Ne=C_(Y);if(null!==Ne&&!Ne.isEqual(ae.field))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ne.toString()}' and '${ae.field.toString()}'`);const St=D_(Y);null!==St&&zx(0,ae.field,St)}const Re=function(Ne,St){for(const kt of Ne.filters)if(St.indexOf(kt.op)>=0)return kt.op;return null}(Y,function(Ne){switch(Ne){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ae.op));if(null!==Re)throw new xe(ce.INVALID_ARGUMENT,Re===ae.op?`Invalid query. You cannot use more than one '${ae.op.toString()}' filter.`:`Invalid query. You cannot use '${ae.op.toString()}' filters with '${Re.toString()}' filters.`)}(o,$),$}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Bi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new fo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class eO extends hw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new fp(o,u);return function(m,w){if(null===D_(m)){const C=C_(m);null!==C&&zx(0,C,w.field)}}(r,d),d}(e._query,this.ma,this.pa);return new Bi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new fo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Ux extends hw{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Bi(e.firestore,e.converter,Mm(e._query,this.Ia,this.Ta))}}class Bx extends hw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=$x(e,this.type,this.Ea,this.Aa);return new Bi(e.firestore,e.converter,(o=t,new fo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class jx extends hw{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=$x(e,this.type,this.Ea,this.Aa);return new Bi(e.firestore,e.converter,(o=t,new fo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function $x(n,e,t,r){if(t[0]=(0,an.m9)(t[0]),t[0]instanceof dw)return function(o,u,d,m,w){if(!m)throw new xe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const S of rc(o))if(S.field.isKeyField())C.push(ho(u,m.key));else{const N=m.data.field(S.field);if(Im(N))throw new xe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=S.field.canonicalString();throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}C.push(N)}return new nc(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Mp(n.firestore);return function(u,d,m,w,C,S){const N=u.explicitOrderBy;if(C.length>N.length)throw new xe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Y=0;Y<C.length;Y++){const ae=C[Y];if(N[Y].field.isKeyField()){if("string"!=typeof ae)throw new xe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ae}`);if(!xm(u)&&-1!==ae.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ae}' contains a slash.`);const Re=u.path.child(Jt.fromString(ae));if(!ze.isDocumentKey(Re))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Re}' is not because it contains an odd number of segments.`);const Ne=new ze(Re);$.push(ho(d,Ne))}else{const Re=kx(m,w,ae);$.push(Re)}}return new nc($,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Hx(n,e,t){if("string"==typeof(t=(0,an.m9)(t))){if(""===t)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xm(e)&&-1!==t.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!ze.isDocumentKey(r))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ho(n,new ze(r))}if(t instanceof Bn)return ho(n,t._key);throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${OE(t)}.`)}function Gx(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function zx(n,e,t){if(!t.isEqual(e))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class oA{convertValue(e,t="none"){switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Rl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new VE(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=PI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ap(e));default:return null}}convertTimestamp(e){const t=Ju(e);return new Nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);Et(Um(r));const o=new Ol(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return o.isEqual(t)||sr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function GE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class uO extends oA{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}class Np{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gl extends dw{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(HE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class fw extends Gl{data(e={}){return super.data(e)}}class Ph{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Np(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fw(this._firestore,this._userDataWriter,r.key,r,new Np(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new fw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Np(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new fw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Np(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:cO(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function cO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function Wx(n,e){return n instanceof Gl&&e instanceof Gl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ph&&e instanceof Ph&&n._firestore===e._firestore&&zT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Fh extends oA{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bn(this.firestore,null,t)}}function qx(n,e,t){n=en(n,Bn);const r=en(n.firestore,jn),o=GE(n.converter,e,t);return dy(r,[BE(Mp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,xn.none())])}function Kx(n,e,t,...r){n=en(n,Bn);const o=en(n.firestore,jn),u=Mp(o);let d;return d="string"==typeof(e=(0,an.m9)(e))||e instanceof Hl?rA(u,"updateDoc",n._key,e,t,r):nA(u,"updateDoc",n._key,e),dy(o,[d.toMutation(n._key,xn.exists(!0))])}function Zx(n,...e){var t,r,o;n=(0,an.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||eA(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(eA(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,S;if(n instanceof Bn)C=en(n.firestore,jn),S=vh(n._key.path),w={next:N=>{e[d]&&e[d](aA(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=en(n,Bi);C=en(N.firestore,jn),S=N._query;const $=new Fh(C);w={next:Y=>{e[d]&&e[d](new Ph(C,$,N,Y))},error:e[d+1],complete:e[d+2]},Vx(n._query)}return function(N,$,Y,ae){const Re=new PE(ae),Ne=new yT($,Re,Y);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return hT(yield ly(N),Ne)})),()=>{Re.bc(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return pT(yield ly(N),Ne)}))}}(br(C),S,m,w)}function dy(n,e){return function(t,r){const o=new Er;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function nN(n,e,t){return ET.apply(this,arguments)}(yield JT(t),r,o)})),o.promise}(br(n),e)}function aA(n,e,t){const r=t.docs.get(e._key),o=new Fh(n);return new Gl(n,o,e._key,r,new Np(t.hasPendingWrites,t.fromCache),e.converter)}const _O={maxAttempts:5};class Yx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mp(e)}set(e,t,r){this._verifyNotCommitted();const o=Lh(e,this._firestore),u=GE(o.converter,t,r),d=BE(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,xn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Lh(e,this._firestore);let d;return d="string"==typeof(t=(0,an.m9)(t))||t instanceof Hl?rA(this._dataReader,"WriteBatch.update",u._key,t,r,o):nA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lh(e,this._firestore);return this._mutations=this._mutations.concat(new Dh(t._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lh(n,e){if((n=(0,an.m9)(n)).firestore!==e)throw new xe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mp(e)}get(e){const t=Lh(e,this._firestore),r=new uO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new dw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new dw(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=Lh(e,this._firestore),u=GE(o.converter,t,r),d=BE(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Lh(e,this._firestore);let d;return d="string"==typeof(t=(0,an.m9)(t))||t instanceof Hl?rA(this._dataReader,"Transaction.update",u._key,t,r,o):nA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Lh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lh(e,this._firestore),r=new Fh(this._firestore);return super.get(e).then(o=>new Gl(this._firestore,r,t._key,o._document,new Np(!1,!1),t.converter))}}function uA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Jx(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function Xx(){if(!function ZC(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){tp=hl.SDK_VERSION,(0,hl._registerComponent)(new Ag.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new jn(new bI(t.getProvider("auth-internal")),new SI(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,hl.registerVersion)(BC,"3.7.3",n),(0,hl.registerVersion)(BC,"3.7.3","esm2017")}();class pw{constructor(e){this._delegate=e}static fromBase64String(e){return Xx(),new pw(yc.fromBase64String(e))}static fromUint8Array(e){return Jx(),new pw(yc.fromUint8Array(e))}toBase64(){return Xx(),this._delegate.toBase64()}toUint8Array(){return Jx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function cA(n){return function xO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class MO{enableIndexedDbPersistence(e,t){return function FN(n,e){Mx(n=en(n,jn));const t=br(n),r=n._freezeSettings(),o=new HT;return xx(t,o,new dx(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function LN(n){Mx(n=en(n,jn));const e=br(n),t=n._freezeSettings(),r=new HT;return xx(e,r,new vN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function VN(n){if(n._initialized&&!n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Er;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!os.C())return Promise.resolve();const o=r+"main";yield os.delete(o)}),function(r){return t.apply(this,arguments)})(Pe(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ol||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function vx(n,e,t,r={}){var o;const u=(n=en(n,cw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Zu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Kr.MOCK_USER;else{d=(0,an.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Kr(w)}n._authCredentials=new $C(new CI(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function BN(n){return function TN(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield Cx(n),t=yield QT(n);return e.setNetworkEnabled(!0),function(r){const o=We(r);return o._u.delete(0),aw(o)}(t)}))}(br(n=en(n,jn)))}(this._delegate)}disableNetwork(){return function jN(n){return function AN(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield Cx(n),t=yield QT(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=We(o);u._u.add(0),yield ry(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(br(n=en(n,jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function UN(n){return function(e){const t=new Er;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function oN(n,e){return AT.apply(this,arguments)}(yield JT(e),t)})),t.promise}(br(n=en(n,jn)))}(this._delegate)}onSnapshotsInSync(e){return function vO(n,e){return function MN(n,e){const t=new PE(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield ly(n),o=t,We(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield ly(n),o=t,void We(r).Ru.delete(o);var r,o}))}}(br(n=en(n,jn)),eA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hy(this,_x(this._delegate,e))}catch(t){throw us(t,"collection()","Firestore.collection()")}}doc(e){try{return new ta(this,kE(this._delegate,e))}catch(t){throw us(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new cs(this,function _N(n,e){if(n=en(n,cw),GT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bi(n,null,(t=e,new fo(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw us(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function IO(n,e,t){n=en(n,jn);const r=Object.assign(Object.assign({},_O),t);return function(o){if(o.maxAttempts<1)throw new xe(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const m=new Er;return o.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const w=yield function bx(n){return FE(n).then(e=>e.datastore)}(o);new CN(o.asyncQueue,w,d,u,m).run()})),m.promise}(br(n),o=>e(new wO(n,o)),r)}(this._delegate,t=>e(new tM(this,t)))}batch(){return br(this._delegate),new nM(new Yx(this._delegate,e=>dy(this._delegate,e)))}loadBundle(e){return function $N(n,e){const t=br(n=en(n,jn)),r=new kN;return function RN(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return Ix(w,C);if(w instanceof ArrayBuffer)return Ix(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new wN(w,d);var w}(t,ow(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function yN(n,e,t){const r=We(n);var o;(o=(0,ye.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function($,Y){const ae=We($),Re=Yr(Y.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",Ne=>ae.Ns.getBundleMetadata(Ne,Y.id)).then(Ne=>!!Ne&&Ne.createTime.compareTo(Re)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(tx(w));const C=new YR(w,u.localStore,d.It);let S=yield d.mc();for(;S;){const $=yield C.Fu(S);$&&m._updateProgress($),S=yield d.mc()}const N=yield C.complete();return yield $l(u,N.Lu,void 0),yield function($,Y){const ae=We($);return ae.persistence.runTransaction("Save bundle","readwrite",Re=>ae.Ns.saveBundleMetadata(Re,Y))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return Zu("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield JT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function HN(n,e){return function NN(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=We(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield LE(n),e)}))}(br(n=en(n,jn)),e).then(t=>t?new Bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new cs(this,t):null)}}class zE extends oA{constructor(e){super(),this.firestore=e}convertBytes(e){return new pw(new yc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ta.forKey(t,this.firestore,null)}}class tM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zE(e)}get(e){const t=kp(e);return this._delegate.get(t).then(r=>new gw(this._firestore,new Gl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=kp(e);return r?(uA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=kp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=kp(e);return this._delegate.delete(t),this}}class nM{constructor(e){this._delegate=e}set(e,t,r){const o=kp(e);return r?(uA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=kp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=kp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Op{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new fw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Op.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Op(e,new zE(e),t),o.set(t,u)),u}}Op.INSTANCES=new WeakMap;class ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zE(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ta(t,new Bn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new ta(t,new Bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hy(this.firestore,_x(this._delegate,e))}catch(t){throw us(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,an.m9)(e))instanceof Bn&&wx(this._delegate,e)}set(e,t){t=uA("DocumentReference.set",t);try{return t?qx(this._delegate,e,t):qx(this._delegate,e)}catch(r){throw us(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Kx(this._delegate,e):Kx(this._delegate,e,t,...r)}catch(o){throw us(o,"updateDoc()","DocumentReference.update()")}}delete(){return function mO(n){return dy(en(n.firestore,jn),[new Dh(n._key,xn.none())])}(this._delegate)}onSnapshot(...e){const t=rM(e),r=iM(e,o=>new gw(this.firestore,new Gl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Zx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function dO(n){n=en(n,Bn);const e=en(n.firestore,jn),t=br(e),r=new Fh(e);return function SN(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield function(w,C){const S=We(w);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=oy(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield LE(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Gl(e,r,n._key,o,new Np(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function hO(n){n=en(n,Bn);const e=en(n.firestore,jn);return Tx(br(e),n._key,{source:"server"}).then(t=>aA(e,n,t))}(this._delegate):function lO(n){n=en(n,Bn);const e=en(n.firestore,jn);return Tx(br(e),n._key).then(t=>aA(e,n,t))}(this._delegate),t.then(r=>new gw(this.firestore,new Gl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ta(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}function us(n,e,t){return n.message=n.message.replace(e,t),n}function rM(n){for(const e of n)if("object"==typeof e&&!cA(e))return e;return{}}function iM(n,e){var t,r;let o;return o=cA(n[0])?n[0]:cA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class gw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Wx(this._delegate,e._delegate)}}class mw extends gw{data(e){const t=this._delegate.data(e);return function jC(n,e){n||tt()}(void 0!==t),t}}class cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zE(e)}where(e,t,r){try{return new cs(this.firestore,kh(this._delegate,function XN(n,e,t){const r=e,o=HE("where",n);return new JN(o,r,t)}(e,t,r)))}catch(o){throw us(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new cs(this.firestore,kh(this._delegate,function tO(n,e="asc"){const t=e,r=HE("orderBy",n);return new eO(r,t)}(e,t)))}catch(r){throw us(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new cs(this.firestore,kh(this._delegate,function nO(n){return gx("limit",n),new Ux("limit",n,"F")}(e)))}catch(t){throw us(t,"limit()","Query.limit()")}}limitToLast(e){try{return new cs(this.firestore,kh(this._delegate,function rO(n){return gx("limitToLast",n),new Ux("limitToLast",n,"L")}(e)))}catch(t){throw us(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new cs(this.firestore,kh(this._delegate,function iO(...n){return new Bx("startAt",n,!0)}(...e)))}catch(t){throw us(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new cs(this.firestore,kh(this._delegate,function sO(...n){return new Bx("startAfter",n,!1)}(...e)))}catch(t){throw us(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new cs(this.firestore,kh(this._delegate,function oO(...n){return new jx("endBefore",n,!1)}(...e)))}catch(t){throw us(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new cs(this.firestore,kh(this._delegate,function aO(...n){return new jx("endAt",n,!0)}(...e)))}catch(t){throw us(t,"endAt()","Query.endAt()")}}isEqual(e){return zT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function pO(n){n=en(n,Bi);const e=en(n.firestore,jn),t=br(e),r=new Fh(e);return function xN(n,e){const t=new Er;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield Nh(o,u,!0),w=new ix(u,m.Hi),C=w.Wu(m.documents),S=w.applyChanges(C,!1);d.resolve(S.snapshot)}catch(m){const w=oy(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield LE(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Ph(e,r,n,o))}(this._delegate):"server"===e?.source?function gO(n){n=en(n,Bi);const e=en(n.firestore,jn),t=br(e),r=new Fh(e);return Ax(t,n._query,{source:"server"}).then(o=>new Ph(e,r,n,o))}(this._delegate):function fO(n){n=en(n,Bi);const e=en(n.firestore,jn),t=br(e),r=new Fh(e);return Vx(n._query),Ax(t,n._query).then(o=>new Ph(e,r,n,o))}(this._delegate),t.then(r=>new lA(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rM(e),r=iM(e,o=>new lA(this.firestore,new Ph(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Zx(this._delegate,t,r)}withConverter(e){return new cs(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}class NO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new NO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new mw(this._firestore,r))})}isEqual(e){return Wx(this._delegate,e._delegate)}}class hy extends cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ta(this.firestore,e):null}doc(e){try{return new ta(this.firestore,void 0===e?kE(this._delegate):kE(this._delegate,e))}catch(t){throw us(t,"doc()","CollectionReference.doc()")}}add(e){return function yO(n,e){const t=en(n.firestore,jn),r=kE(n),o=GE(n.converter,e);return dy(t,[BE(Mp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ta(this.firestore,t))}isEqual(e){return wx(this._delegate,e._delegate)}withConverter(e){return new hy(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}function kp(n){return en(n,Bn)}class dA{constructor(...e){this._delegate=new Hl(...e)}static documentId(){return new dA(Qn.keyField().canonicalString())}isEqual(e){return(e=(0,an.m9)(e))instanceof Hl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Pp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function DO(){return new tA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Pp(e)}static delete(){const e=function EO(){return new lw("deleteField")}();return e._methodName="FieldValue.delete",new Pp(e)}static arrayUnion(...e){const t=function CO(...n){return new qN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Pp(t)}static arrayRemove(...e){const t=function bO(...n){return new KN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Pp(t)}static increment(e){const t=function TO(n){return new ZN("increment",n)}(e);return t._methodName="FieldValue.increment",new Pp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OO={Firestore:eM,GeoPoint:VE,Timestamp:Nn,Blob:pw,Transaction:tM,WriteBatch:nM,DocumentReference:ta,DocumentSnapshot:gw,Query:cs,QueryDocumentSnapshot:mw,QuerySnapshot:lA,CollectionReference:hy,FieldPath:dA,FieldValue:Pp,setLogLevel:function RO(n){!function pm(n){bl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function sM(n,e){return function FO(n,e=vv.z){return new Mr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function hA(n,e){return sM(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function WE(n,e){return hA(n,e).pipe(xu(void 0),x0(),(0,at.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(S=>S.doc.ref.isEqual(d.ref)),C=t?.payload.docs.find(S=>S.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function oM(n,e,t){return WE(n,t).pipe(bt((r,o)=>function VO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function UO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return fA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return fA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return fA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function M0(n,e=bs.y){return n=n??R0,(0,_r.e)((t,r)=>{let o,u=!0;t.subscribe((0,qn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,at.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function fA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function aM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function PO(n){(function kO(n,e){n.INTERNAL.registerComponent(new Ag.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},OO)))})(n,(e,t)=>new eM(e,t,new MO)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(N0.Z);class uM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=WE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(xu(void 0),x0(),D(([r,o])=>o.length>0||!r),(0,at.U)(([r,o])=>o),Or.iC)}auditTrail(e){return this.stateChanges(e).pipe(bt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=aM(e);return oM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Or.iC)}valueChanges(e={}){return hA(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Or.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(Or.iC)}add(e){return this.ref.add(e)}doc(e){return new cM(this.ref.doc(e),this.afs)}}class cM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=hM(r,t);return new uM(o,u,this.afs)}snapshotChanges(){return function LO(n,e){return sM(n,e).pipe(xu(void 0),x0(),(0,at.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Or.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,cn.D)(this.ref.get(e)).pipe(Or.iC)}}class BO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?WE(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),D(t=>t.length>0),Or.iC):WE(this.query,this.afs.schedulers.outsideAngular).pipe(Or.iC)}auditTrail(e){return this.stateChanges(e).pipe(bt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=aM(e);return oM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Or.iC)}valueChanges(e={}){return hA(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Or.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(Or.iC)}}const lM=new g.OlP("angularfire2.enableFirestorePersistence"),dM=new g.OlP("angularfire2.firestore.persistenceSettings"),jO=new g.OlP("angularfire2.firestore.settings"),$O=new g.OlP("angularfire2.firestore.use-emulator");function hM(n,e=(t=>t)){return{query:e(n),ref:n}}let pA=(()=>{class n{constructor(t,r,o,u,d,m,w,C,S,N,$,Y,ae,Re,Ne,St,kt){this.schedulers=w;const Lt=(0,Gr.on)(t,m,r),Vt=S;N&&Hg(Lt,m,$,ae,Re,Ne,Y,St),[this.firestore,this.persistenceEnabled$]=(0,Gr.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const Pt=m.runOutsideAngular(()=>Lt.firestore());if(u&&Pt.settings(u),Vt&&Pt.useEmulator(...Vt),o&&!cr(d)){const Ht=()=>{try{return(0,cn.D)(Pt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Qr){return typeof console<"u"&&console.warn(Qr),ot(!1)}};return[Pt,m.runOutsideAngular(Ht)]}return[Pt,ot(!1)]},[u,Vt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=hM(o,r),m=this.schedulers.ngZone.run(()=>u);return new uM(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new BO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new cM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Gr.Dh),g.LFG(Gr.xv,8),g.LFG(lM,8),g.LFG(jO,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Or.HU),g.LFG(dM,8),g.LFG($O,8),g.LFG(gl,8),g.LFG(b0,8),g.LFG(T0,8),g.LFG($g,8),g.LFG(A0,8),g.LFG(S0,8),g.LFG(Nf,8),g.LFG(mv,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HO=(()=>{class n{constructor(){C0.Z.registerVersion("angularfire",Or.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lM,useValue:!0},{provide:dM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[pA]}),n})(),gA=(()=>{class n{constructor(t,r){this.firestore=t,this.fireauth=r,this.uid="",this.firestoreCollection=t.collection("todo")}getUid(){this.fireauth.currentUser.then(t=>{localStorage.setItem("token",t.uid)})}addToDo(t,r){this.firestoreCollection.add({title:t,isDone:!1,user_id:r})}updateTodoStatus(t,r){this.firestoreCollection.doc(t).update({isDone:r})}deleteTodo(t){this.firestoreCollection.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pA),g.LFG(gl))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mA=(()=>{class n{constructor(t,r,o){this.fireauth=t,this.router=r,this.todosvc=o}gett(){let t;return this.fireauth.currentUser.then(r=>t=r?.uid),t}clearLocalStorage(){localStorage.clear()}isLoggedIn(){return null!==localStorage.getItem("token")}login(t,r){this.fireauth.signInWithEmailAndPassword(t,r).then(o=>{this.router.navigate(["dashboard"])},o=>{alert("Il ya un error: "+o.message),this.router.navigate(["/login"])})}forgotPass(t){this.fireauth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/verifyEmail"])},r=>{alert("Something went wrong !")})}register(t,r){this.fireauth.createUserWithEmailAndPassword(t,r).then(o=>{alert("Registration successful"),this.router.navigate(["/login"]),this.sendEmailForVerification(o.user)},o=>{alert(o.message),this.router.navigate(["/register"])})}sendEmailForVerification(t){t.sendEmailVerification().then(r=>{this.router.navigate(["/verifyEmail"])},r=>{alert("Something went wrong !")})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},t=>{alert(t.message)})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(gl),g.LFG(ir),g.LFG(gA))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GO=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return 0!=this.authService.isLoggedIn()||(window.alert("Access Denied, Login First!"),this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(mA),g.LFG(ir))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zO(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"li",15)(1,"i",16),g.NdJ("click",function(){const u=g.CHM(t).$implicit,d=g.oxw();return g.KtG(d.onStatusChange(u.id,!u.isDone))}),g.qZA(),g.TgZ(2,"span"),g._uU(3),g.qZA(),g.TgZ(4,"span",17),g.NdJ("click",function(){const u=g.CHM(t).$implicit,d=g.oxw();return g.KtG(d.onDelete(u.id))}),g._UZ(5,"i",18),g.qZA()()}if(2&n){const t=e.$implicit;g.xp6(1),g.Q6J("ngClass",t.isDone?"fa-solid fa-circle-check":"fa-regular fa-circle"),g.xp6(2),g.hij(" ",t.title,"")}}let WO=(()=>{class n{constructor(t,r){this.todosvc=t,this.firestore=r,this.todos=[]}ngOnInit(){console.log(localStorage.getItem("token")),this.firestore.collection("todo",t=>t.where("user_id","==",localStorage.getItem("token"))).valueChanges({idField:"id"}).subscribe(t=>{this.todos=t.sort((r,o)=>r.isDone-o.isDone)})}onClick(t){t.value&&(this.todosvc.addToDo(t.value,localStorage.getItem("token")),t.value="")}onStatusChange(t,r){this.todosvc.updateTodoStatus(t,r)}onDelete(t){this.todosvc.deleteTodo(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(gA),g.Y36(pA))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-dashboard"]],decls:16,vars:1,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-8","col-sm-10"],[1,"card","shadow-lg","mt-5"],[1,"card-header","text-center","py-center","border-0"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group-item","mb-2","border"],[1,"input-group","p-0"],["type","text","placeholder","Type a Task",1,"form-control","shadow-none","border-0","py-3"],["titleInput",""],[1,"btn","text-success",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","rounded-3"],[1,"text-success",3,"ngClass","click"],[1,"float-end","text-secondary",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(t,r){if(1&t){const o=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),g._uU(6,"To Do List"),g.qZA()(),g.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"div",9),g._UZ(11,"input",10,11),g.TgZ(13,"button",12),g.NdJ("click",function(){g.CHM(o);const d=g.MAs(12);return g.KtG(r.onClick(d))}),g._UZ(14,"i",13),g.qZA()()(),g.YNc(15,zO,6,2,"li",14),g.qZA()()()()()()}2&t&&(g.xp6(15),g.Q6J("ngForOf",r.todos))},dependencies:[sn,Bs]}),n})(),fM=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Fp=(()=>{class n extends fM{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const vc=new g.OlP("NgValueAccessor"),ZO={provide:vc,useExisting:(0,g.Gpc)(()=>yw),multi:!0},QO=new g.OlP("CompositionEventMode");let yw=(()=>{class n extends fM{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function YO(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(QO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([ZO]),g.qOj]}),n})();const ji=new g.OlP("NgValidators"),Uh=new g.OlP("NgAsyncValidators");function CM(n){return null!=n}function bM(n){return(0,g.QGY)(n)?(0,cn.D)(n):n}function TM(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function AM(n,e){return e.map(t=>t(n))}function SM(n){return n.map(e=>function ek(n){return!n.validate}(e)?e:t=>e.validate(t))}function yA(n){return null!=n?function xM(n){if(!n)return null;const e=n.filter(CM);return 0==e.length?null:function(t){return TM(AM(t,e))}}(SM(n)):null}function vA(n){return null!=n?function MM(n){if(!n)return null;const e=n.filter(CM);return 0==e.length?null:function(t){return function qO(...n){const e=(0,vi.jO)(n),{args:t,keys:r}=Ca(n),o=new Mr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let S=0;S<d;S++){let N=!1;(0,Ss.Xf)(t[S]).subscribe((0,qn.x)(u,$=>{N||(N=!0,C--),m[S]=$},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?Oo(r,m):m),u.complete())}))}});return e?o.pipe(Ta(e)):o}(AM(t,e).map(bM)).pipe((0,at.U)(TM))}}(SM(n)):null}function RM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _A(n){return n?Array.isArray(n)?n:[n]:[]}function KE(n,e){return Array.isArray(n)?n.includes(e):n===e}function kM(n,e){const t=_A(e);return _A(n).forEach(o=>{KE(t,o)||t.push(o)}),t}function PM(n,e){return _A(e).filter(t=>!KE(n,t))}class FM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ls extends FM{get formDirective(){return null}get path(){return null}}class Bh extends FM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class LM{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wA=(()=>{class n extends LM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Bh,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})(),IA=(()=>{class n extends LM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ls,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();const vw="VALID",YE="INVALID",fy="PENDING",_w="DISABLED";function bA(n){return(QE(n)?n.validators:n)||null}function UM(n){return Array.isArray(n)?yA(n):n||null}function TA(n,e){return(QE(e)?e.asyncValidators:n)||null}function BM(n){return Array.isArray(n)?vA(n):n||null}function QE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class HM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=UM(this._rawValidators),this._composedAsyncValidatorFn=BM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vw}get invalid(){return this.status===YE}get pending(){return this.status==fy}get disabled(){return this.status===_w}get enabled(){return this.status!==_w}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=UM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=BM(e)}addValidators(e){this.setValidators(kM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(PM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(PM(e,this._rawAsyncValidators))}hasValidator(e){return KE(this._rawValidators,e)}hasAsyncValidator(e){return KE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_w,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vw||this.status===fy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_w:vw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fy,this._hasOwnPendingAsyncValidator=!0;const t=bM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?_w:this.errors?YE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fy)?fy:this._anyControlsHaveStatus(YE)?YE:vw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){QE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class AA extends HM{constructor(e,t,r){super(bA(t),TA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function $M(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new g.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function jM(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function ww(n,e){SA(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function ck(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&GM(n,e)})}(n,e),function dk(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function lk(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&GM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function uk(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function eD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function SA(n,e){const t=function NM(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(RM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function OM(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(RM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();eD(e._rawValidators,o),eD(e._rawAsyncValidators,o)}function GM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const mk={provide:ls,useExisting:(0,g.Gpc)(()=>Ew)},Iw=(()=>Promise.resolve())();let Ew=(()=>{class n extends ls{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new AA({},yA(t),vA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Iw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ww(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Iw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Iw.then(()=>{const r=this._findContainer(t.path),o=new AA({});(function zM(n,e){SA(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Iw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Iw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function qM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ji,10),g.Y36(Uh,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([mk]),g.qOj]}),n})();function KM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZM(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const YM=class extends HM{constructor(e=null,t,r){super(bA(t),TA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),QE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ZM(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ZM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},_k={provide:Bh,useExisting:(0,g.Gpc)(()=>nD)},XM=(()=>Promise.resolve())();let nD=(()=>{class n extends Bh{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new YM,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function MA(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===yw?t=u:function pk(n){return Object.getPrototypeOf(n.constructor)===Fp}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function xA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ww(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){XM.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,g.D6c)(r);XM.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function JE(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ls,9),g.Y36(ji,10),g.Y36(Uh,10),g.Y36(vc,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([_k]),g.qOj,g.TTD]}),n})(),RA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),tR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),Hk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[tR]}),n})(),Gk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Hk]}),n})();const Wk=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t,r){this.auth=t,this.todo=r,this.email="",this.password=""}ngOnInit(){}login(){""!==this.email&&""!==this.password&&(this.auth.login(this.email,this.password),this.email="",this.password="")}getUID(){this.todo.getUid()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(mA),g.Y36(gA))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:27,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-md-5","col-sm-8"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["routerLink","/register",2,"text-decoration","none"],[1,"text-danger"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1),g._UZ(2,"div",2),g.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),g._uU(9," Login "),g.qZA()(),g.TgZ(10,"div",6)(11,"label",8),g._uU(12,"Email address"),g.qZA(),g.TgZ(13,"input",9),g.NdJ("ngModelChange",function(u){return r.email=u}),g.qZA()(),g.TgZ(14,"div",6)(15,"label",10),g._uU(16,"Password"),g.qZA(),g.TgZ(17,"input",11),g.NdJ("ngModelChange",function(u){return r.password=u}),g.qZA()(),g.TgZ(18,"button",12),g.NdJ("click",function(){return r.login(),r.getUID()}),g._uU(19,"Login"),g.qZA(),g.TgZ(20,"div",13)(21,"div",14)(22,"a",15),g._uU(23,"Need Account ? "),g.TgZ(24,"span",16),g._uU(25,"Register"),g.qZA()()()()()()()(),g._UZ(26,"div",2),g.qZA()()),2&t&&(g.xp6(13),g.Q6J("ngModel",r.email),g.xp6(4),g.Q6J("ngModel",r.password))},dependencies:[bf,RA,yw,wA,IA,nD,Ew]}),n})()},{path:"dashboard",component:WO,canActivate:[GO]},{path:"register",component:(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}ngOnInit(){}register(){""!==this.email&&""!==this.password&&(this.auth.register(this.email,this.password),this.email="",this.password="")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(mA))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-register"]],decls:27,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-md-5","col-sm-8"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["routerLink","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1),g._UZ(2,"div",2),g.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),g._uU(9," Register "),g.qZA()(),g.TgZ(10,"div",6)(11,"label",8),g._uU(12,"Email address"),g.qZA(),g.TgZ(13,"input",9),g.NdJ("ngModelChange",function(u){return r.email=u}),g.qZA()(),g.TgZ(14,"div",6)(15,"label",10),g._uU(16,"Password"),g.qZA(),g.TgZ(17,"input",11),g.NdJ("ngModelChange",function(u){return r.password=u}),g.qZA()(),g.TgZ(18,"button",12),g.NdJ("click",function(){return r.register()}),g._uU(19,"Register"),g.qZA(),g.TgZ(20,"div",13)(21,"div",14)(22,"a",15),g._uU(23,"Have an account ? "),g.TgZ(24,"span",16),g._uU(25,"Login"),g.qZA()()()()()()()(),g._UZ(26,"div",2),g.qZA()()),2&t&&(g.xp6(13),g.Q6J("ngModel",r.email),g.xp6(4),g.Q6J("ngModel",r.password))},dependencies:[bf,RA,yw,wA,IA,nD,Ew]}),n})()}];let qk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Yy.forRoot(Wk),Yy]}),n})(),Kk=(()=>{class n{constructor(){this.title="ToDo"}onWindowClose(t){localStorage.clear(),t.preventDefault(),t.returnValue=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],hostBindings:function(t,r){1&t&&g.NdJ("beforeunload",function(u){return r.onWindowClose(u)},!1,g.Jf7)},decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[yf]}),n})();const Zk_firebaseConfig={apiKey:"AIzaSyAokXTS-uVt1HiJwoIs-Au6-n9c67-WGLM",authDomain:"to-do-cd8fc.firebaseapp.com",projectId:"to-do-cd8fc",storageBucket:"to-do-cd8fc.appspot.com",messagingSenderId:"84877035537",appId:"1:84877035537:web:bbf1031e81124f4a0789b0"};let Yk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[Kk]}),n.\u0275inj=g.cJS({imports:[jc,qk,Gr.hO.initializeApp(Zk_firebaseConfig),HO,Gk]}),n})();(0,g.G48)(),Eu().bootstrapModule(Yk).catch(n=>console.error(n))},5867:(ut,be,P)=>{P.d(be,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=P(9681);(0,g.registerVersion)("firebase","9.14.0","app")},127:(ut,be,P)=>{P.d(be,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(ut,be,P)=>{P.r(be);var g=P(5861),X=P(3942),O=P(2090),se=P(9681),ie=P(1877),le=P(655),ue=P(4859);const we=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new ie.Yd("@firebase/auth");function rt(y,...h){Ye.logLevel<=ie.in.ERROR&&Ye.error(`Auth (${se.SDK_VERSION}): ${y}`,...h)}function Ae(y,...h){throw je(y,...h)}function ve(y,...h){return je(y,...h)}function Ie(y,h,p){const _=Object.assign(Object.assign({},Xe()),{[h]:p});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Be(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ae(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return ge.create(y,...h)}function V(y,h,...p){if(!y)throw je(h,...p)}function pe(y){const h="INTERNAL ASSERTION FAILED: "+y;throw rt(h),new Error(h)}function z(y,h){y||pe(h)}const Q=new Map;function ne(y){z(y instanceof Function,"Expected a class definition");let h=Q.get(y);return h?(z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Q.set(y,h),h)}function ke(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ct(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class rn{constructor(h,p){this.shortDelay=h,this.longDelay=p,z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Ut(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(y,h){z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Wt{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Tr=new rn(3e4,6e4);function Mt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function un(y,h,p,_){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(y,h,p,_,A={}){return fi(y,A,(0,g.Z)(function*(){let R={},G={};_&&("GET"===h?G=_:R={body:JSON.stringify(_)});const oe=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),Wt.fetch()(pi(y,y.config.apiHost,p,oe),Object.assign({method:h,headers:Ue,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function fi(y,h,p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Zt),h);try{const A=new Jr(y),R=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw Xr(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const oe=R.ok?G.errorMessage:G.error.message,[Ue,Ze]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw Xr(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Ue)throw Xr(y,"email-already-in-use",G);if("USER_DISABLED"===Ue)throw Xr(y,"user-disabled",G);const yt=_[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Ie(y,yt,Ze);Ae(y,yt)}}catch(A){if(A instanceof O.ZR)throw A;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Lr(y,h,p,_){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,g.Z)(function*(y,h,p,_,A={}){const R=yield un(y,h,p,_,A);return"mfaPendingCredential"in R&&Ae(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function pi(y,h,p,_){const A=`${h}${p}?${_}`;return y.config.emulator?mn(y.config,A):`${y.config.apiScheme}://${A}`}class Jr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Tr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xr(y,h,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const A=ve(y,h,_);return A.customData._tokenResponse=p,A}function Ke(){return(Ke=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function mr(y,h){return ds.apply(this,arguments)}function ds(){return(ds=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function $n(y,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ai(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function hn(){return(hn=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),_=yield p.getIdToken(h),A=st(_);V(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,G=R?.sign_in_provider;return{claims:A,token:_,authTime:Ai(ft(A.auth_time)),issuedAtTime:Ai(ft(A.iat)),expirationTime:Ai(ft(A.exp)),signInProvider:G||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function st(y){var h;const[p,_,A]=y.split(".");if(void 0===p||void 0===_||void 0===A)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,O.tV)(_);return R?JSON.parse(R):(rt("Failed to decode base64 JWT payload"),null)}catch(R){return rt("Caught error parsing JWT payload as JSON",null===(h=R)||void 0===h?void 0:h.toString()),null}}function or(y,h){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&Vr(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function Vr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ct{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,g.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(p=_)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class hs{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ai(this.lastLoginAt),this.creationTime=Ai(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yt(y){return Si.apply(this,arguments)}function Si(){return(Si=(0,g.Z)(function*(y){var h;const p=y.auth,_=yield y.getIdToken(),A=yield or(y,$n(p,{idToken:_}));V(A?.users.length,p,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const G=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?Je(R.providerUserInfo):[],oe=Sr(y.providerData,G),yt=!!y.isAnonymous&&!(y.email&&R.passwordHash||oe?.length),ht={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:oe,metadata:new hs(R.createdAt,R.lastLoginAt),isAnonymous:yt};Object.assign(y,ht)})).apply(this,arguments)}function Hn(){return(Hn=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield Yt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Sr(y,h){return[...y.filter(_=>!h.some(A=>A.providerId===_.providerId)),...h]}function Je(y){return y.map(h=>{var{providerId:p}=h,_=(0,le._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Qe(){return(Qe=(0,g.Z)(function*(y,h){const p=yield fi(y,{},(0,g.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,G=pi(y,A,"/v1/token",`key=${R}`),oe=yield y._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(G,{method:"POST",headers:oe,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function tn(y){const h=st(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,g.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,g.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:G}=yield function Ce(y,h){return Qe.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(A,R,Number(G))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:A,expirationTime:R}=p,G=new _t;return _&&(V("string"==typeof _,"internal-error",{appName:h}),G.refreshToken=_),A&&(V("string"==typeof A,"internal-error",{appName:h}),G.accessToken=A),R&&(V("number"==typeof R,"internal-error",{appName:h}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return pe("not implemented")}}function gt(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Nt{constructor(h){var{uid:p,auth:_,stsTokenManager:A}=h,R=(0,le._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ct(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new hs(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const _=yield or(p,p.stsTokenManager.getToken(p.auth,h));return V(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function kn(y){return hn.apply(this,arguments)}(this,h)}reload(){return function Qt(y){return Hn.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Nt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,g.Z)(function*(){let A=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),A=!0),p&&(yield Yt(_)),yield _.auth._persistUserIfCurrent(_),A&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield or(h,function na(y,h){return Ke.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,A,R,G,oe,Ue,Ze,yt;const ht=null!==(_=p.displayName)&&void 0!==_?_:void 0,on=null!==(A=p.email)&&void 0!==A?A:void 0,rr=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Li=null!==(G=p.photoURL)&&void 0!==G?G:void 0,cg=null!==(oe=p.tenantId)&&void 0!==oe?oe:void 0,lg=null!==(Ue=p._redirectEventId)&&void 0!==Ue?Ue:void 0,dg=null!==(Ze=p.createdAt)&&void 0!==Ze?Ze:void 0,Ad=null!==(yt=p.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:hg,emailVerified:Vy,isAnonymous:Go,providerData:Pa,stsTokenManager:fg}=p;V(hg&&fg,h,"internal-error");const Uy=_t.fromJSON(this.name,fg);V("string"==typeof hg,h,"internal-error"),gt(ht,h.name),gt(on,h.name),V("boolean"==typeof Vy,h,"internal-error"),V("boolean"==typeof Go,h,"internal-error"),gt(rr,h.name),gt(Li,h.name),gt(cg,h.name),gt(lg,h.name),gt(dg,h.name),gt(Ad,h.name);const Fa=new Nt({uid:hg,auth:h,email:on,emailVerified:Vy,displayName:ht,isAnonymous:Go,photoURL:Li,phoneNumber:rr,tenantId:cg,stsTokenManager:Uy,createdAt:dg,lastLoginAt:Ad});return Pa&&Array.isArray(Pa)&&(Fa.providerData=Pa.map(La=>Object.assign({},La))),lg&&(Fa._redirectEventId=lg),Fa}static _fromIdTokenResponse(h,p,_=!1){return(0,g.Z)(function*(){const A=new _t;A.updateFromServerResponse(p);const R=new Nt({uid:p.localId,auth:h,stsTokenManager:A,isAnonymous:_});return yield Yt(R),R})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,_){var A=this;return(0,g.Z)(function*(){A.storage[p]=_})()}_get(p){var _=this;return(0,g.Z)(function*(){const A=_.storage[p];return void 0===A?null:A})()}_remove(p){var _=this;return(0,g.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function W(y,h,p){return`firebase:${y}:${h}:${p}`}class _e{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:A,name:R}=this.auth;this.fullUserKey=W(this.userKey,A.apiKey,R),this.fullPersistenceKey=W("persistence",A.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Nt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,g.Z)(function*(){if(!p.length)return new _e(ne(L),h,_);const A=(yield Promise.all(p.map(function(){var Ze=(0,g.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let R=A[0]||ne(L);const G=W(_,h.config.apiKey,h.name);let oe=null;for(const Ze of p)try{const yt=yield Ze._get(G);if(yt){const ht=Nt._fromJSON(h,yt);Ze!==R&&(oe=ht),R=Ze;break}}catch{}const Ue=A.filter(Ze=>Ze._shouldAllowMigration);return R._shouldAllowMigration&&Ue.length?(R=Ue[0],oe&&(yield R._set(G,oe.toJSON())),yield Promise.all(p.map(function(){var Ze=(0,g.Z)(function*(yt){if(yt!==R)try{yield yt._remove(G)}catch{}});return function(yt){return Ze.apply(this,arguments)}}())),new _e(R,h,_)):new _e(R,h,_)})()}}function Z(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(ln(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ge(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ve(h))return"Blackberry";if($e(h))return"Webos";if(lt(h))return"Safari";if((h.includes("chrome/")||qt(h))&&!h.includes("edge/"))return"Chrome";if(Gt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function Ge(y=(0,O.z$)()){return/firefox\//i.test(y)}function lt(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function qt(y=(0,O.z$)()){return/crios\//i.test(y)}function ln(y=(0,O.z$)()){return/iemobile/i.test(y)}function Gt(y=(0,O.z$)()){return/android/i.test(y)}function Ve(y=(0,O.z$)()){return/blackberry/i.test(y)}function $e(y=(0,O.z$)()){return/webos/i.test(y)}function Ft(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Ls(y=(0,O.z$)()){return Ft(y)||Gt(y)||$e(y)||Ve(y)||/windows phone/i.test(y)||ln(y)}function fs(y,h=[]){let p;switch(y){case"Browser":p=Z((0,O.z$)());break;case"Worker":p=`${Z((0,O.z$)())}-${y}`;break;default:p=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${se.SDK_VERSION}/${_}`}class vo{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=R=>new Promise((G,oe)=>{try{G(h(R))}catch(Ue){oe(Ue)}});_.onAbort=p,this.queue.push(_);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){var _;if(p.auth.currentUser===h)return;const A=[];try{for(const R of p.queue)yield R(h),R.onAbort&&A.push(R.onAbort)}catch(R){A.reverse();for(const G of A)try{G()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=R)||void 0===_?void 0:_.message})}})()}}class Rt{constructor(h,p,_){this.app=h,this.heartbeatServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vs(this),this.idTokenSubscription=new Vs(this),this.beforeStateQueue=new vo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=ne(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var A,R;if(!_._deleted&&(_.persistenceManager=yield _e.create(_,h),!_._deleted)){if(null!==(A=_._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var _;const A=yield p.assertedPersistence.getCurrentUser();let R=A,G=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const oe=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Ue=R?._redirectEventId,Ze=yield p.tryRedirectSignIn(h);(!oe||oe===Ue)&&Ze?.user&&(R=Ze.user,G=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(G)try{yield p.beforeStateQueue.runMiddleware(R)}catch(oe){R=A,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(oe))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){var _;try{yield Yt(h)}catch(A){if("auth/network-request-failed"!==(null===(_=A)||void 0===_?void 0:_.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&V(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,g.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,g.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ne(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,g.Z)(function*(){const A=yield _.getOrInitRedirectPersistenceManager(p);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&ne(h)||p._popupRedirectResolver;V(_,p,"argument-error"),p.redirectPersistenceManager=yield _e.create(p,[ne(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var _,A;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,A){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,_,A):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=fs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(_["X-Firebase-Client"]=A),_})()}}function _n(y){return(0,O.m9)(y)}class Vs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xi(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function ps(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ar{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return pe("not implemented")}_getIdTokenResponse(h){return pe("not implemented")}_linkToIdToken(h,p){return pe("not implemented")}_getReauthenticationResolver(h){return pe("not implemented")}}function Ln(y,h){return Za.apply(this,arguments)}function Za(){return(Za=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:resetPassword",Mt(y,h))})).apply(this,arguments)}function sn(y,h){return _c.apply(this,arguments)}function _c(){return(_c=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wc(y,h){return Us.apply(this,arguments)}function Us(){return(Us=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",Mt(y,h))})).apply(this,arguments)}function Bs(){return(Bs=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithPassword",Mt(y,h))})).apply(this,arguments)}function ms(y,h){return gi.apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:sendOobCode",Mt(y,h))})).apply(this,arguments)}function ur(y,h){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,g.Z)(function*(y,h){return ms(y,h)})).apply(this,arguments)}function er(y,h){return xr.apply(this,arguments)}function xr(){return(xr=(0,g.Z)(function*(y,h){return ms(y,h)})).apply(this,arguments)}function Ya(y,h){return ia.apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(y,h){return ms(y,h)})).apply(this,arguments)}function Ec(y,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,h){return ms(y,h)})).apply(this,arguments)}function zl(){return(zl=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithEmailLink",Mt(y,h))})).apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithEmailLink",Mt(y,h))})).apply(this,arguments)}class Cc extends ar{constructor(h,p,_,A=null){super("password",_),this._email=h,this._password=p,this._tenantId=A}static _fromEmailAndPassword(h,p){return new Cc(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new Cc(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function ra(y,h){return Bs.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function jh(y,h){return zl.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ae(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,g.Z)(function*(){switch(_.signInMethod){case"password":return sn(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function $h(y,h){return Dc.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:Ae(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function zn(y,h){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithIdp",Mt(y,h))})).apply(this,arguments)}class Hi extends ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Hi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ae("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A}=p,R=(0,le._T)(p,["providerId","signInMethod"]);if(!_||!A)return null;const G=new Hi(_,A);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(h){return zn(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,zn(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,zn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Up(y,h){return ql.apply(this,arguments)}function ql(){return(ql=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:sendVerificationCode",Mt(y,h))})).apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",Mt(y,h))})).apply(this,arguments)}function Kl(){return(Kl=(0,g.Z)(function*(y,h){const p=yield Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",Mt(y,h));if(p.temporaryProof)throw Xr(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const jp={USER_NOT_FOUND:"user-not-found"};function Zl(){return(Zl=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithPhoneNumber",Mt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),jp)})).apply(this,arguments)}class vs extends ar{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new vs({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new vs({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function bc(y,h){return ys.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Bp(y,h){return Kl.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function $p(y,h){return Zl.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:A}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:A,temporaryProof:R}=h;return _||p||A||R?new vs({verificationId:p,verificationCode:_,phoneNumber:A,temporaryProof:R}):null}}class Qa{constructor(h){var p,_,A,R,G,oe;const Ue=(0,O.zd)((0,O.pd)(h)),Ze=null!==(p=Ue.apiKey)&&void 0!==p?p:null,yt=null!==(_=Ue.oobCode)&&void 0!==_?_:null,ht=function Yl(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ue.mode)&&void 0!==A?A:null);V(Ze&&yt&&ht,"argument-error"),this.apiKey=Ze,this.operation=ht,this.code=yt,this.continueUrl=null!==(R=Ue.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=Ue.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(oe=Ue.tenantId)&&void 0!==oe?oe:null}static parseLink(h){const p=function Ql(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||p||h||y}(h);try{return new Qa(p)}catch{return null}}}let Mi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return Cc._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const A=Qa.parseLink(_);return V(A,"argument-error"),Cc._fromEmailAndCode(p,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Gi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class zi extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class js extends zi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),Hi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),Hi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return js.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return js.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:A,pendingToken:R,nonce:G,providerId:oe}=h;if(!_&&!A&&!p&&!R||!oe)return null;try{return new js(oe)._credential({idToken:p,accessToken:_,nonce:G,pendingToken:R})}catch{return null}}}let sa=(()=>{class y extends zi{constructor(){super("facebook.com")}static credential(p){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Ja=(()=>{class y extends zi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:A}=p;if(!_&&!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Tc=(()=>{class y extends zi{constructor(){super("github.com")}static credential(p){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class oa extends ar{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return zn(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,zn(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,zn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A,pendingToken:R}=p;return _&&A&&R&&_===A?new oa(_,R):null}static _create(h,p){return new oa(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ti extends Gi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ti.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ti.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=oa.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return oa._create(_,p)}catch{return null}}}let Br=(()=>{class y extends zi{constructor(){super("twitter.com")}static credential(p,_){return Hi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:A}=p;if(!_||!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function _o(y,h){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signUp",Mt(y,h))})).apply(this,arguments)}class cr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,A=!1){return(0,g.Z)(function*(){const R=yield Nt._fromIdTokenResponse(h,_,A),G=zh(_);return new cr({user:R,providerId:G,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const A=zh(_);return new cr({user:h,providerId:A,_tokenResponse:_,operationType:p})})()}}function zh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Dn(){return(Dn=(0,g.Z)(function*(y){var h;const p=_n(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new cr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield _o(p,{returnSecureToken:!0}),A=yield cr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Xa extends O.ZR{constructor(h,p,_,A){var R;super(p.code,p.message),this.operationType=_,this.user=A,Object.setPrototypeOf(this,Xa.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,A){return new Xa(h,p,_,A)}}function qh(y,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Xa._fromErrorAndOperation(y,R,h,_):R})}function ni(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function eu(){return(eu=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield zt(!0,p,h);const{providerUserInfo:_}=yield mr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),A=ni(_||[]);return p.providerData=p.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function wo(y,h){return qi.apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(y,h,p=!1){const _=yield or(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return cr._forOperation(y,"link",_)})).apply(this,arguments)}function zt(y,h,p){return tu.apply(this,arguments)}function tu(){return(tu=(0,g.Z)(function*(y,h,p){yield Yt(h);const A=!1===y?"provider-already-linked":"no-such-provider";V(ni(h.providerData).has(p)===y,h.auth,A)})).apply(this,arguments)}function $s(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h,p=!1){var _;const{auth:A}=y,R="reauthenticate";try{const G=yield or(y,qh(A,R,h,y),p);V(G.idToken,A,"internal-error");const oe=st(G.idToken);V(oe,A,"internal-error");const{sub:Ue}=oe;return V(y.uid===Ue,A,"user-mismatch"),cr._forOperation(y,R,G)}catch(G){throw"auth/user-not-found"===(null===(_=G)||void 0===_?void 0:_.code)&&Ae(A,"user-mismatch"),G}})).apply(this,arguments)}function mi(y,h){return ru.apply(this,arguments)}function ru(){return(ru=(0,g.Z)(function*(y,h,p=!1){const _="signIn",A=yield qh(y,_,h),R=yield cr._fromIdTokenResponse(y,_,A);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function En(y,h){return It.apply(this,arguments)}function It(){return(It=(0,g.Z)(function*(y,h){return mi(_n(y),h)})).apply(this,arguments)}function iu(y,h){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield zt(!1,p,h.providerId),wo(p,h)})).apply(this,arguments)}function su(y,h){return ou.apply(this,arguments)}function ou(){return(ou=(0,g.Z)(function*(y,h){return $s((0,O.m9)(y),h)})).apply(this,arguments)}function Ac(y,h){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,g.Z)(function*(y,h){return Lr(y,"POST","/v1/accounts:signInWithCustomToken",Mt(y,h))})).apply(this,arguments)}function aa(){return(aa=(0,g.Z)(function*(y,h){const p=_n(y),_=yield Ac(p,{token:h,returnSecureToken:!0}),A=yield cr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class De{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?jt._fromServerResponse(h,p):Ae(h,"internal-error")}}class jt extends De{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new jt(p)}}function au(y,h,p){var _;V((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Cn(){return(Cn=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:h};p&&au(_,A,p),yield er(_,A)})).apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(y,h,p){yield Ln((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(y,h){yield wc((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function ca(y,h){return xc.apply(this,arguments)}function xc(){return(xc=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),_=yield Ln(p,{oobCode:h}),A=_.requestType;switch(V(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,p,"internal-error");default:V(_.email,p,"internal-error")}let R=null;return _.mfaInfo&&(R=De._fromServerResponse(_n(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Xl(){return(Xl=(0,g.Z)(function*(y,h){const{data:p}=yield ca((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(y,h,p){const _=_n(y),A=yield _o(_,{returnSecureToken:!0,email:h,password:p}),R=yield cr._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,_,"argument-error"),p&&au(_,A,p),yield Ya(_,A)})).apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),A=Mi.credentialWithLink(h,p||ke());return V(A._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),En(_,A)})).apply(this,arguments)}function Gp(y,h){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:createAuthUri",Mt(y,h))})).apply(this,arguments)}function ha(){return(ha=(0,g.Z)(function*(y,h){const _={identifier:h,continueUri:ct()?ke():"http://localhost"},{signinMethods:A}=yield Gp((0,O.m9)(y),_);return A||[]})).apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&au(p.auth,A,h);const{email:R}=yield ur(p.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function du(){return(du=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&au(_.auth,R,p);const{email:G}=yield Ec(_.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function hu(y,h){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,g.Z)(function*(y,h){return un(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Lc(){return(Lc=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,O.m9)(y),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield or(_,hu(_.auth,R));_.displayName=G.displayName||null,_.photoURL=G.photoUrl||null;const oe=_.providerData.find(({providerId:Ue})=>"password"===Ue);oe&&(oe.displayName=_.displayName,oe.photoURL=_.photoURL),yield _._updateTokensIfNecessary(G)})).apply(this,arguments)}function zs(y,h,p){return fu.apply(this,arguments)}function fu(){return(fu=(0,g.Z)(function*(y,h,p){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const G=yield or(y,sn(_,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class jr{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class fn extends jr{constructor(h,p,_,A){super(h,p,_),this.username=A}}class td extends jr{constructor(h,p){super(h,"facebook.com",p)}}class Vc extends fn{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Zh extends jr{constructor(h,p){super(h,"google.com",p)}}class Uc extends fn{constructor(h,p,_){super(h,"twitter.com",p,_)}}function pu(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Wn(y){var h,p;if(!y)return null;const{providerId:_}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const G=null===(p=null===(h=st(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new jr(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!_)return null;switch(_){case"facebook.com":return new td(R,A);case"github.com":return new Vc(R,A);case"google.com":return new Zh(R,A);case"twitter.com":return new Uc(R,A,y.screenName||null);case"custom":case"anonymous":return new jr(R,null);default:return new jr(R,_,A)}}(p)}class qs{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new qs("enroll",h,p)}static _fromMfaPendingCredential(h){return new qs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return qs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return qs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class mu{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=_n(h),A=p.customData._serverResponse,R=(A.mfaInfo||[]).map(oe=>De._fromServerResponse(_,oe));V(A.mfaPendingCredential,_,"internal-error");const G=qs._fromMfaPendingCredential(A.mfaPendingCredential);return new mu(G,R,function(){var oe=(0,g.Z)(function*(Ue){const Ze=yield Ue._process(_,G);delete A.mfaInfo,delete A.mfaPendingCredential;const yt=Object.assign(Object.assign({},A),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(p.operationType){case"signIn":const ht=yield cr._fromIdTokenResponse(_,p.operationType,yt);return yield _._updateCurrentUser(ht.user),ht;case"reauthenticate":return V(p.user,_,"internal-error"),cr._forOperation(p.user,p.operationType,yt);default:Ae(_,"internal-error")}});return function(Ue){return oe.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function yu(y,h){return un(y,"POST","/v2/accounts/mfaEnrollment:start",Mt(y,h))}class Yh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>De._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new Yh(h)}getSession(){var h=this;return(0,g.Z)(function*(){return qs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,g.Z)(function*(){const A=h,R=yield _.getSession(),G=yield or(_.user,A._process(_.user.auth,R,p));return yield _.user._updateTokensIfNecessary(G),_.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){var _;const A="string"==typeof h?h:h.uid,R=yield p.user.getIdToken(),G=yield or(p.user,function sd(y,h){return un(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Mt(y,h))}(p.user.auth,{idToken:R,mfaEnrollmentId:A}));p.enrolledFactors=p.enrolledFactors.filter(({uid:oe})=>oe!==A),yield p.user._updateTokensIfNecessary(G);try{yield p.user.reload()}catch(oe){if("auth/user-token-expired"!==(null===(_=oe)||void 0===_?void 0:_.code))throw oe}})()}}const Co=new WeakMap,Ks="__sak";class _u{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Ks,"1"),this.storage.removeItem(Ks),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ga=(()=>{class y extends _u{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pa(){const y=(0,O.z$)();return lt(y)||Ft(y)}()&&function yn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ls(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const A=this.storage.getItem(_),R=this.localCache[_];A!==R&&p(_,R,A)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((oe,Ue,Ze)=>{this.notifyListeners(oe,Ze)});const A=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(A);if(p.newValue!==oe)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!_)return}const R=()=>{const oe=this.storage.getItem(A);!_&&this.localCache[A]===oe||this.notifyListeners(A,oe)},G=this.storage.getItem(A);!function Gn(){return(0,O.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,_){this.localCache[p]=_;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var A=()=>super._set,R=this;return(0,g.Z)(function*(){yield A().call(R,p,_),R.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,A=this;return(0,g.Z)(function*(){const R=yield _().call(A,p);return A.localCache[p]=JSON.stringify(R),R})()}_remove(p){var _=()=>super._remove,A=this;return(0,g.Z)(function*(){yield _().call(A,p),delete A.localCache[p]})()}}return y.type="LOCAL",y})(),Ni=(()=>{class y extends _u{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let ud=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(R=>R.isListeningto(p));if(_)return _;const A=new y(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,g.Z)(function*(){const A=p,{eventId:R,eventType:G,data:oe}=A.data,Ue=_.handlersMap[G];if(!Ue?.size)return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Ze=Array.from(Ue).map(function(){var ht=(0,g.Z)(function*(on){return on(A.origin,oe)});return function(on){return ht.apply(this,arguments)}}()),yt=yield function ya(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(Ze);A.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:yt})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function va(y="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return y+p}class Bc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var A=this;return(0,g.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,oe;return new Promise((Ue,Ze)=>{const yt=va("",20);R.port1.start();const ht=setTimeout(()=>{Ze(new Error("unsupported_event"))},_);oe={messageChannel:R,onMessage(on){const rr=on;if(rr.data.eventId===yt)switch(rr.data.status){case"ack":clearTimeout(ht),G=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Ue(rr.data.response);break;default:clearTimeout(ht),clearTimeout(G),Ze(new Error("invalid_response"))}}},A.handlers.add(oe),R.port1.addEventListener("message",oe.onMessage),A.target.postMessage({eventType:h,eventId:yt,data:p},[R.port2])}).finally(()=>{oe&&A.removeMessageHandler(oe)})})()}}function Rn(){return window}function wu(){return typeof Rn().WorkerGlobalScope<"u"&&"function"==typeof Rn().importScripts}function _a(){return(_a=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Is="firebaseLocalStorageDb",Es="firebaseLocalStorage",jc="fbase_key";class Ys{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function wa(y,h){return y.transaction([Es],h?"readwrite":"readonly").objectStore(Es)}function To(){const y=indexedDB.open(Is,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Es,{keyPath:jc})}catch(A){p(A)}}),y.addEventListener("success",(0,g.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Es)?h(_):(_.close(),yield function ld(){const y=indexedDB.deleteDatabase(Is);return new Ys(y).toPromise()}(),h(yield To()))}))})}function Yi(y,h,p){return $c.apply(this,arguments)}function $c(){return($c=(0,g.Z)(function*(y,h,p){const _=wa(y,!0).put({[jc]:h,value:p});return new Ys(_).toPromise()})).apply(this,arguments)}function Ia(){return(Ia=(0,g.Z)(function*(y,h){const p=wa(y,!1).get(h),_=yield new Ys(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Qs(y,h){const p=wa(y,!0).delete(h);return new Ys(p).toPromise()}const Ao=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield To()),p.db})()}_withRetries(p){var _=this;return(0,g.Z)(function*(){let A=0;for(;;)try{const R=yield _._openDb();return yield p(R)}catch(R){if(A++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return wu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=ud._getInstance(function Eu(){return wu()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,g.Z)(function*(A,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(A,R){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,g.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var _,A;if(p.activeServiceWorker=yield function Zs(){return _a.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Bc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(_=R[0])||void 0===_?void 0:_.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,g.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Iu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield To();return yield Yi(p,Ks,"1"),yield Qs(p,Ks),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,g.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(R=>Yi(R,p,_)),A.localCache[p]=_,A.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,g.Z)(function*(){const A=yield _._withRetries(R=>function Du(y,h){return Ia.apply(this,arguments)}(R,p));return _.localCache[p]=A,A})()}_remove(p){var _=this;return(0,g.Z)(function*(){return _._withPendingWrite((0,g.Z)(function*(){return yield _._withRetries(A=>Qs(A,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const _=yield p._withRetries(G=>{const oe=wa(G,!1).getAll();return new Ys(oe).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:G,value:oe}of _)R.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(oe)&&(p.notifyListeners(G,oe),A.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!R.has(G)&&(p.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(p,_){this.localCache[p]=_;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function So(y,h){return un(y,"POST","/v2/accounts/mfaSignIn:start",Mt(y,h))}function Ds(){return(Ds=(0,g.Z)(function*(y){return(yield un(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Mo(y){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=A=>{const R=ve("internal-error");R.customData=A,p(R)},_.type="text/javascript",_.charset="UTF-8",function xo(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Tu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ea=1e12;class pn{constructor(h){this.auth=h,this.counter=Ea,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new zp(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||Ea;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Ea))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var _;return null===(_=p._widgets.get(h||Ea))||void 0===_||_.execute(),""})()}}class zp{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;V(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function py(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wp=Tu("rcb"),gy=new rn(3e4,6e4);class Qh{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Rn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function Cw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Rn().grecaptcha):new Promise((_,A)=>{const R=Rn().setTimeout(()=>{A(ve(h,"network-request-failed"))},gy.get());Rn()[Wp]=()=>{Rn().clearTimeout(R),delete Rn()[Wp];const oe=Rn().grecaptcha;if(!oe)return void A(ve(h,"internal-error"));const Ue=oe.render;oe.render=(Ze,yt)=>{const ht=Ue(Ze,yt);return this.counter++,ht},this.hostLanguage=p,_(oe)},Mo(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Wp,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),A(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=Rn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gc{load(h){return(0,g.Z)(function*(){return new pn(h)})()}clearedOneInstance(){}}const yy="recaptcha",vy={theme:"light",type:"image"};class nr{constructor(h,p=Object.assign({},vy),_){this.parameters=p,this.type=yy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;V(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gc:new Qh,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(R=>{const G=oe=>{!oe||(h.tokenChangeListeners.delete(G),R(oe))};h.tokenChangeListeners.add(G),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=Rn()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){V(ct()&&!wu(),h.auth,"internal-error"),yield function cn(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function $r(y){return Ds.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class vi{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=vs._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function ii(){return(ii=(0,g.Z)(function*(y,h,p){const _=_n(y),A=yield Cs(_,h,(0,O.m9)(p));return new vi(A,R=>En(_,R))})).apply(this,arguments)}function _i(){return(_i=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);yield zt(!1,_,"phone");const A=yield Cs(_.auth,h,(0,O.m9)(p));return new vi(A,R=>iu(_,R))})).apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),A=yield Cs(_.auth,h,(0,O.m9)(p));return new vi(A,R=>su(_,R))})).apply(this,arguments)}function Cs(y,h,p){return Au.apply(this,arguments)}function Au(){return(Au=(0,g.Z)(function*(y,h,p){var _;const A=yield p.verify();try{let R;if(V("string"==typeof A,y,"argument-error"),V(p.type===yy,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const G=R.session;if("phoneNumber"in R)return V("enroll"===G.type,y,"internal-error"),(yield yu(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,y,"internal-error");const oe=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return V(oe,y,"missing-multi-factor-info"),(yield So(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Up(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return G}}finally{p._reset()}})).apply(this,arguments)}function zc(){return(zc=(0,g.Z)(function*(y,h){yield wo((0,O.m9)(y),h)})).apply(this,arguments)}let Ca=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=_n(p)}verifyPhoneNumber(p,_){return Cs(this.auth,p,(0,O.m9)(_))}static credential(p,_){return vs._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:A}=p;return _&&A?vs._fromTokenResponse(_,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function No(y,h){return h?ne(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class bs extends ar{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return zn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return zn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return zn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function at(y){return mi(y.auth,new bs(y),y.bypassAuthState)}function ba(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),$s(p,new bs(y),y.bypassAuthState)}function Ts(y){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),wo(p,new bs(y),y.bypassAuthState)})).apply(this,arguments)}class Oo{constructor(h,p,_,A,R=!1){this.auth=h,this.resolver=_,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(_,A){h.pendingPromise={resolve:_,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,A){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:_,sessionId:A,postBody:R,tenantId:G,error:oe,type:Ue}=h;if(oe)return void p.reject(oe);const Ze={auth:p.auth,requestUri:_,sessionId:A,tenantId:G||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ue)(Ze))}catch(yt){p.reject(yt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return at;case"linkViaPopup":case"linkViaRedirect":return Ts;case"reauthViaPopup":case"reauthViaRedirect":return ba;default:Ae(this.auth,"internal-error")}}resolve(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qn=new rn(2e3,1e4);function ko(){return(ko=(0,g.Z)(function*(y,h,p){const _=_n(y);Be(y,h,Gi);const A=No(_,p);return new As(_,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function qc(){return(qc=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Be(_.auth,h,Gi);const A=No(_.auth,p);return new As(_.auth,"reauthViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}function Aa(){return(Aa=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Be(_.auth,h,Gi);const A=No(_.auth,p);return new As(_.auth,"linkViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}let As=(()=>{class y extends Oo{constructor(p,_,A,R,G){super(p,_,R,G),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const _=yield p.execute();return V(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,g.Z)(function*(){z(1===p.filter.length,"Popup operations only handle one event");const _=va();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,A;this.pollId=null!==(A=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,qn.get())};p()}}return y.currentPopupAction=null,y})();const wi=new Map;class Kc extends Oo{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let _=wi.get(p.auth._key());if(!_){try{const R=(yield function Po(y,h){return Hr.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(R)}catch(A){_=()=>Promise.reject(A)}wi.set(p.auth._key(),_)}return p.bypassAuthState||wi.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const A=yield _.auth._redirectUserForId(h.eventId);if(A)return _.user=A,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Hr(){return(Hr=(0,g.Z)(function*(y,h){const p=Vn(h),_=Xi(y);if(!(yield _._isAvailable()))return!1;const A="true"===(yield _._get(p));return yield _._remove(p),A})).apply(this,arguments)}function Ji(y,h){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,g.Z)(function*(y,h){return Xi(y)._set(Vn(h),"true")})).apply(this,arguments)}function xs(y,h){wi.set(y._key(),h)}function Xi(y){return ne(y._redirectPersistence)}function Vn(y){return W("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,g.Z)(function*(y,h,p){const _=_n(y);Be(y,h,Gi);const A=No(_,p);return yield Ji(A,_),A._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Be(_.auth,h,Gi);const A=No(_.auth,p);yield Ji(A,_.auth);const R=yield dt(_);return A._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Be(_.auth,h,Gi);const A=No(_.auth,p);yield zt(!1,_,h.providerId),yield Ji(A,_.auth);const R=yield dt(_);return A._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function et(){return(et=(0,g.Z)(function*(y,h){return yield _n(y)._initializationPromise,mt(y,h,!1)})).apply(this,arguments)}function mt(y,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,g.Z)(function*(y,h,p=!1){const _=_n(y),A=No(_,h),G=yield new Kc(_,A,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield _._persistUserIfCurrent(G.user),yield _._setRedirectUser(null,h)),G})).apply(this,arguments)}function dt(y){return In.apply(this,arguments)}function In(){return(In=(0,g.Z)(function*(y){const h=va(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Fo{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function ki(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tt(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!Tt(h)){const A=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,A))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ms(h))}saveEventToCache(h){this.cachedEventUids.add(Ms(h)),this.lastProcessedEventTime=Date.now()}}function Ms(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Tt({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Rs(y){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(y,h={}){return un(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Lo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xs=/^https?/;function Jh(){return(Jh=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Rs(y);for(const p of h)try{if(Zp(p))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function Zp(y){const h=ke(),{protocol:p,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===_}if(!Xs.test(p))return!1;if(Lo.test(y))return _===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(_)}const Yp=new rn(3e4,6e4);function _y(){const y=Rn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Pi=null;function Xh(y){return Pi=Pi||function Kn(y){return new Promise((h,p)=>{var _,A,R;function G(){_y(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{_y(),p(ve(y,"network-request-failed"))},timeout:Yp.get()})}if(null!==(A=null===(_=Rn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==A&&A.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Rn().gapi)||void 0===R||!R.load){const oe=Tu("iframefcb");return Rn()[oe]=()=>{gapi.load?G():p(ve(y,"network-request-failed"))},Mo(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Ue=>p(Ue))}G()}}).catch(h=>{throw Pi=null,h})}(y),Pi}const Qp=new rn(5e3,15e3),wy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Iy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jp(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?mn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:se.SDK_VERSION},A=Iy.get(y.config.apiHost);A&&(_.eid=A);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${p}?${(0,O.xO)(_).slice(1)}`}function nf(){return nf=(0,g.Z)(function*(y){const h=yield Xh(y),p=Rn().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:Jp(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wy,dontclear:!0},_=>new Promise(function(){var A=(0,g.Z)(function*(R,G){yield _.restyle({setHideOnLeave:!1});const oe=ve(y,"network-request-failed"),Ue=Rn().setTimeout(()=>{G(oe)},Qp.get());function Ze(){Rn().clearTimeout(Ue),R(_)}_.ping(Ze).then(Ze,()=>{G(oe)})});return function(R,G){return A.apply(this,arguments)}}()))}),nf.apply(this,arguments)}const Ey={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dy{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hd(y,h,p,_,A,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:se.SDK_VERSION,eventId:A};if(h instanceof Gi){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ue,Ze]of Object.entries(R||{}))G[Ue]=Ze}if(h instanceof zi){const Ue=h.getScopes().filter(Ze=>""!==Ze);Ue.length>0&&(G.scopes=Ue.join(","))}y.tenantId&&(G.tid=y.tenantId);const oe=G;for(const Ue of Object.keys(oe))void 0===oe[Ue]&&delete oe[Ue];return`${function Yc({config:y}){return y.emulator?mn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(oe).slice(1)}`}const Vo="webStorageSupport";class Jc extends class by{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Jc(h)}_finalizeEnroll(h,p,_){return function vu(y,h){return un(y,"POST","/v2/accounts/mfaEnrollment:finalize",Mt(y,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function bu(y,h){return un(y,"POST","/v2/accounts/mfaSignIn:finalize",Mt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Xc=(()=>{class y{constructor(){}static assertion(p){return Jc._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var el="@firebase/auth",sf="0.20.11";class Ty{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{var A;h((null===(A=_)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function eo(){return window}function pd(){return(pd=(0,g.Z)(function*(y,h,p){var _;const{BuildInfo:A}=eo();z(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Ou(h.sessionId),G={};return Ft()?G.ibi=A.packageName:Gt()?G.apn=A.packageName:Ae(y,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=R,hd(y,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,G)})).apply(this,arguments)}function tl(){return(tl=(0,g.Z)(function*(y){const{BuildInfo:h}=eo(),p={};Ft()?p.iosBundleId=h.packageName:Gt()?p.androidPackageName=h.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield Rs(y,p)})).apply(this,arguments)}function gd(){return(gd=(0,g.Z)(function*(y,h,p){const{cordova:_}=eo();let A=()=>{};try{yield new Promise((R,G)=>{let oe=null;function Ue(){var ht;R();const on=null===(ht=_.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof on&&on(),"function"==typeof p?.close&&p.close()}function Ze(){oe||(oe=window.setTimeout(()=>{G(ve(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===document?.visibilityState&&Ze()}h.addPassiveListener(Ue),document.addEventListener("resume",Ze,!1),Gt()&&document.addEventListener("visibilitychange",yt,!1),A=()=>{h.removePassiveListener(Ue),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",yt,!1),oe&&window.clearTimeout(oe)}})}finally{A()}})).apply(this,arguments)}function Ou(y){return xa.apply(this,arguments)}function xa(){return(xa=(0,g.Z)(function*(y){const h=ku(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ku(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(0,O.Pz)("authIdTokenMaxAge"),function Xp(y){(0,se._registerComponent)(new ue.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:R,authDomain:G}=_.options;return((oe,Ue)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:oe.name}),V(!G?.includes(":"),"argument-error",{appName:oe.name});const Ze={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fs(y)},yt=new Rt(oe,Ue,Ze);return function Fe(y,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(ne);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(yt,p),yt})(_,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ue.wA("auth-internal",h=>{const p=_n(h.getProvider("auth").getImmediate());return new Ty(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(el,sf,function Ay(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(el,sf,"esm2017")}("Browser");class yd extends Fo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function tg(y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,g.Z)(function*(y){const h=yield Na()._get(to(y));return h&&(yield Na()._remove(to(y))),h})).apply(this,arguments)}function Oy(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function Na(){return ne(ga)}function to(y){return W("authEvent",y.config.apiKey,y.name)}function no(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Pu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function nl(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function cf(y=(0,O.z$)()){return!("file:"!==nl()&&"ionic:"!==nl()&&"capacitor:"!==nl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function ag(){try{const y=self.localStorage,h=va();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Fy(y=(0,O.z$)()){return function og(){return(0,O.w1)()&&11===document?.documentMode}()||function df(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return wd()&&(0,O.hl)()}return!1}function wd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Id(){return(function Py(){return"http:"===nl()||"https:"===nl()}()||(0,O.ru)()||cf())&&!function lf(){return(0,O.b$)()||(0,O.UG)()}()&&ag()&&!wd()}function io(){return cf()&&typeof document<"u"}function rl(){return(rl=(0,g.Z)(function*(){return!!io()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const oi={LOCAL:"local",NONE:"none",SESSION:"session"},Nr=V,ka="persistence";function il(y){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Dd(),p=W(ka,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Dd(){var y;try{return(null===(y=function hf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Cd=V;class ai{constructor(){this.browserResolver=ne(class es{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ni,this._completeRedirectFn=mt,this._overrideRedirectResult=xs}_openPopup(h,p,_,A){var R=this;return(0,g.Z)(function*(){var G;z(null===(G=R.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const oe=hd(h,p,_,ke(),A);return function Nu(y,h,p,_=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-_)/2,0).toString();let oe="";const Ue=Object.assign(Object.assign({},Ey),{width:_.toString(),height:A.toString(),top:R,left:G}),Ze=(0,O.z$)().toLowerCase();p&&(oe=qt(Ze)?"_blank":p),Ge(Ze)&&(h=h||"http://localhost",Ue.scrollbars="yes");const yt=Object.entries(Ue).reduce((on,[rr,Li])=>`${on}${rr}=${Li},`,"");if(function Ur(y=(0,O.z$)()){var h;return Ft(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ze)&&"_self"!==oe)return function Cy(y,h){const p=document.createElement("a");p.href=y,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",oe),new Dy(null);const ht=window.open(h||"",oe,yt);V(ht,y,"popup-blocked");try{ht.focus()}catch{}return new Dy(ht)}(h,oe,va())})()}_openRedirect(h,p,_,A){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function yi(y){Rn().location.href=y}(hd(h,p,_,ke(),A)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:A,promise:R}=this.eventManagers[p];return A?Promise.resolve(A):(z(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const _=yield function tf(y){return nf.apply(this,arguments)}(h),A=new Fo(h);return _.register("authEvent",R=>(V(R?.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:A},p.iframes[h._key()]=_,A})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Vo,{type:Vo},A=>{var R;const G=null===(R=A?.[0])||void 0===R?void 0:R[Vo];void 0!==G&&p(!!G),Ae(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ii(y){return Jh.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ls()||lt()||Ft()}}),this.cordovaResolver=ne(class uf{constructor(){this._redirectPersistence=Ni,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mt,this._overrideRedirectResult=xs}_initialize(h){var p=this;return(0,g.Z)(function*(){const _=h._key();let A=p.eventManagers.get(_);return A||(A=new yd(h),p.eventManagers.set(_,A),p.attachCallbackListeners(h,A)),A})()}_openPopup(h){Ae(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,A){var R=this;return(0,g.Z)(function*(){!function Ny(y){var h,p,_,A,R,G,oe,Ue,Ze,yt;const ht=eo();V("function"==typeof(null===(h=ht?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=ht?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(A=null===(_=ht?.cordova)||void 0===_?void 0:_.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Ue=null===(oe=null===(G=ht?.cordova)||void 0===G?void 0:G.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(yt=null===(Ze=ht?.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield R._initialize(h);yield G.initialized(),G.resetRedirect(),function _r(){wi.clear()}(),yield R._originValidation(h);const oe=function eg(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Oy(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,_,A);yield function Ma(y,h){return Na()._set(to(y),h)}(h,oe);const Ue=yield function Uo(y,h,p){return pd.apply(this,arguments)}(h,oe,p),Ze=yield function My(y){const{cordova:h}=eo();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let A=null;_?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function Xn(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(A)})})}(Ue);return function Ry(y,h,p){return gd.apply(this,arguments)}(h,G,Ze)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Sa(y){return tl.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:A,BuildInfo:R}=eo(),G=setTimeout((0,g.Z)(function*(){yield tg(h),p.onEvent(Pu())}),500),oe=function(){var yt=(0,g.Z)(function*(ht){clearTimeout(G);const on=yield tg(h);let rr=null;on&&ht?.url&&(rr=function ng(y,h){var p,_;const A=function ig(y){const h=no(y),p=h.link?decodeURIComponent(h.link):void 0,_=no(p).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return no(A).link||A||_||p||y}(h);if(A.includes("/__/auth/callback")){const R=no(A),G=R.firebaseError?function rg(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,oe=null===(_=null===(p=G?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Ue=oe?ve(oe):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(on,ht.url)),p.onEvent(rr||Pu())});return function(on){return yt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,oe);const Ue=A,Ze=`${R.packageName.toLowerCase()}://`;eo().handleOpenURL=function(){var yt=(0,g.Z)(function*(ht){if(ht.toLowerCase().startsWith(Ze)&&oe({url:ht}),"function"==typeof Ue)try{Ue(ht)}catch(on){console.error(on)}});return function(ht){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ni,this._completeRedirectFn=mt,this._overrideRedirectResult=xs}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,A){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,_,A)})()}_openRedirect(h,p,_,A){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,_,A)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return io()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Cd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function ug(){return rl.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function bd(y){return y.unwrap()}function Td(y){return Bo(y)}function Bo(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ca.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let _;switch(p){case"google.com":_=Ja;break;case"facebook.com":_=sa;break;case"github.com":_=Tc;break;case"twitter.com":_=Br;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:oe,nonce:Ue}=h;return R||G||A||oe?oe?p.startsWith("saml.")?oa._create(p,oe):Hi._fromParams({providerId:p,signInMethod:p,pendingToken:oe,idToken:A,accessToken:R}):new js(p).credential({idToken:A,accessToken:R,rawNonce:Ue}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function ui(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function ol(y,h){var p,_;const A=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=h)||void 0===_?void 0:_.code))h.resolver=new Ly(y,function Tn(y,h){var p;const _=(0,O.m9)(y),A=h;return V(h.customData.operationType,_,"argument-error"),V(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),mu._fromError(_,A)}(y,h));else if(A){const R=Bo(h),G=h;R&&(G.credential=R,G.tenantId=A.tenantId||void 0,G.email=A.email||void 0,G.phoneNumber=A.phoneNumber||void 0)}}(y,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:Td(p),additionalUserInfo:pu(p),user:Fi.getOrCreate(A)}})}function jo(y,h){return pf.apply(this,arguments)}function pf(){return(pf=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>ui(y,p.confirm(_))}})).apply(this,arguments)}class Ly{constructor(h,p){this.resolver=p,this.auth=function sl(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ui(bd(this.auth),this.resolver.resolveSignIn(h))}}class Fi{constructor(h){this._delegate=h,this.multiFactor=function bo(y){const h=(0,O.m9)(y);return Co.has(h)||Co.set(h,Yh._fromUser(h)),Co.get(h)}(h)}static getOrCreate(h){return Fi.USER_MAP.has(h)||Fi.USER_MAP.set(h,new Fi(h)),Fi.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return ui(p.auth,iu(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,g.Z)(function*(){return jo(_.auth,function wn(y,h,p){return _i.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return ui(p.auth,function Su(y,h,p){return Aa.apply(this,arguments)}(p._delegate,h,ai))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield il(_n(p.auth)),function K(y,h,p){return function ee(y,h,p){return Ee.apply(this,arguments)}(y,h,p)}(p._delegate,h,ai)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return ui(p.auth,su(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return jo(this.auth,function Da(y,h,p){return Mr.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return ui(this.auth,function Kp(y,h,p){return qc.apply(this,arguments)}(this._delegate,h,ai))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield il(_n(p.auth)),function b(y,h,p){return function x(y,h,p){return F.apply(this,arguments)}(y,h,p)}(p._delegate,h,ai)})()}sendEmailVerification(h){return function Oc(y,h){return fa.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function vr(y,h){return eu.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function ed(y,h){return zs((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Gs(y,h){return zs((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function qp(y,h){return zc.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Fc(y,h){return Lc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function kc(y,h,p){return du.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fi.USER_MAP=new WeakMap;const $o=V;let Fu=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;$o(A,"invalid-api-key",{appName:p.name}),$o(A,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?ai:void 0;this._delegate=_.initialize({options:{persistence:Ho(A,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function Ka(y,h,p){const _=_n(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const A=!!p?.disableWarnings,R=xi(h),{host:G,port:oe}=function Fn(y){const h=xi(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(_);if(A){const R=A[1];return{host:R,port:ps(_.substr(R.length+1))}}{const[R,G]=_.split(":");return{host:R,port:ps(G)}}}(h);_.config.emulator={url:`${R}//${G}${null===oe?"":`:${oe}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:G,port:oe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function gs(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function ri(y,h){return ua.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ca(this._delegate,p)}confirmPasswordReset(p,_){return function cu(y,h,p){return Io.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var A=this;return(0,g.Z)(function*(){return ui(A._delegate,function la(y,h,p){return bn.apply(this,arguments)}(A._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function lu(y,h){return ha.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Zi(y,h){return"EMAIL_SIGNIN"===Qa.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){$o(Id(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function Me(y,h){return et.apply(this,arguments)}(p._delegate,ai);return _?ui(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Oa(y,h){_n(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,A){const{next:R,error:G,complete:oe}=al(p,_,A);return this._delegate.onAuthStateChanged(R,G,oe)}onIdTokenChanged(p,_,A){const{next:R,error:G,complete:oe}=al(p,_,A);return this._delegate.onIdTokenChanged(R,G,oe)}sendSignInLinkToEmail(p,_){return function Rc(y,h,p){return Hs.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function uu(y,h,p){return Cn.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,g.Z)(function*(){let A;switch(function ff(y,h){Nr(Object.values(oi).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Nr(h!==oi.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Nr(h===oi.NONE,y,"unsupported-persistence-type"):wd()?Nr(h===oi.NONE||h===oi.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Nr(h===oi.NONE||ag(),y,"unsupported-persistence-type")}(_._delegate,p),p){case oi.SESSION:A=Ni;break;case oi.LOCAL:A=(yield ne(Ao)._isAvailable())?Ao:ga;break;case oi.NONE:A=L;break;default:return Ae("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ui(this._delegate,function Wh(y){return Dn.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ui(this._delegate,En(this._delegate,p))}signInWithCustomToken(p){return ui(this._delegate,function Sc(y,h){return aa.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return ui(this._delegate,function Ri(y,h,p){return En((0,O.m9)(y),Mi.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return ui(this._delegate,function Hp(y,h,p){return da.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return jo(this._delegate,function ot(y,h,p){return ii.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,g.Z)(function*(){return $o(Id(),_._delegate,"operation-not-supported-in-this-environment"),ui(_._delegate,function Wc(y,h,p){return ko.apply(this,arguments)}(_._delegate,p,ai))})()}signInWithRedirect(p){var _=this;return(0,g.Z)(function*(){return $o(Id(),_._delegate,"operation-not-supported-in-this-environment"),yield il(_._delegate),function vn(y,h,p){return function xu(y,h,p){return D.apply(this,arguments)}(y,h,p)}(_._delegate,p,ai)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Mc(y,h){return Xl.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=oi,y})();function al(y,h,p){let _=y;"function"!=typeof y&&({next:_,error:h,complete:p}=y);const A=_;return{next:G=>A(G&&Fi.getOrCreate(G)),error:h,complete:p}}function Ho(y,h){const p=function so(y,h){const p=Dd();if(!p)return[];const _=W(ka,y,h);switch(p.getItem(_)){case oi.NONE:return[L];case oi.LOCAL:return[Ao,Ni];case oi.SESSION:return[Ni];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Ao)&&p.push(Ao),typeof window<"u")for(const _ of[ga,Ni])p.includes(_)||p.push(_);return p.includes(L)||p.push(L),p}class gf{constructor(){this.providerId="phone",this._delegate=new Ca(bd(X.Z.auth()))}static credential(h,p){return Ca.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}gf.PHONE_SIGN_IN_METHOD=Ca.PHONE_SIGN_IN_METHOD,gf.PROVIDER_ID=Ca.PROVIDER_ID;const ul=V;class mf{constructor(h,p,_=X.Z.app()){var A;ul(null===(A=_.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new nr(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function vf(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Fu(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Mi,FacebookAuthProvider:sa,GithubAuthProvider:Tc,GoogleAuthProvider:Ja,OAuthProvider:js,SAMLAuthProvider:ti,PhoneAuthProvider:gf,PhoneMultiFactorGenerator:Xc,RecaptchaVerifier:mf,TwitterAuthProvider:Br,Auth:Fu,AuthCredential:ar,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(X.Z)},9751:(ut,be,P)=>{P.d(be,{y:()=>de});var g=P(2961),X=P(727),O=P(8822),se=P(9635),ie=P(2416),le=P(576),ue=P(2806);let de=(()=>{class q{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const we=new q;return we.source=this,we.operator=Se,we}subscribe(Se,we,Xe){const ge=function B(q){return q&&q instanceof g.Lv||function U(q){return q&&(0,le.m)(q.next)&&(0,le.m)(q.error)&&(0,le.m)(q.complete)}(q)&&(0,X.Nn)(q)}(Se)?Se:new g.Hp(Se,we,Xe);return(0,ue.x)(()=>{const{operator:fe,source:Ye}=this;ge.add(fe?fe.call(ge,Ye):Ye?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Se){try{return this._subscribe(Se)}catch(we){Se.error(we)}}forEach(Se,we){return new(we=he(we))((Xe,ge)=>{const fe=new g.Hp({next:Ye=>{try{Se(Ye)}catch(rt){ge(rt),fe.unsubscribe()}},error:ge,complete:Xe});this.subscribe(fe)})}_subscribe(Se){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Se)}[O.L](){return this}pipe(...Se){return(0,se.U)(Se)(this)}toPromise(Se){return new(Se=he(Se))((we,Xe)=>{let ge;this.subscribe(fe=>ge=fe,fe=>Xe(fe),()=>we(ge))})}}return q.create=Le=>new q(Le),q})();function he(q){var Le;return null!==(Le=q??ie.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ut,be,P)=>{P.d(be,{x:()=>ue});var g=P(9751),X=P(727);const se=(0,P(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=P(8737),le=P(2806);let ue=(()=>{class he extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const q=new de(this,this);return q.operator=B,q}_throwIfClosed(){if(this.closed)throw new se}next(B){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next(B)}})}error(B){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:q}=this;for(;q.length;)q.shift().error(B)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:q,isStopped:Le,observers:Se}=this;return q||Le?X.Lc:(this.currentObservers=null,Se.push(B),new X.w0(()=>{this.currentObservers=null,(0,ie.P)(Se,B)}))}_checkFinalizedStatuses(B){const{hasError:q,thrownError:Le,isStopped:Se}=this;q?B.error(Le):Se&&B.complete()}asObservable(){const B=new g.y;return B.source=this,B}}return he.create=(U,B)=>new de(U,B),he})();class de extends ue{constructor(U,B){super(),this.destination=U,this.source=B}next(U){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===q||q.call(B,U)}error(U){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===q||q.call(B,U)}complete(){var U,B;null===(B=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===B||B.call(U)}_subscribe(U){var B,q;return null!==(q=null===(B=this.source)||void 0===B?void 0:B.subscribe(U))&&void 0!==q?q:X.Lc}}},2961:(ut,be,P)=>{P.d(be,{Hp:()=>Xe,Lv:()=>q});var g=P(576),X=P(727),O=P(2416),se=P(7849);function ie(){}const le=he("C",void 0,void 0);function he(Ae,ve,Ie){return{kind:Ae,value:ve,error:Ie}}var U=P(3410),B=P(2806);class q extends X.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,X.Nn)(ve)&&ve.add(this)):this.destination=rt}static create(ve,Ie,Be){return new Xe(ve,Ie,Be)}next(ve){this.isStopped?Ye(function de(Ae){return he("N",Ae,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ye(function ue(Ae){return he("E",void 0,Ae)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ye(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Se(Ae,ve){return Le.call(Ae,ve)}class we{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(ve)}catch(Be){ge(Be)}}error(ve){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(ve)}catch(Be){ge(Be)}else ge(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ie){ge(Ie)}}}class Xe extends q{constructor(ve,Ie,Be){let je;if(super(),(0,g.m)(ve)||!ve)je={next:ve??void 0,error:Ie??void 0,complete:Be??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),je={next:ve.next&&Se(ve.next,V),error:ve.error&&Se(ve.error,V),complete:ve.complete&&Se(ve.complete,V)}):je=ve}this.destination=new we(je)}}function ge(Ae){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Ae):(0,se.h)(Ae)}function Ye(Ae,ve){const{onStoppedNotification:Ie}=O.v;Ie&&U.z.setTimeout(()=>Ie(Ae,ve))}const rt={closed:!0,next:ie,error:function fe(Ae){throw Ae},complete:ie}},727:(ut,be,P)=>{P.d(be,{Lc:()=>le,w0:()=>ie,Nn:()=>ue});var g=P(576);const O=(0,P(3888).d)(he=>function(B){he(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((q,Le)=>`${Le+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var se=P(8737);class ie{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Se of B)Se.remove(this);else B.remove(this);const{initialTeardown:q}=this;if((0,g.m)(q))try{q()}catch(Se){U=Se instanceof O?Se.errors:[Se]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Se of Le)try{de(Se)}catch(we){U=U??[],we instanceof O?U=[...U,...we.errors]:U.push(we)}}if(U)throw new O(U)}}add(U){var B;if(U&&U!==this)if(this.closed)de(U);else{if(U instanceof ie){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(U)}}_hasParent(U){const{_parentage:B}=this;return B===U||Array.isArray(B)&&B.includes(U)}_addParent(U){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(U),B):B?[B,U]:U}_removeParent(U){const{_parentage:B}=this;B===U?this._parentage=null:Array.isArray(B)&&(0,se.P)(B,U)}remove(U){const{_finalizers:B}=this;B&&(0,se.P)(B,U),U instanceof ie&&U._removeParent(this)}}ie.EMPTY=(()=>{const he=new ie;return he.closed=!0,he})();const le=ie.EMPTY;function ue(he){return he instanceof ie||he&&"closed"in he&&(0,g.m)(he.remove)&&(0,g.m)(he.add)&&(0,g.m)(he.unsubscribe)}function de(he){(0,g.m)(he)?he():he.unsubscribe()}},2416:(ut,be,P)=>{P.d(be,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,be,P)=>{P.d(be,{E:()=>X});const X=new(P(9751).y)(ie=>ie.complete())},8996:(ut,be,P)=>{P.d(be,{D:()=>ve});var g=P(8421),X=P(5363),O=P(9468),le=P(9751),de=P(2202),he=P(576),U=P(9672);function q(Ie,Be){if(!Ie)throw new Error("Iterable cannot be null");return new le.y(je=>{(0,U.f)(je,Be,()=>{const V=Ie[Symbol.asyncIterator]();(0,U.f)(je,Be,()=>{V.next().then(pe=>{pe.done?je.complete():je.next(pe.value)})},0,!0)})})}var Le=P(3670),Se=P(8239),we=P(1144),Xe=P(6495),ge=P(2206),fe=P(4532),Ye=P(3260);function ve(Ie,Be){return Be?function Ae(Ie,Be){if(null!=Ie){if((0,Le.c)(Ie))return function se(Ie,Be){return(0,g.Xf)(Ie).pipe((0,O.R)(Be),(0,X.Q)(Be))}(Ie,Be);if((0,we.z)(Ie))return function ue(Ie,Be){return new le.y(je=>{let V=0;return Be.schedule(function(){V===Ie.length?je.complete():(je.next(Ie[V++]),je.closed||this.schedule())})})}(Ie,Be);if((0,Se.t)(Ie))return function ie(Ie,Be){return(0,g.Xf)(Ie).pipe((0,O.R)(Be),(0,X.Q)(Be))}(Ie,Be);if((0,ge.D)(Ie))return q(Ie,Be);if((0,Xe.T)(Ie))return function B(Ie,Be){return new le.y(je=>{let V;return(0,U.f)(je,Be,()=>{V=Ie[de.h](),(0,U.f)(je,Be,()=>{let pe,z;try{({value:pe,done:z}=V.next())}catch(Q){return void je.error(Q)}z?je.complete():je.next(pe)},0,!0)}),()=>(0,he.m)(V?.return)&&V.return()})}(Ie,Be);if((0,Ye.L)(Ie))return function rt(Ie,Be){return q((0,Ye.Q)(Ie),Be)}(Ie,Be)}throw(0,fe.z)(Ie)}(Ie,Be):(0,g.Xf)(Ie)}},8421:(ut,be,P)=>{P.d(be,{Xf:()=>Le});var g=P(655),X=P(1144),O=P(8239),se=P(9751),ie=P(3670),le=P(2206),ue=P(4532),de=P(6495),he=P(3260),U=P(576),B=P(7849),q=P(8822);function Le(Ae){if(Ae instanceof se.y)return Ae;if(null!=Ae){if((0,ie.c)(Ae))return function Se(Ae){return new se.y(ve=>{const Ie=Ae[q.L]();if((0,U.m)(Ie.subscribe))return Ie.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,X.z)(Ae))return function we(Ae){return new se.y(ve=>{for(let Ie=0;Ie<Ae.length&&!ve.closed;Ie++)ve.next(Ae[Ie]);ve.complete()})}(Ae);if((0,O.t)(Ae))return function Xe(Ae){return new se.y(ve=>{Ae.then(Ie=>{ve.closed||(ve.next(Ie),ve.complete())},Ie=>ve.error(Ie)).then(null,B.h)})}(Ae);if((0,le.D)(Ae))return fe(Ae);if((0,de.T)(Ae))return function ge(Ae){return new se.y(ve=>{for(const Ie of Ae)if(ve.next(Ie),ve.closed)return;ve.complete()})}(Ae);if((0,he.L)(Ae))return function Ye(Ae){return fe((0,he.Q)(Ae))}(Ae)}throw(0,ue.z)(Ae)}function fe(Ae){return new se.y(ve=>{(function rt(Ae,ve){var Ie,Be,je,V;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,g.KL)(Ae);!(Be=yield Ie.next()).done;)if(ve.next(Be.value),ve.closed)return}catch(pe){je={error:pe}}finally{try{Be&&!Be.done&&(V=Ie.return)&&(yield V.call(Ie))}finally{if(je)throw je.error}}ve.complete()})})(Ae,ve).catch(Ie=>ve.error(Ie))})}},6451:(ut,be,P)=>{P.d(be,{T:()=>le});var g=P(8189),X=P(8421),O=P(515),se=P(7669),ie=P(8996);function le(...ue){const de=(0,se.yG)(ue),he=(0,se._6)(ue,1/0),U=ue;return U.length?1===U.length?(0,X.Xf)(U[0]):(0,g.J)(he)((0,ie.D)(U,de)):O.E}},5403:(ut,be,P)=>{P.d(be,{x:()=>X});var g=P(2961);function X(se,ie,le,ue,de){return new O(se,ie,le,ue,de)}class O extends g.Lv{constructor(ie,le,ue,de,he,U){super(ie),this.onFinalize=he,this.shouldUnsubscribe=U,this._next=le?function(B){try{le(B)}catch(q){ie.error(q)}}:super._next,this._error=de?function(B){try{de(B)}catch(q){ie.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(B){ie.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(ut,be,P)=>{P.d(be,{U:()=>O});var g=P(4482),X=P(5403);function O(se,ie){return(0,g.e)((le,ue)=>{let de=0;le.subscribe((0,X.x)(ue,he=>{ue.next(se.call(ie,he,de++))}))})}},8189:(ut,be,P)=>{P.d(be,{J:()=>O});var g=P(5577),X=P(4671);function O(se=1/0){return(0,g.z)(X.y,se)}},5577:(ut,be,P)=>{P.d(be,{z:()=>de});var g=P(4004),X=P(8421),O=P(4482),se=P(9672),ie=P(5403),ue=P(576);function de(he,U,B=1/0){return(0,ue.m)(U)?de((q,Le)=>(0,g.U)((Se,we)=>U(q,Se,Le,we))((0,X.Xf)(he(q,Le))),B):("number"==typeof U&&(B=U),(0,O.e)((q,Le)=>function le(he,U,B,q,Le,Se,we,Xe){const ge=[];let fe=0,Ye=0,rt=!1;const Ae=()=>{rt&&!ge.length&&!fe&&U.complete()},ve=Be=>fe<q?Ie(Be):ge.push(Be),Ie=Be=>{Se&&U.next(Be),fe++;let je=!1;(0,X.Xf)(B(Be,Ye++)).subscribe((0,ie.x)(U,V=>{Le?.(V),Se?ve(V):U.next(V)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;ge.length&&fe<q;){const V=ge.shift();we?(0,se.f)(U,we,()=>Ie(V)):Ie(V)}Ae()}catch(V){U.error(V)}}))};return he.subscribe((0,ie.x)(U,ve,()=>{rt=!0,Ae()})),()=>{Xe?.()}}(q,Le,he,B)))}},5363:(ut,be,P)=>{P.d(be,{Q:()=>se});var g=P(9672),X=P(4482),O=P(5403);function se(ie,le=0){return(0,X.e)((ue,de)=>{ue.subscribe((0,O.x)(de,he=>(0,g.f)(de,ie,()=>de.next(he),le),()=>(0,g.f)(de,ie,()=>de.complete(),le),he=>(0,g.f)(de,ie,()=>de.error(he),le)))})}},3099:(ut,be,P)=>{P.d(be,{B:()=>ie});var g=P(8421),X=P(7579),O=P(2961),se=P(4482);function ie(ue={}){const{connector:de=(()=>new X.x),resetOnError:he=!0,resetOnComplete:U=!0,resetOnRefCountZero:B=!0}=ue;return q=>{let Le,Se,we,Xe=0,ge=!1,fe=!1;const Ye=()=>{Se?.unsubscribe(),Se=void 0},rt=()=>{Ye(),Le=we=void 0,ge=fe=!1},Ae=()=>{const ve=Le;rt(),ve?.unsubscribe()};return(0,se.e)((ve,Ie)=>{Xe++,!fe&&!ge&&Ye();const Be=we=we??de();Ie.add(()=>{Xe--,0===Xe&&!fe&&!ge&&(Se=le(Ae,B))}),Be.subscribe(Ie),!Le&&Xe>0&&(Le=new O.Hp({next:je=>Be.next(je),error:je=>{fe=!0,Ye(),Se=le(rt,he,je),Be.error(je)},complete:()=>{ge=!0,Ye(),Se=le(rt,U),Be.complete()}}),(0,g.Xf)(ve).subscribe(Le))})(q)}}function le(ue,de,...he){if(!0===de)return void ue();if(!1===de)return;const U=new O.Hp({next:()=>{U.unsubscribe(),ue()}});return de(...he).subscribe(U)}},9468:(ut,be,P)=>{P.d(be,{R:()=>X});var g=P(4482);function X(O,se=0){return(0,g.e)((ie,le)=>{le.add(O.schedule(()=>ie.subscribe(le),se))})}},8505:(ut,be,P)=>{P.d(be,{b:()=>ie});var g=P(576),X=P(4482),O=P(5403),se=P(4671);function ie(le,ue,de){const he=(0,g.m)(le)||ue||de?{next:le,error:ue,complete:de}:le;return he?(0,X.e)((U,B)=>{var q;null===(q=he.subscribe)||void 0===q||q.call(he);let Le=!0;U.subscribe((0,O.x)(B,Se=>{var we;null===(we=he.next)||void 0===we||we.call(he,Se),B.next(Se)},()=>{var Se;Le=!1,null===(Se=he.complete)||void 0===Se||Se.call(he),B.complete()},Se=>{var we;Le=!1,null===(we=he.error)||void 0===we||we.call(he,Se),B.error(Se)},()=>{var Se,we;Le&&(null===(Se=he.unsubscribe)||void 0===Se||Se.call(he)),null===(we=he.finalize)||void 0===we||we.call(he)}))}):se.y}},4408:(ut,be,P)=>{P.d(be,{o:()=>ie});var g=P(727);class X extends g.w0{constructor(ue,de){super()}schedule(ue,de=0){return this}}const O={setInterval(le,ue,...de){const{delegate:he}=O;return he?.setInterval?he.setInterval(le,ue,...de):setInterval(le,ue,...de)},clearInterval(le){const{delegate:ue}=O;return(ue?.clearInterval||clearInterval)(le)},delegate:void 0};var se=P(8737);class ie extends X{constructor(ue,de){super(ue,de),this.scheduler=ue,this.work=de,this.pending=!1}schedule(ue,de=0){var he;if(this.closed)return this;this.state=ue;const U=this.id,B=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(B,U,de)),this.pending=!0,this.delay=de,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(B,this.id,de),this}requestAsyncId(ue,de,he=0){return O.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;null!=de&&O.clearInterval(de)}execute(ue,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,de){let U,he=!1;try{this.work(ue)}catch(B){he=!0,U=B||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ue,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(de,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,be,P)=>{P.d(be,{v:()=>O});var g=P(6063);class X{constructor(ie,le=X.now){this.schedulerActionCtor=ie,this.now=le}schedule(ie,le=0,ue){return new this.schedulerActionCtor(this,ie).schedule(ue,le)}}X.now=g.l.now;class O extends X{constructor(ie,le=X.now){super(ie,le),this.actions=[],this._active=!1}flush(ie){const{actions:le}=this;if(this._active)return void le.push(ie);let ue;this._active=!0;do{if(ue=ie.execute(ie.state,ie.delay))break}while(ie=le.shift());if(this._active=!1,ue){for(;ie=le.shift();)ie.unsubscribe();throw ue}}}},4986:(ut,be,P)=>{P.d(be,{z:()=>O});var g=P(4408);const O=new(P(7565).v)(g.o)},6063:(ut,be,P)=>{P.d(be,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(ut,be,P)=>{P.d(be,{z:()=>g});const g={setTimeout(X,O,...se){const{delegate:ie}=g;return ie?.setTimeout?ie.setTimeout(X,O,...se):setTimeout(X,O,...se)},clearTimeout(X){const{delegate:O}=g;return(O?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(ut,be,P)=>{P.d(be,{h:()=>X});const X=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,be,P)=>{P.d(be,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,be,P)=>{P.d(be,{_6:()=>le,jO:()=>se,yG:()=>ie});var g=P(576);function O(ue){return ue[ue.length-1]}function se(ue){return(0,g.m)(O(ue))?ue.pop():void 0}function ie(ue){return function X(ue){return ue&&(0,g.m)(ue.schedule)}(O(ue))?ue.pop():void 0}function le(ue,de){return"number"==typeof O(ue)?ue.pop():de}},8737:(ut,be,P)=>{function g(X,O){if(X){const se=X.indexOf(O);0<=se&&X.splice(se,1)}}P.d(be,{P:()=>g})},3888:(ut,be,P)=>{function g(X){const se=X(ie=>{Error.call(ie),ie.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}P.d(be,{d:()=>g})},2806:(ut,be,P)=>{P.d(be,{O:()=>se,x:()=>O});var g=P(2416);let X=null;function O(ie){if(g.v.useDeprecatedSynchronousErrorHandling){const le=!X;if(le&&(X={errorThrown:!1,error:null}),ie(),le){const{errorThrown:ue,error:de}=X;if(X=null,ue)throw de}}else ie()}function se(ie){g.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ie)}},9672:(ut,be,P)=>{function g(X,O,se,ie=0,le=!1){const ue=O.schedule(function(){se(),le?X.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(X.add(ue),!le)return ue}P.d(be,{f:()=>g})},4671:(ut,be,P)=>{function g(X){return X}P.d(be,{y:()=>g})},1144:(ut,be,P)=>{P.d(be,{z:()=>g});const g=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(ut,be,P)=>{P.d(be,{D:()=>X});var g=P(576);function X(O){return Symbol.asyncIterator&&(0,g.m)(O?.[Symbol.asyncIterator])}},576:(ut,be,P)=>{function g(X){return"function"==typeof X}P.d(be,{m:()=>g})},3670:(ut,be,P)=>{P.d(be,{c:()=>O});var g=P(8822),X=P(576);function O(se){return(0,X.m)(se[g.L])}},6495:(ut,be,P)=>{P.d(be,{T:()=>O});var g=P(2202),X=P(576);function O(se){return(0,X.m)(se?.[g.h])}},8239:(ut,be,P)=>{P.d(be,{t:()=>X});var g=P(576);function X(O){return(0,g.m)(O?.then)}},3260:(ut,be,P)=>{P.d(be,{L:()=>se,Q:()=>O});var g=P(655),X=P(576);function O(ie){return(0,g.FC)(this,arguments,function*(){const ue=ie.getReader();try{for(;;){const{value:de,done:he}=yield(0,g.qq)(ue.read());if(he)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(de)}}finally{ue.releaseLock()}})}function se(ie){return(0,X.m)(ie?.getReader)}},4482:(ut,be,P)=>{P.d(be,{A:()=>X,e:()=>O});var g=P(576);function X(se){return(0,g.m)(se?.lift)}function O(se){return ie=>{if(X(ie))return ie.lift(function(le){try{return se(le,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ut,be,P)=>{P.d(be,{U:()=>O,z:()=>X});var g=P(4671);function X(...se){return O(se)}function O(se){return 0===se.length?g.y:1===se.length?se[0]:function(le){return se.reduce((ue,de)=>de(ue),le)}}},7849:(ut,be,P)=>{P.d(be,{h:()=>O});var g=P(2416),X=P(3410);function O(se){X.z.setTimeout(()=>{const{onUnhandledError:ie}=g.v;if(!ie)throw se;ie(se)})}},4532:(ut,be,P)=>{function g(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(be,{z:()=>g})},655:(ut,be,P)=>{function se(z,Q){var ne={};for(var te in z)Object.prototype.hasOwnProperty.call(z,te)&&Q.indexOf(te)<0&&(ne[te]=z[te]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(te=Object.getOwnPropertySymbols(z);Fe<te.length;Fe++)Q.indexOf(te[Fe])<0&&Object.prototype.propertyIsEnumerable.call(z,te[Fe])&&(ne[te[Fe]]=z[te[Fe]])}return ne}function de(z,Q,ne,te){return new(ne||(ne=Promise))(function(ke,ct){function Kt(rn){try{qe(te.next(rn))}catch(mn){ct(mn)}}function Ut(rn){try{qe(te.throw(rn))}catch(mn){ct(mn)}}function qe(rn){rn.done?ke(rn.value):function Fe(ke){return ke instanceof ne?ke:new ne(function(ct){ct(ke)})}(rn.value).then(Kt,Ut)}qe((te=te.apply(z,Q||[])).next())})}function ge(z){return this instanceof ge?(this.v=z,this):new ge(z)}function fe(z,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,te=ne.apply(z,Q||[]),ke=[];return Fe={},ct("next"),ct("throw"),ct("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function ct(Wt){te[Wt]&&(Fe[Wt]=function(Zt){return new Promise(function(Tr,Mt){ke.push([Wt,Zt,Tr,Mt])>1||Kt(Wt,Zt)})})}function Kt(Wt,Zt){try{!function Ut(Wt){Wt.value instanceof ge?Promise.resolve(Wt.value.v).then(qe,rn):mn(ke[0][2],Wt)}(te[Wt](Zt))}catch(Tr){mn(ke[0][3],Tr)}}function qe(Wt){Kt("next",Wt)}function rn(Wt){Kt("throw",Wt)}function mn(Wt,Zt){Wt(Zt),ke.shift(),ke.length&&Kt(ke[0][0],ke[0][1])}}function rt(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=z[Symbol.asyncIterator];return Q?Q.call(z):(z=function q(z){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&z[Q],te=0;if(ne)return ne.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&te>=z.length&&(z=void 0),{value:z&&z[te++],done:!z}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ne={},te("next"),te("throw"),te("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function te(ke){ne[ke]=z[ke]&&function(ct){return new Promise(function(Kt,Ut){!function Fe(ke,ct,Kt,Ut){Promise.resolve(Ut).then(function(qe){ke({value:qe,done:Kt})},ct)}(Kt,Ut,(ct=z[ke](ct)).done,ct.value)})}}}P.d(be,{FC:()=>fe,KL:()=>rt,_T:()=>se,mG:()=>de,qq:()=>ge})},4650:(ut,be,P)=>{P.d(be,{$8M:()=>bu,$Z:()=>s0,AFp:()=>V_,AaK:()=>de,CHM:()=>au,CRH:()=>b_,CZH:()=>oc,CqO:()=>j0,D6c:()=>AE,EJc:()=>oE,EpF:()=>B0,F4k:()=>Rv,FYo:()=>Cf,FiY:()=>Me,G48:()=>yE,GfV:()=>Gw,Gpc:()=>B,JOm:()=>es,Jf7:()=>RD,KtG:()=>uu,LFG:()=>vn,LSH:()=>xd,Lbi:()=>vp,Lck:()=>KC,MAs:()=>xv,MMx:()=>wm,NdJ:()=>Nv,OlP:()=>pn,PXZ:()=>Cb,Q6J:()=>Ff,QGY:()=>Mv,QP$:()=>qt,Qsj:()=>bD,R0b:()=>Ps,RDi:()=>y,Rgc:()=>tc,SBq:()=>ll,Sil:()=>mb,Suo:()=>_h,TTD:()=>zi,TgZ:()=>Zd,X6Q:()=>Dp,XFs:()=>Ke,Xpm:()=>Ce,Xts:()=>yg,Y36:()=>kd,YKP:()=>vm,YNc:()=>V0,Yjl:()=>_e,Yz7:()=>Zt,Z0I:()=>$i,ZZ4:()=>tw,_Bn:()=>Qu,_UZ:()=>Lf,_Vd:()=>Uu,_c5:()=>kb,_uU:()=>Hf,aQg:()=>ea,c2e:()=>_p,cJS:()=>Mt,cg1:()=>r_,dDg:()=>wb,dqk:()=>tn,eFA:()=>q_,ekj:()=>wl,eoX:()=>hE,f3M:()=>D,g9A:()=>U_,h0i:()=>Ml,hGG:()=>Xm,hij:()=>zf,iGM:()=>di,ifc:()=>st,ip1:()=>nE,jDz:()=>op,kL8:()=>i_,lG2:()=>W,lqb:()=>Vu,lri:()=>H_,n5z:()=>Qi,oAB:()=>Nt,oxw:()=>H0,q4F:()=>zw,qLn:()=>dl,qOj:()=>kf,qZA:()=>Yd,rWj:()=>dE,sBO:()=>wE,sIi:()=>qo,s_b:()=>Tm,soG:()=>wp,tb:()=>go,tp0:()=>mt,uIk:()=>bv,vHH:()=>we,vpe:()=>li,wAp:()=>vt,xp6:()=>Yw,z2F:()=>zm,zSh:()=>Wy,zs3:()=>Gr});var g=P(7579),X=P(727),O=P(9751),se=P(6451),ie=P(3099);function le(i){for(let s in i)if(i[s]===le)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=le({__forward_ref__:le});function B(i){return i.__forward_ref__=B,i.toString=function(){return de(this())},i}function q(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===B}class we extends Error{constructor(s,a){super(function Xe(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i,s){throw new we(-201,!1)}function Ut(i,s){null==i&&function qe(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Mt(i){return{providers:i.providers||[],imports:i.imports||[]}}function un(i){return fi(i,pi)||fi(i,Xr)}function $i(i){return null!==un(i)}function fi(i,s){return i.hasOwnProperty(s)?i[s]:null}function Fs(i){return i&&(i.hasOwnProperty(Jr)||i.hasOwnProperty(na))?i[Jr]:null}const pi=le({\u0275prov:le}),Jr=le({\u0275inj:le}),Xr=le({ngInjectableDef:le}),na=le({ngInjectorDef:le});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let mr;function $n(i){const s=mr;return mr=i,s}function ei(i,s,a){const c=un(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ke.Optional?null:void 0!==s?s:void ve(de(i))}function Mn(i){return{toString:i}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),st=(()=>{return(i=st||(st={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",st;var i})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Vr={},Ct=[],hs=le({\u0275cmp:le}),Yt=le({\u0275dir:le}),Si=le({\u0275pipe:le}),Qt=le({\u0275mod:le}),Hn=le({\u0275fac:le}),Sr=le({__NG_ELEMENT_ID__:le});let Je=0;function Ce(i){return Mn(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||st.Emulated,id:"c"+Je++,styles:i.styles||Ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,v=i.features;return l.inputs=L(i.inputs,c),l.outputs=L(i.outputs),v&&v.forEach(I=>I(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(_t).filter(gt):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(lt).filter(gt):null,l})}function _t(i){return Z(i)||Ge(i)}function gt(i){return null!==i}function Nt(i){return Mn(()=>({type:i.type,bootstrap:i.bootstrap||Ct,declarations:i.declarations||Ct,imports:i.imports||Ct,exports:i.exports||Ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,s){if(null==i)return Vr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=c,s&&(s[l]=f)}return a}const W=Ce;function _e(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Z(i){return i[hs]||null}function Ge(i){return i[Yt]||null}function lt(i){return i[Si]||null}function qt(i){const s=Z(i)||Ge(i)||lt(i);return null!==s&&s.standalone}function ln(i,s){const a=i[Qt]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function er(i){return Array.isArray(i)&&"object"==typeof i[1]}function xr(i){return Array.isArray(i)&&!0===i[1]}function Ya(i){return 0!=(8&i.flags)}function ia(i){return 2==(2&i.flags)}function Ec(i){return 1==(1&i.flags)}function yr(i){return null!==i.template}function jh(i){return 0!=(256&i[2])}function Mi(i,s){return i.hasOwnProperty(Hn)?i[Hn]:null}class Gi{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function zi(){return js}function js(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ja),sa}function sa(){const i=Gh(this),s=i?.current;if(s){const a=i.previous;if(a===Vr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Ja(i,s,a,c){const l=Gh(i)||function oa(i,s){return i[Tc]=s}(i,{previous:Vr,current:null}),f=l.current||(l.current={}),v=l.previous,I=this.declaredInputs[a],E=v[I];f[I]=new Gi(E&&E.currentValue,s,v===Vr),i[c]=s}zi.ngInherit=!0;const Tc="__ngSimpleChanges__";function Gh(i){return i[Tc]||null}function Dn(i){for(;Array.isArray(i);)i=i[0];return i}function ni(i,s){return Dn(s[i])}function vr(i,s){return Dn(s[i.index])}function wo(i,s){return i.data[s]}function zt(i,s){const a=s[i];return er(a)?a:a[0]}function $s(i){return 64==(64&i[2])}function mi(i,s){return null==s?null:i[s]}function ru(i){i[18]=0}function En(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const It={lFrame:Fc(null),bindingsEnabled:!0};function Ki(){return It.bindingsEnabled}function De(){return It.lFrame.lView}function jt(){return It.lFrame.tView}function au(i){return It.lFrame.contextLView=i,i[8]}function uu(i){return It.lFrame.contextLView=null,i}function Cn(){let i=cu();for(;null!==i&&64===i.type;)i=i.parent;return i}function cu(){return It.lFrame.currentTNode}function ri(i,s){const a=It.lFrame;a.currentTNode=i,a.isParent=s}function ua(){return It.lFrame.isParent}function Hs(){return It.lFrame.bindingIndex++}function Gp(i,s){const a=It.lFrame;a.bindingIndex=a.bindingRootIndex=i,lu(s)}function lu(i){It.lFrame.currentDirectiveIndex=i}function Oc(){return It.lFrame.currentQueryIndex}function fa(i){It.lFrame.currentQueryIndex=i}function kc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function du(i,s,a){if(a&Ke.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&Ke.Host||(l=kc(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const c=It.lFrame=Pc();return c.currentTNode=s,c.lView=i,!0}function hu(i){const s=Pc(),a=i[1];It.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Pc(){const i=It.lFrame,s=null===i?null:i.child;return null===s?Fc(i):s}function Fc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Lc(){const i=It.lFrame;return It.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ed=Lc;function Gs(){const i=Lc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Wn(){return It.lFrame.selectedIndex}function jr(i){It.lFrame.selectedIndex=i}function fn(){const i=It.lFrame;return wo(i.tView,i.selectedIndex)}function gu(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ws(i,s,a){Do(i,s,3,a)}function Eo(i,s,a,c){(3&i[2])===a&&Do(i,s,a,c)}function rd(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Do(i,s,a,c){const f=c??-1,v=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<v;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(id(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function id(i,s,a,c){const l=a[c]<0,f=a[c+1],I=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class ws{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function bo(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const f=a[c++],v=a[c++],I=a[c++];i.setAttribute(s,v,I,f)}else{const f=l,v=a[++c];_u(f)?i.setProperty(s,f,v):i.setAttribute(s,f,v),c++}}return c}function Ks(i){return 3===i||4===i||6===i}function _u(i){return 64===i.charCodeAt(0)}function pa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||od(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function od(i,s,a,c,l){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){v=-1;break}if(I>s){v=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==l&&(i[f+1]=l));if(c===i[f+1])return void(i[f+2]=l)}f++,null!==c&&f++,null!==l&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==l&&i.splice(f++,0,l)}function ad(i){return-1!==i}function tr(i){return 32767&i}function ma(i,s){let a=function ga(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Ni=!0;function ya(i){const s=Ni;return Ni=i,s}let Rn=0;const yi={};function Zs(i,s){const a=Iu(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,_a(c.data,i),_a(s,null),_a(c.blueprint,null));const l=Eu(i,s),f=i.injectorIndex;if(ad(l)){const v=tr(l),I=ma(l,s),E=I[1].data;for(let T=0;T<8;T++)s[f+T]=I[v+T]|E[v+T]}return s[f+8]=l,f}function _a(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Iu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Eu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=So(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Is(i,s,a){!function wu(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Sr)&&(c=a[Sr]),null==c&&(c=a[Sr]=Rn++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Es(i,s,a){if(a&Ke.Optional||void 0!==i)return i;ve()}function jc(i,s,a,c){if(a&Ke.Optional&&void 0===c&&(c=null),0==(a&(Ke.Self|Ke.Host))){const l=i[9],f=$n(void 0);try{return l?l.get(s,c,a&Ke.Optional):ei(s,c,a&Ke.Optional)}finally{$n(f)}}return Es(c,0,a)}function Ys(i,s,a,c=Ke.Default,l){if(null!==i){if(1024&s[2]){const v=function Ao(i,s,a,c,l){let f=i,v=s;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=wa(f,v,a,c|Ke.Self,yi);if(I!==yi)return I;let E=f.parent;if(!E){const T=v[21];if(T){const M=T.get(a,yi,c);if(M!==yi)return M}E=So(v),v=v[15]}f=E}return l}(i,s,a,c,yi);if(v!==yi)return v}const f=wa(i,s,a,c,yi);if(f!==yi)return f}return jc(s,a,c,l)}function wa(i,s,a,c,l){const f=function $c(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Sr)?i[Sr]:void 0;return"number"==typeof s?s>=0?255&s:Hc:s}(a);if("function"==typeof f){if(!du(s,i,c))return c&Ke.Host?Es(l,0,c):jc(s,a,c,l);try{const v=f(c);if(null!=v||c&Ke.Optional)return v;ve()}finally{ed()}}else if("number"==typeof f){let v=null,I=Iu(i,s),E=-1,T=c&Ke.Host?s[16][6]:null;for((-1===I||c&Ke.SkipSelf)&&(E=-1===I?Eu(i,s):s[I+8],-1!==E&&Ia(c,!1)?(v=s[1],I=tr(E),s=ma(E,s)):I=-1);-1!==I;){const M=s[1];if(Du(f,I,M.data)){const k=ld(I,s,a,v,c,T);if(k!==yi)return k}E=s[I+8],-1!==E&&Ia(c,s[1].data[I+8]===T)&&Du(f,I,s)?(v=M,I=tr(E),s=ma(E,s)):I=-1}}return l}function ld(i,s,a,c,l,f){const v=s[1],I=v.data[i+8],M=To(I,v,a,null==c?ia(I)&&Ni:c!=v&&0!=(3&I.type),l&Ke.Host&&f===I);return null!==M?Yi(s,v,M,I):yi}function To(i,s,a,c,l){const f=i.providerIndexes,v=s.data,I=1048575&f,E=i.directiveStart,M=f>>20,H=l?I+M:i.directiveEnd;for(let J=c?I:I+M;J<H;J++){const me=v[J];if(J<E&&a===me||J>=E&&me.type===a)return J}if(l){const J=v[E];if(J&&yr(J)&&J.type===a)return E}return null}function Yi(i,s,a,c){let l=i[a];const f=s.data;if(function qs(i){return i instanceof ws}(l)){const v=l;v.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(f[a]));const I=ya(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?$n(v.injectImpl):null;du(i,c,Ke.Default);try{l=i[a]=v.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function nd(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(c){const v=js(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&$n(E),ya(I),v.resolving=!1,ed()}}return l}function Du(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ia(i,s){return!(i&Ke.Self||i&Ke.Host&&s)}class Qs{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Ys(this._tNode,this._lView,s,c,a)}}function Hc(){return new Qs(Cn(),De())}function Qi(i){return Mn(()=>{const s=i.prototype.constructor,a=s[Hn]||Cu(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const f=l[Hn]||Cu(l);if(f&&f!==a)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Cu(i){return Le(i)?()=>{const s=Cu(q(i));return s&&s()}:Mi(i)}function So(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function bu(i){return function cd(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const f=a[l];if(Ks(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(Cn(),i)}const Ds="__parameters__";function Ro(i,s,a){return Mn(()=>{const c=function Tu(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...f){if(this instanceof l)return c.apply(this,f),this;const v=new l(...f);return I.annotation=v,I;function I(E,T,M){const k=E.hasOwnProperty(Ds)?E[Ds]:Object.defineProperty(E,Ds,{value:[]})[Ds];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(v),E}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class pn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),wn(c,s)):s!==i&&s.push(c)}return s}function _i(i,s){i.forEach(a=>Array.isArray(a)?_i(a,s):s(a))}function Da(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Mr(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function at(i,s,a){let c=Ts(i,s);return c>=0?i[1|c]=a:(c=~c,function zc(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function ba(i,s){const a=Ts(i,s);if(a>=0)return i[1|a]}function Ts(i,s){return function Oo(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const f=c+(l-c>>1),v=i[f<<a];if(s===v)return f<<a;v>s?l=f:c=f+1}return~(l<<a)}(i,s,1)}const wi={},Kc="__NG_DI_FLAG__",Po="ngTempTokenPath",Ji=/\n/gm,_r="__source";let xs;function Xi(i){const s=xs;return xs=i,s}function Vn(i,s=Ke.Default){if(void 0===xs)throw new we(-203,!1);return null===xs?ei(i,void 0,s):xs.get(i,s&Ke.Optional?null:void 0,s)}function vn(i,s=Ke.Default){return(function ds(){return mr}()||Vn)(q(i),s)}function D(i,s=Ke.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),vn(i,s)}function b(i){const s=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let l,f=Ke.Default;for(let v=0;v<c.length;v++){const I=c[v],E=F(I);"number"==typeof E?-1===E?l=I.token:f|=E:l=I}s.push(vn(l,f))}else s.push(vn(c))}return s}function x(i,s){return i[Kc]=s,i.prototype[Kc]=s,i}function F(i){return i[Kc]}const Me=x(Ro("Optional"),8),mt=x(Ro("SkipSelf"),4);var es=(()=>((es=es||{})[es.Important=1]="Important",es[es.DashCase=2]="DashCase",es))();const el=new Map;let sf=0;const eo="__ngContext__";function dr(i,s){er(s)?(i[eo]=s[20],function Ay(i){el.set(i[20],i)}(s)):i[eo]=s}function yd(i,s){return undefined(i,s)}function Ra(i){const s=i[3];return xr(s)?s[3]:s}function Na(i){return rg(i[13])}function to(i){return rg(i[4])}function rg(i){for(;null!==i&&!xr(i);)i=i[4];return i}function no(i,s,a,c,l){if(null!=c){let f,v=!1;xr(c)?f=c:er(c)&&(v=!0,c=c[0]);const I=Dn(c);0===i&&null!==a?null==l?ug(s,a,I):io(s,a,I,l||null,!0):1===i&&null!==a?io(s,a,I,l||null,!0):2===i?function Td(i,s,a){const c=Nr(i,s);c&&function hf(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,v):3===i&&s.destroyNode(I),null!=f&&function pf(i,s,a,c,l){const f=a[7];f!==Dn(a)&&no(s,i,c,f,l);for(let I=10;I<a.length;I++){const E=a[I];Bo(E[1],E,i,s,c,f)}}(s,i,f,a,l)}}function Pu(i,s,a){return i.createElement(s,a)}function cf(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,En(l,-1)),a.splice(c,1)}function lf(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&cf(l,c),s>0&&(i[a-1][4]=c[4]);const f=Mr(i,10+s);!function Oa(i,s){Bo(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const v=f[19];null!==v&&v.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function og(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Bo(i,s,a,3,null,null),function ky(i){let s=i[13];if(!s)return df(i[1],i);for(;s;){let a=null;if(er(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)er(s)&&df(s[1],s),s=s[3];null===s&&(s=i),er(s)&&df(s[1],s),a=s&&s[4]}s=a}}(s)}}function df(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function ag(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof ws)){const f=a[c+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const I=l[f[v]],E=f[v+1];try{E.call(I)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function Fy(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+1],I="function"==typeof v?v(s):Dn(s[v]),E=c[l=a[f+2]],T=a[f+3];"boolean"==typeof T?I.removeEventListener(a[f],E,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),f+=2}else{const v=c[l=a[f+1]];a[f].call(v)}if(null!==c){for(let f=l+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&xr(s[3])){a!==s[3]&&cf(a,s);const c=s[19];null!==c&&c.detachView(i)}!function fd(i){el.delete(i[20])}(s)}}function wd(i,s,a){return function Id(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===st.None||l===st.Emulated)return null}return vr(c,a)}(i,s.parent,a)}function io(i,s,a,c,l){i.insertBefore(s,a,c,l)}function ug(i,s,a){i.appendChild(s,a)}function rl(i,s,a,c,l){null!==c?io(i,s,a,c,l):ug(i,s,a)}function Nr(i,s){return i.parentNode(s)}let vf,Ed=function il(i,s,a){return 40&i.type?vr(i,a):null};function Cd(i,s,a,c){const l=wd(i,c,s),f=s[11],I=function ff(i,s,a){return Ed(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let E=0;E<a.length;E++)rl(f,l,a[E],I,!1);else rl(f,l,a,I,!1)}function ai(i,s){if(null!==s){const a=s.type;if(3&a)return vr(s,i);if(4&a)return sl(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return ai(i,c);{const l=i[s.index];return xr(l)?sl(-1,l):Dn(l)}}if(32&a)return yd(s,i)()||Dn(i[s.index]);{const c=bd(i,s);return null!==c?Array.isArray(c)?c[0]:ai(Ra(i[16]),c):ai(i,s.next)}}return null}function bd(i,s){return null!==s?i[16][6].projection[s.projection]:null}function sl(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return ai(c,l)}return s[7]}function ol(i,s,a,c,l,f,v){for(;null!=a;){const I=c[a.index],E=a.type;if(v&&0===s&&(I&&dr(Dn(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)ol(i,s,a.child,c,l,f,!1),no(s,i,l,I,f);else if(32&E){const T=yd(a,c);let M;for(;M=T();)no(s,i,l,M,f);no(s,i,l,I,f)}else 16&E?jo(i,s,c,a,l,f):no(s,i,l,I,f);a=v?a.projectionNext:a.next}}function Bo(i,s,a,c,l,f){ol(a,c,i.firstChild,s,l,f,!1)}function jo(i,s,a,c,l,f){const v=a[16],E=v[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)no(s,i,l,E[T],f);else ol(i,s,E,v[3],l,f,!0)}function Fi(i,s,a){i.setAttribute(s,"style",a)}function $o(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function y(i){vf=i}class oe{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function rr(i){return i instanceof oe?i.changingThisBreaksApplicationSecurity:i}const Fa=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Zn=(()=>((Zn=Zn||{})[Zn.NONE=0]="NONE",Zn[Zn.HTML=1]="HTML",Zn[Zn.STYLE=2]="STYLE",Zn[Zn.SCRIPT=3]="SCRIPT",Zn[Zn.URL=4]="URL",Zn[Zn.RESOURCE_URL=5]="RESOURCE_URL",Zn))();function xd(i){const s=function Lu(){const i=De();return i&&i[12]}();return s?s.sanitize(Zn.URL,i)||"":function Li(i,s){const a=function cg(i){return i instanceof oe&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?rr(i):function La(i){return(i=String(i)).match(Fa)?i:"unsafe:"+i}(ge(i))}const yg=new pn("ENVIRONMENT_INITIALIZER"),Md=new pn("INJECTOR",-1),$y=new pn("INJECTOR_DEF_TYPES");class kw{get(s,a=wi){if(a===wi){const c=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw c.name="NullInjectorError",c}return a}}function fD(...i){return{\u0275providers:Pw(0,i)}}function Pw(i,...s){const a=[],c=new Set;let l;return _i(s,f=>{const v=f;Hy(v,a,[],c)&&(l||(l=[]),l.push(v))}),void 0!==l&&Fw(l,a),a}function Fw(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];_i(l,f=>{s.push(f)})}}function Hy(i,s,a,c){if(!(i=q(i)))return!1;let l=null,f=Fs(i);const v=!f&&Z(i);if(f||v){if(v&&!v.standalone)return!1;l=i}else{const E=i.ngModule;if(f=Fs(E),!f)return!1;l=E}const I=c.has(l);if(v){if(I)return!1;if(c.add(l),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of E)Hy(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let T;c.add(l);try{_i(f.imports,M=>{Hy(M,s,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Fw(T,s)}if(!I){const T=Mi(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:Ct},{provide:$y,useValue:l,multi:!0},{provide:yg,useValue:()=>vn(l),multi:!0})}const E=f.providers;null==E||I||_i(E,M=>{s.push(M)})}}return l!==i&&void 0!==i.providers}const pD=le({provide:String,useValue:le});function zy(i){return null!==i&&"object"==typeof i&&pD in i}function cl(i){return"function"==typeof i}const Wy=new pn("Set Injector scope."),Ef={},mD={};let vg;function Df(){return void 0===vg&&(vg=new kw),vg}class Vu{}class qy extends Vu{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wg(s,v=>this.processProvider(v)),this.records.set(Md,Rd(void 0,this)),l.has("environment")&&this.records.set(Vu,Rd(void 0,this));const f=this.records.get(Wy);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get($y.multi,Ct,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Xi(this),c=$n(void 0);try{return s()}finally{Xi(a),$n(c)}}get(s,a=wi,c=Ke.Default){this.assertNotDestroyed();const l=Xi(this),f=$n(void 0);try{if(!(c&Ke.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function Bw(i){return"function"==typeof i||"object"==typeof i&&i instanceof pn}(s)&&un(s);I=E&&this.injectableDefInScope(E)?Rd(_g(s),Ef):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&Ke.Self?Df():this.parent).get(s,a=c&Ke.Optional&&a===wi?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Po]=v[Po]||[]).unshift(de(s)),l)throw v;return function K(i,s,a,c){const l=i[Po];throw s[_r]&&l.unshift(s[_r]),i.message=function ee(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=de(s);if(Array.isArray(s))l=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let I=s[v];f.push(v+":"+("string"==typeof I?JSON.stringify(I):de(I)))}l=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(Ji,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Po]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{$n(f),Xi(l)}}resolveInjectorInitializers(){const s=Xi(this),a=$n(void 0);try{const c=this.get(yg.multi,Ct,Ke.Self);for(const l of c)l()}finally{Xi(s),$n(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(de(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(s){let a=cl(s=q(s))?s:q(s&&s.provide);const c=function vD(i){return zy(i)?Rd(void 0,i.useValue):Rd(Uw(i),Ef)}(s);if(cl(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=Rd(void 0,Ef,!0),l.factory=()=>b(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Ef&&(a.value=mD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function wD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=q(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function _g(i){const s=un(i),a=null!==s?s.factory:Mi(i);if(null!==a)return a;if(i instanceof pn)throw new we(204,!1);if(i instanceof Function)return function yD(i){const s=i.length;if(s>0)throw function Cs(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new we(204,!1);const a=function Ar(i){const s=i&&(i[pi]||i[Xr]);if(s){const a=function Lr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function Uw(i,s,a){let c;if(cl(i)){const l=q(i);return Mi(l)||_g(l)}if(zy(i))c=()=>q(i.useValue);else if(function Vw(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...b(i.deps||[]));else if(function Lw(i){return!(!i||!i.useExisting)}(i))c=()=>vn(q(i.useExisting));else{const l=q(i&&(i.useClass||i.provide));if(!function _D(i){return!!i.deps}(i))return Mi(l)||_g(l);c=()=>new l(...b(i.deps))}return c}function Rd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Ky(i){return!!i.\u0275providers}function wg(i,s){for(const a of i)Array.isArray(a)?wg(a,s):Ky(a)?wg(a.\u0275providers,s):s(a)}class ID{}class DD{resolveComponentFactory(s){throw function ED(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Uu=(()=>{class i{}return i.NULL=new DD,i})();function Hw(){return Bu(Cn(),De())}function Bu(i,s){return new ll(vr(i,s))}let ll=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Hw,i})();function CD(i){return i instanceof ll?i.nativeElement:i}class Cf{}let bD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function TD(){const i=De(),a=zt(Cn().index,i);return(er(a)?a:i)[11]}(),i})(),AD=(()=>{class i{}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:()=>null}),i})();class Gw{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const zw=new Gw("14.2.12"),Ig={};function Eg(i){return i.ngOriginalError}class dl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Eg(s);for(;a&&Eg(a);)a=Eg(a);return a||null}}function RD(i){return i.ownerDocument.defaultView}function zo(i){return i instanceof Function?i():i}function Zy(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===c||i.charCodeAt(l+f)<=32)return l}a=l+1}}const bg="ng-template";function PD(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==Zy(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function qw(i){return 4===i.type&&i.value!==bg}function FD(i,s,a){return s===(4!==i.type||a?i.value:bg)}function Kw(i,s,a){let c=4;const l=i.attrs||[],f=function Zw(i){for(let s=0;s<i.length;s++)if(Ks(i[s]))return s;return i.length}(l);let v=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!v)if(4&c){if(c=2|1&c,""!==E&&!FD(i,E,a)||""===E&&1===s.length){if(oo(c))return!1;v=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!PD(i.attrs,T,a)){if(oo(c))return!1;v=!0}continue}const k=zA(8&c?"class":E,l,qw(i),a);if(-1===k){if(oo(c))return!1;v=!0;continue}if(""!==T){let H;H=k>f?"":l[k+1].toLowerCase();const J=8&c?H:null;if(J&&-1!==Zy(J,T,0)||2&c&&T!==H){if(oo(c))return!1;v=!0}}}}else{if(!v&&!oo(c)&&!oo(E))return!1;if(v&&oo(E))continue;v=!1,c=E|1&c}}return oo(c)||v}function oo(i){return 0==(1&i)}function zA(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let f=!1;for(;l<s.length;){const v=s[l];if(v===i)return l;if(3===v||6===v)f=!0;else{if(1===v||2===v){let I=s[++l];for(;"string"==typeof I;)I=s[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=f?1:2}return-1}return function LD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Af(i,s,a=!1){for(let c=0;c<s.length;c++)if(Kw(i,s[c],a))return!0;return!1}function Yy(i,s){return i?":not("+s.trim()+")":s}function UD(i){let s=i[0],a=1,c=2,l="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];l+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?l+="."+v:4&c&&(l+=" "+v);else""!==l&&!oo(v)&&(s+=Yy(f,l),l=""),c=v,f=f||!oo(c);a++}return""!==l&&(s+=Yy(f,l)),s}const Ot={};function Yw(i){Qy(jt(),De(),Wn()+i,!1)}function Qy(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Ws(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Eo(s,f,0,a)}jr(a)}function Tg(i,s=null,a=null,c){const l=Or(i,s,a,c);return l.resolveInjectorInitializers(),l}function Or(i,s=null,a=null,c,l=new Set){const f=[a||Ct,fD(i)];return c=c||("object"==typeof i?void 0:de(i)),new qy(f,s||Df(),c||null,l)}let Gr=(()=>{class i{static create(a,c){if(Array.isArray(a))return Tg({name:""},c,a,"");{const l=a.name??"";return Tg({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=wi,i.NULL=new kw,i.\u0275prov=Zt({token:i,providedIn:"any",factory:()=>vn(Md)}),i.__NG_ELEMENT_ID__=-1,i})();function kd(i,s=Ke.Default){const a=De();return null===a?vn(i,s):Ys(Cn(),a,q(i),s)}function s0(){throw new Error("invalid")}function Sg(i,s){return i<<17|s<<2}function ao(i){return i>>17&32767}function zr(i){return 2|i}function Ns(i){return(131068&i)>>2}function xg(i,s){return-131069&i|s<<2}function Pd(i){return 1|i}function v0(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],f=a[c+1];if(-1!==f){const v=i.data[f];fa(l),v.contentQueries(2,s[f],f)}}}function Lg(i,s,a,c,l,f,v,I,E,T,M){const k=s.blueprint.slice();return k[0]=l,k[2]=76|c,(null!==M||i&&1024&i[2])&&(k[2]|=1024),ru(k),k[3]=k[15]=i,k[8]=a,k[10]=v||i&&i[10],k[11]=I||i&&i[11],k[12]=E||i&&i[12]||null,k[9]=T||i&&i[9]||null,k[6]=f,k[20]=function Ty(){return sf++}(),k[21]=M,k[16]=2==s.type?i[16]:k,k}function Ld(i,s,a,c,l){let f=i.data[s];if(null===f)f=function dv(i,s,a,c,l){const f=cu(),v=ua(),E=i.data[s]=function lS(i,s,a,c,l,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=E),null!==f&&(v?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,l),function Hp(){return It.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=l;const v=function Io(){const i=It.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return ri(f,!0),f}function Vd(i,s,a,c){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function Ud(i,s,a){hu(s);try{const c=i.viewQuery;null!==c&&vv(1,c,a);const l=i.template;null!==l&&hv(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&v0(i,s),i.staticViewQueries&&vv(2,i.viewQuery,a);const f=i.components;null!==f&&function rC(i,s){for(let a=0;a<s.length;a++)A0(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Gs()}}function Rf(i,s,a,c){const l=s[2];if(128!=(128&l)){hu(s);try{ru(s),function Rc(i){return It.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&hv(i,s,a,2,c);const v=3==(3&l);if(v){const T=i.preOrderCheckHooks;null!==T&&Ws(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Eo(s,T,0,null),rd(s,0)}if(function b0(i){for(let s=Na(i);null!==s;s=to(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],f=l[3];0==(512&l[2])&&En(f,1),l[2]|=512}}}(s),function vC(i){for(let s=Na(i);null!==s;s=to(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];$s(c)&&Rf(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&v0(i,s),v){const T=i.contentCheckHooks;null!==T&&Ws(s,T)}else{const T=i.contentHooks;null!==T&&Eo(s,T,1),rd(s,1)}!function tC(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)jr(~l);else{const f=l,v=a[++c],I=a[++c];Gp(v,f),I(2,s[f])}}}finally{jr(-1)}}(i,s);const I=i.components;null!==I&&function nC(i,s){for(let a=0;a<s.length;a++)T0(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&vv(2,E,c),v){const T=i.viewCheckHooks;null!==T&&Ws(s,T)}else{const T=i.viewHooks;null!==T&&Eo(s,T,2),rd(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,En(s[3],-1))}finally{Gs()}}}function hv(i,s,a,c,l){const f=Wn(),v=2&c;try{jr(-1),v&&s.length>22&&Qy(i,s,22,!1),a(c,l)}finally{jr(f)}}function fv(i,s,a){!Ki()||(function hS(i,s,a,c){const l=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Zs(a,s),dr(c,s);const v=a.initialInputs;for(let I=l;I<f;I++){const E=i.data[I],T=yr(E);T&&yC(s,a,E);const M=Yi(s,i,I,a);dr(M,s),null!==v&&fS(0,I-l,M,E,0,v),T&&(zt(a.index,s)[8]=M)}}(i,s,a,vr(a,s)),128==(128&a.flags)&&function yv(i,s,a){const c=a.directiveStart,l=a.directiveEnd,f=a.index,v=function Nc(){return It.lFrame.currentDirectiveIndex}();try{jr(f);for(let I=c;I<l;I++){const E=i.data[I],T=s[I];lu(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&lC(E,T)}}finally{jr(-1),lu(v)}}(i,s,a))}function pv(i,s,a=vr){const c=s.localNames;if(null!==c){let l=s.index+1;for(let f=0;f<c.length;f+=2){const v=c[f+1],I=-1===v?a(s,i):i[v];i[l++]=I}}}function _0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Ug(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Ug(i,s,a,c,l,f,v,I,E,T){const M=22+c,k=M+l,H=function w0(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ot);return a}(M,k),J="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:I,declTNode:s,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:J,incompleteFirstPass:!1}}function gv(i,s,a,c){const l=M0(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&R0(i).push(c,l.length-1))}function E0(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function sC(i,s){const c=s.directiveEnd,l=i.data,f=s.attrs,v=[];let I=null,E=null;for(let T=s.directiveStart;T<c;T++){const M=l[T],k=M.inputs,H=null===f||qw(s)?null:pS(k,f);v.push(H),I=E0(k,T,I),E=E0(M.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=I,s.outputs=E}function oC(i,s){const a=zt(s,i);16&a[2]||(a[2]|=32)}function Bg(i,s,a,c){let l=!1;if(Ki()){const f=function dC(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let f=0;f<c.length;f++){const v=c[f];Af(a,v.selectors,!1)&&(l||(l=[]),Is(Zs(a,s),i,v.type),yr(v)?(hC(i,a),l.unshift(v)):l.push(v))}return l}(i,s,a),v=null===c?null:{"":-1};if(null!==f){l=!0,gC(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const k=f[M];k.providersResolver&&k.providersResolver(k)}let I=!1,E=!1,T=Vd(i,s,f.length,null);for(let M=0;M<f.length;M++){const k=f[M];a.mergedAttrs=pa(a.mergedAttrs,k.hostAttrs),mC(i,a,s,T,k),pC(T,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const H=k.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}sC(i,a)}v&&function fC(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new we(-301,!1);c.push(s[l],f)}}}(a,c,v)}return a.mergedAttrs=pa(a.mergedAttrs,a.attrs),l}function jg(i,s,a,c,l,f){const v=f.hostBindings;if(v){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function mv(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,l,v)}}function lC(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function hC(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function pC(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;yr(s)&&(a[""]=i)}}function gC(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function mC(i,s,a,c,l){i.data[c]=l;const f=l.factory||(l.factory=Mi(l.type)),v=new ws(f,yr(l),kd);i.blueprint[c]=v,a[c]=v,jg(i,s,0,c,Vd(i,a,l.hostVars,Ot),l)}function yC(i,s,a){const c=vr(s,i),l=_0(a),f=i[10],v=Nf(i,Lg(i,l,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=v}function Ba(i,s,a,c,l,f){const v=vr(i,s);!function D0(i,s,a,c,l,f,v){if(null==f)i.removeAttribute(s,l,a);else{const I=null==v?ge(f):v(f,c||"",l);i.setAttribute(s,l,I,a)}}(s[11],v,f,i.value,a,c,l)}function fS(i,s,a,c,l,f){const v=f[s];if(null!==v){const I=c.setInput;for(let E=0;E<v.length;){const T=v[E++],M=v[E++],k=v[E++];null!==I?c.setInput(a,k,T,M):a[M]=k}}}function pS(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function C0(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function T0(i,s){const a=zt(s,i);if($s(a)){const c=a[1];48&a[2]?Rf(c,a,c.template,a[8]):a[5]>0&&$g(a)}}function $g(i){for(let c=Na(i);null!==c;c=to(c))for(let l=10;l<c.length;l++){const f=c[l];if($s(f))if(512&f[2]){const v=f[1];Rf(v,f,v.template,f[8])}else f[5]>0&&$g(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=zt(a[c],i);$s(l)&&l[5]>0&&$g(l)}}function A0(i,s){const a=zt(s,i),c=a[1];(function S0(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Ud(c,a,a[8])}function Nf(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Hg(i){for(;i;){i[2]|=32;const s=Ra(i);if(jh(i)&&!s)return i;i=s}return null}function gl(i,s,a,c=!0){const l=s[10];l.begin&&l.begin();try{Rf(i,s,i.template,a)}catch(v){throw c&&N0(s,v),v}finally{l.end&&l.end()}}function vv(i,s,a){fa(0),s(i,a)}function M0(i){return i[7]||(i[7]=[])}function R0(i){return i.cleanup||(i.cleanup=[])}function N0(i,s){const a=i[9],c=a?a.get(dl,null):null;c&&c.handleError(s)}function _v(i,s,a,c,l){for(let f=0;f<a.length;){const v=a[f++],I=a[f++],E=s[v],T=i.data[v];null!==T.setInput?T.setInput(E,l,c,I):E[I]=l}}function it(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const I=s[v];"number"==typeof I?f=I:1==f?l=he(l,I):2==f&&(c=he(c,I+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function Bd(i,s,a,c,l=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(Dn(f)),xr(f))for(let I=10;I<f.length;I++){const E=f[I],T=E[1].firstChild;null!==T&&Bd(E[1],E,T,c)}const v=a.type;if(8&v)Bd(i,s,a.child,c);else if(32&v){const I=yd(a,s);let E;for(;E=I();)c.push(E)}else if(16&v){const I=bd(s,a);if(Array.isArray(I))c.push(...I);else{const E=Ra(s[16]);Bd(E[1],E,I,c,!0)}}a=l?a.projectionNext:a.next}return c}class At{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Bd(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(xr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(lf(s,c),Mr(a,c))}this._attachedToViewContainer=!1}og(this._lView[1],this._lView)}onDestroy(s){gv(this._lView[1],this._lView,null,s)}markForCheck(){Hg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){gl(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sg(i,s){Bo(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=s}}class Gg extends At{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;gl(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class jd extends Uu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Z(s);return new Of(a,this.ngModule)}}function $d(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class wv{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,Ig,c);return l!==Ig||a===Ig?l:this.parentInjector.get(s,a,c)}}class Of extends ID{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function BD(i){return i.map(UD).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return $d(this.componentDef.inputs)}get outputs(){return $d(this.componentDef.outputs)}create(s,a,c,l){let f=(l=l||this.ngModule)instanceof Vu?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new wv(s,f):s,I=v.get(Cf,null);if(null===I)throw new we(407,!1);const E=v.get(AD,null),T=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=c?function I0(i,s,a){return i.selectRootElement(s,a===st.ShadowDom)}(T,c,this.componentDef.encapsulation):Pu(T,M,function wC(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),H=this.componentDef.onPush?288:272,J=Ug(0,null,null,1,0,null,null,null,null,null),me=Lg(null,J,null,H,null,null,I,T,E,v,null);let Pe,He;hu(me);try{const nt=function qr(i,s,a,c,l,f){const v=a[1];a[22]=i;const E=Ld(v,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(it(E,T,!0),null!==i&&(bo(l,i,T),null!==E.classes&&$o(l,i,E.classes),null!==E.styles&&Fi(l,i,E.styles)));const M=c.createRenderer(i,s),k=Lg(a,_0(s),null,s.onPush?32:16,a[22],E,c,M,f||null,null,null);return v.firstCreatePass&&(Is(Zs(E,a),v,s.type),hC(v,E),gC(E,a.length,1)),Nf(a,k),a[22]=k}(k,this.componentDef,me,I,T);if(k)if(c)bo(T,k,["ng-version",zw.full]);else{const{attrs:pt,classes:Te}=function jD(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++c]):8===l&&a.push(f);else{if(!oo(l))break;l=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);pt&&bo(T,k,pt),Te&&Te.length>0&&$o(T,k,Te.join(" "))}if(He=wo(J,22),void 0!==a){const pt=He.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const wt=a[Te];pt.push(null!=wt?Array.from(wt):null)}}Pe=function Hu(i,s,a,c){const l=a[1],f=function cC(i,s,a){const c=Cn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),mC(i,c,s,Vd(i,s,1,null),a),sC(i,c));const l=Yi(s,i,c.directiveStart,c);dr(l,s);const f=vr(c,s);return f&&dr(f,s),l}(l,a,s);if(i[8]=a[8]=f,null!==c)for(const I of c)I(f,s);if(s.contentQueries){const I=Cn();s.contentQueries(1,f,I.directiveStart)}const v=Cn();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(jr(v.index),jg(a[1],v,0,v.directiveStart,v.directiveEnd,s),lC(s,f)),f}(nt,this.componentDef,me,[EC]),Ud(J,me,null)}finally{Gs()}return new ci(this.componentType,Pe,Bu(He,me),me,He)}}class ci extends class jw{}{constructor(s,a,c,l,f){super(),this.location=c,this._rootLView=l,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Gg(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const f=this._rootLView;_v(f[1],f,l,s,a),oC(f,this._tNode.index)}}get injector(){return new Qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function EC(){const i=Cn();gu(De()[1],i)}function kf(i){let s=function Ev(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(yr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new we(903,!1);l=s.\u0275dir}if(l){if(a){c.push(l);const v=i;v.inputs=kr(i.inputs),v.declaredInputs=kr(i.declaredInputs),v.outputs=kr(i.outputs);const I=l.hostBindings;I&&k0(i,I);const E=l.viewQuery,T=l.contentQueries;if(E&&DC(i,E),T&&zg(i,T),ue(i.inputs,l.inputs),ue(i.declaredInputs,l.declaredInputs),ue(i.outputs,l.outputs),yr(l)&&l.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let v=0;v<f.length;v++){const I=f[v];I&&I.ngInherit&&I(i),I===kf&&(a=!1)}}s=Object.getPrototypeOf(s)}!function O0(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=pa(l.hostAttrs,a=pa(a,l.hostAttrs))}}(c)}function kr(i){return i===Vr?{}:i===Ct?[]:i}function DC(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function zg(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,f)=>{s(c,l,f),a(c,l,f)}:s}function k0(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let Hd=null;function ml(){if(!Hd){const i=tn.Symbol;if(i&&i.iterator)Hd=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Hd=c)}}}return Hd}function qo(i){return!!qg(i)&&(Array.isArray(i)||!(i instanceof Map)&&ml()in i)}function qg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Pr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function bv(i,s,a,c){const l=De();return Pr(l,Hs(),s)&&(jt(),Ba(fn(),l,i,s,a,c)),bv}function V0(i,s,a,c,l,f,v,I){const E=De(),T=jt(),M=i+22,k=T.firstCreatePass?function L0(i,s,a,c,l,f,v,I,E){const T=s.consts,M=Ld(s,i,4,v||null,mi(T,I));Bg(s,a,M,mi(T,E)),gu(s,M);const k=M.tViews=Ug(2,M,c,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),k.queries=s.queries.embeddedTView(M)),M}(M,T,E,s,a,c,l,f,v):T.data[M];ri(k,!1);const H=E[11].createComment("");Cd(T,E,H,k),dr(H,E),Nf(E,E[M]=C0(H,E,H,k)),Ec(k)&&fv(T,E,k),null!=v&&pv(E,k,I)}function xv(i){return function qi(i,s){return i[s]}(function Mc(){return It.lFrame.contextLView}(),22+i)}function Ff(i,s,a){const c=De();return Pr(c,Hs(),s)&&function Ei(i,s,a,c,l,f,v,I){const E=vr(s,a);let M,T=s.inputs;!I&&null!=T&&(M=T[c])?(_v(i,a,M,c,l),ia(s)&&oC(a,s.index)):3&s.type&&(c=function dS(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=v?v(l,s.value||"",c):l,f.setProperty(E,c,l))}(jt(),fn(),c,i,s,c[11],a,!1),Ff}function Xg(i,s,a,c,l){const v=l?"class":"style";_v(i,a,s.inputs[v],v,c)}function Zd(i,s,a,c){const l=De(),f=jt(),v=22+i,I=l[11],E=l[v]=Pu(I,s,function pu(){return It.lFrame.currentNamespace}()),T=f.firstCreatePass?function bC(i,s,a,c,l,f,v){const I=s.consts,T=Ld(s,i,2,l,mi(I,f));return Bg(s,a,T,mi(I,v)),null!==T.attrs&&it(T,T.attrs,!1),null!==T.mergedAttrs&&it(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(v,f,l,0,s,a,c):f.data[v];ri(T,!0);const M=T.mergedAttrs;null!==M&&bo(I,E,M);const k=T.classes;null!==k&&$o(I,E,k);const H=T.styles;return null!==H&&Fi(I,E,H),64!=(64&T.flags)&&Cd(f,l,E,T),0===function su(){return It.lFrame.elementDepthCount}()&&dr(E,l),function ou(){It.lFrame.elementDepthCount++}(),Ec(T)&&(fv(f,l,T),function Vg(i,s,a){if(Ya(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}(f,T,l)),null!==c&&pv(l,T),Zd}function Yd(){let i=Cn();ua()?function ca(){It.lFrame.isParent=!1}():(i=i.parent,ri(i,!1));const s=i;!function Ac(){It.lFrame.elementDepthCount--}();const a=jt();return a.firstCreatePass&&(gu(a,i),Ya(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function vu(i){return 0!=(16&i.flags)}(s)&&Xg(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function sd(i){return 0!=(32&i.flags)}(s)&&Xg(a,s,De(),s.stylesWithoutHost,!1),Yd}function Lf(i,s,a,c){return Zd(i,s,a,c),Yd(),Lf}function B0(){return De()}function Mv(i){return!!i&&"function"==typeof i.then}function Rv(i){return!!i&&"function"==typeof i.subscribe}const j0=Rv;function Nv(i,s,a,c){const l=De(),f=jt(),v=Cn();return function $0(i,s,a,c,l,f,v,I){const E=Ec(c),M=i.firstCreatePass&&R0(i),k=s[8],H=M0(s);let J=!0;if(3&c.type||I){const He=vr(c,s),nt=I?I(He):He,pt=H.length,Te=I?nn=>I(Dn(nn[c.index])):c.index;let wt=null;if(!I&&E&&(wt=function kv(i,s,a,c){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const v=l[f];if(v===a&&l[f+1]===c){const I=s[7],E=l[f+2];return I.length>E?I[E]:null}"string"==typeof v&&(f+=2)}return null}(i,s,l,c.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=f,wt.__ngLastListenerFn__=f,J=!1;else{f=Pv(c,s,k,f,!1);const nn=a.listen(nt,l,f);H.push(f,nn),M&&M.push(l,Te,pt,pt+1)}}else f=Pv(c,s,k,f,!1);const me=c.outputs;let Pe;if(J&&null!==me&&(Pe=me[l])){const He=Pe.length;if(He)for(let nt=0;nt<He;nt+=2){const On=s[Pe[nt]][Pe[nt+1]].subscribe(f),fc=H.length;H.push(f,On),M&&M.push(l,c.index,fc,-(fc+1))}}}(f,l,l[11],v,i,s,0,c),Nv}function tm(i,s,a,c){try{return!1!==a(c)}catch(l){return N0(i,l),!1}}function Pv(i,s,a,c,l){return function f(v){if(v===Function)return c;Hg(2&i.flags?zt(i.index,s):s);let E=tm(s,0,c,v),T=f.__ngNextListenerFn__;for(;T;)E=tm(s,0,T,v)&&E,T=T.__ngNextListenerFn__;return l&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function H0(i=1){return function zs(i){return(It.lFrame.contextLView=function fu(i,s){for(;i>0;)s=s[15],i--;return s}(i,It.lFrame.contextLView))[8]}(i)}function Hv(i,s,a,c,l){const f=i[a+1],v=null===s;let I=c?ao(f):Ns(f),E=!1;for(;0!==I&&(!1===E||v);){const M=i[I+1];rm(i[I],s)&&(E=!0,i[I+1]=c?Pd(M):zr(M)),I=c?ao(M):Ns(M)}E&&(i[a+1]=c?zr(f):Pd(f))}function rm(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ts(i,s)>=0}function wl(i,s){return function rs(i,s,a,c){const l=De(),f=jt(),v=function Zi(i){const s=It.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function Zv(i,s,a,c){const l=i.data;if(null===l[a+1]){const f=l[Wn()],v=function Kv(i,s){return s>=i.expandoStartIndex}(i,a);(function Yo(i,s){return 0!=(i.flags&(s?16:32))})(f,c)&&null===s&&!v&&(s=!1),s=function SC(i,s,a,c){const l=function ha(i){const s=It.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=lo(a=Il(null,i,s,a,c),s.attrs,c),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==l)if(a=Il(l,i,s,a,c),null===f){let E=function $f(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Ns(c))return i[ao(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=Il(null,i,s,E[1],c),E=lo(E,s.attrs,c),function Y0(i,s,a,c){i[ao(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else f=function sm(i,s,a){let c;const l=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<l;f++)c=lo(c,i[f].hostAttrs,a);return lo(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(l,f,s,c),function TC(i,s,a,c,l,f){let v=f?s.classBindings:s.styleBindings,I=ao(v),E=Ns(v);i[c]=a;let M,T=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||Ts(k,M)>0)&&(T=!0)}else M=a;if(l)if(0!==E){const H=ao(i[I+1]);i[c+1]=Sg(H,I),0!==H&&(i[H+1]=xg(i[H+1],c)),i[I+1]=function KD(i,s){return 131071&i|s<<17}(i[I+1],c)}else i[c+1]=Sg(I,0),0!==I&&(i[I+1]=xg(i[I+1],c)),I=c;else i[c+1]=Sg(E,0),0===I?I=c:i[E+1]=xg(i[E+1],c),E=c;T&&(i[c+1]=zr(i[c+1])),Hv(i,M,c,!0),Hv(i,M,c,!1),function _l(i,s,a,c,l){const f=l?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Ts(f,s)>=0&&(a[c+1]=Pd(a[c+1]))}(s,M,i,c,f),v=Sg(I,E),f?s.classBindings=v:s.styleBindings=v}(l,f,s,a,v,c)}}(f,i,v,c),s!==Ot&&Pr(l,v,s)&&function Qv(i,s,a,c,l,f,v,I){if(!(3&s.type))return;const E=i.data,T=E[I+1];om(function Mg(i){return 1==(1&i)}(T)?Jv(E,s,a,l,Ns(T),v):void 0)||(om(f)||function o0(i){return 2==(2&i)}(T)&&(f=Jv(E,null,a,l,I,v)),function Ly(i,s,a,c,l){if(s)l?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:es.DashCase;null==l?i.removeStyle(a,c,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=es.Important),i.setStyle(a,c,l,f))}}(c,v,ni(Wn(),a),l,f))}(f,f.data[Wn()],l,l[11],i,l[v+1]=function El(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(rr(i)))),i}(s,a),c,v)}(i,s,null,!0),wl}function Il(i,s,a,c,l){let f=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(f=s[I],c=lo(c,f.hostAttrs,l),f!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function lo(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?l=v:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),at(i,v,!!a||s[++f]))}return void 0===i?null:i}function Jv(i,s,a,c,l,f){const v=null===s;let I;for(;l>0;){const E=i[l],T=Array.isArray(E),M=T?E[1]:E,k=null===M;let H=a[l+1];H===Ot&&(H=k?Ct:void 0);let J=k?ba(H,c):M===c?H:void 0;if(T&&!om(J)&&(J=ba(E,c)),om(J)&&(I=J,v))return I;const me=i[l+1];l=v?ao(me):Ns(me)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(I=ba(E,c))}return I}function om(i){return void 0!==i}function Hf(i,s=""){const a=De(),c=jt(),l=i+22,f=c.firstCreatePass?Ld(c,l,1,s,null):c.data[l],v=a[l]=function vd(i,s){return i.createText(s)}(a[11],s);Cd(c,a,v,f),ri(f,!1)}function zf(i,s,a){const c=De(),l=function yl(i,s,a,c){return Pr(i,Hs(),a)?s+ge(a)+c:Ot}(c,i,s,a);return l!==Ot&&function Wr(i,s,a){const c=ni(s,i);!function uf(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,Wn(),l),zf}const Dl=void 0;var hI=["en",[["a","p"],["AM","PM"],Dl],[["AM","PM"],Dl,Dl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Dl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Dl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Dl,"{1} 'at' {0}",Dl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Yn(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let ah={};function r_(i){const s=function Ha(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=s_(s);if(a)return a;const c=s.split("-")[0];if(a=s_(c),a)return a;if("en"===c)return hI;throw new we(701,!1)}function i_(i){return r_(i)[vt.PluralCase]}function s_(i){return i in ah||(ah[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),ah[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Ku="en-US";let Jf=Ku;function rp(i,s,a,c,l){if(i=q(i),Array.isArray(i))for(let f=0;f<i.length;f++)rp(i[f],s,a,c,l);else{const f=jt(),v=De();let I=cl(i)?i:q(i.provide),E=Uw(i);const T=Cn(),M=1048575&T.providerIndexes,k=T.directiveStart,H=T.providerIndexes>>20;if(cl(i)||!i.multi){const J=new ws(E,l,kd),me=os(I,s,l?M:M+H,k);-1===me?(Is(Zs(T,v),f,I),re(f,i,s.length),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(J),v.push(J)):(a[me]=J,v[me]=J)}else{const J=os(I,s,M+H,k),me=os(I,s,M,M+H),Pe=J>=0&&a[J],He=me>=0&&a[me];if(l&&!He||!l&&!Pe){Is(Zs(T,v),f,I);const nt=function qC(i,s,a,c,l){const f=new ws(i,a,kd);return f.multi=[],f.index=s,f.componentProviders=0,ip(f,l,c&&!a),f}(l?sp:WC,a.length,l,c,E);!l&&He&&(a[me].providerFactory=nt),re(f,i,s.length,0),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(nt),v.push(nt)}else re(f,i,J>-1?J:me,ip(a[l?me:J],E,!l&&c));!l&&c&&He&&a[me].componentProviders++}}}function re(i,s,a,c){const l=cl(s),f=function gD(i){return!!i.useClass}(s);if(l||f){const E=(f?q(s.useClass):s).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[c,E]):T[M+1].push(c,E)}else T.push(a,E)}}}function ip(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function os(i,s,a,c){for(let l=a;l<c;l++)if(s[l]===i)return l;return-1}function WC(i,s,a,c){return Qo(this.multi,[])}function sp(i,s,a,c){const l=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Yi(a,a[1],this.providerFactory.index,c);f=I.slice(0,v),Qo(l,f);for(let E=v;E<I.length;E++)f.push(I[E])}else f=[],Qo(l,f);return f}function Qo(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Qu(i,s=[]){return a=>{a.providersResolver=(c,l)=>function Yu(i,s,a){const c=jt();if(c.firstCreatePass){const l=yr(i);rp(a,c.data,c.blueprint,l,!0),rp(s,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,s)}}class Ml{}class vm{}function KC(i,s){return new Ci(i,s??null)}class Ci extends Ml{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jd(this);const c=ln(s);this._bootstrapComponents=zo(c.bootstrap),this._r3Injector=Or(s,a,[{provide:Ml,useValue:this},{provide:Uu,useValue:this.componentFactoryResolver}],de(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class _m extends vm{constructor(s){super(),this.moduleType=s}create(s){return new Ci(this.moduleType,s)}}class Rl extends Ml{constructor(s,a,c){super(),this.componentFactoryResolver=new jd(this),this.instance=null;const l=new qy([...s,{provide:Ml,useValue:this},{provide:Uu,useValue:this.componentFactoryResolver}],a||Df(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function wm(i,s,a=null){return new Rl(i,s,a).injector}let Jn=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Pw(0,a.type),l=c.length>0?wm([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Zt({token:i,providedIn:"environment",factory:()=>new i(vn(Vu))}),i})();function op(i){i.getStandaloneInjector=s=>s.get(Jn).getOrCreateStandaloneInjector(i)}function Cm(i){return s=>{setTimeout(i,void 0,s)}}const li=class JC extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,f=a||(()=>null),v=c;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),f=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(f=Cm(f),l&&(l=Cm(l)),v&&(v=Cm(v)));const I=super.subscribe({next:l,error:f,complete:v});return s instanceof X.w0&&s.add(I),I}};function XC(){return this._results[ml()]()}class Pl{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ml(),c=Pl.prototype;c[a]||(c[a]=XC)}get changes(){return this._changes||(this._changes=new li)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=wn(s);(this._changesDetected=!function ii(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],f=s[c];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let tc=(()=>{class i{}return i.__NG_ELEMENT_ID__=HI,i})();const bm=tc,$I=class extends bm{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=Lg(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(c)),Ud(c,l,s),new At(l)}};function HI(){return fr(Cn(),De())}function fr(i,s){return 4&i.type?new $I(s,i,Bu(i,s)):null}let Tm=(()=>{class i{}return i.__NG_ELEMENT_ID__=eb,i})();function eb(){return zI(Cn(),De())}const tb=Tm,__=class extends tb{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Bu(this._hostTNode,this._hostLView)}get injector(){return new Qs(this._hostTNode,this._hostLView)}get parentInjector(){const s=Eu(this._hostTNode,this._hostLView);if(ad(s)){const a=ma(s,this._hostLView),c=tr(s);return new Qs(a[1].data[c+8],a)}return new Qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=GI(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,f;"number"==typeof c?l=c:null!=c&&(l=c.index,f=c.injector);const v=s.createEmbeddedView(a||{},f);return this.insert(v,l),v}createComponent(s,a,c,l,f){const v=s&&!function vi(i){return"function"==typeof i}(s);let I;if(v)I=a;else{const k=a||{};I=k.index,c=k.injector,l=k.projectableNodes,f=k.environmentInjector||k.ngModuleRef}const E=v?s:new Of(Z(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const H=(v?T:this.parentInjector).get(Vu,null);H&&(f=H)}const M=E.create(T,l,void 0,f);return this.insert(M.hostView,I),M}insert(s,a){const c=s._lView,l=c[1];if(function nu(i){return xr(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const k=c[3],H=new __(k,k[6],k[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function nl(i,s,a,c){const l=10+c,f=a.length;c>0&&(a[l-1][4]=s),c<f-10?(s[4]=a[l],Da(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function Py(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(l,c,v,f);const I=sl(f,v),E=c[11],T=Nr(E,v[7]);return null!==T&&function _d(i,s,a,c,l,f){c[0]=l,c[6]=s,Bo(i,c,a,1,l,f)}(l,v[6],E,c,T,I),s.attachToViewContainerRef(),Da(w_(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=GI(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=lf(this._lContainer,a);c&&(Mr(w_(this._lContainer),a),og(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=lf(this._lContainer,a);return c&&null!=Mr(w_(this._lContainer),a)?new At(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function GI(i){return i[8]}function w_(i){return i[8]||(i[8]=[])}function zI(i,s){let a;const c=s[i.index];if(xr(c))a=c;else{let l;if(8&i.type)l=Dn(c);else{const f=s[11];l=f.createComment("");const v=vr(i,s);io(f,Nr(f,v),l,function ka(i,s){return i.nextSibling(s)}(f,v),!1)}s[i.index]=a=C0(c,s,l,i),Nf(s,a)}return new __(a,i,s)}class I_{constructor(s){this.queryList=s,this.matches=null}clone(){return new I_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Am{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<c;f++){const v=a.getByIndex(f);l.push(this.queries[v.indexInDeclarationView].clone())}return new Am(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==KI(s,a).matches&&this.queries[a].setDirty()}}class E_{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class fo{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,l);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new fo(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Sm{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Sm(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const f=c[l];this.matchTNodeWithReadOption(s,a,vh(a,f)),this.matchTNodeWithReadOption(s,a,To(a,s,f,!1,!1))}else c===tc?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,To(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===ll||l===Tm||l===tc&&4&a.type)this.addMatch(a.index,-2);else{const f=To(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function vh(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function D_(i,s,a,c){return-1===a?function WI(i,s){return 11&i.type?Bu(i,s):4&i.type?fr(i,s):null}(s,i):-2===a?function C_(i,s,a){return a===ll?Bu(s,i):a===tc?fr(s,i):a===Tm?zI(s,i):void 0}(i,s,c):Yi(i,i[1],a,s)}function xm(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const f=i.data,v=a.matches,I=[];for(let E=0;E<v.length;E+=2){const T=v[E];I.push(T<0?null:D_(s,f[T],v[E+1],a.metadata.read))}l.matches=I}return l.matches}function rc(i,s,a,c){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const v=xm(i,s,l,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(v[I/2]);else{const T=f[I+1],M=s[-E];for(let k=10;k<M.length;k++){const H=M[k];H[17]===H[3]&&rc(H[1],H,T,c)}if(null!==M[9]){const k=M[9];for(let H=0;H<k.length;H++){const J=k[H];rc(J[1],J,T,c)}}}}}return c}function di(i){const s=De(),a=jt(),c=Oc();fa(c+1);const l=KI(a,c);if(i.dirty&&function tu(i){return 4==(4&i[2])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?rc(a,s,c,[]):xm(a,s,l,c);i.reset(f,CD),i.notifyOnChanges()}return!0}return!1}function _h(i,s,a,c){const l=jt();if(l.firstCreatePass){const f=Cn();(function A_(i,s,a){null===i.queries&&(i.queries=new fo),i.queries.track(new Sm(s,a))})(l,new E_(s,a,c),f.index),function qI(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function Rm(i,s,a){const c=new Pl(4==(4&a));gv(i,s,c,c.destroy),null===s[19]&&(s[19]=new Am),s[19].queries.push(new I_(c))}(l,De(),a)}function b_(){return function T_(i,s){return i[19].queries[s].queryList}(De(),Oc())}function KI(i,s){return i.queries.getByIndex(s)}function Lm(...i){}const nE=new pn("Application Initializer");let oc=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Lm,this.reject=Lm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(Mv(f))a.push(f);else if(j0(f)){const v=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(vn(nE,8))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const V_=new pn("AppId",{providedIn:"root",factory:function rE(){return`${yp()}${yp()}${yp()}`}});function yp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const U_=new pn("Platform Initializer"),vp=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),go=new pn("appBootstrapListener");let _p=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const wp=new pn("LocaleId",{providedIn:"root",factory:()=>D(wp,Ke.Optional|Ke.SkipSelf)||function sE(){return typeof $localize<"u"&&$localize.locale||Ku}()}),oE=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class B_{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let mb=(()=>{class i{compileModuleSync(a){return new _m(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=zo(ln(a).declarations).reduce((v,I)=>{const E=Z(I);return E&&v.push(new Of(E)),v},[]);return new B_(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Th=(()=>Promise.resolve(0))();function ac(i){typeof Zone>"u"?Th.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ps{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new li(!1),this.onMicrotaskEmpty=new li(!1),this.onStable=new li(!1),this.onError=new li(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function yb(){let i=tn.requestAnimationFrame,s=tn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function _b(i){const s=()=>{!function Ti(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Bm(i),i.isCheckStableRunning=!0,Um(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Bm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,f,v,I)=>{try{return yo(i),a.invokeTask(l,f,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),$_(i)}},onInvoke:(a,c,l,f,v,I,E)=>{try{return yo(i),a.invoke(l,f,v,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),$_(i)}},onHasTask:(a,c,l,f)=>{a.hasTask(l,f),c===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Bm(i),Um(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ps.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Ps.isInAngularZone())throw new we(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+l,s,vb,Lm,Lm);try{return f.runTask(v,a,c)}finally{f.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const vb={};function Um(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Bm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function yo(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function $_(i){i._nesting--,Um(i)}class jm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new li,this.onMicrotaskEmpty=new li,this.onStable=new li,this.onError=new li}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const H_=new pn(""),dE=new pn("");let G_,wb=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,G_||(function Ib(i){G_=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ps.assertNotInAngularZone(),ac(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ac(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(vn(Ps),vn(hE),vn(dE))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})(),hE=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return G_?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),uc=null;const fE=new pn("AllowMultipleToken"),z_=new pn("PlatformDestroyListeners");class Cb{constructor(s,a){this.name=s,this.token=a}}function q_(i,s,a=[]){const c=`Platform: ${s}`,l=new pn(c);return(f=[])=>{let v=gr();if(!v||v.injector.get(fE,!1)){const I=[...a,...f,{provide:l,useValue:!0}];i?i(I):function bb(i){if(uc&&!uc.get(fE,!1))throw new we(400,!1);uc=i;const s=i.get($m);(function W_(i){const s=i.get(U_,null);s&&s.forEach(a=>a())})(i)}(function gE(i=[],s){return Gr.create({name:s,providers:[{provide:Wy,useValue:"platform"},{provide:z_,useValue:new Set([()=>uc=null])},...i]})}(I,c))}return function pE(i){const s=gr();if(!s)throw new we(401,!1);return s}()}}function gr(){return uc?.get($m)??null}let $m=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function Gm(i,s){let a;return a="noop"===i?new jm:("zone.js"===i?void 0:i)||new Ps(s),a}(c?.ngZone,function Hm(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Ps,useValue:l}];return l.run(()=>{const v=Gr.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(v),E=I.injector.get(dl,null);if(!E)throw new we(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{Ip(this._modules,I),T.unsubscribe()})}),function Wa(i,s,a){try{const c=a();return Mv(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const T=I.injector.get(oc);return T.runInitializers(),T.donePromise.then(()=>(function gI(i){Ut(i,"Expected localeId to be defined"),"string"==typeof i&&(Jf=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(wp,Ku)||Ku),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const l=K_({},c);return function Eb(i,s,a){const c=new _m(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const c=a.injector.get(zm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(z_,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(vn(Gr))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function K_(i,s){return Array.isArray(s)?s.reduce(K_,i):{...i,...s}}let zm=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Ps.assertNotInAngularZone(),ac(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Ps.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,se.T)(f,v.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof ID;if(!this._injector.get(oc).done)throw!l&&qt(a),new we(405,false);let v;v=l?a:this._injector.get(Uu).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function Db(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Ml),T=v.create(Gr.NULL,[],c||v.selector,I),M=T.location.nativeElement,k=T.injector.get(H_,null);return k?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),Ip(this.components,T),k?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Ip(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(go,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Ip(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(vn(Ps),vn(Vu),vn(dl))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ip(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let cc=!0,lc=!1;function Dp(){return lc=!0,cc}function yE(){if(lc)throw new Error("Cannot enable prod mode after platform setup.");cc=!1}let wE=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ab,i})();function Ab(i){return function IE(i,s,a){if(ia(i)&&!a){const c=zt(i.index,s);return new At(c,c)}return 47&i.type?new At(s[16],s):null}(Cn(),De(),16==(16&i))}class X_{constructor(){}supports(s){return qo(s)}create(s){return new Ui(s)}}const DE=(i,s)=>s;class Ui{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||DE}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,f=null;for(;a||c;){const v=!c||a&&a.currentIndex<ew(c,l,f)?a:c,I=ew(v,l,f),E=v.currentIndex;if(v===c)l--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)l++;else{f||(f=[]);const T=I-l,M=E-l;if(T!=M){for(let H=0;H<T;H++){const J=H<f.length?f[H]:f[H]=0,me=J+H;M<=me&&me<T&&(f[H]=J+1)}f[v.previousIndex]=M-T}}I!==E&&s(v,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!qo(s))throw new we(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],v=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,f,v,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,I),c=!0),a=a._next}else l=0,function Cv(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[ml()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{v=this._trackByFn(l,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,l)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new CE(a,c),f,l),s}_verifyReinsertion(s,a,c,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new bp),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bp),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class CE{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Jm{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class bp{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new Jm,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ew(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class qa{constructor(){}supports(s){return s instanceof Map||qg(s)}create(){return new Mh}}class Mh{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||qg(s)))throw new we(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,v=l._next;return f&&(f._next=v),v&&(v._prev=f),l._next=null,l._prev=null,l}const c=new bE(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class bE{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hc(){return new tw([new X_])}let tw=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||hc()),deps:[[i,new mt,new Me]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:hc}),i})();function nw(){return new ea([new qa])}let ea=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||nw()),deps:[[i,new mt,new Me]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:nw}),i})();const kb=q_(null,"core",[]);let Xm=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(vn(zm))},i.\u0275mod=Nt({type:i}),i.\u0275inj=Mt({}),i})();function AE(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ut,be,P)=>{P.d(be,{Z:()=>we});var g=P(2090),X=P(4859),O=P(9681),se=P(1877);class ie{constructor(ge,fe){this._delegate=ge,this.firebase=fe,(0,O._addComponent)(ge,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ge,fe=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(ge);return!rt.isInitialized()&&"EXPLICIT"===(null===(Ye=rt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:fe})}_removeServiceInstance(ge,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(fe)}_addComponent(ge){(0,O._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,O._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function he(){const Xe=function de(Xe){const ge={},fe={__esModule:!0,initializeApp:function Ae(je,V={}){const pe=O.initializeApp(je,V);if((0,g.r3)(ge,pe.name))return ge[pe.name];const z=new Xe(pe,fe);return ge[pe.name]=z,z},app:rt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const V=je.name,pe=V.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const z=(Q=rt())=>{if("function"!=typeof Q[pe])throw ue.create("invalid-app-argument",{appName:V});return Q[pe]()};void 0!==je.serviceProps&&(0,g.ZB)(z,je.serviceProps),fe[pe]=z,Xe.prototype[pe]=function(...Q){return this._getService.bind(this,V).apply(this,je.multipleInstances?Q:[])}}return"PUBLIC"===je.type?fe[pe]:null},removeApp:function Ye(je){delete ge[je]},useAsService:function Be(je,V){return"serverAuth"===V?null:V},modularAPIs:O}};function rt(je){if(!(0,g.r3)(ge,je=je||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:je});return ge[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function ve(){return Object.keys(ge).map(je=>ge[je])}}),rt.App=Xe,fe}(ie);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ge(fe){(0,g.ZB)(Xe,fe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Xe}(),B=new se.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=U;!function Se(Xe){(0,O.registerVersion)("@firebase/app-compat","0.1.39",Xe)}()},9681:(ut,be,P)=>{P.r(be),P.d(be,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Fs,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Zt,_apps:()=>rn,_clearComponents:()=>$i,_components:()=>mn,_getProvider:()=>Mt,_registerComponent:()=>Tr,_removeServiceInstance:()=>un,deleteApp:()=>na,getApp:()=>Jr,getApps:()=>Xr,initializeApp:()=>pi,onLog:()=>ds,registerVersion:()=>mr,setLogLevel:()=>$n});var g=P(5861),X=P(4859),O=P(1877),se=P(2090),ie=P(8766);class le{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function ue(Je){return"VERSION"===Je.getComponent()?.type}(Qe)){const _t=Qe.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Qe=>Qe).join(" ")}}const de="@firebase/app",U=new O.Yd("@firebase/app"),Ut="[DEFAULT]",qe={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rn=new Map,mn=new Map;function Wt(Je,Ce){try{Je.container.addComponent(Ce)}catch(Qe){U.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Je.name}`,Qe)}}function Zt(Je,Ce){Je.container.addOrOverwriteComponent(Ce)}function Tr(Je){const Ce=Je.name;if(mn.has(Ce))return U.debug(`There were multiple attempts to register component ${Ce}.`),!1;mn.set(Ce,Je);for(const Qe of rn.values())Wt(Qe,Je);return!0}function Mt(Je,Ce){const Qe=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),Je.container.getProvider(Ce)}function un(Je,Ce,Qe=Ut){Mt(Je,Ce).clearInstance(Qe)}function $i(){mn.clear()}const Ar=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Lr{constructor(Ce,Qe,_t){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}const Fs="9.14.0";function pi(Je,Ce={}){let Qe=Je;"object"!=typeof Ce&&(Ce={name:Ce});const _t=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},Ce),gt=_t.name;if("string"!=typeof gt||!gt)throw Ar.create("bad-app-name",{appName:String(gt)});if(Qe||(Qe=(0,se.aH)()),!Qe)throw Ar.create("no-options");const Nt=rn.get(gt);if(Nt){if((0,se.vZ)(Qe,Nt.options)&&(0,se.vZ)(_t,Nt.config))return Nt;throw Ar.create("duplicate-app",{appName:gt})}const j=new X.H0(gt);for(const W of mn.values())j.addComponent(W);const L=new Lr(Qe,_t,j);return rn.set(gt,L),L}function Jr(Je=Ut){const Ce=rn.get(Je);if(!Ce&&Je===Ut)return pi();if(!Ce)throw Ar.create("no-app",{appName:Je});return Ce}function Xr(){return Array.from(rn.values())}function na(Je){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(Je){const Ce=Je.name;rn.has(Ce)&&(rn.delete(Ce),yield Promise.all(Je.container.getProviders().map(Qe=>Qe.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function mr(Je,Ce,Qe){var _t;let gt=null!==(_t=qe[Je])&&void 0!==_t?_t:Je;Qe&&(gt+=`-${Qe}`);const Nt=gt.match(/\s|\//),j=Ce.match(/\s|\//);if(Nt||j){const L=[`Unable to register library "${gt}" with version "${Ce}":`];return Nt&&L.push(`library name "${gt}" contains illegal characters (whitespace or "/")`),Nt&&j&&L.push("and"),j&&L.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void U.warn(L.join(" "))}Tr(new X.wA(`${gt}-version`,()=>({library:gt,version:Ce}),"VERSION"))}function ds(Je,Ce){if(null!==Je&&"function"!=typeof Je)throw Ar.create("invalid-log-argument");(0,O.Am)(Je,Ce)}function $n(Je){(0,O.Ub)(Je)}const Mn="firebase-heartbeat-store";let kn=null;function hn(){return kn||(kn=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(Je,Ce)=>{0===Ce&&Je.createObjectStore(Mn)}}).catch(Je=>{throw Ar.create("idb-open",{originalErrorMessage:Je.message})})),kn}function st(){return(st=(0,g.Z)(function*(Je){var Ce;try{return(yield hn()).transaction(Mn).objectStore(Mn).get(Pn(Je))}catch(Qe){if(Qe instanceof se.ZR)U.warn(Qe.message);else{const _t=Ar.create("idb-get",{originalErrorMessage:null===(Ce=Qe)||void 0===Ce?void 0:Ce.message});U.warn(_t.message)}}})).apply(this,arguments)}function tn(Je,Ce){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(Je,Ce){var Qe;try{const gt=(yield hn()).transaction(Mn,"readwrite");return yield gt.objectStore(Mn).put(Ce,Pn(Je)),gt.done}catch(_t){if(_t instanceof se.ZR)U.warn(_t.message);else{const gt=Ar.create("idb-set",{originalErrorMessage:null===(Qe=_t)||void 0===Qe?void 0:Qe.message});U.warn(gt.message)}}})).apply(this,arguments)}function Pn(Je){return`${Je.name}!${Je.options.appId}`}class hs{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new Qt(Qe),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var Ce=this;return(0,g.Z)(function*(){const _t=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=Yt();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==gt&&!Ce._heartbeatsCache.heartbeats.some(Nt=>Nt.date===gt))return Ce._heartbeatsCache.heartbeats.push({date:gt,agent:_t}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Nt=>{const j=new Date(Nt.date).valueOf();return Date.now()-j<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,g.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Qe=Yt(),{heartbeatsToSend:_t,unsentEntries:gt}=function Si(Je,Ce=1024){const Qe=[];let _t=Je.slice();for(const gt of Je){const Nt=Qe.find(j=>j.agent===gt.agent);if(Nt){if(Nt.dates.push(gt.date),Hn(Qe)>Ce){Nt.dates.pop();break}}else if(Qe.push({agent:gt.agent,dates:[gt.date]}),Hn(Qe)>Ce){Qe.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:_t}}(Ce._heartbeatsCache.heartbeats),Nt=(0,se.L)(JSON.stringify({version:2,heartbeats:_t}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Qe,gt.length>0?(Ce._heartbeatsCache.heartbeats=gt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Nt})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,g.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function ft(Je){return st.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Qe=this;return(0,g.Z)(function*(){var _t;if(yield Qe._canUseIndexedDBPromise){const Nt=yield Qe.read();return tn(Qe.app,{lastSentHeartbeatDate:null!==(_t=Ce.lastSentHeartbeatDate)&&void 0!==_t?_t:Nt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Qe=this;return(0,g.Z)(function*(){var _t;if(yield Qe._canUseIndexedDBPromise){const Nt=yield Qe.read();return tn(Qe.app,{lastSentHeartbeatDate:null!==(_t=Ce.lastSentHeartbeatDate)&&void 0!==_t?_t:Nt.lastSentHeartbeatDate,heartbeats:[...Nt.heartbeats,...Ce.heartbeats]})}})()}}function Hn(Je){return(0,se.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Sr(Je){Tr(new X.wA("platform-logger",Ce=>new le(Ce),"PRIVATE")),Tr(new X.wA("heartbeat",Ce=>new hs(Ce),"PRIVATE")),mr(de,"0.8.4",Je),mr(de,"0.8.4","esm2017"),mr("fire-js","")}("")},4859:(ut,be,P)=>{P.d(be,{H0:()=>de,wA:()=>O});var g=P(5861),X=P(2090);class O{constructor(U,B,q){this.name=U,this.instanceFactory=B,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const se="[DEFAULT]";class ie{constructor(U,B){this.name=U,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const B=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(B)){const q=new X.BH;if(this.instancesDeferred.set(B,q),this.isInitialized(B)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:B});Le&&q.resolve(Le)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(U){var B;const q=this.normalizeInstanceIdentifier(U?.identifier),Le=null!==(B=U?.optional)&&void 0!==B&&B;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(Se){if(Le)return null;throw Se}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[B,q]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(B);try{const Se=this.getOrInitializeService({instanceIdentifier:Le});q.resolve(Se)}catch{}}}}clearInstance(U=se){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,g.Z)(function*(){const B=Array.from(U.instances.values());yield Promise.all([...B.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...B.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=se){return this.instances.has(U)}getOptions(U=se){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:B={}}=U,q=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:q,options:B});for(const[Se,we]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(Se)&&we.resolve(Le);return Le}onInit(U,B){var q;const Le=this.normalizeInstanceIdentifier(B),Se=null!==(q=this.onInitCallbacks.get(Le))&&void 0!==q?q:new Set;Se.add(U),this.onInitCallbacks.set(Le,Se);const we=this.instances.get(Le);return we&&U(we,Le),()=>{Se.delete(U)}}invokeOnInitCallbacks(U,B){const q=this.onInitCallbacks.get(B);if(q)for(const Le of q)try{Le(U,B)}catch{}}getOrInitializeService({instanceIdentifier:U,options:B={}}){let q=this.instances.get(U);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(he=U,he===se?void 0:he),options:B}),this.instances.set(U,q),this.instancesOptions.set(U,B),this.invokeOnInitCallbacks(q,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,q)}catch{}var he;return q||null}normalizeInstanceIdentifier(U=se){return this.component?this.component.multipleInstances?U:se:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const B=this.getProvider(U.name);if(B.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);B.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const B=new ie(U,this);return this.providers.set(U,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,be,P)=>{P.d(be,{Am:()=>he,Ub:()=>de,Yd:()=>ue,in:()=>X});const g=[];var X=(()=>{return(U=X||(X={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",X;var U})();const O={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},se=X.INFO,ie={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},le=(U,B,...q)=>{if(B<U.logLevel)return;const Le=(new Date).toISOString(),Se=ie[B];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Se](`[${Le}]  ${U.name}:`,...q)};class ue{constructor(B){this.name=B,this._logLevel=se,this._logHandler=le,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in X))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...B),this._logHandler(this,X.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...B),this._logHandler(this,X.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,X.INFO,...B),this._logHandler(this,X.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,X.WARN,...B),this._logHandler(this,X.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...B),this._logHandler(this,X.ERROR,...B)}}function de(U){g.forEach(B=>{B.setLogLevel(U)})}function he(U,B){for(const q of g){let Le=null;B&&B.level&&(Le=O[B.level]),q.userLogHandler=null===U?null:(Se,we,...Xe)=>{const ge=Xe.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Le??Se.logLevel)&&U({level:X[we].toLowerCase(),message:ge,args:Xe,type:Se.name})}}}},8766:(ut,be,P)=>{P.d(be,{Lj:()=>Ae,X3:()=>rt});var g=P(5861);let O,se;const ue=new WeakMap,de=new WeakMap,he=new WeakMap,U=new WeakMap,B=new WeakMap;let Se={get(V,pe,z){if(V instanceof IDBTransaction){if("done"===pe)return de.get(V);if("objectStoreNames"===pe)return V.objectStoreNames||he.get(V);if("store"===pe)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return fe(V[pe])},set:(V,pe,z)=>(V[pe]=z,!0),has:(V,pe)=>V instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in V};function ge(V){return"function"==typeof V?function Xe(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...pe){return V.apply(Ye(this),pe),fe(ue.get(this))}:function(...pe){return fe(V.apply(Ye(this),pe))}:function(pe,...z){const Q=V.call(Ye(this),pe,...z);return he.set(Q,pe.sort?pe.sort():[pe]),fe(Q)}}(V):(V instanceof IDBTransaction&&function Le(V){if(de.has(V))return;const pe=new Promise((z,Q)=>{const ne=()=>{V.removeEventListener("complete",te),V.removeEventListener("error",Fe),V.removeEventListener("abort",Fe)},te=()=>{z(),ne()},Fe=()=>{Q(V.error||new DOMException("AbortError","AbortError")),ne()};V.addEventListener("complete",te),V.addEventListener("error",Fe),V.addEventListener("abort",Fe)});de.set(V,pe)}(V),((V,pe)=>pe.some(z=>V instanceof z))(V,function ie(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Se):V)}function fe(V){if(V instanceof IDBRequest)return function q(V){const pe=new Promise((z,Q)=>{const ne=()=>{V.removeEventListener("success",te),V.removeEventListener("error",Fe)},te=()=>{z(fe(V.result)),ne()},Fe=()=>{Q(V.error),ne()};V.addEventListener("success",te),V.addEventListener("error",Fe)});return pe.then(z=>{z instanceof IDBCursor&&ue.set(z,V)}).catch(()=>{}),B.set(pe,V),pe}(V);if(U.has(V))return U.get(V);const pe=ge(V);return pe!==V&&(U.set(V,pe),B.set(pe,V)),pe}const Ye=V=>B.get(V);function rt(V,pe,{blocked:z,upgrade:Q,blocking:ne,terminated:te}={}){const Fe=indexedDB.open(V,pe),ke=fe(Fe);return Q&&Fe.addEventListener("upgradeneeded",ct=>{Q(fe(Fe.result),ct.oldVersion,ct.newVersion,fe(Fe.transaction))}),z&&Fe.addEventListener("blocked",()=>z()),ke.then(ct=>{te&&ct.addEventListener("close",()=>te()),ne&&ct.addEventListener("versionchange",()=>ne())}).catch(()=>{}),ke}function Ae(V,{blocked:pe}={}){const z=indexedDB.deleteDatabase(V);return pe&&z.addEventListener("blocked",()=>pe()),fe(z).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Be=new Map;function je(V,pe){if(!(V instanceof IDBDatabase)||pe in V||"string"!=typeof pe)return;if(Be.get(pe))return Be.get(pe);const z=pe.replace(/FromIndex$/,""),Q=pe!==z,ne=Ie.includes(z);if(!(z in(Q?IDBIndex:IDBObjectStore).prototype)||!ne&&!ve.includes(z))return;const te=function(){var Fe=(0,g.Z)(function*(ke,...ct){const Kt=this.transaction(ke,ne?"readwrite":"readonly");let Ut=Kt.store;return Q&&(Ut=Ut.index(ct.shift())),(yield Promise.all([Ut[z](...ct),ne&&Kt.done]))[0]});return function(ct){return Fe.apply(this,arguments)}}();return Be.set(pe,te),te}!function we(V){Se=V(Se)}(V=>({...V,get:(pe,z,Q)=>je(pe,z)||V.get(pe,z,Q),has:(pe,z)=>!!je(pe,z)||V.has(pe,z)}))},5861:(ut,be,P)=>{function g(O,se,ie,le,ue,de,he){try{var U=O[de](he),B=U.value}catch(q){return void ie(q)}U.done?se(B):Promise.resolve(B).then(le,ue)}function X(O){return function(){var se=this,ie=arguments;return new Promise(function(le,ue){var de=O.apply(se,ie);function he(B){g(de,le,ue,he,U,"next",B)}function U(B){g(de,le,ue,he,U,"throw",B)}he(void 0)})}}P.d(be,{Z:()=>X})}},ut=>{ut(ut.s=4825)}]);