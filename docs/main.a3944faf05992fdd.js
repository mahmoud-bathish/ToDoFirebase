"use strict";(self.webpackChunkToDo=self.webpackChunkToDo||[]).push([[179],{2011:(at,be,P)=>{P.d(be,{Dh:()=>de,GT:()=>le,cc:()=>Se,hO:()=>Le,on:()=>U,pX:()=>re,xv:()=>he});var g=P(4650),J=P(127),k=P(5813);at=P.hmd(at);const ie=["ngOnDestroy"],re=(fe,Ye,rt,Ae={})=>new Proxy(fe,{get:(ve,Ie)=>rt.runOutsideAngular(()=>{var je;if(fe[Ie])return!(null===(je=Ae?.spy)||void 0===je)&&je.get&&Ae.spy.get(Ie,fe[Ie]),fe[Ie];if(ie.indexOf(Ie)>-1)return()=>{};const $e=Ye.toPromise().then(V=>{const pe=V&&V[Ie];return"function"==typeof pe?pe.bind(V):pe&&pe.then?pe.then(z=>rt.run(()=>z)):rt.run(()=>pe)});return new Proxy(()=>{},{get:(V,pe)=>$e[pe],apply:(V,pe,z)=>$e.then(Q=>{var ne;const te=Q&&Q(...z);return!(null===(ne=Ae?.spy)||void 0===ne)&&ne.apply&&Ae.spy.apply(Ie,z,te),te})})})}),le=(fe,Ye)=>{Ye.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(Ae=>{Object.defineProperty(fe.prototype,Ae,Object.getOwnPropertyDescriptor(rt.prototype||rt,Ae))})})};class ue{constructor(Ye){return Ye}}const de=new g.OlP("angularfire2.app.options"),he=new g.OlP("angularfire2.app.name");function U(fe,Ye,rt){const ve="object"==typeof rt&&rt||{};ve.name=ve.name||"string"==typeof rt&&rt||"[DEFAULT]";const je=J.Z.apps.filter($e=>$e&&$e.name===ve.name)[0]||Ye.runOutsideAngular(()=>J.Z.initializeApp(fe,ve));try{JSON.stringify(fe)!==JSON.stringify(je.options)&&B("error",`${je.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(je)}const B=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)},q={provide:ue,useFactory:U,deps:[de,g.R0b,[new g.FiY,he]]};let Le=(()=>{class fe{constructor(rt){J.Z.registerVersion("angularfire",k.q4.full,"core"),J.Z.registerVersion("angularfire",k.q4.full,"app-compat"),J.Z.registerVersion("angular",g.q4F.full,rt.toString())}static initializeApp(rt,Ae){return{ngModule:fe,providers:[{provide:de,useValue:rt},{provide:he,useValue:Ae}]}}}return fe.\u0275fac=function(rt){return new(rt||fe)(g.LFG(g.Lbi))},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({providers:[q]}),fe})();function Se(fe,Ye,rt,Ae,ve){const[,Ie,je]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===fe)||[];if(Ie)return function we(fe,Ye){try{return fe.toString()===Ye.toString()}catch{return fe===Ye}}(ve,je)||(ge("error",`${Ye} was already initialized on the ${rt} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:ve,was:je})),Ie;{const $e=Ae();return globalThis.\u0275AngularfireInstanceCache.push([fe,$e,ve]),$e}}const Xe=!!at.hot,ge=(fe,...Ye)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,be,P)=>{P.d(be,{q4:()=>ot,iC:()=>Ji,HU:()=>Mo,vb:()=>Ts,JM:()=>Ta});var g=P(4650),J=P(5867),k=P(5861),ie=P(9681),re=P(2090),le=P(4859),ue=P(1877),de=P(8766);const he="@firebase/installations",U="0.5.16",q=`w:${U}`,Le="FIS_v2",Ye=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Ae({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:Q(D.expiresIn),creationTime:Date.now()}}function Ie(D,b){return je.apply(this,arguments)}function je(){return(je=(0,k.Z)(function*(D,b){const F=(yield b.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:b}){const x=$e(D);return x.append("Authorization",function ne(D){return`${Le} ${D}`}(b)),x}function pe(D){return z.apply(this,arguments)}function z(){return(z=(0,k.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function Q(D){return Number(D.replace("s","000"))}function te(D,b){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const F=Ae(D),Z=$e(D),ee=b.getImmediate({optional:!0});if(ee){const yt=yield ee.getHeartbeatsHeader();yt&&Z.append("x-firebase-client",yt)}const Me={method:"POST",headers:Z,body:JSON.stringify({fid:x,authVersion:Le,appId:D.appId,sdkVersion:q})},nt=yield pe(()=>fetch(F,Me));if(nt.ok){const yt=yield nt.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:ve(yt.authToken)}}throw yield Ie("Create Installation",nt)})).apply(this,arguments)}function ke(D){return new Promise(b=>{setTimeout(b,D)})}const Yt=/^[cdef][\w-]{21}$/;function qe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function an(D){return function ut(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Yt.test(x)?x:""}catch{return""}}function vn(D){return`${D.appName}!${D.appId}`}const Zt=new Map;function Qt(D,b){const x=vn(D);dn(x,b),function ji(D,b){const x=function br(){return!ui&&"BroadcastChannel"in self&&(ui=new BroadcastChannel("[Firebase] FID Change"),ui.onmessage=D=>{dn(D.data.key,D.data.fid)}),ui}();x&&x.postMessage({key:D,fid:b}),function Or(){0===Zt.size&&ui&&(ui.close(),ui=null)}()}(x,b)}function dn(D,b){const x=Zt.get(D);if(x)for(const F of x)F(b)}let ui=null;const Kr="firebase-installations-store";let Yr=null;function ta(){return Yr||(Yr=(0,de.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Kr)}})),Yr}function Ze(D,b){return mr.apply(this,arguments)}function mr(){return(mr=(0,k.Z)(function*(D,b){const x=vn(D),Z=(yield ta()).transaction(Kr,"readwrite"),ee=Z.objectStore(Kr),Ee=yield ee.get(x);return yield ee.put(b,x),yield Z.done,(!Ee||Ee.fid!==b.fid)&&Qt(D,b.fid),b})).apply(this,arguments)}function ls(D){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,k.Z)(function*(D){const b=vn(D),F=(yield ta()).transaction(Kr,"readwrite");yield F.objectStore(Kr).delete(b),yield F.done})).apply(this,arguments)}function Qr(D,b){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,k.Z)(function*(D,b){const x=vn(D),Z=(yield ta()).transaction(Kr,"readwrite"),ee=Z.objectStore(Kr),Ee=yield ee.get(x),Me=b(Ee);return void 0===Me?yield ee.delete(x):yield ee.put(Me,x),yield Z.done,Me&&(!Ee||Ee.fid!==Me.fid)&&Qt(D,Me.fid),Me})).apply(this,arguments)}function On(D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,k.Z)(function*(D){let b;const x=yield Qr(D.appConfig,F=>{const Z=gn(F),ee=ft(D,Z);return b=ee.registrationPromise,ee.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function gn(D){return Dt(D||{fid:qe(),registrationStatus:0})}function ft(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(D,b){return sn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:or(D)}:{installationEntry:b}}function sn(){return(sn=(0,k.Z)(function*(D,b){try{const x=yield te(D,b);return Ze(D.appConfig,x)}catch(x){throw rt(x)&&409===x.customData.serverCode?yield ls(D.appConfig):yield Ze(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function or(D){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,k.Z)(function*(D){let b=yield kr(D.appConfig);for(;1===b.registrationStatus;)yield ke(100),b=yield kr(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield On(D);return F||x}return b})).apply(this,arguments)}function kr(D){return Qr(D,b=>{if(!b)throw Ye.create("installation-not-found");return Dt(b)})}function Dt(D){return function ds(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Jt(D,b){return Di.apply(this,arguments)}function Di(){return(Di=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const F=Xt(D,x),Z=V(D,x),ee=b.getImmediate({optional:!0});if(ee){const yt=yield ee.getHeartbeatsHeader();yt&&Z.append("x-firebase-client",yt)}const Me={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:q,appId:D.appId}})},nt=yield pe(()=>fetch(F,Me));if(nt.ok)return ve(yield nt.json());throw yield Ie("Generate Auth Token",nt)})).apply(this,arguments)}function Xt(D,{fid:b}){return`${Ae(D)}/${b}/authTokens:generate`}function Gn(D){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,k.Z)(function*(D,b=!1){let x;const F=yield Qr(D.appConfig,ee=>{if(!Ot(ee))throw Ye.create("not-registered");const Ee=ee.authToken;if(!b&&j(Ee))return ee;if(1===Ee.requestStatus)return x=Je(D,b),ee;{if(!navigator.onLine)throw Ye.create("app-offline");const Me=W(ee);return x=_t(D,Me),Me}});return x?yield x:F.authToken})).apply(this,arguments)}function Je(D,b){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,k.Z)(function*(D,b){let x=yield Qe(D.appConfig);for(;1===x.authToken.requestStatus;)yield ke(100),x=yield Qe(D.appConfig);const F=x.authToken;return 0===F.requestStatus?Gn(D,b):F})).apply(this,arguments)}function Qe(D){return Qr(D,b=>{if(!Ot(b))throw Ye.create("not-registered");return function _e(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function _t(D,b){return mt.apply(this,arguments)}function mt(){return(mt=(0,k.Z)(function*(D,b){try{const x=yield Jt(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield Ze(D.appConfig,F),x}catch(x){if(!rt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Ze(D.appConfig,F)}else yield ls(D.appConfig);throw x}})).apply(this,arguments)}function Ot(D){return void 0!==D&&2===D.registrationStatus}function j(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function W(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Ge(){return(Ge=(0,k.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield On(b);return F?F.catch(console.error):Gn(b).catch(console.error),x.fid})).apply(this,arguments)}function Kt(){return(Kt=(0,k.Z)(function*(D,b=!1){const x=D;return yield pn(x),(yield Gn(x,b)).token})).apply(this,arguments)}function pn(D){return zt.apply(this,arguments)}function zt(){return(zt=(0,k.Z)(function*(D){const{registrationPromise:b}=yield On(D);b&&(yield b)})).apply(this,arguments)}function hs(D){return Ye.create("missing-app-config-values",{valueName:D})}const fo="installations",Dn=D=>{const b=D.getProvider("app").getImmediate(),x=function _n(D){if(!D||!D.options)throw hs("App Configuration");if(!D.name)throw hs("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw hs(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,ie._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Vs=D=>{const b=D.getProvider("app").getImmediate(),x=(0,ie._getProvider)(b,fo).getImmediate();return{getId:()=>function K(D){return Ge.apply(this,arguments)}(x),getToken:Z=>function ct(D){return Kt.apply(this,arguments)}(x,Z)}};(function tu(){(0,ie._registerComponent)(new le.wA(fo,Dn,"PUBLIC")),(0,ie._registerComponent)(new le.wA("installations-internal",Vs,"PRIVATE"))})(),(0,ie.registerVersion)(he,U),(0,ie.registerVersion)(he,U,"esm2017");const Ci="@firebase/remote-config",Un=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Fh{constructor(b,x,F,Z){this.client=b,this.storage=x,this.storageCache=F,this.logger=Z}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Z=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${Z}.`),Z}fetch(b){var x=this;return(0,k.Z)(function*(){const[F,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return Z;b.eTag=Z&&Z.eTag;const ee=yield x.client.fetch(b),Ee=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Ee.push(x.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Ee),ee})()}}function Tc(D=navigator){return D.languages&&D.languages[0]||D.language}class Ac{constructor(b,x,F,Z,ee,Ee){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=Z,this.apiKey=ee,this.appId=Ee}fetch(b){var x=this;return(0,k.Z)(function*(){var F,Z,ee;const[Ee,Me]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),yt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ct={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},lt={sdk_version:x.sdkVersion,app_instance_id:Ee,app_instance_id_token:Me,app_id:x.appId,language_code:Tc()},bn={method:"POST",headers:Ct,body:JSON.stringify(lt)},lr=fetch(yt,bn),Ro=new Promise((No,Xs)=>{b.signal.addEventListener(()=>{const mi=new Error("The operation was aborted.");mi.name="AbortError",Xs(mi)})});let xs;try{yield Promise.race([lr,Ro]),xs=yield lr}catch(No){let Xs="fetch-client-network";throw"AbortError"===(null===(F=No)||void 0===F?void 0:F.name)&&(Xs="fetch-timeout"),Un.create(Xs,{originalErrorMessage:null===(Z=No)||void 0===Z?void 0:Z.message})}let bt=xs.status;const xi=xs.headers.get("ETag")||void 0;let Ms,ni;if(200===xs.status){let No;try{No=yield xs.json()}catch(Xs){throw Un.create("fetch-client-parse",{originalErrorMessage:null===(ee=Xs)||void 0===ee?void 0:ee.message})}Ms=No.entries,ni=No.state}if("INSTANCE_STATE_UNSPECIFIED"===ni?bt=500:"NO_CHANGE"===ni?bt=304:("NO_TEMPLATE"===ni||"EMPTY_CONFIG"===ni)&&(Ms={}),304!==bt&&200!==bt)throw Un.create("fetch-status",{httpStatus:bt});return{status:bt,eTag:xi,config:Ms}})()}}class qp{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,k.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var Z=this;return(0,k.Z)(function*(){yield function Wn(D,b){return new Promise((x,F)=>{const Z=Math.max(b-Date.now(),0),ee=setTimeout(x,Z);D.addEventListener(()=>{clearTimeout(ee),F(Un.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const ee=yield Z.client.fetch(b);return yield Z.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function ql(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ee))throw ee;const Ee={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(Ee),Z.attemptFetch(b,Ee)}})()}}class Zl{constructor(b,x,F,Z,ee){this.app=b,this._client=x,this._storageCache=F,this._storage=Z,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sc(D,b){var x;const F=D.target.error||void 0;return Un.create(b,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const ms="app_namespace_store";class Qp{constructor(b,x,F,Z=function Yp(){return new Promise((D,b)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Z=>{b(Sc(Z,"storage-open"))},F.onsuccess=Z=>{D(Z.target.result)},F.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(ms,{keyPath:"compositeKey"})}}catch(F){b(Un.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,k.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,ee)=>{var Ee;const nt=F.transaction([ms],"readonly").objectStore(ms),yt=x.createCompositeKey(b);try{const Ct=nt.get(yt);Ct.onerror=lt=>{ee(Sc(lt,"storage-get"))},Ct.onsuccess=lt=>{const bn=lt.target.result;Z(bn?bn.value:void 0)}}catch(Ct){ee(Un.create("storage-get",{originalErrorMessage:null===(Ee=Ct)||void 0===Ee?void 0:Ee.message}))}})})()}set(b,x){var F=this;return(0,k.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((ee,Ee)=>{var Me;const yt=Z.transaction([ms],"readwrite").objectStore(ms),Ct=F.createCompositeKey(b);try{const lt=yt.put({compositeKey:Ct,value:x});lt.onerror=bn=>{Ee(Sc(bn,"storage-set"))},lt.onsuccess=()=>{ee()}}catch(lt){Ee(Un.create("storage-set",{originalErrorMessage:null===(Me=lt)||void 0===Me?void 0:Me.message}))}})})()}delete(b){var x=this;return(0,k.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,ee)=>{var Ee;const nt=F.transaction([ms],"readwrite").objectStore(ms),yt=x.createCompositeKey(b);try{const Ct=nt.delete(yt);Ct.onerror=lt=>{ee(Sc(lt,"storage-delete"))},Ct.onsuccess=()=>{Z()}}catch(Ct){ee(Un.create("storage-delete",{originalErrorMessage:null===(Ee=Ct)||void 0===Ee?void 0:Ee.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Yl{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,k.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),Z=b.storage.getActiveConfig(),ee=yield x;ee&&(b.lastFetchStatus=ee);const Ee=yield F;Ee&&(b.lastSuccessfulFetchTimestampMillis=Ee);const Me=yield Z;Me&&(b.activeConfig=Me)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function iu(){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,k.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function ys(){(0,ie._registerComponent)(new le.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),Z=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Un.create("registration-window");if(!(0,re.hl)())throw Un.create("indexed-db-unavailable");const{projectId:ee,apiKey:Ee,appId:Me}=F.options;if(!ee)throw Un.create("registration-project-id");if(!Ee)throw Un.create("registration-api-key");if(!Me)throw Un.create("registration-app-id");const nt=new Qp(Me,F.name,x=x||"firebase"),yt=new Yl(nt),Ct=new ue.Yd(Ci);Ct.logLevel=ue.in.ERROR;const lt=new Ac(Z,ie.SDK_VERSION,x,ee,Ee,Me),bn=new qp(lt,nt),lr=new Fh(bn,nt,yt,Ct),Ro=new Zl(F,lr,yt,nt,Ct);return function ur(D){const b=(0,re.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Ro),Ro},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Ci,"0.3.15"),(0,ie.registerVersion)(Ci,"0.3.15","esm2017")}();const bi="/firebase-messaging-sw.js",Hi="/firebase-cloud-messaging-push-scope",Gi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ia="google.c.a.c_id",su="google.c.a.c_l",xc="google.c.a.ts",Vh="google.c.a.e";var zi=(()=>{return(D=zi||(zi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",zi;var D})();function Jr(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fr(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Z=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)Z[ee]=F.charCodeAt(ee);return Z}const po="fcm_token_details_db",cr="fcm_token_object_Store";function Uh(D){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(po))return null;let b=null;return(yield(0,de.X3)(po,5,{upgrade:(F=(0,k.Z)(function*(Z,ee,Ee,Me){var nt;if(ee<2||!Z.objectStoreNames.contains(cr))return;const yt=Me.objectStore(cr),Ct=yield yt.index("fcmSenderId").get(D);if(yield yt.clear(),Ct)if(2===ee){const lt=Ct;if(!lt.auth||!lt.p256dh||!lt.endpoint)return;b={token:lt.fcmToken,createTime:null!==(nt=lt.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:lt.auth,p256dh:lt.p256dh,endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:"string"==typeof lt.vapidKey?lt.vapidKey:Jr(lt.vapidKey)}}}else if(3===ee){const lt=Ct;b={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:Jr(lt.auth),p256dh:Jr(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:Jr(lt.vapidKey)}}}else if(4===ee){const lt=Ct;b={token:lt.fcmToken,createTime:lt.createTime,subscriptionOptions:{auth:Jr(lt.auth),p256dh:Jr(lt.p256dh),endpoint:lt.endpoint,swScope:lt.swScope,vapidKey:Jr(lt.vapidKey)}}}}),function(ee,Ee,Me,nt){return F.apply(this,arguments)})})).close(),yield(0,de.Lj)(po),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),Sn(b)?b:null;var F}),Bh.apply(this,arguments)}function Sn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Xr="firebase-messaging-store";let vr=null;function au(){return vr||(vr=(0,de.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Xr)}})),vr}function go(D){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,k.Z)(function*(D){const b=di(D),F=yield(yield au()).transaction(Xr).objectStore(Xr).get(b);if(F)return F;{const Z=yield Uh(D.appConfig.senderId);if(Z)return yield Wt(D,Z),Z}})).apply(this,arguments)}function Wt(D,b){return uu.apply(this,arguments)}function uu(){return(uu=(0,k.Z)(function*(D,b){const x=di(D),Z=(yield au()).transaction(Xr,"readwrite");return yield Z.objectStore(Xr).put(b,x),yield Z.done,b})).apply(this,arguments)}function $s(D){return cu.apply(this,arguments)}function cu(){return(cu=(0,k.Z)(function*(D){const b=di(D),F=(yield au()).transaction(Xr,"readwrite");yield F.objectStore(Xr).delete(b),yield F.done})).apply(this,arguments)}function di({appConfig:D}){return D.appId}const Tn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function It(D,b){return du.apply(this,arguments)}function du(){return(du=(0,k.Z)(function*(D,b){var x;const F=yield Rc(D),Z=De(b),ee={method:"POST",headers:F,body:JSON.stringify(Z)};let Ee;try{Ee=yield(yield fetch(qi(D.appConfig),ee)).json()}catch(Me){throw Tn.create("token-subscribe-failed",{errorInfo:null===(x=Me)||void 0===x?void 0:x.toString()})}if(Ee.error)throw Tn.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Tn.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function $h(D,b){return hu.apply(this,arguments)}function hu(){return(hu=(0,k.Z)(function*(D,b){var x;const F=yield Rc(D),Z=De(b.subscriptionOptions),ee={method:"PATCH",headers:F,body:JSON.stringify(Z)};let Ee;try{Ee=yield(yield fetch(`${qi(D.appConfig)}/${b.token}`,ee)).json()}catch(Me){throw Tn.create("token-update-failed",{errorInfo:null===(x=Me)||void 0===x?void 0:x.toString()})}if(Ee.error)throw Tn.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw Tn.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function fu(D,b){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,k.Z)(function*(D,b){var x;const Z={method:"DELETE",headers:yield Rc(D)};try{const Ee=yield(yield fetch(`${qi(D.appConfig)}/${b}`,Z)).json();if(Ee.error)throw Tn.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(ee){throw Tn.create("token-unsubscribe-failed",{errorInfo:null===(x=ee)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function qi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Rc(D){return oa.apply(this,arguments)}function oa(){return(oa=(0,k.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function De({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const Z={web:{endpoint:x,auth:b,p256dh:D}};return F!==Gi&&(Z.web.applicationPubKey=F),Z}const $t=6048e5;function pu(D){return gu.apply(this,arguments)}function gu(){return(gu=(0,k.Z)(function*(D){const b=yield Nc(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Jr(b.getKey("auth")),p256dh:Jr(b.getKey("p256dh"))},F=yield go(D.firebaseDependencies);if(F){if(ed(F.subscriptionOptions,x))return Date.now()>=F.createTime+$t?mo(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield fu(D.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return aa(D.firebaseDependencies,x)}return aa(D.firebaseDependencies,x)})).apply(this,arguments)}function xn(D){return mu.apply(this,arguments)}function mu(){return(mu=(0,k.Z)(function*(D){const b=yield go(D.firebaseDependencies);b&&(yield fu(D.firebaseDependencies,b.token),yield $s(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function mo(D,b){return ei.apply(this,arguments)}function ei(){return(ei=(0,k.Z)(function*(D,b){try{const x=yield $h(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield Wt(D.firebaseDependencies,F),x}catch(x){throw yield xn(D),x}})).apply(this,arguments)}function aa(D,b){return ua.apply(this,arguments)}function ua(){return(ua=(0,k.Z)(function*(D,b){const F={token:yield It(D,b),createTime:Date.now(),subscriptionOptions:b};return yield Wt(D,F),F.token})).apply(this,arguments)}function Nc(D,b){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,k.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fr(b)})})).apply(this,arguments)}function ed(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function ca(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Mn(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const Z=b.notification.image;Z&&(D.notification.image=Z);const ee=b.notification.icon;ee&&(D.notification.icon=ee)}(b,D),function Ti(D,b){!b.data||(D.data=b.data)}(b,D),function kc(D,b){var x,F,Z,ee,Ee;if(!(b.fcmOptions||null!==(x=b.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Me=null!==(Z=null===(F=b.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Z?Z:null===(ee=b.notification)||void 0===ee?void 0:ee.click_action;Me&&(D.fcmOptions.link=Me);const nt=null===(Ee=b.fcmOptions)||void 0===Ee?void 0:Ee.analytics_label;nt&&(D.fcmOptions.analyticsLabel=nt)}(b,D),b}function Hs(D){return"object"==typeof D&&!!D&&ia in D}function Zi(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function la(D){return Tn.create("missing-app-config-values",{valueName:D})}Zi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Xp{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function Jp(D){if(!D||!D.options)throw la("App Configuration Object");if(!D.name)throw la("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw la(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:Z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Pc(D){return yu.apply(this,arguments)}function yu(){return(yu=(0,k.Z)(function*(D){var b;try{D.swRegistration=yield navigator.serviceWorker.register(bi,{scope:Hi}),D.swRegistration.update().catch(()=>{})}catch(x){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:null===(b=x)||void 0===b?void 0:b.message})}})).apply(this,arguments)}function da(D,b){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,k.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield Pc(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function ha(D,b){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,k.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Gi)})).apply(this,arguments)}function _u(){return(_u=(0,k.Z)(function*(D,b){if(!navigator)throw Tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Tn.create("permission-blocked");return yield ha(D,b?.vapidKey),yield da(D,b?.serviceWorkerRegistration),pu(D)})).apply(this,arguments)}function Vc(D,b,x){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,k.Z)(function*(D,b,x){const F=Bc(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ia],message_name:x[su],message_time:x[xc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bc(D){switch(D){case zi.NOTIFICATION_CLICKED:return"notification_open";case zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Gs(){return(Gs=(0,k.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===zi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ca(x)):D.onMessageHandler.next(ca(x)));const F=x.data;Hs(F)&&"1"===F[Vh]&&(yield Vc(D,x.messageType,F))})).apply(this,arguments)}const zs="@firebase/messaging",qn=D=>{const b=new Xp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function td(D,b){return Gs.apply(this,arguments)}(b,x)),b},Lr=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function vu(D,b){return _u.apply(this,arguments)}(b,F)}};function nd(){return jc.apply(this,arguments)}function jc(){return(jc=(0,k.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function mn(){(0,ie._registerComponent)(new le.wA("messaging",qn,"PUBLIC")),(0,ie._registerComponent)(new le.wA("messaging-internal",Lr,"PRIVATE")),(0,ie.registerVersion)(zs,"0.11.0"),(0,ie.registerVersion)(zs,"0.11.0","esm2017")}();const vo="analytics",sd="firebase_id",qs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Du="https://www.googletagmanager.com/gtag/js",Rn=new ue.Yd("@firebase/analytics");function Cu(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function bu(D,b){const x=document.createElement("script");x.src=`${Du}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function Gh(D,b,x,F,Z,ee){return _o.apply(this,arguments)}function _o(){return(_o=(0,k.Z)(function*(D,b,x,F,Z,ee){const Ee=F[Z];try{if(Ee)yield b[Ee];else{const nt=(yield Cu(x)).find(yt=>yt.measurementId===Z);nt&&(yield b[nt.appId])}}catch(Me){Rn.error(Me)}D("config",Z,ee)})).apply(this,arguments)}function wo(D,b,x,F,Z){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,k.Z)(function*(D,b,x,F,Z){try{let ee=[];if(Z&&Z.send_to){let Ee=Z.send_to;Array.isArray(Ee)||(Ee=[Ee]);const Me=yield Cu(x);for(const nt of Ee){const yt=Me.find(lt=>lt.measurementId===nt),Ct=yt&&b[yt.appId];if(!Ct){ee=[];break}ee.push(Ct)}}0===ee.length&&(ee=Object.values(b)),yield Promise.all(ee),D("event",F,Z||{})}catch(ee){Rn.error(ee)}})).apply(this,arguments)}function ad(D){const b=window.document.getElementsByTagName("script");for(const x of Object.values(b))if(x.src&&x.src.includes(Du)&&x.src.includes(D))return x;return null}const nr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ma=new class Ai{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function cd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ya(D){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,k.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,Z={method:"GET",headers:cd(F)},ee=qs.replace("{app-id}",x),Ee=yield fetch(ee,Z);if(200!==Ee.status&&304!==Ee.status){let Me="";try{const nt=yield Ee.json();null!==(b=nt.error)&&void 0!==b&&b.message&&(Me=nt.error.message)}catch{}throw nr.create("config-fetch-failed",{httpStatus:Ee.status,responseMessage:Me})}return Ee.json()})).apply(this,arguments)}function kn(D){return hi.apply(this,arguments)}function hi(){return(hi=(0,k.Z)(function*(D,b=ma,x){const{appId:F,apiKey:Z,measurementId:ee}=D.options;if(!F)throw nr.create("no-app-id");if(!Z){if(ee)return{measurementId:ee,appId:F};throw nr.create("no-api-key")}const Ee=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Me=new xu;return setTimeout((0,k.Z)(function*(){Me.abort()}),void 0!==x?x:6e4),Au({appId:F,apiKey:Z,measurementId:ee},Ee,Me,b)})).apply(this,arguments)}function Au(D,b,x){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,k.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,Z=ma){var ee,Ee;const{appId:Me,measurementId:nt}=D;try{yield va(F,b)}catch(yt){if(nt)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${null===(ee=yt)||void 0===ee?void 0:ee.message}]`),{appId:Me,measurementId:nt};throw yt}try{const yt=yield ya(D);return Z.deleteThrottleMetadata(Me),yt}catch(yt){const Ct=yt;if(!Su(Ct)){if(Z.deleteThrottleMetadata(Me),nt)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${Ct?.message}]`),{appId:Me,measurementId:nt};throw yt}const lt=503===Number(null===(Ee=Ct?.customData)||void 0===Ee?void 0:Ee.httpStatus)?(0,re.$s)(x,Z.intervalMillis,30):(0,re.$s)(x,Z.intervalMillis),bn={throttleEndTimeMillis:Date.now()+lt,backoffCount:x+1};return Z.setThrottleMetadata(Me,bn),Rn.debug(`Calling attemptFetch again in ${lt} millis`),Au(D,bn,F,Z)}})).apply(this,arguments)}function va(D,b){return new Promise((x,F)=>{const Z=Math.max(b-Date.now(),0),ee=setTimeout(x,Z);D.addEventListener(()=>{clearTimeout(ee),F(nr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Su(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class xu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let ws,wa;function Is(){return(Is=(0,k.Z)(function*(D,b,x,F,Z){if(Z&&Z.global)D("event",x,F);else{const ee=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function Qs(D){wa=D}function Wc(D){ws=D}function Yi(){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,k.Z)(function*(){var D;if(!(0,re.hl)())return Rn.warn(nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(b){return Rn.warn(nr.create("indexeddb-unavailable",{errorInfo:null===(D=b)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Do(){return(Do=(0,k.Z)(function*(D,b,x,F,Z,ee,Ee){var Me;const nt=kn(D);nt.then(lr=>{x[lr.measurementId]=lr.appId,D.options.measurementId&&lr.measurementId!==D.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${lr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(lr=>Rn.error(lr)),b.push(nt);const yt=Yi().then(lr=>{if(lr)return F.getId()}),[Ct,lt]=yield Promise.all([nt,yt]);ad(ee)||bu(ee,Ct.measurementId),wa&&(Z("consent","default",wa),Qs(void 0)),Z("js",new Date);const bn=null!==(Me=Ee?.config)&&void 0!==Me?Me:{};return bn.origin="firebase",bn.update=!0,null!=lt&&(bn[sd]=lt),Z("config",Ct.measurementId,bn),ws&&(Z("set",ws),Wc(void 0)),Ct.measurementId})).apply(this,arguments)}class Nu{constructor(b){this.app=b}_delete(){return delete Vr[this.app.options.appId],Promise.resolve()}}let Vr={},Es=[];const Co={};let To,Js,bo="dataLayer",Ia=!1;function Ay(D,b,x){!function eg(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),x=nr.create("invalid-analytics-context",{errorInfo:b});Rn.warn(x.message)}}();const F=D.options.appId;if(!F)throw nr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw nr.create("no-api-key");Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vr[F])throw nr.create("already-exists",{id:F});if(!Ia){!function od(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(bo);const{wrappedGtag:ee,gtagCore:Ee}=function fa(D,b,x,F,Z){let ee=function(...Ee){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(ee=window[Z]),window[Z]=function Tu(D,b,x,F){function ee(){return(ee=(0,k.Z)(function*(Ee,Me,nt){try{"event"===Ee?yield wo(D,b,x,Me,nt):"config"===Ee?yield Gh(D,b,x,F,Me,nt):"consent"===Ee?D("consent","update",nt):D("set",Me)}catch(yt){Rn.error(yt)}})).apply(this,arguments)}return function Z(Ee,Me,nt){return ee.apply(this,arguments)}}(ee,D,b,x),{gtagCore:ee,wrappedGtag:window[Z]}}(Vr,Es,Co,bo,"gtag");Js=ee,To=Ee,Ia=!0}return Vr[F]=function Eo(D,b,x,F,Z,ee,Ee){return Do.apply(this,arguments)}(D,Es,Co,b,To,bo,x),new Nu(D)}function xy(){return zh.apply(this,arguments)}function zh(){return(zh=(0,k.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const st="@firebase/analytics";!function Cn(){(0,ie._registerComponent)(new le.wA(vo,(b,{options:x})=>Ay(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ie._registerComponent)(new le.wA("analytics-internal",function D(b){try{const x=b.getProvider(vo).getImmediate();return{logEvent:(F,Z,ee)=>function hn(D,b,x,F){D=(0,re.m9)(D),function ld(D,b,x,F,Z){return Is.apply(this,arguments)}(Js,Vr[D.app.options.appId],b,x,F).catch(Z=>Rn.error(Z))}(x,F,Z,ee)}}catch(x){throw nr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ie.registerVersion)(st,"0.8.4"),(0,ie.registerVersion)(st,"0.8.4","esm2017")}();var pi=P(4408),Sr=P(7565);const ku=new class Ds extends Sr.v{}(class Ea extends pi.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):(b.flush(this),0)}});var Zc=P(4986),Da=P(8505),Ao=P(9468),Cs=P(5363);const ot=new g.GfV("7.5.0"),Ca="__angularfire_symbol__analyticsIsSupportedValue",bs="__angularfire_symbol__analyticsIsSupported",ba="__angularfire_symbol__remoteConfigIsSupportedValue",So="__angularfire_symbol__remoteConfigIsSupported",Zn="__angularfire_symbol__messagingIsSupportedValue",Kc="__angularfire_symbol__messagingIsSupported";function Ta(D,b,x){if(b){if(1===b.length)return b[0];const ee=b.filter(Ee=>Ee.app===x);if(1===ee.length)return ee[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[bs]||(globalThis[bs]=xy().then(D=>globalThis[Ca]=D).catch(()=>globalThis[Ca]=!1)),globalThis[Kc]||(globalThis[Kc]=nd().then(D=>globalThis[Zn]=D).catch(()=>globalThis[Zn]=!1)),globalThis[So]||(globalThis[So]=iu().then(D=>globalThis[ba]=D).catch(()=>globalThis[ba]=!1));const Ts=(D,b)=>{const x=b?[b]:(0,J.C6)(),F=[];return x.forEach(Z=>{Z.container.getProvider(D).instances.forEach(Ee=>{F.includes(Ee)||F.push(Ee)})}),F};function As(){}class gi{constructor(b,x=ku){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const Z=this.zone;return this.delegate.schedule(function(Ee){Z.runGuarded(()=>{b.apply(this,[Ee])})},x,F)}}class Qc{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",As,{},As,As)),x.pipe((0,Da.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mo=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new gi(Zone.current)),this.insideAngular=x.run(()=>new gi(Zone.current,Zc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ur(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Ji(D){return Ur(),function Bn(D){return function(x){return(x=x.lift(new Qc(D.ngZone))).pipe((0,Ao.R)(D.outsideAngular),(0,Cs.Q)(D.insideAngular))}}(Ur())(D)}},2090:(at,be,P)=>{P.d(be,{$s:()=>Qe,BH:()=>Bt,G6:()=>Ie,L:()=>de,LL:()=>Zt,Pz:()=>Yt,Sg:()=>qe,UG:()=>we,US:()=>le,ZB:()=>B,ZR:()=>vn,aH:()=>ut,b$:()=>fe,eu:()=>$e,hl:()=>je,jU:()=>Xe,m9:()=>Ot,ne:()=>Fn,pd:()=>Ei,r3:()=>ci,ru:()=>ge,tV:()=>he,uI:()=>Se,vZ:()=>Ze,w1:()=>rt,xO:()=>Hn,xb:()=>Yr,z$:()=>Le,zI:()=>V,zd:()=>Qr});const ie=function(j){const L=[];let W=0;for(let _e=0;_e<j.length;_e++){let K=j.charCodeAt(_e);K<128?L[W++]=K:K<2048?(L[W++]=K>>6|192,L[W++]=63&K|128):55296==(64512&K)&&_e+1<j.length&&56320==(64512&j.charCodeAt(_e+1))?(K=65536+((1023&K)<<10)+(1023&j.charCodeAt(++_e)),L[W++]=K>>18|240,L[W++]=K>>12&63|128,L[W++]=K>>6&63|128,L[W++]=63&K|128):(L[W++]=K>>12|224,L[W++]=K>>6&63|128,L[W++]=63&K|128)}return L},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,L){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let K=0;K<j.length;K+=3){const Ge=j[K],ct=K+1<j.length,Kt=ct?j[K+1]:0,pn=K+2<j.length,zt=pn?j[K+2]:0;let Lt=(15&Kt)<<2|zt>>6,er=63&zt;pn||(er=64,ct||(Lt=64)),_e.push(W[Ge>>2],W[(3&Ge)<<4|Kt>>4],W[Lt],W[er])}return _e.join("")},encodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(j):this.encodeByteArray(ie(j),L)},decodeString(j,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(j):function(j){const L=[];let W=0,_e=0;for(;W<j.length;){const K=j[W++];if(K<128)L[_e++]=String.fromCharCode(K);else if(K>191&&K<224){const Ge=j[W++];L[_e++]=String.fromCharCode((31&K)<<6|63&Ge)}else if(K>239&&K<365){const pn=((7&K)<<18|(63&j[W++])<<12|(63&j[W++])<<6|63&j[W++])-65536;L[_e++]=String.fromCharCode(55296+(pn>>10)),L[_e++]=String.fromCharCode(56320+(1023&pn))}else{const Ge=j[W++],ct=j[W++];L[_e++]=String.fromCharCode((15&K)<<12|(63&Ge)<<6|63&ct)}}return L.join("")}(this.decodeStringToByteArray(j,L))},decodeStringToByteArray(j,L){this.init_();const W=L?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let K=0;K<j.length;){const Ge=W[j.charAt(K++)],Kt=K<j.length?W[j.charAt(K)]:0;++K;const zt=K<j.length?W[j.charAt(K)]:64;++K;const He=K<j.length?W[j.charAt(K)]:64;if(++K,null==Ge||null==Kt||null==zt||null==He)throw Error();_e.push(Ge<<2|Kt>>4),64!==zt&&(_e.push(Kt<<4&240|zt>>2),64!==He&&_e.push(zt<<6&192|He))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},de=function(j){return function(j){const L=ie(j);return le.encodeByteArray(L,!0)}(j).replace(/\./g,"")},he=function(j){try{return le.decodeString(j,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function B(j,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return L}for(const W in L)!L.hasOwnProperty(W)||!q(W)||(j[W]=B(j[W],L[W]));return j}function q(j){return"__proto__"!==j}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xe(){return"object"==typeof self&&self.self===self}function ge(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ie(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){return"object"==typeof indexedDB}function $e(){return new Promise((j,L)=>{try{let W=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(_e);K.onsuccess=()=>{K.result.close(),W||self.indexedDB.deleteDatabase(_e),j(!0)},K.onupgradeneeded=()=>{W=!1},K.onerror=()=>{var Ge;L((null===(Ge=K.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(W){L(W)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const te=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=j&&he(j[1]);return L&&JSON.parse(L)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},ut=()=>{var j;return null===(j=te())||void 0===j?void 0:j.config},Yt=j=>{var L;return null===(L=te())||void 0===L?void 0:L[`_${j}`]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,W)=>{this.resolve=L,this.reject=W})}wrapCallback(L){return(W,_e)=>{W?this.reject(W):this.resolve(_e),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(W):L(W,_e))}}}function qe(j,L){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=L||"demo-project",K=j.iat||0,Ge=j.sub||j.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ct=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:K,exp:K+3600,auth_time:K,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},j);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ct)),""].join(".")}class vn extends Error{constructor(L,W,_e){super(W),this.code=L,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}}class Zt{constructor(L,W,_e){this.service=L,this.serviceName=W,this.errors=_e}create(L,...W){const _e=W[0]||{},K=`${this.service}/${L}`,Ge=this.errors[L],ct=Ge?function Qt(j,L){return j.replace(Cr,(W,_e)=>{const K=L[_e];return null!=K?String(K):`<${_e}?>`})}(Ge,_e):"Error";return new vn(K,`${this.serviceName}: ${ct} (${K}).`,_e)}}const Cr=/\{\$([^}]+)}/g;function ci(j,L){return Object.prototype.hasOwnProperty.call(j,L)}function Yr(j){for(const L in j)if(Object.prototype.hasOwnProperty.call(j,L))return!1;return!0}function Ze(j,L){if(j===L)return!0;const W=Object.keys(j),_e=Object.keys(L);for(const K of W){if(!_e.includes(K))return!1;const Ge=j[K],ct=L[K];if(mr(Ge)&&mr(ct)){if(!Ze(Ge,ct))return!1}else if(Ge!==ct)return!1}for(const K of _e)if(!W.includes(K))return!1;return!0}function mr(j){return null!==j&&"object"==typeof j}function Hn(j){const L=[];for(const[W,_e]of Object.entries(j))Array.isArray(_e)?_e.forEach(K=>{L.push(encodeURIComponent(W)+"="+encodeURIComponent(K))}):L.push(encodeURIComponent(W)+"="+encodeURIComponent(_e));return L.length?"&"+L.join("&"):""}function Qr(j){const L={};return j.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[K,Ge]=_e.split("=");L[decodeURIComponent(K)]=decodeURIComponent(Ge)}}),L}function Ei(j){const L=j.indexOf("?");if(!L)return"";const W=j.indexOf("#",L);return j.substring(L,W>0?W:void 0)}function Fn(j,L){const W=new gn(j,L);return W.subscribe.bind(W)}class gn{constructor(L,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{L(this)}).catch(_e=>{this.error(_e)})}next(L){this.forEachObserver(W=>{W.next(L)})}error(L){this.forEachObserver(W=>{W.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,W,_e){let K;if(void 0===L&&void 0===W&&void 0===_e)throw new Error("Missing Observer.");K=function it(j,L){if("object"!=typeof j||null===j)return!1;for(const W of L)if(W in j&&"function"==typeof j[W])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:W,complete:_e},void 0===K.next&&(K.next=sn),void 0===K.error&&(K.error=sn),void 0===K.complete&&(K.complete=sn);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Ge}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,L)}sendOne(L,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{W(this.observers[L])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sn(){}function Qe(j,L=1e3,W=2){const _e=L*Math.pow(W,j),K=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+K)}function Ot(j){return j&&j._delegate?j._delegate:j}},1533:(at,be,P)=>{var g=P(4650);let J=null;function k(){return J}const ue=new g.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function he(){return(0,g.LFG)(B)}()},providedIn:"platform"}),n})();const U=new g.OlP("Location Initialized");let B=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Le(){return new B((0,g.LFG)(ue))}()},providedIn:"platform"}),n})();function q(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Ye)},providedIn:"root"}),n})();const fe=new g.OlP("appBaseHref");let Ye=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Xe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Xe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Xe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rt=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(je(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xe(r))}normalize(t){return n.stripTrailingSlash(function Ie(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=Se,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(g.LFG(ge))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return new Ae((0,g.LFG)(ge))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}let un=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class na{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bs=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new na(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),gs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{gs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function gs(n,e){n.context.$implicit=e.item}let sa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function cr(n){return"server"===n}let ou=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new jh((0,g.LFG)(ue),window)}),n})();class jh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function vr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Xr(this.window.history)||Xr(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Xr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Gs extends class td extends class le{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){J||(J=n)}(new Gs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wu(){return zs=zs||document.querySelector("base"),zs?zs.getAttribute("href"):null}();return null==t?null:function Lr(n){qn=qn||document.createElement("a"),qn.setAttribute("href",n);const e=qn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){zs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function nu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let qn,zs=null;const mn=new g.OlP("TRANSITION_ID"),jc=[{provide:g.ip1,useFactory:function nd(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=k(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[mn,ue,g.zs3],multi:!0}];let $c=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=new g.OlP("EventManagerPlugins");let rd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Iu),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Eu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=k().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ws=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),yo=(()=>{class n extends Ws{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(id),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(id))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function id(n){k().remove(n)}const vo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sd=/%COMP%/g;function bu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?bu(n,o,t):(o=o.replace(sd,n),t.push(o))}return t}function od(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _o=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new wo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ad(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new ud(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=bu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(rd),g.LFG(yo),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class wo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(vo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(fa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(fa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=vo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=vo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,od(r)):this.eventManager.addEventListener(e,t,od(r))}}function fa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ad extends wo{constructor(e,t,r,o){super(e),this.component=r;const u=bu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Rn(n){return"_ngcontent-%COMP%".replace(sd,n)}(o+"-"+r.id),this.hostAttr=function Cu(n){return"_nghost-%COMP%".replace(sd,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ud extends wo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=bu(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let nr=(()=>{class n extends Eu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const pa=["alt","control","meta","shift"],ga={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ai={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ma=(()=>{class n extends Eu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),pa.forEach(C=>{const S=r.indexOf(C);S>-1&&(r.splice(S,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=ga[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),pa.forEach(d=>{d!==o&&(0,Ai[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const xu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Au(){Gs.makeCurrent()},multi:!0},{provide:ue,useFactory:function va(){return(0,g.RDi)(document),document},deps:[]}]),ws=new g.OlP(""),ld=[{provide:g.rWj,useClass:class Hh{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Is=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Ks(){return new g.qLn},deps:[]},{provide:Iu,useClass:nr,multi:!0,deps:[ue,g.R0b,g.Lbi]},{provide:Iu,useClass:ma,multi:!0,deps:[ue]},{provide:_o,useClass:_o,deps:[rd,yo,g.AFp]},{provide:g.FYo,useExisting:_o},{provide:Ws,useExisting:yo},{provide:yo,useClass:yo,deps:[ue]},{provide:rd,useClass:rd,deps:[Iu,g.R0b]},{provide:class go{},useClass:$c,deps:[]},[]];let Gc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:mn,useExisting:g.AFp},jc]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ws,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Is,...ld],imports:[sa,g.hGG]}),n})(),Ki=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Io(){return new Ki((0,g.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var hn=P(8996),fi=P(7669);function st(...n){const e=(0,fi.yG)(n);return(0,hn.D)(n,e)}var ti=P(7579);class Cn extends ti.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ea=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Sr=P(9751);const{isArray:Ds}=Array,{getPrototypeOf:ku,prototype:ng,keys:Zc}=Object;function Da(n){if(1===n.length){const e=n[0];if(Ds(e))return{args:e,keys:null};if(function Ao(n){return n&&"object"==typeof n&&ku(n)===ng}(e)){const t=Zc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Cs=P(4671),ot=P(4004);const{isArray:Ca}=Array;function ba(n){return(0,ot.U)(e=>function bs(n,e){return Ca(e)?n(...e):n(e)}(n,e))}function So(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Zn=P(5403),Kc=P(9672);function xo(...n){const e=(0,fi.yG)(n),t=(0,fi.jO)(n),{args:r,keys:o}=Da(n);if(0===r.length)return(0,hn.D)([],e);const u=new Sr.y(function rg(n,e,t=Cs.y){return r=>{Yc(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Yc(e,()=>{const C=(0,hn.D)(n[w],e);let S=!1;C.subscribe((0,Zn.x)(r,N=>{u[w]=N,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>So(o,d):Cs.y));return t?u.pipe(ba(t)):u}function Yc(n,e,t){n?(0,Kc.f)(t,n,e):e()}var Pu=P(8189);function Ts(...n){return function Ta(){return(0,Pu.J)(1)}()((0,hn.D)(n,(0,fi.yG)(n)))}var As=P(8421);function gi(n){return new Sr.y(e=>{(0,As.Xf)(n()).subscribe(e)})}var Qc=P(9635),Mo=P(576);function Ur(n,e){const t=(0,Mo.m)(n)?n:()=>n,r=o=>o.error(t());return new Sr.y(e?o=>e.schedule(r,0,o):r)}var Qi=P(515),Si=P(727),_r=P(4482);function Ss(){return(0,_r.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ji extends Sr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_r.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Si.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Si.w0.EMPTY)}return e}refCount(){return Ss()(this)}}function Bn(n,e){return(0,_r.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Zn.x)(r,w=>{o?.unsubscribe();let C=0;const S=u++;(0,As.Xf)(n(w,S)).subscribe(o=(0,Zn.x)(r,N=>r.next(e?e(w,N,S,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}function wn(n){return n<=0?()=>Qi.E:(0,_r.e)((e,t)=>{let r=0;e.subscribe((0,Zn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Fu(...n){const e=(0,fi.yG)(n);return(0,_r.e)((t,r)=>{(e?Ts(n,t,e):Ts(n,t)).subscribe(r)})}function D(n,e){return(0,_r.e)((t,r)=>{let o=0;t.subscribe((0,Zn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var b=P(5577);function x(n){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function F(n=Z){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Z(){return new Ea}function ee(n,e){const t=arguments.length>=2;return r=>r.pipe(n?D((o,u)=>n(o,u,r)):Cs.y,wn(1),t?x(e):F(()=>new Ea))}function Ee(n,e){return(0,Mo.m)(e)?(0,b.z)(n,e,1):(0,b.z)(n,1)}var Me=P(8505);function nt(n){return(0,_r.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Zn.x)(t,void 0,void 0,d=>{u=(0,As.Xf)(n(d,nt(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function yt(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,Zn.x)(d,S=>{const N=C++;w=m?n(w,S,N):(m=!0,S),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function Ct(n,e){return(0,_r.e)(yt(n,e,arguments.length>=2,!0))}function lt(n){return n<=0?()=>Qi.E:(0,_r.e)((e,t)=>{let r=[];e.subscribe((0,Zn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function bn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?D((o,u)=>n(o,u,r)):Cs.y,lt(1),t?x(e):F(()=>new Ea))}function xs(n){return(0,_r.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const bt="primary",xi=Symbol("RouteTitle");class Ms{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ni(n){return new Ms(n)}function No(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function mi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Wh(n[o],e[o]))return!1;return!0}function Wh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ig(n){return Array.prototype.concat.apply([],n)}function sg(n){return n.length>0?n[n.length-1]:null}function Kn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Mi(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,hn.D)(Promise.resolve(n)):st(n)}const Pw={exact:function ag(n,e,t){if(!Uu(n.segments,e.segments)||!Lu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ag(n.children[r],e.children[r],t))return!1;return!0},subset:Yh},Zh={exact:function ky(n,e){return mi(n,e)},subset:function Kh(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Wh(n[t],e[t]))},ignored:()=>!0};function Oy(n,e,t){return Pw[t.paths](n.root,e.root,t.matrixParams)&&Zh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Yh(n,e,t){return Py(n,e,e.segments,t)}function Py(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Uu(o,t)||e.hasChildren()||!Lu(o,t,r))}if(n.segments.length===t.length){if(!Uu(n.segments,t)||!Lu(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Yh(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Uu(n.segments,o)&&Lu(n.segments,o,r)&&n.children[bt])&&Py(n.children[bt],e,u,r)}}function Lu(n,e,t){return e.every((r,o)=>Zh[t](n[o].parameters,r.parameters))}class Vu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ni(this.queryParams)),this._queryParamMap}toString(){return fd.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Kn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xc(this)}}class hd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ni(this.parameters)),this._parameterMap}toString(){return Jh(this)}}function Uu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Qh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new Jc},providedIn:"root"}),n})();class Jc{parse(e){const t=new eo(e);return new Vu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Oo(e.root,!0)}`,r=function By(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${el(t)}=${el(o)}`).join("&"):`${el(t)}=${el(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Vy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const fd=new Jc;function Xc(n){return n.segments.map(e=>Jh(e)).join("/")}function Oo(n,e){if(!n.hasChildren())return Xc(n);if(e){const t=n.children[bt]?Oo(n.children[bt],!1):"",r=[];return Kn(n.children,(o,u)=>{u!==bt&&r.push(`${u}:${Oo(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ly(n,e){let t=[];return Kn(n.children,(r,o)=>{o===bt&&(t=t.concat(e(r,o)))}),Kn(n.children,(r,o)=>{o!==bt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===bt?[Oo(n.children[bt],!1)]:[`${o}:${Oo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[bt]?`${Xc(n)}/${t[0]}`:`${Xc(n)}/(${t.join("//")})`}}function Xi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function el(n){return Xi(n).replace(/%3B/gi,";")}function tl(n){return Xi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nl(n){return decodeURIComponent(n)}function rl(n){return nl(n.replace(/\+/g,"%20"))}function Jh(n){return`${tl(n.path)}${function Uy(n){return Object.keys(n).map(e=>`;${tl(e)}=${tl(n[e])}`).join("")}(n.parameters)}`}const ug=/^[^\/()?;=#]+/;function pd(n){const e=n.match(ug);return e?e[0]:""}const jy=/^[^=?&#]+/,Xh=/^[^&#]+/;class eo{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[bt]=new Ht(e,t)),r}parseSegment(){const e=pd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new hd(nl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=pd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=pd(this.remaining);o&&(r=o,this.capture(r))}e[nl(t)]=nl(r)}parseQueryParam(e){const t=function xr(n){const e=n.match(jy);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function $y(n){const e=n.match(Xh);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=rl(t),u=rl(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=pd(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=bt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[bt]:new Ht([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function dr(n){return n.segments.length>0?new Ht([],{[bt]:n}):n}function ko(n){const e={};for(const r of Object.keys(n.children)){const u=ko(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function gd(n){if(1===n.numberOfChildren&&n.children[bt]){const e=n.children[bt];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}function Aa(n){return n instanceof Vu}function zy(n,e,t,r,o){if(0===t.length)return ju(e.root,e.root,e.root,r,o);const u=function cg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new vd(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Kn(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new vd(t,e,r)}(t);return u.toRoot()?ju(e.root,e.root,new Ht([],{}),r,o):function d(w){const C=function Ma(n,e,t,r){if(n.isAbsolute)return new xa(e.root,!0,0);if(-1===r)return new xa(t,t===e.root,0);return function dg(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new xa(r,!1,o-u)}(t,r+(Bu(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=C.processChildren?to(C.segmentGroup,C.index,u.commands):Ra(C.segmentGroup,C.index,u.commands);return ju(e.root,C.segmentGroup,S,r,o)}(n.snapshot?._lastPathIndex)}function Bu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Sa(n){return"object"==typeof n&&null!=n&&n.outlets}function ju(n,e,t,r,o){let d,u={};r&&Kn(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),d=n===e?t:yd(n,e,t);const m=dr(ko(d));return new Vu(m,u,o)}function yd(n,e,t){const r={};return Kn(n.children,(o,u)=>{r[u]=o===e?t:yd(o,e,t)}),new Ht(n.segments,r)}class vd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bu(r[0]))throw new g.vHH(4003,!1);const o=r.find(Sa);if(o&&o!==sg(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xa{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ra(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return to(n,e,t);const r=function hg(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Sa(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!ef(w,C,d))return u;r+=2}else{if(!ef(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ht(n.segments.slice(0,r.pathIndex),{});return u.children[bt]=new Ht(n.segments.slice(r.pathIndex),n.children),to(u,0,o)}return r.match&&0===o.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?fg(n,e,t):r.match?to(n,0,o):fg(n,e,t)}function to(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function Wy(n){return Sa(n[0])?n[0].outlets:{[bt]:n}}(t),o={};return Kn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Ra(n.children[d],e,u))}),Kn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Ht(n.segments,o)}}function fg(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Sa(u)){const w=no(u.outlets);return new Ht(r,w)}if(0===o&&Bu(t[0])){r.push(new hd(n.segments[e].path,_d(t[0]))),o++;continue}const d=Sa(u)?u.outlets[bt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Bu(m)?(r.push(new hd(d,_d(m))),o+=2):(r.push(new hd(d,{})),o++)}return new Ht(r,{})}function no(n){const e={};return Kn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=fg(new Ht([],{}),0,t))}),e}function _d(n){const e={};return Kn(n,(t,r)=>e[r]=`${t}`),e}function ef(n,e,t){return n==t.path&&mi(e,t.parameters)}class ro{constructor(e,t){this.id=e,this.url=t}}class $u extends ro{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Na extends ro{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wd extends ro{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pg extends ro{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qy extends ro{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sl extends ro{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zy extends ro{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tf extends ro{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nf extends ro{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gg{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rf{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ky{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Id{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ed{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class io{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ol{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=sf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=sf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ri(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ri(e,this._root).map(t=>t.value)}}function sf(n,e){if(n===e.value)return e;for(const t of e.children){const r=sf(n,t);if(r)return r}return null}function ri(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ri(n,t);if(r.length)return r.unshift(e),r}return[]}class Mr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Oa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class af extends ol{constructor(e,t){super(e),this.snapshot=t,ul(this,e)}toString(){return this.snapshot.toString()}}function al(n,e){const t=function Dd(n,e){const d=new ii([],{},{},"",{},bt,e,null,n.root,-1,{});return new Td("",new Mr(d,[]))}(n,e),r=new Cn([new hd("",{})]),o=new Cn({}),u=new Cn({}),d=new Cn({}),m=new Cn(""),w=new so(r,o,d,m,u,bt,e,t.root);return w.snapshot=t.root,new af(new Mr(w,[]),t)}class so{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,ot.U)(C=>C[xi]))??st(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(e=>ni(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(e=>ni(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cd(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function bd(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ii{constructor(e,t,r,o,u,d,m,w,C,S,N,$){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[xi],this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=S,this._correctedLastPathIndex=$??S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ni(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ni(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Td extends ol{constructor(e,t){super(t),this.url=e,ul(this,t)}toString(){return Ad(this._root)}}function ul(n,e){e.value._routerState=n,e.children.forEach(t=>ul(n,t))}function Ad(n){const e=n.children.length>0?` { ${n.children.map(Ad).join(", ")} } `:"";return`${n.value}${e}`}function cl(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),mi(e.params,t.params)||n.params.next(t.params),function Xs(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!mi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),mi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Po(n,e){const t=mi(n.params,e.params)&&function Fy(n,e){return Uu(n,e)&&n.every((t,r)=>mi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Po(n.parent,e.parent))}function Fo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function uf(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Fo(n,r,o);return Fo(n,r)})}(n,e,t);return new Mr(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Fo(n,m)),d}}const r=function Yy(n){return new so(new Cn(n.url),new Cn(n.params),new Cn(n.queryParams),new Cn(n.fragment),new Cn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Fo(n,u));return new Mr(r,o)}}const Ri="ngNavigationCancelingError";function Lo(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Aa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Hu(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Hu(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Ri]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ll(n){return Vo(n)&&Aa(n.url)}function Vo(n){return n&&n[Ri]}class cf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new dl,this.attachRef=null}}let dl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new cf,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lf=!1;let df=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=o||bt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,lf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,lf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,lf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,lf);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new hf(t,m,o.injector);if(r&&function y(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(dl),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class hf{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===so?this.route:e===dl?this.childContexts:this.parent.get(e,t)}}let h=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[df],encapsulation:2}),n})();function p(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function dt(n){const e=n.children&&n.children.map(dt),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==bt&&(t.component=h),t}function cn(n){return n.outlet||bt}function ir(n,e){const t=n.filter(r=>cn(r)===e);return t.push(...n.filter(r=>cn(r)!==e)),t}function Ni(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _g{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),cl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Oa(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Kn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Oa(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Oa(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Oa(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Ed(u.value.snapshot))}),e.children.length&&this.forwardEvent(new mg(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(cl(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),cl(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=Ni(o.snapshot),w=m?.get(g._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class wg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Sd{constructor(e,t){this.component=e,this.route=t}}function Ig(n,e,t){const r=n._root;return ka(r,e?e._root:null,t,[r.value])}function Uo(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function ka(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Oa(e);return n.children.forEach(d=>{(function Eg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function Jy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Uu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Uu(n.url,e.url)||!mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Po(n,e)||!mi(n.queryParams,e.queryParams);default:return!Po(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new wg(r)):(u.data=d.data,u._resolvedData=d._resolvedData),ka(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Sd(m.outlet.component,d))}else d&&Pa(e,m,o),o.canActivateChecks.push(new wg(r)),ka(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Kn(u,(d,m)=>Pa(d,t.getContext(m),o)),o}function Pa(n,e,t){const r=Oa(n),o=n.value;Kn(r,(u,d)=>{Pa(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Sd(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Fa(n){return"function"==typeof n}function pf(n){return n instanceof Ea||"EmptyError"===n?.name}const xd=Symbol("INITIAL_VALUE");function gf(){return Bn(n=>xo(n.map(e=>e.pipe(wn(1),Fu(xd)))).pipe((0,ot.U)(e=>{for(const t of e)if(!0!==t){if(t===xd)return xd;if(!1===t||t instanceof Vu)return t}return!0}),D(e=>e!==xd),wn(1)))}function Cg(n){return(0,Qc.z)((0,Me.b)(e=>{if(Aa(e))throw Lo(0,e)}),(0,ot.U)(e=>!0===e))}const Yn={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jw(n,e,t,r,o){const u=Xy(n,e,t);return u.matched?function CD(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?st(o.map(d=>{const m=Uo(d,n);return Mi(function pA(n){return n&&Fa(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(gf(),Cg()):st(!0)}(r=p(e,r),e,t).pipe((0,ot.U)(d=>!0===d?u:{...Yn})):st(u)}function Xy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Yn}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||No)(t,n,e);if(!o)return{...Yn};const u={};Kn(o.posParams,(m,w)=>{u[w]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function Md(n,e,t,r,o="corrected"){if(t.length>0&&function TD(n,e,t){return t.some(r=>bg(n,e,r)&&cn(r)!==bt)}(n,t,r)){const d=new Ht(e,function bD(n,e,t,r){const o={};o[bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&cn(u)!==bt){const d=new Ht([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[cn(u)]=d}return o}(n,e,r,new Ht(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function AD(n,e,t){return t.some(r=>bg(n,e,r))}(n,t,r)){const d=new Ht(n.segments,function $w(n,e,t,r,o,u){const d={};for(const m of r)if(bg(n,t,m)&&!o[cn(m)]){const w=new Ht([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[cn(m)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Ht(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function bg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Hw(n,e,t,r){return!!(cn(n)===r||r!==bt&&bg(e,t,n))&&("**"===n.path||Xy(e,n,t).matched)}function SD(n,e,t){return 0===e.length&&!n.children[t]}const ev=!1;class Gu{constructor(e){this.segmentGroup=e||null}}class Tg{constructor(e){this.urlTree=e}}function Rd(n){return Ur(new Gu(n))}function tv(n){return Ur(new Tg(n))}class Ww{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=Md(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ht(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,bt).pipe((0,ot.U)(u=>this.createUrlTree(ko(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(nt(u=>{if(u instanceof Tg)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Gu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,bt).pipe((0,ot.U)(o=>this.createUrlTree(ko(o),e.queryParams,e.fragment))).pipe(nt(o=>{throw o instanceof Gu?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,ev)}createUrlTree(e,t,r){const o=dr(e);return new Vu(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ot.U)(u=>new Ht([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,hn.D)(o).pipe(Ee(u=>{const d=r.children[u],m=ir(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,ot.U)(w=>({segment:w,outlet:u})))}),Ct((u,d)=>(u[d.outlet]=d.segment,u),{}),bn())}expandSegment(e,t,r,o,u,d){return(0,hn.D)(r).pipe(Ee(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(nt(C=>{if(C instanceof Gu)return st(null);throw C}))),ee(m=>!!m),nt((m,w)=>{if(pf(m))return SD(t,o,u)?st(new Ht([],{})):Rd(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Hw(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Rd(t):Rd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?tv(u):this.lineralizeSegments(r,u).pipe((0,b.z)(d=>{const m=new Ht(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:S}=Xy(t,o,u);if(!m)return Rd(t);const N=this.applyRedirectCommands(w,o.redirectTo,S);return o.redirectTo.startsWith("/")?tv(N):this.lineralizeSegments(o,N).pipe((0,b.z)($=>this.expandSegment(e,t,r,$.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=p(r,e),r.loadChildren?(r._loadedRoutes?st({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ot.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Ht(o,{})))):st(new Ht(o,{}))):jw(t,r,o,e).pipe(Bn(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,b.z)(S=>{const N=S.injector??e,$=S.routes,{segmentGroup:Y,slicedSegments:ae}=Md(t,m,w,$),Ne=new Ht(Y.segments,Y.children);if(0===ae.length&&Ne.hasChildren())return this.expandChildren(N,$,Ne).pipe((0,ot.U)(Vt=>new Ht(m,Vt)));if(0===$.length&&0===ae.length)return st(new Ht(m,{}));const Oe=cn(r)===u;return this.expandSegment(N,Ne,$,ae,Oe?bt:u,!0).pipe((0,ot.U)(Pt=>new Ht(m.concat(Pt.segments),Pt.children)))})):Rd(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function DD(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?st(!0):st(o.map(d=>{const m=Uo(d,n);return Mi(function ff(n){return n&&Fa(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(gf(),Cg())}(e,t,r).pipe((0,b.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Me.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function xD(n){return Ur(Hu(ev,3))}())):st({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return st(r);if(o.numberOfChildren>1||!o.children[bt])return Ur(new g.vHH(4e3,ev));o=o.children[bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Vu(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Kn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Kn(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Ht(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,ev);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class MD{}class Zw{constructor(e,t,r,o,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=Md(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,bt).pipe((0,ot.U)(t=>{if(null===t)return null;const r=new ii([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Mr(r,t),u=new Td(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Cd(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,hn.D)(Object.keys(r.children)).pipe(Ee(o=>{const u=r.children[o],d=ir(t,o);return this.processSegmentGroup(e,d,u,o)}),Ct((o,u)=>o&&u?(o.push(...u),o):null),function lr(n,e=!1){return(0,_r.e)((t,r)=>{let o=0;t.subscribe((0,Zn.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),x(null),bn(),(0,ot.U)(o=>{if(null===o)return null;const u=mf(o);return function hl(n){n.sort((e,t)=>e.value.outlet===bt?-1:t.value.outlet===bt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,hn.D)(t).pipe(Ee(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),ee(d=>!!d),nt(d=>{if(pf(d))return SD(r,o,u)?st([]):st(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Hw(t,r,o,u))return st(null);let d;if("**"===t.path){const m=o.length>0?sg(o).parameters:{},w=yf(r)+o.length;d=st({snapshot:new ii(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ov(t),cn(t),t.component??t._loadedComponent??null,t,Ag(r),w,Sg(t),w),consumedSegments:[],remainingSegments:[]})}else d=jw(r,t,o,e).pipe((0,ot.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:S})=>{if(!m)return null;const N=yf(r)+w.length;return{snapshot:new ii(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ov(t),cn(t),t.component??t._loadedComponent??null,t,Ag(r),N,Sg(t),N),consumedSegments:w,remainingSegments:C}}));return d.pipe(Bn(m=>{if(null===m)return st(null);const{snapshot:w,consumedSegments:C,remainingSegments:S}=m;e=t._injector??e;const N=t._loadedInjector??e,$=function RD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Y,slicedSegments:ae}=Md(r,C,S,$.filter(Oe=>void 0===Oe.redirectTo),this.relativeLinkResolution);if(0===ae.length&&Y.hasChildren())return this.processChildren(N,$,Y).pipe((0,ot.U)(Oe=>null===Oe?null:[new Mr(w,Oe)]));if(0===$.length&&0===ae.length)return st([new Mr(w,[])]);const Ne=cn(t)===u;return this.processSegment(N,$,Y,ae,Ne?bt:u).pipe((0,ot.U)(Oe=>null===Oe?null:[new Mr(w,Oe)]))}))}}function sv(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function mf(n){const e=[],t=new Set;for(const r of n){if(!sv(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=mf(r.children);e.push(new Mr(r.value,o))}return e.filter(r=>!t.has(r))}function Ag(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function yf(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function ov(n){return n.data||{}}function Sg(n){return n.resolve||{}}function Yw(n){return"string"==typeof n.title||null===n.title}function av(n){return Bn(e=>{const t=n(e);return t?(0,hn.D)(t).pipe((0,ot.U)(()=>e)):st(e)})}let xg=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===bt);return r}getResolvedTitleForRoute(t){return t.data[xi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Qw)},providedIn:"root"}),n})(),Qw=(()=>{class n extends xg{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ki))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class VD{}class yA extends class Jw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Wu=new g.OlP("",{providedIn:"root",factory:()=>({})}),qu=new g.OlP("ROUTES");let fl=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Mi(t.loadComponent()).pipe((0,Me.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),xs(()=>{this.componentLoaders.delete(t)})),o=new Ji(r,()=>new ti.x).pipe(Ss());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ot.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,S=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=ig(w.get(qu,[],g.XFs.Self|g.XFs.Optional)));return{routes:C.map(dt),injector:w}}),xs(()=>{this.childrenLoaders.delete(r)})),d=new Ji(u,()=>new ti.x).pipe(Ss());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Mi(t()).pipe((0,b.z)(r=>r instanceof g.YKP||Array.isArray(r)?st(r):(0,hn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class BD{}class vA{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function jD(n){throw n}function $D(n,e,t){return e.parse("/")}const HD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},e0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Mg(){const n=(0,g.f3M)(Qh),e=(0,g.f3M)(dl),t=(0,g.f3M)(Ae),r=(0,g.f3M)(g.zs3),o=(0,g.f3M)(g.Sil),u=(0,g.f3M)(qu,{optional:!0})??[],d=(0,g.f3M)(Wu,{optional:!0})??{},m=(0,g.f3M)(Qw),w=(0,g.f3M)(xg,{optional:!0}),C=(0,g.f3M)(BD,{optional:!0}),S=(0,g.f3M)(VD,{optional:!0}),N=new hr(null,n,e,t,r,o,ig(u));return C&&(N.urlHandlingStrategy=C),S&&(N.routeReuseStrategy=S),N.titleStrategy=w??m,function t0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N}let hr=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ti.x,this.errorHandler=jD,this.malformedUriErrorHandler=$D,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>st(void 0),this.urlHandlingStrategy=new vA,this.routeReuseStrategy=new yA,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(fl),this.configLoader.onLoadEndListener=$=>this.triggerEvent(new rf($)),this.configLoader.onLoadStartListener=$=>this.triggerEvent(new gg($)),this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const N=d.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function og(){return new Vu(new Ht([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=al(this.currentUrlTree,this.rootComponentType),this.transitions=new Cn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(D(o=>0!==o.id),(0,ot.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Bn(o=>{let u=!1,d=!1;return st(o).pipe((0,Me.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Bn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Rg(m.source)&&(this.browserUrlTree=m.extractedUrl),st(m).pipe(Bn(N=>{const $=this.transitions.getValue();return r.next(new $u(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),$!==this.transitions.getValue()?Qi.E:Promise.resolve(N)}),function nv(n,e,t,r){return Bn(o=>function zw(n,e,t,r,o){return new Ww(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,ot.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Me.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},o.urlAfterRedirects=N.urlAfterRedirects}),function OD(n,e,t,r,o,u){return(0,b.z)(d=>function qw(n,e,t,r,o,u,d="emptyOnly",m="legacy"){return new Zw(n,e,t,r,o,d,m,u).recognize().pipe(Bn(w=>null===w?function iv(n){return new Sr.y(e=>e.error(n))}(new MD):st(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,ot.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Me.b)(N=>{if(o.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Y=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Y,N)}this.browserUrlTree=N.urlAfterRedirects}const $=new qy(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next($)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:Y,source:ae,restoredState:Ne,extras:Oe}=m,St=new $u($,this.serializeUrl(Y),ae,Ne);r.next(St);const Pt=al(Y,this.rootComponentType).snapshot;return st(o={...m,targetSnapshot:Pt,urlAfterRedirects:Y,extras:{...Oe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Qi.E}),(0,Me.b)(m=>{const w=new sl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,ot.U)(m=>o={...m,guards:Ig(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function mA(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?st({...t,guardsResult:!0}):function Uw(n,e,t,r){return(0,hn.D)(n).pipe((0,b.z)(o=>function Dg(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(m=>{const w=Ni(e)??o,C=Uo(m,w);return Mi(function Vw(n){return n&&Fa(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(ee())})).pipe(gf()):st(!0)}(o.component,o.route,t,e,r)),ee(o=>!0!==o,!0))}(d,r,o,n).pipe((0,b.z)(m=>m&&function La(n){return"boolean"==typeof n}(m)?function _D(n,e,t,r){return(0,hn.D)(e).pipe(Ee(o=>Ts(function ID(n,e){return null!==n&&e&&e(new Ky(n)),st(!0)}(o.route.parent,r),function wD(n,e){return null!==n&&e&&e(new Id(n)),st(!0)}(o.route,r),function Bw(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Qy(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>gi(()=>st(d.guards.map(w=>{const C=Ni(d.node)??t,S=Uo(w,C);return Mi(function Lw(n){return n&&Fa(n.canActivateChild)}(S)?S.canActivateChild(r,n):C.runInContext(()=>S(r,n))).pipe(ee())})).pipe(gf())));return st(u).pipe(gf())}(n,o.path,t),function ED(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const o=r.map(u=>gi(()=>{const d=Ni(e)??t,m=Uo(u,d);return Mi(function Fw(n){return n&&Fa(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(ee())}));return st(o).pipe(gf())}(n,o.route,t))),ee(o=>!0!==o,!0))}(r,u,n,e):st(m)),(0,ot.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Me.b)(m=>{if(o.guardsResult=m.guardsResult,Aa(m.guardsResult))throw Lo(0,m.guardsResult);const w=new Zy(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),D(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),av(m=>{if(m.guards.canActivateChecks.length)return st(m).pipe((0,Me.b)(w=>{const C=new tf(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Bn(w=>{let C=!1;return st(w).pipe(function kD(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return st(t);let u=0;return(0,hn.D)(o).pipe(Ee(d=>function Kw(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!Yw(o)&&(u[xi]=o.title),function Nd(n,e,t,r){const o=function PD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return st({});const u={};return(0,hn.D)(o).pipe((0,b.z)(d=>function FD(n,e,t,r){const o=Ni(e)??r,u=Uo(n,o);return Mi(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(ee(),(0,Me.b)(m=>{u[d]=m}))),lt(1),function Ro(n){return(0,ot.U)(()=>n)}(u),nt(d=>pf(d)?Qi.E:Ur(d)))}(u,n,e,r).pipe((0,ot.U)(d=>(n._resolvedData=d,n.data=Cd(n,t).resolve,o&&Yw(o)&&(n.data[xi]=o.title),null)))}(d.route,r,n,e)),(0,Me.b)(()=>u++),lt(1),(0,b.z)(d=>u===o.length?st(t):Qi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Me.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,Me.b)(w=>{const C=new nf(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),av(m=>{const w=C=>{const S=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&S.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,Me.b)(N=>{C.component=N}),(0,ot.U)(()=>{})));for(const N of C.children)S.push(...w(N));return S};return xo(w(m.targetSnapshot.root)).pipe(x(),wn(1))}),av(()=>this.afterPreactivation()),(0,ot.U)(m=>{const w=function si(n,e,t){const r=Fo(n,e._root,t?t._root:void 0);return new af(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:w}}),(0,Me.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,ot.U)(r=>(new _g(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Me.b)({next(){u=!0},complete(){u=!0}}),xs(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),nt(m=>{if(d=!0,Vo(m)){ll(m)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new wd(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(w),ll(m)){const C=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),S={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Rg(o.source)};this.scheduleNavigation(C,"imperative",null,S,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new pg(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Qi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(dt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,S=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),zy(C,this.currentUrlTree,t,N,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Aa(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function GD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...HD}:!1===r?{...e0}:r,Aa(t))return Oy(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Oy(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Na(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,C;d?(m=d.resolve,w=d.reject,C=d.promise):C=new Promise(($,Y)=>{m=$,w=Y});const S=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:S,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch($=>Promise.reject($))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new wd(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return Mg()},providedIn:"root"}),n})();function Rg(n){return"imperative"!==n}let _f=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ti.x,this.subscription=t.events.subscribe(u=>{u instanceof Na&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,g.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,g.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,g.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){return!!(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(hr),g.Y36(so),g.Y36(ge))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),n})();class n0{}let qD=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(D(t=>t instanceof Na),Ee(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,hn.D)(o).pipe((0,Pu.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const u=o.pipe((0,b.z)(d=>null===d?st(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,hn.D)([u,d]).pipe((0,Pu.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(hr),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(n0),g.LFG(fl))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zu=new g.OlP("");let Bo=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $u?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Na&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof io&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new io(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function wf(n,e){return{\u0275kind:n,\u0275providers:e}}function Og(n){return[{provide:qu,multi:!0,useValue:n}]}function uv(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(hr),o=n.get(KD);1===n.get(kg)&&r.initialNavigation(),n.get(s0,null,g.XFs.Optional)?.setUpPreloading(),n.get(Zu,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const KD=new g.OlP("",{factory:()=>new ti.x}),kg=new g.OlP("",{providedIn:"root",factory:()=>1});const s0=new g.OlP("");function oo(n){return wf(0,[{provide:s0,useExisting:qD},{provide:n0,useExisting:n}])}const o0=new g.OlP("ROUTER_FORROOT_GUARD"),JD=[Ae,{provide:Qh,useClass:Jc},{provide:hr,useFactory:Mg},dl,{provide:so,useFactory:function ZD(n){return n.routerState.root},deps:[hr]},fl];function XD(){return new g.PXZ("Router",hr)}let cv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[JD,[],Og(t),{provide:o0,useFactory:kt,deps:[[hr,new g.FiY,new g.tp0]]},{provide:Wu,useValue:r||{}},r?.useHash?{provide:ge,useClass:rt}:{provide:ge,useClass:Ye},{provide:Zu,useFactory:()=>{const n=(0,g.f3M)(hr),e=(0,g.f3M)(ou),t=(0,g.f3M)(Wu);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Bo(n,e,t)}},r?.preloadingStrategy?oo(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:XD},r?.initialNavigation?a0(r):[],[{provide:lv,useFactory:uv},{provide:g.tb,multi:!0,useExisting:lv}]]}}static forChild(t){return{ngModule:n,providers:[Og(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(o0,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[h]}),n})();function kt(n){return"guarded"}function a0(n){return["disabled"===n.initialNavigation?wf(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(hr);return()=>{e.setUpLocationChangeListener()}}},{provide:kg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?wf(2,[{provide:kg,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(U,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(hr),m=e.get(KD);(function o(u){e.get(hr).events.pipe(D(m=>m instanceof Na||m instanceof wd||m instanceof pg),(0,ot.U)(m=>m instanceof Na||m instanceof wd&&(0===m.code||1===m.code)&&null),D(m=>null!==m),wn(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?st(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const lv=new g.OlP("");var rC=P(4986),Rr=P(5813);function dv(){return(0,_r.e)((n,e)=>{let t,r=!1;n.subscribe((0,Zn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function iC(n,e){return n===e}var ht,ao=P(2011),l0=(P(1277),P(3942)),me=P(5861),es=P(9681),Pg=P(4859),jo=P(1877),en=P(2090),sC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ku={},d0=d0||{},Rt=sC||self;function Ef(){}function hv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Df(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fv="closure_uid_"+(1e9*Math.random()>>>0),h0=0;function Fg(n,e,t){return n.call.apply(n.bind,arguments)}function oC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Br(n,e,t){return(Br=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fg:oC).apply(null,arguments)}function Lg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function jr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Yu(){this.s=this.s,this.o=this.o}Yu.prototype.s=!1,Yu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Od(n){Object.prototype.hasOwnProperty.call(n,fv)&&n[fv]||(n[fv]=++h0)}(this)},Yu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const f0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Vg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function p0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(hv(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function $r(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}$r.prototype.h=function(){this.defaultPrevented=!0};var g0=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",Ef,e),Rt.removeEventListener("test",Ef,e)}catch{}return n}();function kd(n){return/^[\s\xa0]*$/.test(n)}var uC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Cf(n,e){return n<e?-1:n>e?1:0}function Ug(){var n=Rt.navigator;return n&&(n=n.userAgent)?n:""}function Va(n){return-1!=Ug().indexOf(n)}function Qu(n){return Qu[" "](n),n}Qu[" "]=Ef;var Pd,n,y0=Va("Opera"),Ua=Va("Trident")||Va("MSIE"),Rs=Va("Edge"),Bg=Rs||Ua,v0=Va("Gecko")&&!(-1!=Ug().toLowerCase().indexOf("webkit")&&!Va("Edge"))&&!(Va("Trident")||Va("MSIE"))&&!Va("Edge"),pv=-1!=Ug().toLowerCase().indexOf("webkit")&&!Va("Edge");function $o(){var n=Rt.document;return n?n.documentMode:void 0}e:{var jg="",bf=(n=Ug(),v0?/rv:([^\);]+)(\)|;)/.exec(n):Rs?/Edge\/([\d\.]+)/.exec(n):Ua?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pv?/WebKit\/(\S+)/.exec(n):y0?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bf&&(jg=bf?bf[1]:""),Ua){var _0=$o();if(null!=_0&&_0>parseFloat(jg)){Pd=String(_0);break e}}Pd=jg}var w0={};var gv=Rt.document&&Ua&&($o()||parseInt(Pd,10))||void 0;function gl(n,e){if($r.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(v0){e:{try{Qu(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:mv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gl.X.h.call(this)}}jr(gl,$r);var mv={2:"touch",3:"pen",4:"mouse"};gl.prototype.h=function(){gl.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $g="closure_listenable_"+(1e6*Math.random()|0),cC=0;function lC(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++cC,this.ba=this.ea=!1}function Hg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function yv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function vv(n){const e={};for(const t in n)e[t]=n[t];return e}const dC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I0(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<dC.length;u++)t=dC[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function _v(n){this.src=n,this.g={},this.h=0}function Gg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=f0(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Hg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zg(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}_v.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=zg(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new lC(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var wv="closure_lm_"+(1e6*Math.random()|0),Af={};function hC(n,e,t,r,o){if(r&&r.once)return pC(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)hC(n,e[u],t,r,o);return null}return t=Ho(t),n&&n[$g]?n.N(e,t,Df(r)?!!r.capture:!!r,o):fC(n,e,t,!1,r,o)}function fC(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Df(o)?!!o.capture:!!o,m=D0(n);if(m||(n[wv]=m=new _v(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function TA(){const e=AA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)g0||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(mC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function pC(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)pC(n,e[u],t,r,o);return null}return t=Ho(t),n&&n[$g]?n.O(e,t,Df(r)?!!r.capture:!!r,o):fC(n,e,t,!0,r,o)}function gC(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)gC(n,e[u],t,r,o);else r=Df(r)?!!r.capture:!!r,t=Ho(t),n&&n[$g]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zg(u=n.g[e],t,r,o))&&(Hg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=D0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zg(e,t,r,o)),(t=-1<n?e[n]:null)&&E0(t))}function E0(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[$g])Gg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(mC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=D0(e))?(Gg(t,n),0==t.h&&(t.src=null,e[wv]=null)):Hg(n)}}}function mC(n){return n in Af?Af[n]:Af[n]="on"+n}function AA(n,e){if(n.ba)n=!0;else{e=new gl(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&E0(n),n=t.call(r,e)}return n}function D0(n){return(n=n[wv])instanceof _v?n:null}var C0="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ho(n){return"function"==typeof n?n:(n[C0]||(n[C0]=function(e){return n.handleEvent(e)}),n[C0])}function fr(){Yu.call(this),this.i=new _v(this),this.P=this,this.I=null}function Hr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new $r(e,n);else if(e instanceof $r)e.target=e.target||n;else{var o=e;I0(e=new $r(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Sf(d,r,!0,e)&&o}if(o=Sf(d=e.g=n,r,!0,e)&&o,o=Sf(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Sf(d=e.g=t[u],r,!1,e)&&o}function Sf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,w=d.ha||d.src;d.ea&&Gg(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}jr(fr,Yu),fr.prototype[$g]=!0,fr.prototype.removeEventListener=function(n,e,t,r){gC(this,n,e,t,r)},fr.prototype.M=function(){if(fr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Hg(t[r]);delete n.g[e],n.h--}}this.I=null},fr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},fr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var xf=Rt.JSON.stringify;function b0(){var n=M0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ev,T0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Ju,n=>n.reset());class Ju{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function A0(n){Rt.setTimeout(()=>{throw n},0)}function S0(n,e){Ev||function x0(){var n=Rt.Promise.resolve(void 0);Ev=function(){n.then(Wg)}}(),Dv||(Ev(),Dv=!0),M0.add(n,e)}var Dv=!1,M0=new class Iv{constructor(){this.h=this.g=null}add(e,t){const r=T0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Wg(){for(var n;n=b0();){try{n.h.call(n.g)}catch(t){A0(t)}var e=T0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Dv=!1}function Ba(n,e){fr.call(this),this.h=n||1,this.g=e||Rt,this.j=Br(this.lb,this),this.l=Date.now()}function Mf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Xu(n,e,t){if("function"==typeof n)t&&(n=Br(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Br(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function qg(n){n.g=Xu(()=>{n.g=null,n.i&&(n.i=!1,qg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}jr(Ba,fr),(ht=Ba.prototype).ca=!1,ht.R=null,ht.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Hr(this,"tick"),this.ca&&(Mf(this),this.start()))}},ht.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ht.M=function(){Ba.X.M.call(this),Mf(this),delete this.g};class Zg extends Yu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qg(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ld(n){Yu.call(this),this.h=n,this.g={}}jr(Ld,Yu);var Cv=[];function Kg(n,e,t,r){Array.isArray(t)||(t&&(Cv[0]=t.toString()),t=Cv);for(var o=0;o<t.length;o++){var u=hC(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Yg(n){yv(n.g,function(e,t){this.g.hasOwnProperty(t)&&E0(e)},n),n.g={}}function Rf(){this.g=!0}function Nf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function R0(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return xf(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ld.prototype.M=function(){Ld.X.M.call(this),Yg(this)},Ld.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rf.prototype.Aa=function(){this.g=!1},Rf.prototype.info=function(){};var ml={},Tv=null;function Of(){return Tv=Tv||new fr}function N0(n){$r.call(this,ml.Pa,n)}function Gr(n){const e=Of();Hr(e,new N0(e))}function Av(n,e){$r.call(this,ml.STAT_EVENT,n),this.stat=e}function yi(n){const e=Of();Hr(e,new Av(e,n))}function _C(n,e){$r.call(this,ml.Qa,n),this.size=e}function kf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}ml.Pa="serverreachability",jr(N0,$r),ml.STAT_EVENT="statevent",jr(Av,$r),ml.Qa="timingevent",jr(_C,$r);var Vd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Sv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function xv(){}function k0(){}xv.prototype.h=null;var Rv,Ud={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Mv(){$r.call(this,"d")}function Qg(){$r.call(this,"c")}function Jg(){}function Bd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ld(this),this.O=wC,this.T=new Ba(n=Bg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Nv}function Nv(){this.i=null,this.g="",this.h=!1}jr(Mv,$r),jr(Qg,$r),jr(Jg,xv),Jg.prototype.g=function(){return new XMLHttpRequest},Jg.prototype.i=function(){return{}},Rv=new Jg;var wC=45e3,Ns={},jd={};function Ov(n,e,t){n.K=1,n.v=vl(Go(e)),n.s=t,n.P=!0,P0(n,null)}function P0(n,e){n.F=Date.now(),Pf(n),n.A=Go(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),U0(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Nv,n.g=hm(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Zg(Br(n.La,n,n.g),n.N)),Kg(n.S,n.g,"readystatechange",n.ib),e=n.H?vv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Gr(),function bv(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var S=C[0];C=C[1];var N=S.split("_");d=2<=N.length&&"type"==N[1]?d+(S+"=")+C+"&":d+(S+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function IC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function kv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=EC(n,t),o==jd){4==e&&(n.o=4,yi(14),r=!1),Nf(n.j,n.m,null,"[Incomplete Response]");break}if(o==Ns){n.o=4,yi(15),Nf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Nf(n.j,n.m,o,null),Hd(n,o)}IC(n)&&o!=jd&&o!=Ns&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),cm(e),e.K=!0,yi(11))):(Nf(n.j,n.m,t,"[Invalid Chunked Response]"),yl(n),Ff(n))}function EC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?jd:(t=Number(e.substring(t,r)),isNaN(t)?Ns:(r+=1)+t>e.length?jd:(e=e.substr(r,t),n.C=r+t,e))}function Pf(n){n.V=Date.now()+n.O,F0(n,n.O)}function F0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kf(Br(n.gb,n),e)}function $d(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Ff(n){0==n.l.G||n.I||q0(n.l,n)}function yl(n){$d(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Mf(n.T),Yg(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Hd(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Fv(t.h,n)))if(!n.J&&Fv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;qd(t),Gf(t)}Gv(t),yi(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=kf(Br(t.cb,t),6e3));if(1>=j0(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else zo(t,11)}else if((n.J||t.g==n)&&qd(t),!kd(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const S=C[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const N=C[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const $=C[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Y=n.g;if(Y){const ae=Y.g?Y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var u=r.h;u.g||-1==ae.indexOf("spdy")&&-1==ae.indexOf("quic")&&-1==ae.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Lv(u,u.h),u.h=null))}if(r.D){const Ne=Y.g?Y.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.za=Ne,ln(r.F,r.D,Ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=Z0(r,r.H?r.ka:null,r.V),d.J){$0(r.h,d);var m=d,w=r.J;w&&m.setTimeout(w),m.B&&($d(m),Pf(m)),r.g=d}else Hv(r);0<t.i.length&&zf(t)}else"stop"!=C[0]&&"close"!=C[0]||zo(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?zo(t,7):um(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}Gr()}catch{}}function DC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(hv(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Xg(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(hv(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Pv(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(hv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(ht=Bd.prototype).setTimeout=function(n){this.O=n},ht.ib=function(n){n=n.target;const e=this.L;e&&3==ki(n)?e.l():this.La(n)},ht.La=function(n){try{if(n==this.g)e:{const S=ki(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||Bg||this.g&&(this.h.h||this.g.fa()||bl(this.g)))){this.I||4!=S||7==e||Gr(),$d(this);var t=this.g.aa();this.Y=t;t:if(IC(this)){var r=bl(this.g);n="";var o=r.length,u=4==ki(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yl(this),Ff(this);var d="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function yC(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kd(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,yi(12),yl(this),Ff(this);break e}Nf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Hd(this,t)}this.P?(kv(this,S,d),Bg&&this.i&&3==S&&(Kg(this.S,this.T,"tick",this.hb),this.T.start())):(Nf(this.j,this.m,d,null),Hd(this,d)),4==S&&yl(this),this.i&&!this.I&&(4==S?q0(this.l,this):(this.i=!1,Pf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,yi(12)):(this.o=0,yi(13)),yl(this),Ff(this)}}}catch{}},ht.hb=function(){if(this.g){var n=ki(this.g),e=this.g.fa();this.C<e.length&&($d(this),kv(this,n,e),this.i&&4!=n&&Pf(this))}},ht.cancel=function(){this.I=!0,yl(this)},ht.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function vC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Gr(),yi(17)),yl(this),this.o=2,Ff(this)):F0(this,this.V-n)};var em=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ec(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ec){this.h=void 0!==e?e:n.h,Lf(this,n.j),this.s=n.s,this.g=n.g,Vf(this,n.m),this.l=n.l,e=n.i;var t=new Bf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),tm(this,t),this.o=n.o}else n&&(t=String(n).match(em))?(this.h=!!e,Lf(this,t[1]||"",!0),this.s=tc(t[2]||""),this.g=tc(t[3]||"",!0),Vf(this,t[4]),this.l=tc(t[5]||"",!0),tm(this,t[6]||"",!0),this.o=tc(t[7]||"")):(this.h=!!e,this.i=new Bf(null,this.h))}function Go(n){return new ec(n)}function Lf(n,e,t){n.j=t?tc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Vf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function tm(n,e,t){e instanceof Bf?(n.i=e,function SC(n,e){e&&!n.j&&(_l(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(V0(this,r),U0(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ja(e,TC)),n.i=new Bf(e,n.h))}function ln(n,e,t){n.i.set(e,t)}function vl(n){return ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function tc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ja(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,CC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function CC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ec.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ja(e,nm,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ja(e,nm,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ja(t,"/"==t.charAt(0)?bC:L0,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ja(t,Uf)),n.join("")};var nm=/[#\/\?@]/g,L0=/[#\?:]/g,bC=/[#\?]/g,TC=/[#\?@]/g,Uf=/#/g;function Bf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function _l(n){n.g||(n.g=new Map,n.h=0,n.i&&function SA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function V0(n,e){_l(n),e=Gd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function AC(n,e){return _l(n),e=Gd(n,e),n.g.has(e)}function U0(n,e,t){V0(n,e),0<t.length&&(n.i=null,n.g.set(Gd(n,e),Vg(t)),n.h+=t.length)}function Gd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rm(n){this.l=n||xC,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ga&&Rt.g.Ga()&&Rt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ht=Bf.prototype).add=function(n,e){_l(this),this.i=null,n=Gd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ht.forEach=function(n,e){_l(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},ht.oa=function(){_l(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},ht.W=function(n){_l(this);let e=[];if("string"==typeof n)AC(this,n)&&(e=e.concat(this.g.get(Gd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ht.set=function(n,e){return _l(this),this.i=null,AC(this,n=Gd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ht.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var xC=10;function im(n){return!!n.h||!!n.g&&n.g.size>=n.j}function j0(n){return n.h?1:n.g?n.g.size:0}function Fv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Lv(n,e){n.g?n.g.add(e):n.h=e}function $0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function H0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Vg(n.i)}function Vv(){}function sm(){this.g=new Vv}function wl(n,e,t){const r=t||"";try{DC(n,function(o,u){let d=o;Df(o)&&(d=xf(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function nc(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function jf(n){this.l=n.ac||null,this.j=n.jb||!1}function om(n,e){fr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=$f,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rm.prototype.cancel=function(){if(this.i=H0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Vv.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},Vv.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},jr(jf,xv),jf.prototype.g=function(){return new om(this.l,this.j)},jf.prototype.i=function(n){return function(){return n}}({}),jr(om,fr);var $f=0;function G0(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Oi(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$a(n)}function $a(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ht=om.prototype).open=function(n,e){if(this.readyState!=$f)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,$a(this)},ht.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oi(this)),this.readyState=$f},ht.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Rt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;G0(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ht.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Oi(this):$a(this),3==this.readyState&&G0(this)}},ht.Va=function(n){this.g&&(this.response=this.responseText=n,Oi(this))},ht.Ua=function(n){this.g&&(this.response=n,Oi(this))},ht.ga=function(){this.g&&Oi(this)},ht.setRequestHeader=function(n,e){this.v.append(n,e)},ht.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ht.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(om.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var oi=Rt.JSON.parse;function In(n){fr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Hf,this.K=this.L=!1}jr(In,fr);var Hf="",Os=/^https?$/i,Uv=["POST","PUT"];function Il(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,El(n),Ha(n)}function El(n){n.D||(n.D=!0,Hr(n,"complete"),Hr(n,"error"))}function Dl(n){if(n.h&&typeof d0<"u"&&(!n.C[1]||4!=ki(n)||2!=n.aa()))if(n.v&&4==ki(n))Xu(n.Ha,0,n);else if(Hr(n,"readystatechange"),4==ki(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(em)[1]||null;if(!o&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;o=u.substr(0,u.length-1)}r=!Os.test(o?o.toLowerCase():"")}t=r}if(t)Hr(n,"complete"),Hr(n,"success");else{n.m=6;try{var d=2<ki(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",El(n)}}finally{Ha(n)}}}function Ha(n,e){if(n.g){Cl(n);const t=n.g,r=n.C[0]?Ef:null;n.g=null,n.C=null,e||Hr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Cl(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function ki(n){return n.g?n.g.readyState:0}function bl(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Hf:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Tl(n){let e="";return yv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function am(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Tl(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ln(n,e,t))}function Wd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Bv(n){this.Ca=0,this.i=[],this.j=new Rf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Wd("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Wd("baseRetryDelayMs",5e3,n),this.bb=Wd("retryDelaySeedMs",1e4,n),this.$a=Wd("forwardChannelMaxRetries",2,n),this.ta=Wd("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new rm(n&&n.concurrentRequestLimit),this.Fa=new sm,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function um(n){if(jv(n),3==n.G){var e=n.U++,t=Go(n.F);ln(t,"SID",n.I),ln(t,"RID",e),ln(t,"TYPE","terminate"),Wf(n,t),(e=new Bd(n,n.j,e,void 0)).K=2,e.v=vl(Go(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=hm(e.l,null),e.g.da(e.v)),e.F=Date.now(),Pf(e)}dm(n)}function Gf(n){n.g&&(cm(n),n.g.cancel(),n.g=null)}function jv(n){Gf(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),qd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function zf(n){im(n.h)||n.m||(n.m=!0,S0(n.Ja,n),n.C=0)}function $v(n,e){var t;t=e?e.m:n.U++;const r=Go(n.F);ln(r,"SID",n.I),ln(r,"RID",t),ln(r,"AID",n.T),Wf(n,r),n.o&&n.s&&am(r,n.o,n.s),t=new Bd(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=W0(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Lv(n.h,t),Ov(t,r,e)}function Wf(n,e){n.ia&&yv(n.ia,function(t,r){ln(e,r,t)}),n.l&&DC({},function(t,r){ln(e,r,t)})}function W0(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Br(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const S=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{wl(S,d,"req"+C+"_")}catch{r&&r(S)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Hv(n){n.g||n.u||(n.Z=1,S0(n.Ia,n),n.A=0)}function Gv(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=kf(Br(n.Ia,n),qf(n,n.A)),n.A++,0))}function cm(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function lm(n){n.g=new Bd(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Go(n.sa);ln(e,"RID","rpc"),ln(e,"SID",n.I),ln(e,"CI",n.L?"0":"1"),ln(e,"AID",n.T),ln(e,"TYPE","xmlhttp"),Wf(n,e),n.o&&n.s&&am(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=vl(Go(e)),t.s=null,t.P=!0,P0(t,n)}function qd(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function q0(n,e){var t=null;if(n.g==e){qd(n),cm(n),n.g=null;var r=2}else{if(!Fv(n.h,e))return;t=e.D,$0(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Hr(r=Of(),new _C(r,t)),zf(n)}else Hv(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function z0(n,e){return!(j0(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=kf(Br(n.Ja,n,e),qf(n,n.C)),n.C++,0)))}(n,e)||2==r&&Gv(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:zo(n,5);break;case 4:zo(n,10);break;case 3:zo(n,6);break;default:zo(n,2)}}function qf(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function zo(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Br(n.kb,n);t||(t=new ec("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||Lf(t,"https"),vl(t)),function xA(n,e){const t=new Rf;if(Rt.Image){const r=new Image;r.onload=Lg(nc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Lg(nc,t,r,"TestLoadImage: error",!1,e),r.onabort=Lg(nc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Lg(nc,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else yi(2);n.G=0,n.l&&n.l.va(e),dm(n),jv(n)}function dm(n){if(n.G=0,n.la=[],n.l){const e=H0(n.h);(0!=e.length||0!=n.i.length)&&(p0(n.la,e),p0(n.la,n.i),n.h.i.length=0,Vg(n.i),n.i.length=0),n.l.ua()}}function Z0(n,e,t){var r=t instanceof ec?Go(t):new ec(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Vf(r,r.m);else{var o=Rt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new ec(null,void 0);r&&Lf(u,r),e&&(u.g=e),o&&Vf(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&ln(r,t,e),ln(r,"VER",n.ma),Wf(n,r),r}function hm(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new In(t&&n.Da&&!n.ra?new jf({jb:!0}):n.ra)).Ka(n.H),e}function fm(){}function Zf(){if(Ua&&!(10<=Number(gv)))throw Error("Environmental error: no available transport.")}function Pi(n,e){fr.call(this),this.g=new Bv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!kd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Al(this)}function pm(n){Mv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function zv(){Qg.call(this),this.status=1}function Al(n){this.g=n}(ht=In.prototype).Ka=function(n){this.L=n},ht.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rv.g(),this.C=function O0(n){return n.h||(n.h=n.i())}(this.u?this.u:Rv),this.g.onreadystatechange=Br(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Il(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Rt.FormData&&n instanceof Rt.FormData,!(0<=f0(Uv,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Cl(this),0<this.B&&((this.K=function zd(n){return Ua&&function bA(){return function m0(n){var e=w0;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=uC(String(Pd)).split("."),t=uC("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Cf(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Cf(0==o[2].length,0==u[2].length)||Cf(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Br(this.qa,this)):this.A=Xu(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Il(this,u)}},ht.qa=function(){typeof d0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hr(this,"timeout"),this.abort(8))},ht.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Hr(this,"complete"),Hr(this,"abort"),Ha(this))},ht.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ha(this,!0)),In.X.M.call(this)},ht.Ha=function(){this.s||(this.F||this.v||this.l?Dl(this):this.fb())},ht.fb=function(){Dl(this)},ht.aa=function(){try{return 2<ki(this)?this.g.status:-1}catch{return-1}},ht.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ht.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),oi(e)}},ht.Ea=function(){return this.m},ht.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ht=Bv.prototype).ma=8,ht.G=1,ht.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Bd(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=vv(u),I0(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=W0(this,o,e),ln(t=Go(this.F),"RID",n),ln(t,"CVER",22),this.D&&ln(t,"X-HTTP-Session-Id",this.D),Wf(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Tl(u)))+"&"+e:this.o&&am(t,this.o,u)),Lv(this.h,o),this.Ya&&ln(t,"TYPE","init"),this.O?(ln(t,"$req",e),ln(t,"SID","null"),o.Z=!0,Ov(o,t,null)):Ov(o,t,e),this.G=2}}else 3==this.G&&(n?$v(this,n):0==this.i.length||im(this.h)||$v(this))},ht.Ia=function(){if(this.u=null,lm(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=kf(Br(this.eb,this),n)}},ht.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,yi(10),Gf(this),lm(this))},ht.cb=function(){null!=this.v&&(this.v=null,Gf(this),Gv(this),yi(19))},ht.kb=function(n){n?(this.j.info("Successfully pinged google.com"),yi(2)):(this.j.info("Failed to ping google.com"),yi(1))},(ht=fm.prototype).xa=function(){},ht.wa=function(){},ht.va=function(){},ht.ua=function(){},ht.Ra=function(){},Zf.prototype.g=function(n,e){return new Pi(n,e)},jr(Pi,fr),Pi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;yi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Z0(n,null,n.V),zf(n)},Pi.prototype.close=function(){um(this.g)},Pi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=xf(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&zf(e)},Pi.prototype.M=function(){this.g.l=null,delete this.j,um(this.g),delete this.g,Pi.X.M.call(this)},jr(pm,Mv),jr(zv,Qg),jr(Al,fm),Al.prototype.xa=function(){Hr(this.g,"a")},Al.prototype.wa=function(n){Hr(this.g,new pm(n))},Al.prototype.va=function(n){Hr(this.g,new zv)},Al.prototype.ua=function(){Hr(this.g,"b")},Zf.prototype.createWebChannel=Zf.prototype.g,Pi.prototype.send=Pi.prototype.u,Pi.prototype.open=Pi.prototype.m,Pi.prototype.close=Pi.prototype.close,Vd.NO_ERROR=0,Vd.TIMEOUT=8,Vd.HTTP_ERROR=6,Sv.COMPLETE="complete",k0.EventType=Ud,Ud.OPEN="a",Ud.CLOSE="b",Ud.ERROR="c",Ud.MESSAGE="d",fr.prototype.listen=fr.prototype.N,In.prototype.listenOnce=In.prototype.O,In.prototype.getLastError=In.prototype.Oa,In.prototype.getLastErrorCode=In.prototype.Ea,In.prototype.getStatus=In.prototype.aa,In.prototype.getResponseJson=In.prototype.Sa,In.prototype.getResponseText=In.prototype.fa,In.prototype.send=In.prototype.da,In.prototype.setWithCredentials=In.prototype.Ka;var Wv=Ku.createWebChannelTransport=function(){return new Zf},K0=Ku.getStatEventTarget=function(){return Of()},qv=Ku.ErrorCode=Vd,Y0=Ku.EventType=Sv,Q0=Ku.Event=ml,Zv=Ku.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},J0=Ku.FetchXmlHttpFactory=jf,gm=Ku.WebChannel=k0,MC=Ku.XhrIo=In;const X0="@firebase/firestore";class wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");let rc="9.14.0";const Ga=new jo.Yd("@firebase/firestore");function mm(){return Ga.logLevel}function Re(n,...e){if(Ga.logLevel<=jo.in.DEBUG){const t=e.map(ym);Ga.debug(`Firestore (${rc}): ${n}`,...t)}}function Qn(n,...e){if(Ga.logLevel<=jo.in.ERROR){const t=e.map(ym);Ga.error(`Firestore (${rc}): ${n}`,...t)}}function ic(n,...e){if(Ga.logLevel<=jo.in.WARN){const t=e.map(ym);Ga.warn(`Firestore (${rc}): ${n}`,...t)}}function ym(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: `+n;throw Qn(e),new Error(e)}function Tt(n,e){n||et()}function We(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends en.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Kv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wr.UNAUTHENTICATED))}shutdown(){}}class OC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tI{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new qt;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new qt,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new qt)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new Kv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new wr(e)}}class kC{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Tt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class nI{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new kC(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zd{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.A=t.token,new Yv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function PC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Qv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=PC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function Sl(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function FC(n){return n+"\0"}class Nn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Nn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new Nn(0,0))}static max(){return new wt(new Nn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fi{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Fi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fi?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends Fi{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const LC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Fi{construct(e,t,r){return new fn(e,t,r)}static isValidIdentifier(e){return LC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(t)}static emptyPath(){return new fn([])}}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(tn.fromString(e))}static fromName(e){return new Be(tn.fromString(e).popFirst(5))}static empty(){return new Be(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new tn(e.slice()))}}class Li{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function vm(n){return n.fields.find(e=>2===e.kind)}function sc(n){return n.fields.filter(e=>2!==e.kind)}Li.UNKNOWN_ID=-1;class _m{constructor(e,t){this.fieldPath=e,this.kind=t}}class Kf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Kf(0,ts.min())}}function wm(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=wt.fromTimestamp(1e9===r?new Nn(t+1,0):new Nn(t,r));return new ts(o,Be.empty(),e)}function Kd(n){return new ts(n.readTime,n.key,-1)}class ts{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ts(wt.min(),Be.empty(),-1)}static max(){return new ts(wt.max(),Be.empty(),-1)}}function Im(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}const rI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function za(n){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,me.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==rI)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),Yd.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(S=>{d[C]=S,++m,m===u&&r(d)},S=>o(S))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Yf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new qt,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new oc(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Em(r.target.error);this.P.reject(new oc(e,o))}}static open(e,t,r,o){try{return new Yf(t,e.transaction(o,r))}catch(u){throw new oc(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sI(t)}}class ks{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ks.D((0,en.z$)())&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),ac(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,en.hl)())return!1;if(ks.N())return!0;const e=(0,en.z$)(),t=ks.D(e),r=0<t&&t<10,o=ks.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new oc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new oc(e,m))},u.onupgradeneeded=d=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=Yf.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(S=>(w.V(),S)).catch(S=>(w.abort(S),se.reject(S))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,S="FirebaseError"!==C.name&&m<3;if(Re("SimpleDb","Transaction failed with error:",C.message,"Retrying:",S),u.close(),!S)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class iI{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ac(this.U.delete())}}class oc extends xe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Wa(n){return"IndexedDbTransactionError"===n.name}class sI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ac(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),ac(this.store.add(e))}get(e){return ac(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),ac(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),ac(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const d=Em(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new se((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new iI(m),C=t(m.primaryKey,m.value,w);if(C instanceof se){const S=C.catch(N=>(w.done(),se.reject(N)));r.push(S)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ac(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Em(r.target.error);t(o)}})}let Xv=!1;function Em(n){const e=ks.D((0,en.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xv||(Xv=!0,setTimeout(()=>{throw r},0)),r}}return n}class oI{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Re("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Wa(r)?Re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield za(r)}yield t.nt(6e4)}))}}class aI{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Re("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(m=>(Re("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=Kd(u);Im(d,r)>0&&(r=d)}),new ts(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class vi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function uI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}vi.at=-1;class Jn{constructor(e,t){this.comparator=e,this.root=t||zr.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dm(this.root,e,this.comparator,!0)}}class Dm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??zr.RED,this.left=o??zr.EMPTY,this.right=u??zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new zr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return zr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1,zr.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,o){return this}insert(n,e,t){return new zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lI(this.data.getIterator())}getIteratorFrom(e){return new lI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class lI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qd(n){return n.hasNext()?n.getNext():void 0}class ns{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new ns([])}unionWith(e){let t=new En(fn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ns(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ir(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const jC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uc(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=jC.exec(n);if(Tt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(n.seconds),nanos:Xn(n.nanos)}}function Xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ml(n){return"string"==typeof n?Ir.fromBase64String(n):Ir.fromUint8Array(n)}function e_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dI(n){const e=n.mapValue.fields.__previous_value__;return e_(e)?dI(e):e}function Jd(n){const e=uc(n.mapValue.fields.__local_write_time__.timestampValue);return new Nn(e.seconds,e.nanos)}class hI{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class qa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qa&&e.projectId===this.projectId&&e.database===this.database}}function Xd(n){return null==n}function eh(n){return 0===n&&1/n==-1/0}function t_(n){return"number"==typeof n&&Number.isInteger(n)&&!eh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Za={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qf={nullValue:"NULL_VALUE"};function cc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?e_(n)?4:pI(n)?9007199254740991:10:et()}function uo(n,e){if(n===e)return!0;const t=cc(n);if(t!==cc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jd(n).isEqual(Jd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=uc(r.timestampValue),d=uc(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ml(n.bytesValue).isEqual(Ml(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Xn(r.geoPointValue.latitude)===Xn(o.geoPointValue.latitude)&&Xn(r.geoPointValue.longitude)===Xn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Xn(r.integerValue)===Xn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Xn(r.doubleValue),d=Xn(o.doubleValue);return u===d?eh(u)===eh(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Sl(n.arrayValue.values||[],e.arrayValue.values||[],uo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(uI(u)!==uI(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!uo(u[m],d[m])))return!1;return!0}(n,e);default:return et()}var o}function th(n,e){return void 0!==(n.values||[]).find(t=>uo(t,e))}function Vi(n,e){if(n===e)return 0;const t=cc(n),r=cc(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Xn(o.integerValue||o.doubleValue),m=Xn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return fI(n.timestampValue,e.timestampValue);case 4:return fI(Jd(n),Jd(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Ml(o),m=Ml(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=Nt(d[w],m[w]);if(0!==C)return C}return Nt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Nt(Xn(o.latitude),Xn(u.latitude));return 0!==d?d:Nt(Xn(o.longitude),Xn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=Vi(d[w],m[w]);if(C)return C}return Nt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Za.mapValue&&u===Za.mapValue)return 0;if(o===Za.mapValue)return 1;if(u===Za.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let S=0;S<m.length&&S<C.length;++S){const N=Nt(m[S],C[S]);if(0!==N)return N;const $=Vi(d[m[S]],w[C[S]]);if(0!==$)return $}return Nt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw et()}}function fI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=uc(n),r=uc(e),o=Nt(t.seconds,r.seconds);return 0!==o?o:Nt(t.nanos,r.nanos)}function nh(n){return lc(n)}function lc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=uc(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ml(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=lc(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${lc(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function rh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jf(n){return!!n&&"integerValue"in n}function Cm(n){return!!n&&"arrayValue"in n}function n_(n){return!!n&&"nullValue"in n}function r_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function i_(n){return!!n&&"mapValue"in n}function pt(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pt(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pt(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function $C(n){return"nullValue"in n?Qf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?rh(qa.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function HC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?rh(qa.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Za:et()}function Rl(n,e){const t=Vi(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function gI(n,e){const t=Vi(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!i_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pt(t)}setAll(e){let t=fn.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=pt(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());i_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];i_(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){xl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new pr(pt(this.value))}}function Xf(n){const e=[];return xl(n.fields,(t,r)=>{const o=new fn([t]);if(i_(r)){const u=Xf(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new ns(e)}class At{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new At(e,0,wt.min(),wt.min(),pr.empty(),0)}static newFoundDocument(e,t,r){return new At(e,1,t,wt.min(),r,0)}static newNoDocument(e,t){return new At(e,2,t,wt.min(),pr.empty(),0)}static newUnknownDocument(e,t){return new At(e,3,t,wt.min(),pr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class RA{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ht=null}}function s_(n,e=null,t=[],r=[],o=null,u=null,d=null){return new RA(n,e,t,r,o,u,d)}function dc(n){const e=We(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+nh(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Xd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nh(r)).join(",")),e.ht=t}return e.ht}function ih(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!rp(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!uo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wI(n.startAt,e.startAt)&&wI(n.endAt,e.endAt)}function ep(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function tp(n,e){return n.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}function o_(n,e,t){let r=Qf,o=!0;for(const u of tp(n,e)){let d=Qf,m=!0;switch(u.op){case"<":case"<=":d=$C(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Qf}Rl({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Rl({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function mI(n,e,t){let r=Za,o=!0;for(const u of tp(n,e)){let d=Za,m=!0;switch(u.op){case">=":case">":d=HC(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Za}gI({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];gI({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Wr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new zC(e,t,r):"array-contains"===t?new qC(e,r):"in"===t?new bm(e,r):"not-in"===t?new vI(e,r):"array-contains-any"===t?new _I(e,r):new Wr(e,t,r)}static lt(e,t,r){return"in"===t?new np(e,r):new WC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Vi(t,this.value)):null!==t&&cc(this.value)===cc(t)&&this.ft(Vi(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class zC extends Wr{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.ft(t)}}class np extends Wr{constructor(e,t){super(e,"in",t),this.keys=yI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class WC extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=yI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class qC extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cm(t)&&th(t.arrayValue,this.value)}}class bm extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&th(this.value.arrayValue,t)}}class vI extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(th(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!th(this.value.arrayValue,t)}}class _I extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>th(this.value.arrayValue,r))}}class Ka{constructor(e,t){this.position=e,this.inclusive=t}}class sh{constructor(e,t="asc"){this.field=e,this.dir=t}}function rp(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function oh(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Be.comparator(Be.fromName(d.referenceValue),t.key):Vi(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function wI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!uo(n.position[t],e.position[t]))return!1;return!0}class Ya{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function II(n,e,t,r,o,u,d,m){return new Ya(n,e,t,r,o,u,d,m)}function Nl(n){return new Ya(n)}function a_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Tm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function u_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Am(n){return null!==n.collectionGroup}function ah(n){const e=We(n);if(null===e._t){e._t=[];const t=u_(e),r=Tm(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new sh(t)),e._t.push(new sh(fn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new sh(fn.keyField(),u))}}}return e._t}function _i(n){const e=We(n);if(!e.wt)if("F"===e.limitType)e.wt=s_(e.path,e.collectionGroup,ah(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of ah(e))t.push(new sh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ka(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Ka(e.startAt.position,e.startAt.inclusive):null;e.wt=s_(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function c_(n,e,t){return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sm(n,e){return ih(_i(n),_i(e))&&n.limitType===e.limitType}function ZC(n){return`${dc(_i(n))}|lt:${n.limitType}`}function EI(n){return`Query(target=${function GC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${nh(r.value)}`;var r}).join(", ")}]`),Xd(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>nh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>nh(t)).join(",")),`Target(${e})`}(_i(n))}; limitType=${n.limitType})`}function xm(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Be.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=oh(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,ah(t),r)||t.endAt&&!function(o,u,d){const m=oh(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,ah(t),r)));var t,r}function ip(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DI(n){return(e,t)=>{let r=!1;for(const o of ah(n)){const u=KC(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function KC(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Vi(m,w):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function l_(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:eh(e)?"-0":e}}function uh(n){return{integerValue:""+n}}function CI(n,e){return t_(e)?uh(e):l_(n,e)}class Mm{constructor(){this._=void 0}}function YC(n,e,t){return n instanceof Ol?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof kl?TI(n,e):n instanceof co?AI(n,e):function(r,o){const u=bI(r,o),d=SI(u)+SI(r.yt);return Jf(u)&&Jf(r.yt)?uh(d):l_(r.It,d)}(n,e)}function QC(n,e,t){return n instanceof kl?TI(n,e):n instanceof co?AI(n,e):t}function bI(n,e){return n instanceof Pl?Jf(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ol extends Mm{}class kl extends Mm{constructor(e){super(),this.elements=e}}function TI(n,e){const t=d_(e);for(const r of n.elements)t.some(o=>uo(o,r))||t.push(r);return{arrayValue:{values:t}}}class co extends Mm{constructor(e){super(),this.elements=e}}function AI(n,e){let t=d_(e);for(const r of n.elements)t=t.filter(o=>!uo(o,r));return{arrayValue:{values:t}}}class Pl extends Mm{constructor(e,t){super(),this.It=e,this.yt=t}}function SI(n){return Xn(n.integerValue||n.doubleValue)}function d_(n){return Cm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class sp{constructor(e,t){this.field=e,this.transform=t}}class JC{constructor(e,t){this.version=e,this.transformResults=t}}class An{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class op{}function h_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new lh(n.key,An.none()):new ch(n.key,n.data,An.none());{const t=n.data,r=pr.empty();let o=new En(fn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new Wo(n.key,r,new ns(o.toArray()),An.none())}}function XC(n,e,t){n instanceof ch?function(r,o,u){const d=r.value.clone(),m=RI(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Wo?function(r,o,u){if(!Rm(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=RI(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(MI(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ap(n,e,t,r){return n instanceof ch?function(o,u,d,m){if(!Rm(o.precondition,u))return d;const w=o.value.clone(),C=NI(o.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Wo?function(o,u,d,m){if(!Rm(o.precondition,u))return d;const w=NI(o.fieldTransforms,m,u),C=u.data;return C.setAll(MI(o)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(d=t,Rm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function eb(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=bI(r.transform,o||null);null!=u&&(null===t&&(t=pr.empty()),t.set(r.field,u))}return t||null}function Nm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Sl(t,r,(o,u)=>function xI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof kl&&r instanceof kl||t instanceof co&&r instanceof co?Sl(t.elements,r.elements,uo):t instanceof Pl&&r instanceof Pl?uo(t.yt,r.yt):t instanceof Ol&&r instanceof Ol);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ch extends op{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Wo extends op{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function MI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function RI(n,e,t){const r=new Map;Tt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,QC(d,m,t[o]))}return r}function NI(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,YC(u,d,e))}return r}class lh extends op{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f_ extends op{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tb{constructor(e){this.count=e}}var gr,nn;function p_(n){switch(n){default:return et();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function g_(n){if(void 0===n)return Qn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case gr.OK:return ce.OK;case gr.CANCELLED:return ce.CANCELLED;case gr.UNKNOWN:return ce.UNKNOWN;case gr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case gr.INTERNAL:return ce.INTERNAL;case gr.UNAVAILABLE:return ce.UNAVAILABLE;case gr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case gr.NOT_FOUND:return ce.NOT_FOUND;case gr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case gr.ABORTED:return ce.ABORTED;case gr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case gr.DATA_LOSS:return ce.DATA_LOSS;default:return et()}}(nn=gr||(gr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class hc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return cI(this.inner)}size(){return this.innerSize}}const nb=new Jn(Be.comparator);function wi(){return nb}const OI=new Jn(Be.comparator);function up(...n){let e=OI;for(const t of n)e=e.insert(t.key,t);return e}function kI(n){let e=OI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ps(){return dh()}function Om(){return dh()}function dh(){return new hc(n=>n.toString(),(n,e)=>n.isEqual(e))}const m_=new Jn(Be.comparator),rb=new En(Be.comparator);function jt(...n){let e=rb;for(const t of n)e=e.add(t);return e}const y_=new En(Nt);function km(){return y_}class hh{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,qo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new hh(wt.min(),o,km(),wi(),jt())}}class qo{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qo(r,t,jt(),jt(),jt())}}class cp{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class PI{constructor(e,t){this.targetId=e,this.At=t}}class ib{constructor(e,t,r=Ir.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class v_{constructor(){this.Rt=0,this.bt=Pm(),this.Pt=Ir.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jt(),t=jt(),r=jt();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:et()}}),new qo(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Pm()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class __{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=wi(),this.qt=FI(),this.Kt=new En(Nt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(ep(u))if(0===r){const d=new Be(u.path);this.jt(t,d,At.newNoDocument(d,wt.min()))}else Tt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&ep(m.target)){const w=new Be(m.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,At.newNoDocument(w,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=jt();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.Xt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new hh(e,t,this.Kt,this.Ut,r);return this.Ut=wi(),this.qt=FI(),this.Kt=new En(Nt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new v_,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new En(Nt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new v_),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function FI(){return new Jn(Be.comparator)}function Pm(){return new Jn(Be.comparator)}const sb={asc:"ASCENDING",desc:"DESCENDING"},LI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class w_{constructor(e,t){this.databaseId=e,this.gt=t}}function fh(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I_(n,e){return n.gt?e.toBase64():e.toUint8Array()}function VI(n,e){return fh(n,e.toTimestamp())}function Er(n){return Tt(!!n),wt.fromTimestamp(function(e){const t=uc(e);return new Nn(t.seconds,t.nanos)}(n))}function E_(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function UI(n){const e=tn.fromString(n);return Tt(b_(e)),e}function lp(n,e){return E_(n.databaseId,e.path)}function Zo(n,e){const t=UI(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(BI(t))}function Fm(n,e){return E_(n.databaseId,e)}function ob(n){const e=UI(n);return 4===e.length?tn.emptyPath():BI(e)}function ph(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BI(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jI(n,e,t){return{name:lp(n,e),fields:t.value.mapValue.fields}}function ab(n,e,t){const r=Zo(n,e.name),o=Er(e.updateTime),u=new pr({mapValue:{fields:e.fields}}),d=At.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function dp(n,e){let t;if(e instanceof ch)t={update:jI(n,e.key,e.value)};else if(e instanceof lh)t={delete:lp(n,e.key)};else if(e instanceof Wo)t={update:jI(n,e.key,e.data),updateMask:qI(e.fieldMask)};else{if(!(e instanceof f_))return et();t={verify:lp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Ol)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof kl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof co)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Pl)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:VI(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:et()),t;var o}function D_(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?An.updateTime(Er(o.updateTime)):void 0!==o.exists?An.exists(o.exists):An.none():An.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(Tt("REQUEST_TIME"===d.setToServerValue),m=new Ol):"appendMissingElements"in d?m=new kl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new co(d.removeAllFromArray.values||[]):"increment"in d?m=new Pl(u,d.increment):et();const w=fn.fromServerFormat(d.fieldPath);return new sp(w,m)}(n,o)):[];var o;if(e.update){const o=Zo(n,e.update.name),u=new pr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new ns((e.updateMask.fieldPaths||[]).map(C=>fn.fromServerFormat(C)));return new Wo(o,u,d,t,r)}return new ch(o,u,t,r)}if(e.delete){const o=Zo(n,e.delete);return new lh(o,t)}if(e.verify){const o=Zo(n,e.verify);return new f_(o,t)}return et()}function $I(n,e){return{documents:[Fm(n,e.path)]}}function C_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Fm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Fm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(S=>function(N){if("=="===N.op){if(r_(N.value))return{unaryFilter:{field:gh(N.field),op:"IS_NAN"}};if(n_(N.value))return{unaryFilter:{field:gh(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(r_(N.value))return{unaryFilter:{field:gh(N.field),op:"IS_NOT_NAN"}};if(n_(N.value))return{unaryFilter:{field:gh(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gh(N.field),op:hb(N.op),value:N.value}}}(S));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:gh((S=C).field),direction:db(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.gt||Xd(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function HI(n){let e=ob(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Tt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=GI(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(S=>{return new sh(Ko((N=S).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,Xd(N)?null:N}(t.limit));let w=null;var S;t.startAt&&(w=new Ka((S=t.startAt).values||[],!!S.before));let C=null;return t.endAt&&(C=function(S){return new Ka(S.values||[],!S.before)}(t.endAt)),II(e,o,d,u,m,"F",w,C)}function GI(n){return n?void 0!==n.unaryFilter?[WI(n)]:void 0!==n.fieldFilter?[zI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>GI(e)).reduce((e,t)=>e.concat(t)):et():[]}function db(n){return sb[n]}function hb(n){return LI[n]}function gh(n){return{fieldPath:n.canonicalString()}}function Ko(n){return fn.fromServerFormat(n.fieldPath)}function zI(n){return Wr.create(Ko(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function WI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ko(n.unaryFilter.field);return Wr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ko(n.unaryFilter.field);return Wr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ko(n.unaryFilter.field);return Wr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ko(n.unaryFilter.field);return Wr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function qI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function b_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ZI(e)),e=fb(n.get(t),e);return ZI(e)}function fb(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function ZI(n){return n+"\x01\x01"}function Qa(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&et(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:et()}u=d+2}return new tn(r)}const KI=["userId","batchId"];function Lm(n,e){return[n,ai(e)]}function YI(n,e,t){return[n,ai(e),t]}const pb={},gb=["prefixPath","collectionGroup","readTime","documentId"],hp=["prefixPath","collectionGroup","documentId"],mb=["collectionGroup","readTime","prefixPath","documentId"],T_=["canonicalId","targetId"],Yo=["targetId","path"],yb=["path","targetId"],A_=["collectionId","parent"],fp=["indexId","uid"],vb=["uid","sequenceNumber"],_b=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wb=["indexId","uid","orderedDocumentKey"],Vm=["userId","collectionPath","documentId"],Um=["userId","collectionPath","largestBatchId"],Ib=["userId","collectionGroup","largestBatchId"],QI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],JI=[...QI,"documentOverlays"],S_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Bm=S_,XI=[...Bm,"indexConfiguration","indexState","indexEntries"];class x_ extends Jv{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Nr(n,e){const t=We(n);return ks.M(t.ie,e)}class eE{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&XC(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ap(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ap(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Om();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const w=h_(d,m);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,(t,r)=>Nm(t,r))&&Sl(this.baseMutations,e.baseMutations,(t,r)=>Nm(t,r))}}class pp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Tt(e.mutations.length===r.length);let o=m_;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new pp(e,t,r,o)}}class gp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ja{constructor(e,t,r,o,u=wt.min(),d=wt.min(),m=Ir.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Ja(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ja(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class jm{constructor(e){this.re=e}}function tE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:$m(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:lp(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:fh(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Fl(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Fl(e.version)}}var o,u;return r}function $m(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ll(n){const e=new Nn(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function fc(n,e){const t=(e.baseMutations||[]).map(u=>D_(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>D_(n.re,u)),o=Nn.fromMillis(e.localWriteTimeMs);return new eE(e.batchId,o,t,r)}function Vl(n){const e=Ll(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ll(n.lastLimboFreeSnapshotVersion):wt.min();let r;var o;return void 0!==n.query.documents?(Tt(1===(o=n.query).documents.length),r=_i(Nl(ob(o.documents[0])))):r=_i(HI(n.query)),new Ja(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ir.fromBase64String(n.resumeToken))}function R_(n,e){const t=Fl(e.snapshotVersion),r=Fl(e.lastLimboFreeSnapshotVersion);let o;o=ep(e.target)?$I(n.re,e.target):C_(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:dc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function N_(n){const e=HI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?c_(e,e.limit,"L"):e}function Hm(n,e){return new gp(e.largestBatchId,D_(n.re,e.overlayMutation))}function O_(n,e){const t=e.path.lastSegment();return[n,ai(e.path.popLast()),t]}function nE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Fl(r.readTime),documentKey:ai(r.documentKey.path),largestBatchId:r.largestBatchId}}class rE{getBundleMetadata(e,t){return k_(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Ll(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return k_(e).put({bundleId:(r=t).id,createTime:Fl(Er(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return iE(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:N_(o.bundledQuery),readTime:Ll(o.readTime)};var o})}saveNamedQuery(e,t){return iE(e).put({name:(r=t).name,readTime:Fl(Er(r.readTime)),bundledQuery:r.bundledQuery});var r}}function k_(n){return Nr(n,"bundles")}function iE(n){return Nr(n,"namedQueries")}class mp{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new mp(e,t.uid||"")}getOverlay(e,t){return yp(e).get(O_(this.userId,t)).next(r=>r?Hm(this.It,r):null)}getOverlays(e,t){const r=Ps();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new gp(t,d);o.push(this.ue(e,m))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(ai(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(yp(e).Y("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Ps(),u=ai(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return yp(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=Hm(this.It,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Ps();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yp(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,C,S)=>{const N=Hm(this.It,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):S.done()}).next(()=>u)}ue(e,t){return yp(e).put(function(r,o,u){const[d,m,w]=O_(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:dp(r.re,u.mutation)}}(this.It,this.userId,t))}}function yp(n){return Nr(n,"documentOverlays")}class sr{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Xn(e.integerValue));else if("doubleValue"in e){const r=Xn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),eh(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Ml(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?pI(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):et()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),Be.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function mh(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function sE(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=mh(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}sr.Te=new sr;class Eb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=sE(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=sE(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class OA{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class kA{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class yh{constructor(){this.Be=new Eb,this.Le=new OA(this.Be),this.Ue=new kA(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class pc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new pc(this.indexId,this.documentKey,this.arrayValue,r)}}function lo(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=oE(n.arrayValue,e.arrayValue),0!==t?t:(t=oE(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function oE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class P_{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=vm(e);if(void 0!==t&&!this.ze(t))return!1;const r=sc(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Db{constructor(){this.Ye=new Gm}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(ts.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Gm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new En(tn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new En(tn.comparator)).toArray()}}const zm=new Uint8Array(0);class Cb{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Gm,this.Ze=new hc(r=>dc(r),(r,o)=>ih(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:ai(o)};return aE(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[FC(t),""],!1,!0);return aE(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Qa(d.parent))}return r})}addFieldIndex(e,t){const r=vp(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=vh(e);return u.next(m=>{d.put(nE(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=vp(e),o=vh(e),u=Ul(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ul(e);let o=!0;const u=new Map;return se.forEach(this.tn(t),d=>this.en(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=jt();const m=[];return se.forEach(u,(w,C)=>{var S;Re("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Vt=>`${Vt.fieldPath}:${Vt.kind}`).join(",")}`} to execute ${dc(t)}`);const N=function(Vt,Ut){const Ft=vm(Ut);if(void 0===Ft)return null;for(const Gt of tp(Vt,Ft.fieldPath))switch(Gt.op){case"array-contains-any":return Gt.value.arrayValue.values||[];case"array-contains":return[Gt.value]}return null}(C,w),$=function(Vt,Ut){const Ft=new Map;for(const Gt of sc(Ut))for(const Zr of tp(Vt,Gt.fieldPath))switch(Zr.op){case"==":case"in":Ft.set(Gt.fieldPath.canonicalString(),Zr.value);break;case"not-in":case"!=":return Ft.set(Gt.fieldPath.canonicalString(),Zr.value),Array.from(Ft.values())}return null}(C,w),Y=function(Vt,Ut){const Ft=[];let Gt=!0;for(const Zr of sc(Ut)){const Ow=0===Zr.kind?o_(Vt,Zr.fieldPath,Vt.startAt):mI(Vt,Zr.fieldPath,Vt.startAt);Ft.push(Ow.value),Gt&&(Gt=Ow.inclusive)}return new Ka(Ft,Gt)}(C,w),ae=function(Vt,Ut){const Ft=[];let Gt=!0;for(const Zr of sc(Ut)){const Ow=0===Zr.kind?mI(Vt,Zr.fieldPath,Vt.endAt):o_(Vt,Zr.fieldPath,Vt.endAt);Ft.push(Ow.value),Gt&&(Gt=Ow.inclusive)}return new Ka(Ft,Gt)}(C,w),Ne=this.nn(w,C,Y),Oe=this.nn(w,C,ae),St=this.sn(w,C,$),Pt=this.rn(w.indexId,N,Ne,Y.inclusive,Oe,ae.inclusive,St);return se.forEach(Pt,Vt=>r.J(Vt,t.limit).next(Ut=>{Ut.forEach(Ft=>{const Gt=Be.fromSegments(Ft.documentKey);d.has(Gt)||(d=d.add(Gt),m.push(Gt))})}))}).next(()=>m)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),S=[];for(let N=0;N<w;++N){const $=t?this.on(t[N/C]):zm,Y=this.un(e,$,r[N%C],o),ae=this.cn(e,$,u[N%C],d),Ne=m.map(Oe=>this.un(e,$,Oe,!0));S.push(...this.createRange(Y,ae,Ne))}return S}un(e,t,r,o){const u=new pc(e,Be.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new pc(e,Be.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new P_(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new En(fn.comparator),w=!1;for(const C of d.filters){const S=C;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:m=m.add(S.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new yh;for(const o of sc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);sr.Te.ce(u,d)}return r.$e()}on(e){const t=new yh;return sr.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new yh;return sr.Te.ce(rh(this.databaseId,t),r.qe(function(o){const u=sc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new yh);let u=0;for(const d of sc(e)){const m=r[u++];for(const w of o)if(this.ln(t,d.fieldPath)&&Cm(m))o=this.fn(o,d,m);else{const C=w.qe(d.kind);sr.Te.ce(m,C)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new yh;w.seed(m.$e()),sr.Te.ce(d,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Wr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=vp(e),o=vh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return se.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,S){const N=S?new Kf(S.sequenceNumber,new ts(Ll(S.readTime),new Be(Qa(S.documentKey)),S.largestBatchId)):Kf.empty(),$=C.fields.map(([Y,ae])=>new _m(fn.fromServerFormat(Y),ae));return new Li(C.indexId,C.collectionGroup,$,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=vp(e),u=vh(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,w=>u.put(nE(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?se.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),se.forEach(m,w=>this.wn(e,o,w).next(C=>{const S=this.mn(u,w);return C.isEqual(S)?se.resolve():this.gn(e,u,w,C,S)}))))})}yn(e,t,r,o){return Ul(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return Ul(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=Ul(e);let u=new En(lo);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{u=u.add(new pc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new En(lo);const o=this.an(t,e);if(null==o)return r;const u=vm(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Cm(d))for(const m of d.arrayValue.values||[])r=r.add(new pc(t.indexId,e.key,this.on(m),o))}else r=r.add(new pc(t.indexId,e.key,zm,o));return r}gn(e,t,r,o,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,S,N){const $=m.getIterator(),Y=w.getIterator();let ae=Qd($),Ne=Qd(Y);for(;ae||Ne;){let Oe=!1,St=!1;if(ae&&Ne){const Pt=C(ae,Ne);Pt<0?St=!0:Pt>0&&(Oe=!0)}else null!=ae?St=!0:Oe=!0;Oe?(S(Ne),Ne=Qd(Y)):St?(N(ae),ae=Qd($)):(ae=Qd($),Ne=Qd(Y))}}(o,u,lo,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),se.waitFor(d)}_n(e){let t=1;return vh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>lo(d,m)).filter((d,m,w)=>!m||0!==lo(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=lo(d,e),w=lo(d,t);if(0===m)o[0]=e.Ke();else if(m>0&&w<0)o.push(d),o.push(d.Ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,zm,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,zm,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_p)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||et())).next(_p)}}function aE(n){return Nr(n,"collectionParents")}function Ul(n){return Nr(n,"indexEntries")}function vp(n){return Nr(n,"indexConfiguration")}function vh(n){return Nr(n,"indexState")}function _p(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Im(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new ts(e.readTime,e.documentKey,t)}const Wm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new rs(e,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function F_(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(S,N,$)=>(m++,$.delete()));u.push(w.next(()=>{Tt(1===m)}));const C=[];for(const S of t.mutations){const N=YI(e,S.key.path,t.batchId);u.push(o.delete(N)),C.push(S.key)}return se.waitFor(u).next(()=>C)}function qm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}rs.DEFAULT_COLLECTION_PERCENTILE=10,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rs.DEFAULT=new rs(41943040,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rs.DISABLED=new rs(-1,0,0);class wp{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new wp(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gc(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=jl(e),d=gc(e);return d.add({}).next(m=>{Tt("number"==typeof m);const w=new eE(m,t,r,o),C=function($,Y,ae){const Ne=ae.baseMutations.map(St=>dp($.re,St)),Oe=ae.mutations.map(St=>dp($.re,St));return{userId:Y,batchId:ae.batchId,localWriteTimeMs:ae.localWriteTime.toMillis(),baseMutations:Ne,mutations:Oe}}(this.It,this.userId,w),S=[];let N=new En(($,Y)=>Nt($.canonicalString(),Y.canonicalString()));for(const $ of o){const Y=YI(this.userId,$.key.path,m);N=N.add($.key.path.popLast()),S.push(d.put(C)),S.push(u.put(Y,pb))}return N.forEach($=>{S.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),se.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return gc(e).get(t).next(r=>r?(Tt(r.userId===this.userId),fc(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return gc(e).Z({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(Tt(m.batchId>=r),u=fc(this.It,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return gc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gc(e).W("userMutationsIndex",t).next(r=>r.map(o=>fc(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Lm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return jl(e).Z({range:o},(d,m,w)=>{const[C,S,N]=d,$=Qa(S);if(C===this.userId&&t.path.isEqual($))return gc(e).get(N).next(Y=>{if(!Y)throw et();Tt(Y.userId===this.userId),u.push(fc(this.It,Y))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Nt);const o=[];return t.forEach(u=>{const d=Lm(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=jl(e).Z({range:m},(C,S,N)=>{const[$,Y,ae]=C,Ne=Qa(Y);$===this.userId&&u.path.isEqual(Ne)?r=r.add(ae):N.done()});o.push(w)}),se.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Lm(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new En(Nt);return jl(e).Z({range:d},(w,C,S)=>{const[N,$,Y]=w,ae=Qa($);N===this.userId&&r.isPrefixOf(ae)?ae.length===o&&(m=m.add(Y)):S.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(gc(e).get(u).next(d=>{if(null===d)throw et();Tt(d.userId===this.userId),r.push(fc(this.It,d))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return F_(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return jl(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Qa(u[1]);o.push(w)}else m.done()}).next(()=>{Tt(0===o.length)})})}containsKey(e,t){return Bl(e,this.userId,t)}Rn(e){return Zm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Bl(n,e,t){const r=Lm(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return jl(n).Z({range:u,X:!0},(m,w,C)=>{const[S,N,$]=m;S===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function gc(n){return Nr(n,"mutations")}function jl(n){return Nr(n,"documentMutations")}function Zm(n){return Nr(n,"mutationQueues")}class _h{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new _h(0)}static vn(){return new _h(-1)}}class bb{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new _h(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>wt.fromTimestamp(new Nn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ip(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Ip(e).Z((d,m)=>{const w=Vl(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Ip(e).Z((r,o)=>{const u=Vl(o);t(u)})}Vn(e){return uE(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}Sn(e,t){return uE(e).put("targetGlobalKey",t)}Dn(e,t){return Ip(e).put(R_(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=dc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ip(e).Z({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Vl(m);ih(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=mc(e);return t.forEach(d=>{const m=ai(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=mc(e);return se.forEach(t,u=>{const d=ai(u.path);return se.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=mc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=mc(e);let u=jt();return o.Z({range:r,X:!0},(d,m,w)=>{const C=Qa(d[1]),S=new Be(C);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=ai(t.path),o=IDBKeyRange.bound([r],[FC(r)],!1,!0);let u=0;return mc(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}se(e,t){return Ip(e).get(t).next(r=>r?Vl(r):null)}}function Ip(n){return Nr(n,"targets")}function uE(n){return Nr(n,"targetGlobal")}function mc(n){return Nr(n,"targetDocuments")}function cE([n,e],[t,r]){const o=Nt(n,t);return 0===o?Nt(e,r):o}class lE{constructor(e){this.xn=e,this.buffer=new En(cE),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();cE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Wa(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield za(r)}yield t.Fn(3e5)}))}}class Tb{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(vi.at);const r=new lE(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Wm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wm):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,m,w,C;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),mm()<=jo.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-S}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-S}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class hE{constructor(e,t){this.db=e,this.garbageCollector=new Tb(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return Ep(e,r)}removeReference(e,t,r){return Ep(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ep(e,t)}Gn(e,t){return function(r,o){let u=!1;return Zm(r).tt(d=>Bl(r,d,o).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,wt.min()),mc(e).delete([0,ai(d.path)])))});o.push(w)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ep(e,t)}Kn(e,t){const r=mc(e);let o,u=vi.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==vi.at&&t(new Be(Qa(o)),u),u=C,o=w):u=vi.at}).next(()=>{u!==vi.at&&t(new Be(Qa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ep(n,e){return mc(n).put((r=n.currentSequenceNumber,{targetId:0,path:ai(e.path),sequenceNumber:r}));var r}class fE{constructor(){this.changes=new hc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ab{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yc(e).put(r)}removeEntry(e,t,r){return yc(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],$m(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=At.newInvalidDocument(t);return yc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(wh(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:At.newInvalidDocument(t)};return yc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(wh(t))},(o,u)=>{r={document:this.jn(t,u),size:qm(u)}}).next(()=>r)}getEntries(e,t){let r=wi();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=wi(),o=new Jn(Be.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),o=o.insert(u,qm(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let o=new En(pE);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(wh(o.first()),wh(o.last())),d=o.getIterator();let m=d.getNext();return yc(e).Z({index:"documentKeyIndex",range:u},(w,C,S)=>{const N=Be.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&pE(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?S.j(wh(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),$m(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yc(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=wi();for(const w of d){const C=this.jn(Be.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=wi();const d=U_(t,r),m=U_(t,ts.max());return yc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,S)=>{const N=this.jn(Be.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new Sb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return V_(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Qn(e,t){return V_(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function M_(n,e){let t;if(e.document)t=ab(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),o=Ll(e.noDocument.readTime);t=At.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Be.fromSegments(e.unknownDocument.path),o=Ll(e.unknownDocument.version);t=At.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Nn(r[0],r[1]);return wt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(wt.min()))return r}return At.newInvalidDocument(e)}}function L_(n){return new Ab(n)}class Sb extends fE{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new hc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new En((u,d)=>Nt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=tE(this.Yn.It,d);o=o.add(u.path.popLast()),r+=qm(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=tE(this.Yn.It,d.convertToNoDocument(wt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function V_(n){return Nr(n,"remoteDocumentGlobal")}function yc(n){return Nr(n,"remoteDocumentsV14")}function wh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function U_(n,e){const t=e.documentKey.path.toArray();return[n,$m(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function pE(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Nt(t[u],r[u]),o)return o;return o=Nt(t.length,r.length),o||(o=Nt(t[t.length-2],r[r.length-2]),o||Nt(t[t.length-1],r[r.length-1]))}class xb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Mb{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&ap(r.mutation,o,ns.empty(),Nn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const o=Ps();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=up();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Ps();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=wi();const d=dh(),m=dh();return t.forEach((w,C)=>{const S=r.get(C.key);o.has(C.key)&&(void 0===S||S.mutation instanceof Wo)?u=u.insert(C.key,C):void 0!==S&&(d.set(C.key,S.mutation.getFieldMask()),ap(S.mutation,C,S.mutation.getFieldMask(),Nn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,S)=>d.set(C,S)),t.forEach((C,S)=>{var N;return m.set(C,new xb(S,null!==(N=d.get(C))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=dh();let o=new Jn((d,m)=>d-m),u=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let S=r.get(w)||ns.empty();S=m.applyToLocalView(C,S),r.set(w,S);const N=(o.get(m.batchId)||jt()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,S=w.value,N=Om();S.forEach($=>{if(!u.has($)){const Y=h_(t.get($),r.get($));null!==Y&&N.set($,Y),u=u.add($)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,N))}return se.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Am(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(Ps());let m=-1,w=u;return d.next(C=>se.forEach(C,(S,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(S)?se.resolve():this.getBaseDocument(e,S,N).next($=>{w=w.insert(S,$)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,jt())).next(S=>({batchId:m,changes:kI(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next(r=>{let o=up();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=up();return this.indexManager.getCollectionParents(e,o).next(d=>se.forEach(d,m=>{const w=(C=t,S=m.child(o),new Ya(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const C=w.getKey();null===o.get(C)&&(o=o.insert(C,At.newInvalidDocument(C)))});let d=up();return o.forEach((m,w)=>{const C=u.get(m);void 0!==C&&ap(C.mutation,w,ns.empty(),Nn.now()),xm(t,w)&&(d=d.insert(m,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(At.newInvalidDocument(t))}}class gE{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Er(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:N_(r.bundledQuery),readTime:Er(r.readTime)}),se.resolve();var r}}class PA{constructor(){this.overlays=new Jn(Be.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ps();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=Ps(),u=t.length+1,d=new Be(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Jn((C,S)=>C-S);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let S=u.get(C.largestBatchId);null===S&&(S=Ps(),u=u.insert(C.largestBatchId,S)),S.set(C.getKey(),C)}}const m=Ps(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,S)=>m.set(C,S)),!(m.size()>=o)););return se.resolve(m)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new gp(t,r));let u=this.es.get(t);void 0===u&&(u=jt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class mE{constructor(){this.ns=new En(qr.ss),this.rs=new En(qr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new qr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new qr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Be(new tn([])),r=new qr(t,e),o=new qr(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Be(new tn([])),r=new qr(t,e),o=new qr(t,e+1);let u=jt();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new qr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class qr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Be.comparator(e.key,t.key)||Nt(e._s,t._s)}static os(e,t){return Nt(e._s,t._s)||Be.comparator(e.key,t.key)}}class FA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new En(qr.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new eE(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.gs=this.gs.add(new qr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qr(t,0),o=new qr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const m=this.ys(d._s);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Nt);return t.forEach(o=>{const u=new qr(o,0),d=new qr(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Be.isDocumentKey(u)||(u=u.child(""));const d=new qr(new Be(u),0);let m=new En(Nt);return this.gs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w._s)),!0)},d),se.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Tt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,o=>{const u=new qr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new qr(t,0),o=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class LA{constructor(e){this.Es=e,this.docs=new Jn(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():At.newInvalidDocument(t))}getEntries(e,t){let r=wi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():At.newInvalidDocument(o))}),se.resolve(r)}getAllFromCollection(e,t,r){let o=wi();const u=new Be(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Im(Kd(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,r,o){et()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new VA(this)}getSize(e){return se.resolve(this.size)}}class VA extends fE{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class UA{constructor(e){this.persistence=e,this.Rs=new hc(t=>dc(t),ih),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new mE,this.targetCount=0,this.vs=_h.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new _h(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class Rb{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new vi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new UA(this),this.indexManager=new Db,this.remoteDocumentCache=new LA(r=>this.referenceDelegate.xs(r)),this.It=new jm(t),this.Ns=new gE(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new FA(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new Km(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Km extends Jv{constructor(e){super(),this.currentSequenceNumber=e}}class B_{constructor(e){this.persistence=e,this.Fs=new mE,this.$s=null}static Bs(e){return new B_(e)}get Ls(){if(this.$s)return this.$s;throw et()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const o=Be.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,wt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class yE{constructor(e){this.It=e}$(e,t,r,o){const u=new Yf("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KI,{unique:!0}),m.createObjectStore("documentMutations"),Dp(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=se.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Dp(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:wt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",KI,{unique:!0});const S=w.store("mutations"),N=C.map($=>S.put($));return se.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:Vm});w.createIndex("collectionPathOverlayIndex",Um,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",Ib,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:gb});w.createIndex("documentKeyIndex",hp),w.createIndex("collectionGroupIndex",mb)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:fp}).createIndex("sequenceNumberIndex",vb,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:_b}).createIndex("documentKeyIndex",wb,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=qm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>se.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>se.forEach(m,w=>{Tt(w.userId===u.userId);const C=fc(this.It,w);return F_(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,m)=>{const w=new tn(d),C=[0,ai(w)];u.push(t.get(C).next(S=>S?se.resolve():t.put({targetId:0,path:ai(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:A_});const r=t.store("collectionParents"),o=new Gm,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:ai(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new tn(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],C)=>{const S=Qa(m);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Vl(o),d=R_(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new Be(tn.fromString(C.document.name).popFirst(5)):C.noDocument?Be.fromSegments(C.noDocument.path):C.unknownDocument?Be.fromSegments(C.unknownDocument.path):et()).path.toArray();var C;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(S))}).next(()=>se.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=L_(this.It),u=new Rb(B_.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var C;let S=null!==(C=m.get(w.userId))&&void 0!==C?C:jt();fc(this.It,w).keys().forEach(N=>S=S.add(N)),m.set(w.userId,S)}),se.forEach(m,(w,C)=>{const S=new wr(C),N=mp.oe(this.It,S),$=u.getIndexManager(S),Y=wp.oe(S,this.It,$,u.referenceDelegate);return new Mb(o,Y,N,$).recalculateAndSaveOverlaysForDocumentKeys(new x_(t,vi.at),w).next()})})}}function Dp(n){n.createObjectStore("targetDocuments",{keyPath:Yo}).createIndex("documentTargetsIndex",yb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T_,{unique:!0}),n.createObjectStore("targetGlobal")}const Ym="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qm{constructor(e,t,r,o,u,d,m,w,C,S,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=C,this.Ys=S,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$=>Promise.resolve(),!Qm.C())throw new xe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hE(this,o),this.ii=t+"main",this.It=new jm(w),this.ri=new ks(this.ii,this.Xs,new yE(this.It)),this.Cs=new bb(this.referenceDelegate,this.It),this.remoteDocumentCache=L_(this.It),this.Ns=new rE,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&Qn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,Ym);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new vi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ih(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Wa(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Jm(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return Ih(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Nr(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return se.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):Jm(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xe(ce.FAILED_PRECONDITION,Ym);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ih(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new x_(t,vi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Ih(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return wp.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cb(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return mp.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?XI:14===d?Bm:13===d?S_:12===d?JI:11===d?QI:void et();var d;let m;return this.ri.runTransaction(e,o,u,w=>(m=new x_(w,this.Ss?this.Ss.next():vi.at),"readwrite-primary"===t?this.fi(m).next(C=>!!C||this.di(m)).next(C=>{if(!C)throw Qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xe(ce.FAILED_PRECONDITION,rI);return r(m)}).next(C=>this.wi(m).next(()=>C)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return Jm(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(ce.FAILED_PRECONDITION,Ym)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jm(e).put("owner",t)}static C(){return ks.C()}_i(e){const t=Jm(e);return t.get("owner").next(r=>this.mi(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Qn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,en.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jm(n){return Nr(n,"owner")}function Ih(n){return Nr(n,"clientMetadata")}function Xm(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class j_{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=jt(),o=jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new j_(e,t.fromCache,r,o)}}class $_{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(a_(t))return se.resolve(null);let r=_i(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=c_(t,null,"F"),r=_i(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=jt(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Fi(t,m);return this.$i(t,C,d,w.readTime)?this.ki(e,c_(t,null,"F")):this.Bi(e,C,t,w)}))})))}Oi(e,t,r,o){return a_(t)||o.isEqual(wt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Mi(e,t):(mm()<=jo.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),EI(t)),this.Bi(e,d,t,wm(o,-1)))})}Fi(e,t){let r=new En(DI(e));return t.forEach((o,u)=>{xm(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return mm()<=jo.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",EI(t)),this.Ni.getDocumentsMatchingQuery(e,t,ts.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class BA{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new Jn(Nt),this.qi=new hc(u=>dc(u),ih),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mb(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Nb(n,e,t,r){return new BA(n,e,t,r)}function vE(n,e){return H_.apply(this,arguments)}function H_(){return H_=(0,me.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=jt();for(const C of o){d.push(C.batchId);for(const S of C.mutations)w=w.add(S.key)}for(const C of u){m.push(C.batchId);for(const S of C.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(C=>({ji:C,removedBatchIds:d,addedBatchIds:m}))})})}),H_.apply(this,arguments)}function ey(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const S=w.batch,N=S.keys();let $=se.resolve();return N.forEach(Y=>{$=$.next(()=>C.getEntry(m,Y)).next(ae=>{const Ne=w.docVersions.get(Y);Tt(null!==Ne),ae.version.compareTo(Ne)<0&&(S.applyToRemoteDocument(ae,w),ae.isValidDocument()&&(ae.setReadTime(w.commitVersion),C.addEntry(ae)))})}),$.next(()=>d.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=jt();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function _E(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function jA(n,e){const t=We(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const m=[];e.targetChanges.forEach((S,N)=>{const $=o.get(N);if(!$)return;m.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,N)));let Y=$.withSequenceNumber(u.currentSequenceNumber);var ae,Ne,Oe;e.targetMismatches.has(N)?Y=Y.withResumeToken(Ir.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):S.resumeToken.approximateByteSize()>0&&(Y=Y.withResumeToken(S.resumeToken,r)),o=o.insert(N,Y),Ne=Y,Oe=S,(0===(ae=$).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-ae.snapshotVersion.toMicroseconds()>=3e8||Oe.addedDocuments.size+Oe.modifiedDocuments.size+Oe.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,Y))});let w=wi(),C=jt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(Ob(u,d,e.documentUpdates).next(S=>{w=S.Wi,C=S.zi})),!r.isEqual(wt.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return se.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Ui=o,u))}function Ob(n,e,t){let r=jt(),o=jt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=wi();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(wt.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Re("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{Wi:d,zi:o}})}function $A(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Eh(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new Ja(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Dh(n,e,t){return G_.apply(this,arguments)}function G_(){return G_=(0,me.Z)(function*(n,e,t){const r=We(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Wa(d))throw d;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),G_.apply(this,arguments)}function z_(n,e,t){const r=We(n);let o=wt.min(),u=jt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const S=We(m),N=S.qi.get(C);return void 0!==N?se.resolve(S.Ui.get(N)):S.Cs.getTargetData(w,C)}(r,d,_i(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:wt.min(),t?u:jt())).next(m=>(q_(r,ip(e),m),{documents:m,Hi:u})))}function wE(n,e){const t=We(n),r=We(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function W_(n,e){const t=We(n),r=t.Ki.get(e)||wt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,wm(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(q_(t,e,o),o))}function q_(n,e,t){let r=n.Ki.get(e)||wt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function is(){return is=(0,me.Z)(function*(n,e,t,r){const o=We(n);let u=jt(),d=wi();for(const C of t){const S=e.Ji(C.metadata.name);C.document&&(u=u.add(S));const N=e.Yi(C);N.setReadTime(e.Xi(C.metadata.readTime)),d=d.insert(S,N)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield Eh(o,(C=r,_i(Nl(tn.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Ob(C,m,d).next(S=>(m.apply(C),S)).next(S=>o.Cs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.Cs.addMatchingKeys(C,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,S.Wi,S.zi)).next(()=>S.Wi)))}),is.apply(this,arguments)}function kb(n,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,me.Z)(function*(n,e,t=jt()){const r=yield Eh(n,_i(N_(e.bundledQuery))),o=We(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Er(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Ir.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),Cp.apply(this,arguments)}function IE(n,e){return`firestore_clients_${n}_${e}`}function ss(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Z_(n,e){return`firestore_targets_${n}_${e}`}class Ch{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new Ch(e,t,o.state,u):(Qn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new bp(e,r.state,o):(Qn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ty{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=km();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=t_(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new ty(e,u):(Qn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Tp{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Tp(t.clientId,t.onlineState):(Qn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ny{constructor(){this.activeTargetIds=km()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ry{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Jn(Nt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=IE(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new ny),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(IE(e.persistenceKey,o));if(u){const d=ty.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Z_(this.persistenceKey,e));if(r){const o=bp.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Z_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Qn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=vi.at;if(null!=u)try{const m=JSON.parse(u);Tt("number"==typeof m),d=m}catch(m){Qn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==vi.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new Ch(this.currentUser,e,t,r),u=ss(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=ss(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=Z_(this.persistenceKey,e),u=new bp(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return ty.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return Ch.Zi(new wr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return bp.Zi(o,t)}yr(e){return Tp.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=km();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class EE{constructor(){this.Lr=new ny,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new ny,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DE{qr(e){}shutdown(){}}class K_{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Pb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CE{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Fb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const d=this.ho(e,t);Re("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(Re("RestConnection","Received: ",w),w),w=>{throw ic("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u,d){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+rc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${Pb[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new MC;m.setWithCredentials(!0),m.listenOnce(Y0.COMPLETE,()=>{var C;try{switch(m.getLastErrorCode()){case qv.NO_ERROR:const S=m.getResponseJson();Re("Connection","XHR received:",JSON.stringify(S)),u(S);break;case qv.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),d(new xe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case qv.HTTP_ERROR:const N=m.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',N,"response text:",m.getResponseText()),N>0){let $=m.getResponseJson();Array.isArray($)&&($=$[0]);const Y=null===(C=$)||void 0===C?void 0:C.error;if(Y&&Y.status&&Y.message){const ae=function(Ne){const Oe=Ne.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Oe)>=0?Oe:ce.UNKNOWN}(Y.status);d(new xe(ae,Y.message))}else d(new xe(ce.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(ce.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Wv(),d=K0(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new J0({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Re("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let S=!1,N=!1;const $=new CE({Hr:ae=>{N?Re("Connection","Not sending because WebChannel is closed:",ae):(S||(Re("Connection","Opening WebChannel transport."),C.open(),S=!0),Re("Connection","WebChannel sending:",ae),C.send(ae))},Jr:()=>C.close()}),Y=(ae,Ne,Oe)=>{ae.listen(Ne,St=>{try{Oe(St)}catch(Pt){setTimeout(()=>{throw Pt},0)}})};return Y(C,gm.EventType.OPEN,()=>{N||Re("Connection","WebChannel transport opened.")}),Y(C,gm.EventType.CLOSE,()=>{N||(N=!0,Re("Connection","WebChannel transport closed"),$.io())}),Y(C,gm.EventType.ERROR,ae=>{N||(N=!0,ic("Connection","WebChannel transport errored:",ae),$.io(new xe(ce.UNAVAILABLE,"The operation could not be completed")))}),Y(C,gm.EventType.MESSAGE,ae=>{var Ne;if(!N){const Oe=ae.data[0];Tt(!!Oe);const St=Oe,Pt=St.error||(null===(Ne=St[0])||void 0===Ne?void 0:Ne.error);if(Pt){Re("Connection","WebChannel received error:",Pt);const Vt=Pt.status;let Ut=function(Gt){const Zr=gr[Gt];if(void 0!==Zr)return g_(Zr)}(Vt),Ft=Pt.message;void 0===Ut&&(Ut=ce.INTERNAL,Ft="Unknown error status: "+Vt+" with message "+Pt.message),N=!0,$.io(new xe(Ut,Ft)),C.close()}else Re("Connection","WebChannel received:",Oe),$.ro(Oe)}}),Y(d,Q0.STAT_EVENT,ae=>{ae.stat===Zv.PROXY?Re("Connection","Detected buffering proxy"):ae.stat===Zv.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.so()},0),$}}function iy(){return typeof window<"u"?window:null}function ho(){return typeof document<"u"?document:null}function bh(n){return new w_(n,!0)}class Ap{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Qo{constructor(e,t,r,o,u,d,m,w){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ap(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new xe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lb extends Qo{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function ub(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:et(),o=e.targetChange.targetIds||[],u=function(w,C){return w.gt?(Tt(void 0===C||"string"==typeof C),Ir.fromBase64String(C||"")):(Tt(void 0===C||C instanceof Uint8Array),Ir.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?ce.UNKNOWN:g_(w.code);return new xe(C,w.message||"")}(d);t=new ib(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Zo(n,r.document.name),u=Er(r.document.updateTime),d=new pr({mapValue:{fields:r.document.fields}}),m=At.newFoundDocument(o,u,d);t=new cp(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Zo(n,r.document),u=r.readTime?Er(r.readTime):wt.min(),d=At.newNoDocument(o,u);t=new cp([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Zo(n,r.document);t=new cp([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new tb(r.count||0);t=new PI(r.targetId,u)}}var w;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return wt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?wt.min():u.readTime?Er(u.readTime):wt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=ph(this.It),t.addTarget=function(o,u){let d;const m=u.target;return d=ep(m)?{documents:$I(o,m)}:{query:C_(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=I_(o,u.resumeToken):u.snapshotVersion.compareTo(wt.min())>0&&(d.readTime=fh(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function lb(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=ph(this.It),t.removeTarget=e,this.Bo(t)}}class GA extends Qo{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function cb(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,o){let u=Er(r.updateTime?r.updateTime:o);return u.isEqual(wt.min())&&(u=Er(o)),new JC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.Zo(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ph(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dp(this.It,r))};this.Bo(t)}}class Vb extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ce.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection._o(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class Bb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Qn(t),this.ou=!1):Re("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class bE{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var w;Jo(d)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,me.Z)(function*(C){const S=We(C);S._u.add(4),yield Th(S),S.gu.set("Unknown"),S._u.delete(4),yield sy(S)}),function(C){return w.apply(this,arguments)})(d))}))}),this.gu=new Bb(r,o)}}function sy(n){return oy.apply(this,arguments)}function oy(){return oy=(0,me.Z)(function*(n){if(Jo(n))for(const e of n.wu)yield e(!0)}),oy.apply(this,arguments)}function Th(n){return ay.apply(this,arguments)}function ay(){return ay=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),ay.apply(this,arguments)}function Q_(n,e){const t=We(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),ly(t)?cy(t):Ah(t).ko()&&uy(t,e))}function $l(n,e){const t=We(n),r=Ah(t);t.du.delete(e),r.ko()&&J_(t,e),0===t.du.size&&(r.ko()?r.Fo():Jo(t)&&t.gu.set("Unknown"))}function uy(n,e){n.yu.Mt(e.targetId),Ah(n).zo(e)}function J_(n,e){n.yu.Mt(e),Ah(n).Ho(e)}function cy(n){n.yu=new __({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Ah(n).start(),n.gu.uu()}function ly(n){return Jo(n)&&!Ah(n).No()&&n.du.size>0}function Jo(n){return 0===We(n)._u.size}function Sp(n){n.yu=void 0}function dy(n){return hy.apply(this,arguments)}function hy(){return hy=(0,me.Z)(function*(n){n.du.forEach((e,t)=>{uy(n,e)})}),hy.apply(this,arguments)}function jb(n,e){return fy.apply(this,arguments)}function fy(){return fy=(0,me.Z)(function*(n,e){Sp(n),ly(n)?(n.gu.hu(e),cy(n)):n.gu.set("Unknown")}),fy.apply(this,arguments)}function TE(n,e,t){return X_.apply(this,arguments)}function X_(){return X_=(0,me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof ib&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield py(n,r)}else if(e instanceof cp?n.yu.Gt(e):e instanceof PI?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(wt.min()))try{const r=yield _E(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.te(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.du.get(w);C&&o.du.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(Ir.EMPTY_BYTE_STRING,w.snapshotVersion)),J_(o,m);const C=new Ja(w.target,m,1,w.sequenceNumber);uy(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield py(n,r)}var r}),X_.apply(this,arguments)}function py(n,e,t){return AE.apply(this,arguments)}function AE(){return AE=(0,me.Z)(function*(n,e,t){if(!Wa(e))throw e;n._u.add(1),yield Th(n),n.gu.set("Offline"),t||(t=()=>_E(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield sy(n)}))}),AE.apply(this,arguments)}function $b(n,e){return e().catch(t=>py(n,t,e))}function Hl(n){return ew.apply(this,arguments)}function ew(){return ew=(0,me.Z)(function*(n){const e=We(n),t=Xo(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Hb(e);)try{const o=yield $A(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,Gb(e,o)}catch(o){yield py(e,o)}zb(e)&&Wb(e)}),ew.apply(this,arguments)}function Hb(n){return Jo(n)&&n.fu.length<10}function Gb(n,e){n.fu.push(e);const t=Xo(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function zb(n){return Jo(n)&&!Xo(n).No()&&n.fu.length>0}function Wb(n){Xo(n).start()}function zA(n){return SE.apply(this,arguments)}function SE(){return SE=(0,me.Z)(function*(n){Xo(n).eu()}),SE.apply(this,arguments)}function WA(n){return tw.apply(this,arguments)}function tw(){return tw=(0,me.Z)(function*(n){const e=Xo(n);for(const t of n.fu)e.Xo(t.mutations)}),tw.apply(this,arguments)}function gy(n,e,t){return nw.apply(this,arguments)}function nw(){return nw=(0,me.Z)(function*(n,e,t){const r=n.fu.shift(),o=pp.from(r,e,t);yield $b(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Hl(n)}),nw.apply(this,arguments)}function qb(n,e){return my.apply(this,arguments)}function my(){return my=(0,me.Z)(function*(n,e){var t;e&&Xo(n).Yo&&(yield(t=(0,me.Z)(function*(r,o){if(p_(u=o.code)&&u!==ce.ABORTED){const d=r.fu.shift();Xo(r).Mo(),yield $b(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Hl(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),zb(n)&&Wb(n)}),my.apply(this,arguments)}function vc(n,e){return yy.apply(this,arguments)}function yy(){return yy=(0,me.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=Jo(t);t._u.add(3),yield Th(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield sy(t)}),yy.apply(this,arguments)}function xp(n,e){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,me.Z)(function*(n,e){const t=We(n);e?(t._u.delete(2),yield sy(t)):e||(t._u.add(2),yield Th(t),t.gu.set("Unknown"))}),Mp.apply(this,arguments)}function Ah(n){return n.pu||(n.pu=function(e,t,r){const o=We(e);return o.su(),new Lb(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:dy.bind(null,n),Zr:jb.bind(null,n),Wo:TE.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Mo(),ly(n)?cy(n):n.gu.set("Unknown")):(yield n.pu.stop(),Sp(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Xo(n){return n.Iu||(n.Iu=function(e,t,r){const o=We(e);return o.su(),new GA(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:zA.bind(null,n),Zr:qb.bind(null,n),tu:WA.bind(null,n),Zo:gy.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Mo(),yield Hl(n)):(yield n.Iu.stop(),n.fu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Rp{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new Rp(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xa(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),Wa(n))return new xe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Np{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=up(),this.sortedSet=new Jn(this.comparator)}static emptySet(e){return new Np(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Np)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Np;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Zb{constructor(){this.Tu=new Jn(Be.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):et():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Op{constructor(e,t,r,o,u,d,m,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Op(e,t,Np.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class qA{constructor(){this.Au=void 0,this.listeners=[]}}class xE{constructor(){this.queries=new hc(e=>ZC(e),Sm),this.onlineState="Unknown",this.Ru=new Set}}function rw(n,e){return iw.apply(this,arguments)}function iw(){return iw=(0,me.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new qA),o)try{u.Au=yield t.onListen(r)}catch(d){const m=Xa(d,`Initialization of query '${EI(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&vy(t)}),iw.apply(this,arguments)}function sw(n,e){return ow.apply(this,arguments)}function ow(){return ow=(0,me.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),ow.apply(this,arguments)}function ME(n,e){const t=We(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Pu(o)&&(r=!0);d.Au=o}}r&&vy(t)}function RE(n,e,t){const r=We(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function vy(n){n.Ru.forEach(e=>{e.next()})}class aw{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Op(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Op.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Kb{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class uw{constructor(e){this.It=e}Ji(e){return Zo(this.It,e)}Yi(e){return e.metadata.exists?ab(this.It,e.document,!1):At.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Er(e)}}class cw{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Yb(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=tn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new uw(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||jt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function HA(n,e,t,r){return is.apply(this,arguments)}(e.localStore,new uw(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield kb(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Yb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class lw{constructor(e){this.key=e}}class _y{constructor(e){this.key=e}}class NE{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jt(),this.mutatedKeys=jt(),this.Gu=DI(e),this.Qu=new Np(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Zb,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,N)=>{const $=o.get(S),Y=xm(this.query,N)?N:null,ae=!!$&&this.mutatedKeys.has($.key),Ne=!!Y&&(Y.hasLocalMutations||this.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations);let Oe=!1;$&&Y?$.data.isEqual(Y.data)?ae!==Ne&&(r.track({type:3,doc:Y}),Oe=!0):this.Hu($,Y)||(r.track({type:2,doc:Y}),Oe=!0,(w&&this.Gu(Y,w)>0||C&&this.Gu(Y,C)<0)&&(m=!0)):!$&&Y?(r.track({type:0,doc:Y}),Oe=!0):$&&!Y&&(r.track({type:1,doc:$}),Oe=!0,(w||C)&&(m=!0)),Oe&&(Y?(d=d.add(Y),u=Ne?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:d,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((C,S)=>function(N,$){const Y=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return Y(N)-Y($)}(C.type,S.type)||this.Gu(C.doc,S.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new Op(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Zb,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new _y(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new lw(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Op.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Qb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ZA{constructor(e){this.key=e,this.nc=!1}}class KA{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new hc(m=>ZC(m),Sm),this.rc=new Map,this.oc=new Set,this.uc=new Jn(Be.comparator),this.cc=new Map,this.ac=new mE,this.hc={},this.lc=new Map,this.fc=_h.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Jb(n,e){return dw.apply(this,arguments)}function dw(){return dw=(0,me.Z)(function*(n,e){const t=Lp(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const d=yield Eh(t.localStore,_i(e));t.isPrimaryClient&&Q_(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield hw(t,e,r,"current"===m,d.resumeToken)}return o}),dw.apply(this,arguments)}function hw(n,e,t,r,o){return OE.apply(this,arguments)}function OE(){return OE=(0,me.Z)(function*(n,e,t,r,o){n._c=(N,$,Y)=>{return(ae=(0,me.Z)(function*(Ne,Oe,St,Pt){let Vt=Oe.view.Wu(St);Vt.$i&&(Vt=yield z_(Ne.localStore,Oe.query,!1).then(({documents:Gt})=>Oe.view.Wu(Gt,Vt)));const Ut=Pt&&Pt.targetChanges.get(Oe.targetId),Ft=Oe.view.applyChanges(Vt,Ne.isPrimaryClient,Ut);return E(Ne,Oe.targetId,Ft.Xu),Ft.snapshot}),function(Ne,Oe,St,Pt){return ae.apply(this,arguments)})(n,N,$,Y);var ae};const u=yield z_(n.localStore,e,!0),d=new NE(e,u.Hi),m=d.Wu(u.documents),w=qo.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=d.applyChanges(m,n.isPrimaryClient,w);E(n,t,C.Xu);const S=new Qb(e,t,d);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),OE.apply(this,arguments)}function YA(n,e){return kE.apply(this,arguments)}function kE(){return kE=(0,me.Z)(function*(n,e){const t=We(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!Sm(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Dh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),$l(t.remoteStore,r.targetId),v(t,r.targetId)}).catch(za))):(v(t,r.targetId),yield Dh(t.localStore,r.targetId,!0))}),kE.apply(this,arguments)}function PE(){return PE=(0,me.Z)(function*(n,e,t){const r=eT(n);try{const o=yield function(u,d){const m=We(u),w=Nn.now(),C=d.reduce(($,Y)=>$.add(Y.key),jt());let S,N;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Y=wi(),ae=jt();return m.Gi.getEntries($,C).next(Ne=>{Y=Ne,Y.forEach((Oe,St)=>{St.isValidDocument()||(ae=ae.add(Oe))})}).next(()=>m.localDocuments.getOverlayedDocuments($,Y)).next(Ne=>{S=Ne;const Oe=[];for(const St of d){const Pt=eb(St,S.get(St.key).overlayedDocument);null!=Pt&&Oe.push(new Wo(St.key,Pt,Xf(Pt.value.mapValue),An.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,Oe,d)}).next(Ne=>{N=Ne;const Oe=Ne.applyToLocalDocumentSet(S,ae);return m.documentOverlayCache.saveOverlays($,Ne.batchId,Oe)})}).then(()=>({batchId:N.batchId,changes:kI(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.hc[u.currentUser.toKey()];w||(w=new Jn(Nt)),w=w.insert(d,m),u.hc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield O(r,o.changes),yield Hl(r.remoteStore)}catch(o){const u=Xa(o,"Failed to persist write");t.reject(u)}}),PE.apply(this,arguments)}function FE(n,e){return LE.apply(this,arguments)}function LE(){return LE=(0,me.Z)(function*(n,e){const t=We(n);try{const r=yield jA(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.cc.get(u);d&&(Tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.nc=!0:o.modifiedDocuments.size>0?Tt(d.nc):o.removedDocuments.size>0&&(Tt(d.nc),d.nc=!1))}),yield O(t,r,e)}catch(r){yield za(r)}}),LE.apply(this,arguments)}function Xb(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=We(u);m.onlineState=d;let w=!1;m.queries.forEach((C,S)=>{for(const N of S.listeners)N.bu(d)&&(w=!0)}),w&&vy(m)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function JA(n,e,t){return VE.apply(this,arguments)}function VE(){return VE=(0,me.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let d=new Jn(Be.comparator);d=d.insert(u,At.newNoDocument(u,wt.min()));const m=jt().add(u),w=new hh(wt.min(),new Map,new En(Nt),d,m);yield FE(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),M(r)}else yield Dh(r.localStore,e,!1).then(()=>v(r,e,t)).catch(za)}),VE.apply(this,arguments)}function XA(n,e){return UE.apply(this,arguments)}function UE(){return UE=(0,me.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const o=yield ey(t.localStore,e);f(t,r,null),l(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield O(t,o)}catch(o){yield za(o)}}),UE.apply(this,arguments)}function i(n,e,t){return s.apply(this,arguments)}function s(){return s=(0,me.Z)(function*(n,e,t){const r=We(n);try{const o=yield function(u,d){const m=We(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,d).next(S=>(Tt(null!==S),C=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);f(r,e,t),l(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield O(r,o)}catch(o){yield za(o)}}),s.apply(this,arguments)}function c(){return c=(0,me.Z)(function*(n,e){const t=We(n);Jo(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=We(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=Xa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),c.apply(this,arguments)}function l(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function f(n,e,t){const r=We(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function v(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||I(n,r)})}function I(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&($l(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),M(n))}function E(n,e,t){for(const r of t)r instanceof lw?(n.ac.addReference(r.key,e),T(n,r)):r instanceof _y?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||I(n,r.key)):et()}function T(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.oc.add(r),M(n))}function M(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Be(tn.fromString(e)),r=n.fc.next();n.cc.set(r,new ZA(t)),n.uc=n.uc.insert(t,r),Q_(n.remoteStore,new Ja(_i(Nl(t.path)),r,2,vi.at))}}function O(n,e,t){return H.apply(this,arguments)}function H(){return H=(0,me.Z)(function*(n,e,t){const r=We(n),o=[],u=[],d=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{d.push(r._c(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const S=j_.Ci(w.targetId,C);u.push(S)}}))}),yield Promise.all(d),r.sc.Wo(o),yield(m=(0,me.Z)(function*(w,C){const S=We(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>se.forEach(C,$=>se.forEach($.Si,Y=>S.persistence.referenceDelegate.addReference(N,$.targetId,Y)).next(()=>se.forEach($.Di,Y=>S.persistence.referenceDelegate.removeReference(N,$.targetId,Y)))))}catch(N){if(!Wa(N))throw N;Re("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const $=N.targetId;if(!N.fromCache){const Y=S.Ui.get($),Ne=Y.withLastLimboFreeSnapshotVersion(Y.snapshotVersion);S.Ui=S.Ui.insert($,Ne)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),H.apply(this,arguments)}function X(n,e){return ye.apply(this,arguments)}function ye(){return ye=(0,me.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield vE(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(d=>{d.forEach(m=>{m.reject(new xe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield O(t,r.ji)}var o}),ye.apply(this,arguments)}function Fe(n,e){const t=We(n),r=t.cc.get(e);if(r&&r.nc)return jt().add(r.key);{let o=jt();const u=t.rc.get(e);if(!u)return o;for(const d of u){const m=t.ic.get(d);o=o.unionWith(m.view.ju)}return o}}function ze(n,e){return tt.apply(this,arguments)}function tt(){return tt=(0,me.Z)(function*(n,e){const t=We(n),r=yield z_(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&E(t,e.targetId,o.Xu),o}),tt.apply(this,arguments)}function gt(n,e){return Te.apply(this,arguments)}function Te(){return Te=(0,me.Z)(function*(n,e){const t=We(n);return W_(t.localStore,e).then(r=>O(t,r))}),Te.apply(this,arguments)}function Et(n,e,t,r){return on.apply(this,arguments)}function on(){return on=(0,me.Z)(function*(n,e,t,r){const o=We(n),u=yield function(d,m){const w=We(d),C=We(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>C.Tn(S,m).next(N=>N?w.localDocuments.getDocuments(S,N):se.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Hl(o.remoteStore):"acknowledged"===t||"rejected"===t?(f(o,e,r||null),l(o,e),m=e,We(We(o.localStore).mutationQueue).An(m)):et(),yield O(o,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),on.apply(this,arguments)}function eu(){return eu=(0,me.Z)(function*(n,e){const t=We(n);if(Lp(t),eT(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield wy(t,r.toArray());t.dc=!0,yield xp(t.remoteStore,!0);for(const u of o)Q_(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(v(t,d),Dh(t.localStore,d,!0))),$l(t.remoteStore,d)}),yield o,yield wy(t,r),function(u){const d=We(u);d.cc.forEach((m,w)=>{$l(d.remoteStore,w)}),d.ac.fs(),d.cc=new Map,d.uc=new Jn(Be.comparator)}(t),t.dc=!1,yield xp(t.remoteStore,!1)}}),eu.apply(this,arguments)}function wy(n,e,t){return kp.apply(this,arguments)}function kp(){return kp=(0,me.Z)(function*(n,e,t){const r=We(n),o=[],u=[];for(const d of e){let m;const w=r.rc.get(d);if(w&&0!==w.length){m=yield Eh(r.localStore,_i(w[0]));for(const C of w){const S=r.ic.get(C),N=yield ze(r,S);N.snapshot&&u.push(N.snapshot)}}else{const C=yield wE(r.localStore,d);m=yield Eh(r.localStore,C),yield hw(r,Iy(C),d,!1,m.resumeToken)}o.push(m)}return r.sc.Wo(u),o}),kp.apply(this,arguments)}function Iy(n){return II(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function fw(n){const e=We(n);return We(We(e.localStore).persistence).vi()}function pw(n,e,t,r){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,me.Z)(function*(n,e,t,r){const o=We(n);if(o.dc)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield W_(o.localStore,ip(u[0])),m=hh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ir.EMPTY_BYTE_STRING);yield O(o,d,m);break}case"rejected":yield Dh(o.localStore,e,!0),v(o,e,r);break;default:et()}}),Pp.apply(this,arguments)}function gw(n,e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,me.Z)(function*(n,e,t){const r=Lp(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const u=yield wE(r.localStore,o),d=yield Eh(r.localStore,u);yield hw(r,Iy(u),d.targetId,!1,d.resumeToken),Q_(r.remoteStore,d)}for(const o of t)r.rc.has(o)&&(yield Dh(r.localStore,o,!1).then(()=>{$l(r.remoteStore,o),v(r,o)}).catch(za))}}),Fp.apply(this,arguments)}function Lp(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JA.bind(null,e),e.sc.Wo=ME.bind(null,e.eventManager),e.sc.wc=RE.bind(null,e.eventManager),e}function eT(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i.bind(null,e),e}class eS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.It=bh(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Nb(this.persistence,new $_,e.initialUser,this.It)}yc(e){return new Rb(B_.Bs,this.It)}gc(e){return new EE}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tS extends eS{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield eT(r.Ac.syncEngine),yield Hl(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Nb(this.persistence,new $_,e.initialUser,this.It)}Tc(e,t){return new dE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new aI(t,this.persistence);return new oI(e.asyncQueue,r)}yc(e){const t=Xm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?rs.withCacheSize(this.cacheSizeBytes):rs.DEFAULT;return new Qm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,iy(),ho(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new EE}}class WM extends tS{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof ry&&(r.sharedClientState.syncEngine={Fr:Et.bind(null,o),$r:pw.bind(null,o),Br:gw.bind(null,o),vi:fw.bind(null,o),Mr:gt.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,me.Z)(function*(d){yield function Pn(n,e){return eu.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=iy();if(!ry.C(t))throw new xe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Xm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ry(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class tT{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>Xb(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=X.bind(null,r.syncEngine),yield xp(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xE}createDatastore(e){const t=bh(e.databaseInfo.databaseId),r=new Fb(e.databaseInfo);return new Vb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>Xb(this.syncEngine,m,0),d=K_.C()?new K_:new DE,new bE(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const S=new KA(r,o,u,d,m,w);return C&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=We(t);Re("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Th(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function nT(n,e,t){if(!t)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nS(n,e,t,r){if(!0===e&&!0===r)throw new xe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rS(n){if(!Be.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iS(n){if(Be.isDocumentKey(n))throw new xe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=BE(n);throw new xe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function sS(n,e){if(e<=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const oS=new Map;class aS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,nS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mw{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new NC;switch(t.type){case"gapi":return new nI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=oS.get(e);t&&(Re("ComponentProvider","Removing Datastore"),oS.delete(e),t.terminate())}(this),Promise.resolve()}}class jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class Ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ui(this.firestore,e,this._query)}}class _c extends Ui{constructor(e,t,r){super(e,t,Nl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Be(e))}withConverter(e){return new _c(this.firestore,e,this._path)}}function cS(n,e,...t){if(n=(0,en.m9)(n),nT("collection","path",e),n instanceof mw){const r=tn.fromString(e,...t);return iS(r),new _c(n,null,r)}{if(!(n instanceof jn||n instanceof _c))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return iS(r),new _c(n.firestore,null,r)}}function jE(n,e,...t){if(n=(0,en.m9)(n),1===arguments.length&&(e=Qv.R()),nT("doc","path",e),n instanceof mw){const r=tn.fromString(e,...t);return rS(r),new jn(n,null,new Be(r))}{if(!(n instanceof jn||n instanceof _c))throw new xe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return rS(r),new jn(n.firestore,n instanceof _c?n.converter:null,new Be(r))}}function lS(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),(n instanceof jn||n instanceof _c)&&(e instanceof jn||e instanceof _c)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function rT(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),n instanceof Ui&&e instanceof Ui&&n.firestore===e.firestore&&Sm(n._query,e._query)&&n.converter===e.converter}function dS(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class $E{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ZM{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new qt,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new Kb(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class QM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,d){const m=We(u),w=ph(m.It)+"/documents",C={documents:d.map(Y=>lp(m.It,Y))},S=yield m._o("BatchGetDocuments",w,C,d.length),N=new Map;S.forEach(Y=>{const ae=function NA(n,e){return"found"in e?function(t,r){Tt(!!r.found);const o=Zo(t,r.found.name),u=Er(r.found.updateTime),d=new pr({mapValue:{fields:r.found.fields}});return At.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const o=Zo(t,r.missing),u=Er(r.readTime);return At.newNoDocument(o,u)}(n,e):et()}(m.It,Y);N.set(ae.key.toString(),ae)});const $=[];return d.forEach(Y=>{const ae=N.get(Y.toString());Tt(!!ae),$.push(ae)}),$}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new lh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Be.fromPath(o);e.mutations.push(new f_(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const d=We(o),m=ph(d.It)+"/documents",w={writes:u.map(C=>dp(d.It,C))};yield d.ao("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=wt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(wt.min())?An.exists(!1):An.updateTime(t):An.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new xe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return An.updateTime(t)}return An.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JM{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new Ap(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new QM(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!Xd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!p_(t)}return!1}}class XM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=wr.UNAUTHENTICATED,this.clientId=Qv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,me.Z)(function*(m){Re("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Re("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Xa(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function hS(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield vE(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),iT.apply(this,arguments)}function fS(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield oT(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>vc(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>vc(e.remoteStore,u)),n.onlineComponents=e}),sT.apply(this,arguments)}function oT(n){return aT.apply(this,arguments)}function aT(){return aT=(0,me.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield hS(n,new eS)),n.offlineComponents}),aT.apply(this,arguments)}function HE(n){return uT.apply(this,arguments)}function uT(){return uT=(0,me.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield fS(n,new tT)),n.onlineComponents}),uT.apply(this,arguments)}function pS(n){return oT(n).then(e=>e.persistence)}function GE(n){return oT(n).then(e=>e.localStore)}function cT(n){return HE(n).then(e=>e.remoteStore)}function lT(n){return HE(n).then(e=>e.syncEngine)}function Ey(n){return dT.apply(this,arguments)}function dT(){return dT=(0,me.Z)(function*(n){const e=yield HE(n),t=e.eventManager;return t.onListen=Jb.bind(null,e.syncEngine),t.onUnlisten=YA.bind(null,e.syncEngine),t}),dT.apply(this,arguments)}function mS(n,e,t={}){const r=new qt;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const C=new $E({next:N=>{u.enqueueAndForget(()=>sw(o,S));const $=N.docs.has(d);!$&&N.fromCache?w.reject(new xe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&m&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new aw(Nl(d.path),C,{includeMetadataChanges:!0,Nu:!0});return rw(o,S)}(yield Ey(n),n.asyncQueue,e,t,r)})),r.promise}function yS(n,e,t={}){const r=new qt;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const C=new $E({next:N=>{u.enqueueAndForget(()=>sw(o,S)),N.fromCache&&"server"===m.source?w.reject(new xe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new aw(d,C,{includeMetadataChanges:!0,Nu:!0});return rw(o,S)}(yield Ey(n),n.asyncQueue,e,t,r)})),r.promise}class aR{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ap(this,"async_queue_retry"),this.Wc=()=>{const t=ho();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=ho();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=ho();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new qt;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Wa(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Qn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=Rp.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&et()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function hT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class uR{constructor(){this._progressObserver={},this._taskCompletionResolver=new qt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $n extends mw{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new aR,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||vS(this),this._firestoreClient.terminate()}}function Dr(n){return n._firestoreClient||vS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new hI(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new XM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function _S(n,e,t){const r=new qt;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield hS(n,t),yield fS(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===ce.FAILED_PRECONDITION||d.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;ic("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function wS(n){if(n._initialized||n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class wc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wc(Ir.fromBase64String(e))}catch(t){throw new xe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wc(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vp{constructor(e){this._methodName=e}}class zE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const vR=/^__.*__$/;class _R{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Wo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ch(e,this.data,t,this.fieldTransforms)}}class IS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ES(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class WE{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new WE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return KE(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ES(this.sa)&&vR.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class wR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||bh(e)}da(e,t,r,o=!1){return new WE({sa:e,methodName:t,fa:r,path:fn.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Up(n){const e=n._freezeSettings(),t=bh(n._databaseId);return new wR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qE(n,e,t,r,o,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,o);mT("Data must be an object, but it was:",d,r);const m=bS(r,d);let w,C;if(u.merge)w=new ns(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const $=yT(e,N,t);if(!d.contains($))throw new xe(ce.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);AS(S,$)||S.push($)}w=new ns(S),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new _R(new pr(m),w,C)}class yw extends Vp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yw}}function DS(n,e,t){return new WE({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class fT extends Vp{_toFieldTransform(e){return new sp(e.path,new Ol)}isEqual(e){return e instanceof fT}}class IR extends Vp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=DS(this,e,!0),r=this._a.map(u=>Bp(u,t)),o=new kl(r);return new sp(e.path,o)}isEqual(e){return this===e}}class ER extends Vp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=DS(this,e,!0),r=this._a.map(u=>Bp(u,t)),o=new co(r);return new sp(e.path,o)}isEqual(e){return this===e}}class DR extends Vp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Pl(e.It,CI(e.It,this.wa));return new sp(e.path,t)}isEqual(e){return this===e}}function pT(n,e,t,r){const o=n.da(1,e,t);mT("Data must be an object, but it was:",o,r);const u=[],d=pr.empty();xl(r,(w,C)=>{const S=ZE(e,w,t);C=(0,en.m9)(C);const N=o.ca(S);if(C instanceof yw)u.push(S);else{const $=Bp(C,N);null!=$&&(u.push(S),d.set(S,$))}});const m=new ns(u);return new IS(d,m,o.fieldTransforms)}function gT(n,e,t,r,o,u){const d=n.da(1,e,t),m=[yT(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(yT(e,u[$])),w.push(u[$+1]);const C=[],S=pr.empty();for(let $=m.length-1;$>=0;--$)if(!AS(C,m[$])){const Y=m[$];let ae=w[$];ae=(0,en.m9)(ae);const Ne=d.ca(Y);if(ae instanceof yw)C.push(Y);else{const Oe=Bp(ae,Ne);null!=Oe&&(C.push(Y),S.set(Y,Oe))}}const N=new ns(C);return new IS(S,N,d.fieldTransforms)}function CS(n,e,t,r=!1){return Bp(t,n.da(r?4:3,e))}function Bp(n,e){if(TS(n=(0,en.m9)(n)))return mT("Unsupported field value:",e,n),bS(n,e);if(n instanceof Vp)return function(t,r){if(!ES(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Bp(d,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,en.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return CI(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Nn.fromDate(t);return{timestampValue:fh(r.It,o)}}if(t instanceof Nn){const o=new Nn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:fh(r.It,o)}}if(t instanceof zE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wc)return{bytesValue:I_(r.It,t._byteString)};if(t instanceof jn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:E_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${BE(t)}`)}(n,e)}function bS(n,e){const t={};return cI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xl(n,(r,o)=>{const u=Bp(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function TS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Nn||n instanceof zE||n instanceof wc||n instanceof jn||n instanceof Vp)}function mT(n,e,t){if(!TS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=BE(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function yT(n,e,t){if((e=(0,en.m9)(e))instanceof Gl)return e._internalPath;if("string"==typeof e)return ZE(n,e);throw KE("Field path arguments must be of type string or ",n,!1,void 0,t)}const CR=new RegExp("[~\\*/\\[\\]]");function ZE(n,e,t){if(e.search(CR)>=0)throw KE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gl(...e.split("."))._internalPath}catch{throw KE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function KE(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(ce.INVALID_ARGUMENT,m+n+w)}function AS(n,e){return n.some(t=>t.isEqual(e))}class vw{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(YE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bR extends vw{data(){return super.data()}}function YE(n,e){return"string"==typeof e?ZE(n,e):e instanceof Gl?e._internalPath:e._delegate._internalPath}function SS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _w{}function Sh(n,...e){for(const t of e)n=t._apply(n);return n}class TR extends _w{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Up(e.firestore),r=function(o,u,d,m,w,C,S){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){kS(S,C);const Y=[];for(const ae of S)Y.push(OS(m,o,ae));N={arrayValue:{values:Y}}}else N=OS(m,o,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||kS(S,C),N=CS(d,"where",S,"in"===C||"not-in"===C);const $=Wr.create(w,C,N);return function(Y,ae){if(ae.dt()){const Oe=u_(Y);if(null!==Oe&&!Oe.isEqual(ae.field))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Oe.toString()}' and '${ae.field.toString()}'`);const St=Tm(Y);null!==St&&PS(0,ae.field,St)}const Ne=function(Oe,St){for(const Pt of Oe.filters)if(St.indexOf(Pt.op)>=0)return Pt.op;return null}(Y,function(Oe){switch(Oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ae.op));if(null!==Ne)throw new xe(ce.INVALID_ARGUMENT,Ne===ae.op?`Invalid query. You cannot use more than one '${ae.op.toString()}' filter.`:`Invalid query. You cannot use '${ae.op.toString()}' filters with '${Ne.toString()}' filters.`)}(o,$),$}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ui(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Ya(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class SR extends _w{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new sh(o,u);return function(m,w){if(null===Tm(m)){const C=u_(m);null!==C&&PS(0,C,w.field)}}(r,d),d}(e._query,this.ma,this.pa);return new Ui(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ya(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class xS extends _w{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ui(e.firestore,e.converter,c_(e._query,this.Ia,this.Ta))}}class MS extends _w{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=NS(e,this.type,this.Ea,this.Aa);return new Ui(e.firestore,e.converter,(o=t,new Ya((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class RS extends _w{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=NS(e,this.type,this.Ea,this.Aa);return new Ui(e.firestore,e.converter,(o=t,new Ya((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function NS(n,e,t,r){if(t[0]=(0,en.m9)(t[0]),t[0]instanceof vw)return function(o,u,d,m,w){if(!m)throw new xe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const S of ah(o))if(S.field.isKeyField())C.push(rh(u,m.key));else{const N=m.data.field(S.field);if(e_(N))throw new xe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=S.field.canonicalString();throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}C.push(N)}return new Ka(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Up(n.firestore);return function(u,d,m,w,C,S){const N=u.explicitOrderBy;if(C.length>N.length)throw new xe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Y=0;Y<C.length;Y++){const ae=C[Y];if(N[Y].field.isKeyField()){if("string"!=typeof ae)throw new xe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ae}`);if(!Am(u)&&-1!==ae.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ae}' contains a slash.`);const Ne=u.path.child(tn.fromString(ae));if(!Be.isDocumentKey(Ne))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const Oe=new Be(Ne);$.push(rh(d,Oe))}else{const Ne=CS(m,w,ae);$.push(Ne)}}return new Ka($,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function OS(n,e,t){if("string"==typeof(t=(0,en.m9)(t))){if(""===t)throw new xe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Am(e)&&-1!==t.indexOf("/"))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!Be.isDocumentKey(r))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rh(n,new Be(r))}if(t instanceof jn)return rh(n,t._key);throw new xe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${BE(t)}.`)}function kS(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function PS(n,e,t){if(!t.isEqual(e))throw new xe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class vT{convertValue(e,t="none"){switch(cc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return xl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new zE(Xn(e.latitude),Xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jd(e));default:return null}}convertTimestamp(e){const t=uc(e);return new Nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);Tt(b_(r));const o=new qa(r.get(1),r.get(3)),u=new Be(r.popFirst(5));return o.isEqual(t)||Qn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function QE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class FR extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new wc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}class jp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zl extends vw{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ww(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(YE("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ww extends zl{data(e={}){return super.data(e)}}class xh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new jp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ww(this._firestore,this._userDataWriter,r.key,r,new jp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new ww(r._firestore,r._userDataWriter,d.doc.key,d.doc,new jp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new ww(r._firestore,r._userDataWriter,d.doc.key,d.doc,new jp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:LR(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function LR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function FS(n,e){return n instanceof zl&&e instanceof zl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xh&&e instanceof xh&&n._firestore===e._firestore&&rT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Mh extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new wc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}function LS(n,e,t){n=rn(n,jn);const r=rn(n.firestore,$n),o=QE(n.converter,e,t);return Dy(r,[qE(Up(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,An.none())])}function VS(n,e,t,...r){n=rn(n,jn);const o=rn(n.firestore,$n),u=Up(o);let d;return d="string"==typeof(e=(0,en.m9)(e))||e instanceof Gl?gT(u,"updateDoc",n._key,e,t,r):pT(u,"updateDoc",n._key,e),Dy(o,[d.toMutation(n._key,An.exists(!0))])}function US(n,...e){var t,r,o;n=(0,en.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||hT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(hT(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,S;if(n instanceof jn)C=rn(n.firestore,$n),S=Nl(n._key.path),w={next:N=>{e[d]&&e[d](_T(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=rn(n,Ui);C=rn(N.firestore,$n),S=N._query;const $=new Mh(C);w={next:Y=>{e[d]&&e[d](new xh(C,$,N,Y))},error:e[d+1],complete:e[d+2]},SS(n._query)}return function(N,$,Y,ae){const Ne=new $E(ae),Oe=new aw($,Ne,Y);return N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return rw(yield Ey(N),Oe)})),()=>{Ne.bc(),N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return sw(yield Ey(N),Oe)}))}}(Dr(C),S,m,w)}function Dy(n,e){return function(t,r){const o=new qt;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function QA(n,e,t){return PE.apply(this,arguments)}(yield lT(t),r,o)})),o.promise}(Dr(n),e)}function _T(n,e,t){const r=t.docs.get(e._key),o=new Mh(n);return new zl(n,o,e._key,r,new jp(t.hasPendingWrites,t.fromCache),e.converter)}const qR={maxAttempts:5};class BS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Up(e)}set(e,t,r){this._verifyNotCommitted();const o=Rh(e,this._firestore),u=QE(o.converter,t,r),d=qE(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,An.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Rh(e,this._firestore);let d;return d="string"==typeof(t=(0,en.m9)(t))||t instanceof Gl?gT(this._dataReader,"WriteBatch.update",u._key,t,r,o):pT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rh(e,this._firestore);return this._mutations=this._mutations.concat(new lh(t._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rh(n,e){if((n=(0,en.m9)(n)).firestore!==e)throw new xe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ZR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Up(e)}get(e){const t=Rh(e,this._firestore),r=new FR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return et();const u=o[0];if(u.isFoundDocument())return new vw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new vw(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const o=Rh(e,this._firestore),u=QE(o.converter,t,r),d=qE(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Rh(e,this._firestore);let d;return d="string"==typeof(t=(0,en.m9)(t))||t instanceof Gl?gT(this._dataReader,"Transaction.update",u._key,t,r,o):pT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Rh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rh(e,this._firestore),r=new Mh(this._firestore);return super.get(e).then(o=>new zl(this._firestore,r,t._key,o._document,new jp(!1,!1),t.converter))}}function wT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function $S(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function HS(){if(!function BC(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){rc=es.SDK_VERSION,(0,es._registerComponent)(new Pg.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new $n(new tI(t.getProvider("auth-internal")),new Zd(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,es.registerVersion)(X0,"3.7.3",n),(0,es.registerVersion)(X0,"3.7.3","esm2017")}();class Iw{constructor(e){this._delegate=e}static fromBase64String(e){return HS(),new Iw(wc.fromBase64String(e))}static fromUint8Array(e){return $S(),new Iw(wc.fromUint8Array(e))}toBase64(){return HS(),this._delegate.toBase64()}toUint8Array(){return $S(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IT(n){return function rN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class iN{enableIndexedDbPersistence(e,t){return function lR(n,e){wS(n=rn(n,$n));const t=Dr(n),r=n._freezeSettings(),o=new tT;return _S(t,o,new tS(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dR(n){wS(n=rn(n,$n));const e=Dr(n),t=n._freezeSettings(),r=new tT;return _S(e,r,new WM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hR(n){if(n._initialized&&!n._terminated)throw new xe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qt;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!ks.C())return Promise.resolve();const o=r+"main";yield ks.delete(o)}),function(r){return t.apply(this,arguments)})(Xm(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class GS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ic("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function uS(n,e,t,r={}){var o;const u=(n=rn(n,mw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ic("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=wr.MOCK_USER;else{d=(0,en.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new wr(w)}n._authCredentials=new OC(new Kv(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function pR(n){return function eR(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield pS(n),t=yield cT(n);return e.setNetworkEnabled(!0),function(r){const o=We(r);return o._u.delete(0),sy(o)}(t)}))}(Dr(n=rn(n,$n)))}(this._delegate)}disableNetwork(){return function gR(n){return function tR(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield pS(n),t=yield cT(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=We(o);u._u.add(0),yield Th(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Dr(n=rn(n,$n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,nS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fR(n){return function(e){const t=new qt;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function a(n,e){return c.apply(this,arguments)}(yield lT(e),t)})),t.promise}(Dr(n=rn(n,$n)))}(this._delegate)}onSnapshotsInSync(e){return function WR(n,e){return function iR(n,e){const t=new $E(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Ey(n),o=t,We(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Ey(n),o=t,void We(r).Ru.delete(o);var r,o}))}}(Dr(n=rn(n,$n)),hT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cy(this,cS(this._delegate,e))}catch(t){throw os(t,"collection()","Firestore.collection()")}}doc(e){try{return new ea(this,jE(this._delegate,e))}catch(t){throw os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new as(this,function qM(n,e){if(n=rn(n,mw),nT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ui(n,null,(t=e,new Ya(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function KR(n,e,t){n=rn(n,$n);const r=Object.assign(Object.assign({},qR),t);return function(o){if(o.maxAttempts<1)throw new xe(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const m=new qt;return o.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const w=yield function gS(n){return HE(n).then(e=>e.datastore)}(o);new JM(o.asyncQueue,w,d,u,m).run()})),m.promise}(Dr(n),o=>e(new ZR(n,o)),r)}(this._delegate,t=>e(new zS(this,t)))}batch(){return Dr(this._delegate),new WS(new BS(this._delegate,e=>Dy(this._delegate,e)))}loadBundle(e){return function mR(n,e){const t=Dr(n=rn(n,$n)),r=new uR;return function sR(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return dS(w,C);if(w instanceof ArrayBuffer)return dS(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new ZM(w,d);var w}(t,bh(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function zM(n,e,t){const r=We(n);var o;(o=(0,me.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function($,Y){const ae=We($),Ne=Er(Y.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",Oe=>ae.Ns.getBundleMetadata(Oe,Y.id)).then(Oe=>!!Oe&&Oe.createTime.compareTo(Ne)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(Yb(w));const C=new cw(w,u.localStore,d.It);let S=yield d.mc();for(;S;){const $=yield C.Fu(S);$&&m._updateProgress($),S=yield d.mc()}const N=yield C.complete();return yield O(u,N.Lu,void 0),yield function($,Y){const ae=We($);return ae.persistence.runTransaction("Save bundle","readwrite",Ne=>ae.Ns.saveBundleMetadata(Ne,Y))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return ic("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield lT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function yR(n,e){return function oR(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=We(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield GE(n),e)}))}(Dr(n=rn(n,$n)),e).then(t=>t?new Ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new as(this,t):null)}}class JE extends vT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Iw(new wc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ea.forKey(t,this.firestore,null)}}class zS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new JE(e)}get(e){const t=Hp(e);return this._delegate.get(t).then(r=>new Ew(this._firestore,new zl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Hp(e);return r?(wT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Hp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Hp(e);return this._delegate.delete(t),this}}class WS{constructor(e){this._delegate=e}set(e,t,r){const o=Hp(e);return r?(wT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Hp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Hp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $p{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ww(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Dw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=$p.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new $p(e,new JE(e),t),o.set(t,u)),u}}$p.INSTANCES=new WeakMap;class ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JE(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ea(t,new jn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new ea(t,new jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cy(this.firestore,cS(this._delegate,e))}catch(t){throw os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,en.m9)(e))instanceof jn&&lS(this._delegate,e)}set(e,t){t=wT("DocumentReference.set",t);try{return t?LS(this._delegate,e,t):LS(this._delegate,e)}catch(r){throw os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?VS(this._delegate,e):VS(this._delegate,e,t,...r)}catch(o){throw os(o,"updateDoc()","DocumentReference.update()")}}delete(){return function GR(n){return Dy(rn(n.firestore,$n),[new lh(n._key,An.none())])}(this._delegate)}onSnapshot(...e){const t=qS(e),r=ZS(e,o=>new Ew(this.firestore,new zl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return US(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function UR(n){n=rn(n,jn);const e=rn(n.firestore,$n),t=Dr(e),r=new Mh(e);return function nR(n,e){const t=new qt;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield function(w,C){const S=We(w);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Xa(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield GE(n),e,t);var r})),t.promise}(t,n._key).then(o=>new zl(e,r,n._key,o,new jp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function BR(n){n=rn(n,jn);const e=rn(n.firestore,$n);return mS(Dr(e),n._key,{source:"server"}).then(t=>_T(e,n,t))}(this._delegate):function VR(n){n=rn(n,jn);const e=rn(n.firestore,$n);return mS(Dr(e),n._key).then(t=>_T(e,n,t))}(this._delegate),t.then(r=>new Ew(this.firestore,new zl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ea(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}function os(n,e,t){return n.message=n.message.replace(e,t),n}function qS(n){for(const e of n)if("object"==typeof e&&!IT(e))return e;return{}}function ZS(n,e){var t,r;let o;return o=IT(n[0])?n[0]:IT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Ew{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return FS(this._delegate,e._delegate)}}class Dw extends Ew{data(e){const t=this._delegate.data(e);return function RC(n,e){n||et()}(void 0!==t),t}}class as{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JE(e)}where(e,t,r){try{return new as(this.firestore,Sh(this._delegate,function AR(n,e,t){const r=e,o=YE("where",n);return new TR(o,r,t)}(e,t,r)))}catch(o){throw os(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new as(this.firestore,Sh(this._delegate,function xR(n,e="asc"){const t=e,r=YE("orderBy",n);return new SR(r,t)}(e,t)))}catch(r){throw os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new as(this.firestore,Sh(this._delegate,function MR(n){return sS("limit",n),new xS("limit",n,"F")}(e)))}catch(t){throw os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new as(this.firestore,Sh(this._delegate,function RR(n){return sS("limitToLast",n),new xS("limitToLast",n,"L")}(e)))}catch(t){throw os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new as(this.firestore,Sh(this._delegate,function NR(...n){return new MS("startAt",n,!0)}(...e)))}catch(t){throw os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new as(this.firestore,Sh(this._delegate,function OR(...n){return new MS("startAfter",n,!1)}(...e)))}catch(t){throw os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new as(this.firestore,Sh(this._delegate,function kR(...n){return new RS("endBefore",n,!1)}(...e)))}catch(t){throw os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new as(this.firestore,Sh(this._delegate,function PR(...n){return new RS("endAt",n,!0)}(...e)))}catch(t){throw os(t,"endAt()","Query.endAt()")}}isEqual(e){return rT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function $R(n){n=rn(n,Ui);const e=rn(n.firestore,$n),t=Dr(e),r=new Mh(e);return function rR(n,e){const t=new qt;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield z_(o,u,!0),w=new NE(u,m.Hi),C=w.Wu(m.documents),S=w.applyChanges(C,!1);d.resolve(S.snapshot)}catch(m){const w=Xa(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield GE(n),e,t);var r})),t.promise}(t,n._query).then(o=>new xh(e,r,n,o))}(this._delegate):"server"===e?.source?function HR(n){n=rn(n,Ui);const e=rn(n.firestore,$n),t=Dr(e),r=new Mh(e);return yS(t,n._query,{source:"server"}).then(o=>new xh(e,r,n,o))}(this._delegate):function jR(n){n=rn(n,Ui);const e=rn(n.firestore,$n),t=Dr(e),r=new Mh(e);return SS(n._query),yS(t,n._query).then(o=>new xh(e,r,n,o))}(this._delegate),t.then(r=>new ET(this.firestore,new xh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=qS(e),r=ZS(e,o=>new ET(this.firestore,new xh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return US(this._delegate,t,r)}withConverter(e){return new as(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}class oN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Dw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ET{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new as(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Dw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new oN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Dw(this._firestore,r))})}isEqual(e){return FS(this._delegate,e._delegate)}}class Cy extends as{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ea(this.firestore,e):null}doc(e){try{return new ea(this.firestore,void 0===e?jE(this._delegate):jE(this._delegate,e))}catch(t){throw os(t,"doc()","CollectionReference.doc()")}}add(e){return function zR(n,e){const t=rn(n.firestore,$n),r=jE(n),o=QE(n.converter,e);return Dy(t,[qE(Up(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ea(this.firestore,t))}isEqual(e){return lS(this._delegate,e._delegate)}withConverter(e){return new Cy(this.firestore,this._delegate.withConverter(e?$p.getInstance(this.firestore,e):null))}}function Hp(n){return rn(n,jn)}class DT{constructor(...e){this._delegate=new Gl(...e)}static documentId(){return new DT(fn.keyField().canonicalString())}isEqual(e){return(e=(0,en.m9)(e))instanceof Gl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function QR(){return new fT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gp(e)}static delete(){const e=function YR(){return new yw("deleteField")}();return e._methodName="FieldValue.delete",new Gp(e)}static arrayUnion(...e){const t=function JR(...n){return new IR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Gp(t)}static arrayRemove(...e){const t=function XR(...n){return new ER("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Gp(t)}static increment(e){const t=function eN(n){return new DR("increment",n)}(e);return t._methodName="FieldValue.increment",new Gp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const aN={Firestore:GS,GeoPoint:zE,Timestamp:Nn,Blob:Iw,Transaction:zS,WriteBatch:WS,DocumentReference:ea,DocumentSnapshot:Ew,Query:as,QueryDocumentSnapshot:Dw,QuerySnapshot:ET,CollectionReference:Cy,FieldPath:DT,FieldValue:Gp,setLogLevel:function sN(n){!function eI(n){Ga.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function cN(n){(function uN(n,e){n.INTERNAL.registerComponent(new Pg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},aN)))})(n,(e,t)=>new GS(e,t,new iN)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(l0.Z);var lN=P(6451),XE=P(5363),dN=P(6063);class hN extends ti.x{constructor(e=1/0,t=1/0,r=dN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var fN=P(3099);function KS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,fN.B)({connector:()=>new hN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function YS(n,e){return(0,Mo.m)(e)?Bn(()=>n,e):Bn(()=>n)}var CT=P(9468);P(5867);const TT=new Map,JS={activated:!1,tokenObservers:[]},vN={initialized:!1,enabled:!1};function Ii(n){return TT.get(n)||Object.assign({},JS)}function tD(){return vN}class CN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new en.BH,yield function bN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new en.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const us=new en.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ex(n){if(!Ii(n).activated)throw us.create("use-before-activation",{appName:n.name})}function xT(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,me.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const Y=yield d.getHeartbeatsHeader();Y&&(u["X-Firebase-Client"]=Y)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,C;try{w=yield fetch(n,m)}catch(Y){throw us.create("fetch-network-error",{originalErrorMessage:null===(r=Y)||void 0===r?void 0:r.message})}if(200!==w.status)throw us.create("fetch-status-error",{httpStatus:w.status});try{C=yield w.json()}catch(Y){throw us.create("fetch-parse-error",{originalErrorMessage:null===(o=Y)||void 0===o?void 0:o.message})}const S=C.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw us.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const N=1e3*Number(S[1]),$=Date.now();return{token:C.token,expireTimeMillis:$+N,issuedAtTimeMillis:$}}),MT.apply(this,arguments)}function xN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Cw="firebase-app-check-store";let iD=null;function nx(){return iD||(iD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(us.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(Cw,{keyPath:"compositeKey"})}}catch(r){e(us.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),iD)}function RT(){return RT=(0,me.Z)(function*(n,e){const r=(yield nx()).transaction(Cw,"readwrite"),u=r.objectStore(Cw).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(us.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),RT.apply(this,arguments)}const bw=new jo.Yd("@firebase/app-check");function kT(n,e){return(0,en.hl)()?function ON(n,e){return function rx(n,e){return RT.apply(this,arguments)}(function sx(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{bw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ox(){return tD().enabled}function ax(){return FT.apply(this,arguments)}function FT(){return FT=(0,me.Z)(function*(){const n=tD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),FT.apply(this,arguments)}const UN={error:"UNKNOWN_ERROR"};function BN(n){return en.US.encodeString(JSON.stringify(n),!1)}function sD(n){return LT.apply(this,arguments)}function LT(){return LT=(0,me.Z)(function*(n,e=!1){const t=n.app;ex(t);const r=Ii(t);let u,o=r.token;if(o&&!by(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(by(w)?o=w:yield kT(t,void 0))}if(!e&&o&&by(o))return{token:o.token};let m,d=!1;if(ox()){r.exchangeTokenPromise||(r.exchangeTokenPromise=xT(xN(t,yield ax()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const w=yield r.exchangeTokenPromise;return yield kT(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield Ii(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?bw.warn(w.message):bw.error(w),u=w}return o?u?m=by(o)?{token:o.token,internalError:u}:lx(u):(m={token:o.token},r.token=o,yield kT(t,o)):m=lx(u),d&&cx(t,m),m}),LT.apply(this,arguments)}function UT(n,e){const t=Ii(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ux(n){const{app:e}=n,t=Ii(e);let r=t.tokenRefresher;r||(r=function jN(n){const{app:e}=n;return new CN((0,me.Z)(function*(){let r;if(r=Ii(e).token?yield sD(n,!0):yield sD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ii(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function cx(n,e){const t=Ii(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function by(n){return n.expireTimeMillis-Date.now()>0}function lx(n){return{token:BN(UN),error:n}}class $N{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ii(this.app);for(const t of e)UT(this.app,t.next);return Promise.resolve()}}const vx="app-check-internal";!function nO(){(0,es._registerComponent)(new Pg.wA("app-check",n=>function HN(n,e){return new $N(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(vx).initialize()})),(0,es._registerComponent)(new Pg.wA(vx,n=>function GN(n){return{getToken:e=>sD(n,e),addTokenListener:e=>function VT(n,e,t,r){const{app:o}=n,u=Ii(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&by(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),ux(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ux(n))}(n,"INTERNAL",e),removeTokenListener:e=>UT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,es.registerVersion)("@firebase/app-check","0.5.17")}();class HT{constructor(){return(0,Rr.vb)("app-check")}}typeof window<"u"&&window;var aO=P(127);const wx=new g.OlP("angularfire2.auth.use-emulator"),Ix=new g.OlP("angularfire2.auth.settings"),Ex=new g.OlP("angularfire2.auth.tenant-id"),Dx=new g.OlP("angularfire2.auth.langugage-code"),Cx=new g.OlP("angularfire2.auth.use-device-language"),bx=new g.OlP("angularfire.auth.persistence"),Tx=(n,e,t,r,o,u,d,m)=>(0,ao.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,S]of Object.entries(d))w.settings[C]=S;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let Tw=(()=>{class n{constructor(t,r,o,u,d,m,w,C,S,N,$,Y){const ae=new ti.x,Ne=st(void 0).pipe((0,XE.Q)(d.outsideAngular),Bn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,1277)))),(0,ot.U)(()=>(0,ao.on)(t,u,r)),(0,ot.U)(Oe=>Tx(Oe,u,m,C,S,N,w,$)),KS({bufferSize:1,refCount:!1}));if(cr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{Ne.pipe(ee()).subscribe();const St=Ne.pipe(Bn(Ut=>Ut.getRedirectResult().then(Ft=>Ft,()=>null)),Rr.iC,KS({bufferSize:1,refCount:!1})),Pt=Ne.pipe(Bn(Ut=>new Sr.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>Ut.onAuthStateChanged(Gt=>Ft.next(Gt),Gt=>Ft.error(Gt),()=>Ft.complete()))})))),Vt=Ne.pipe(Bn(Ut=>new Sr.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>Ut.onIdTokenChanged(Gt=>Ft.next(Gt),Gt=>Ft.error(Gt),()=>Ft.complete()))}))));this.authState=St.pipe(YS(Pt),(0,CT.R)(d.outsideAngular),(0,XE.Q)(d.insideAngular)),this.user=St.pipe(YS(Vt),(0,CT.R)(d.outsideAngular),(0,XE.Q)(d.insideAngular)),this.idToken=this.user.pipe(Bn(Ut=>Ut?(0,hn.D)(Ut.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Bn(Ut=>Ut?(0,hn.D)(Ut.getIdTokenResult()):st(null))),this.credential=(0,lN.T)(St,ae,this.authState.pipe(D(Ut=>!Ut))).pipe((0,ot.U)(Ut=>Ut?.user?Ut:null),(0,CT.R)(d.outsideAngular),(0,XE.Q)(d.insideAngular))}return(0,ao.pX)(this,Ne,u,{spy:{apply:(Oe,St,Pt)=>{(Oe.startsWith("signIn")||Oe.startsWith("createUser"))&&Pt.then(Vt=>ae.next(Vt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ao.Dh),g.LFG(ao.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Rr.HU),g.LFG(wx,8),g.LFG(Ix,8),g.LFG(Ex,8),g.LFG(Dx,8),g.LFG(Cx,8),g.LFG(bx,8),g.LFG(HT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Ax(n,e){return function cO(n,e=rC.z){return new Sr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function zT(n,e){return Ax(n,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function aD(n,e){return zT(n,e).pipe(Fu(void 0),dv(),(0,ot.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(S=>S.doc.ref.isEqual(d.ref)),C=t?.payload.docs.find(S=>S.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function Sx(n,e,t){return aD(n,t).pipe(Ct((r,o)=>function dO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return WT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return WT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return WT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function c0(n,e=Cs.y){return n=n??iC,(0,_r.e)((t,r)=>{let o,u=!0;t.subscribe((0,Zn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,ot.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function WT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function xx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Mx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=aD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ot.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Fu(void 0),dv(),D(([r,o])=>o.length>0||!r),(0,ot.U)(([r,o])=>o),Rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ct((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xx(e);return Sx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Rr.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(Rr.iC)}add(e){return this.ref.add(e)}doc(e){return new Rx(this.ref.doc(e),this.afs)}}class Rx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=kx(r,t);return new Mx(o,u,this.afs)}snapshotChanges(){return function lO(n,e){return Ax(n,e).pipe(Fu(void 0),dv(),(0,ot.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,hn.D)(this.ref.get(e)).pipe(Rr.iC)}}class fO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?aD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),D(t=>t.length>0),Rr.iC):aD(this.query,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ct((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xx(e);return Sx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Rr.iC)}valueChanges(e={}){return zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Rr.iC)}get(e){return(0,hn.D)(this.query.get(e)).pipe(Rr.iC)}}const Nx=new g.OlP("angularfire2.enableFirestorePersistence"),Ox=new g.OlP("angularfire2.firestore.persistenceSettings"),pO=new g.OlP("angularfire2.firestore.settings"),gO=new g.OlP("angularfire2.firestore.use-emulator");function kx(n,e=(t=>t)){return{query:e(n),ref:n}}let Px=(()=>{class n{constructor(t,r,o,u,d,m,w,C,S,N,$,Y,ae,Ne,Oe,St,Pt){this.schedulers=w;const Vt=(0,ao.on)(t,m,r),Ut=S;N&&Tx(Vt,m,$,ae,Ne,Oe,Y,St),[this.firestore,this.persistenceEnabled$]=(0,ao.cc)(`${Vt.name}.firestore`,"AngularFirestore",Vt.name,()=>{const Ft=m.runOutsideAngular(()=>Vt.firestore());if(u&&Ft.settings(u),Ut&&Ft.useEmulator(...Ut),o&&!cr(d)){const Gt=()=>{try{return(0,hn.D)(Ft.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Zr){return typeof console<"u"&&console.warn(Zr),st(!1)}};return[Ft,m.runOutsideAngular(Gt)]}return[Ft,st(!1)]},[u,Ut,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=kx(o,r),m=this.schedulers.ngZone.run(()=>u);return new Mx(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new fO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Rx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ao.Dh),g.LFG(ao.xv,8),g.LFG(Nx,8),g.LFG(pO,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Rr.HU),g.LFG(Ox,8),g.LFG(gO,8),g.LFG(Tw,8),g.LFG(wx,8),g.LFG(Ix,8),g.LFG(Ex,8),g.LFG(Dx,8),g.LFG(Cx,8),g.LFG(bx,8),g.LFG(HT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mO=(()=>{class n{constructor(){aO.Z.registerVersion("angularfire",Rr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Nx,useValue:!0},{provide:Ox,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Px]}),n})(),uD=(()=>{class n{constructor(t,r){this.fireauth=t,this.router=r,this.getUid()}getUid(){this.fireauth.currentUser.then(t=>{this.uid=t?.uid})}gett(){let t;return this.fireauth.currentUser.then(r=>t=r?.uid),t}login(t,r){this.fireauth.signInWithEmailAndPassword(t,r).then(()=>{this.getUid(),console.log(this.uid),localStorage.setItem("token","true"),this.router.navigate(["dashboard"])},o=>{alert("Somethng went wrong"),this.router.navigate(["/login"])})}register(t,r){this.fireauth.createUserWithEmailAndPassword(t,r).then(()=>{alert("Registration successful"),this.router.navigate(["/login"])},o=>{alert(o.message),this.router.navigate(["/register"])})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},t=>{alert(t.message)})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Tw),g.LFG(hr))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yO=(()=>{class n{constructor(t,r,o){this.firestore=t,this.authhh=r,this.fireauth=o,this.uid="",this.getUid(),this.firestoreCollection=t.collection("todo",u=>u.where("user_id","==",this.uid))}getUid(){this.fireauth.currentUser.then(t=>{this.uid=t?.uid})}addToDo(t,r){this.firestoreCollection.add({title:t,isDone:!1,user_id:r})}updateTodoStatus(t,r){this.firestoreCollection.doc(t).update({isDone:r})}deleteTodo(t){this.firestoreCollection.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Px),g.LFG(uD),g.LFG(Tw))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vO(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"li",15)(1,"i",16),g.NdJ("click",function(){const u=g.CHM(t).$implicit,d=g.oxw();return g.KtG(d.onStatusChange(u.id,!u.isDone))}),g.qZA(),g.TgZ(2,"span"),g._uU(3),g.qZA(),g.TgZ(4,"span",17),g.NdJ("click",function(){const u=g.CHM(t).$implicit,d=g.oxw();return g.KtG(d.onDelete(u.id))}),g._UZ(5,"i",18),g.qZA()()}if(2&n){const t=e.$implicit;g.xp6(1),g.Q6J("ngClass",t.isDone?"fa-solid fa-circle-check":"fa-regular fa-circle"),g.xp6(2),g.hij(" ",t.title,"")}}let _O=(()=>{class n{constructor(t,r,o){this.todosvc=t,this.authsvc=r,this.fireauth=o,this.todos=[],this.uid=""}ngOnInit(){this.todosvc.firestoreCollection.valueChanges({idField:"id"}).subscribe(t=>{this.todos=t.sort((r,o)=>r.isDone-o.isDone)}),this.getUID()}getUID(){this.fireauth.currentUser.then(t=>{this.uid=t?.uid})}onClick(t){this.getUID(),this.authsvc.getUid(),console.log("mn el Service  "+this.authsvc.uid),t.value&&(this.todosvc.addToDo(t.value,this.uid),t.value="")}onStatusChange(t,r){this.todosvc.updateTodoStatus(t,r)}onDelete(t){this.todosvc.deleteTodo(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(yO),g.Y36(uD),g.Y36(Tw))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-dashboard"]],decls:16,vars:1,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card","shadow-lg","mt-5"],[1,"card-header","text-center","py-center","border-0"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group-item","mb-2","border"],[1,"input-group","p-0"],["type","text","placeholder","Type a Task",1,"form-control","shadow-none","border-0","py-3"],["titleInput",""],[1,"btn","text-success",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","rounded-3"],[1,"text-success",3,"ngClass","click"],[1,"float-end","text-secondary",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(t,r){if(1&t){const o=g.EpF();g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),g._uU(6,"To Do List"),g.qZA()(),g.TgZ(7,"div",6)(8,"ul",7)(9,"li",8)(10,"div",9),g._UZ(11,"input",10,11),g.TgZ(13,"button",12),g.NdJ("click",function(){g.CHM(o);const d=g.MAs(12);return g.KtG(r.onClick(d))}),g._UZ(14,"i",13),g.qZA()()(),g.YNc(15,vO,6,2,"li",14),g.qZA()()()()()()}2&t&&(g.xp6(15),g.Q6J("ngForOf",r.todos))},dependencies:[un,Bs]}),n})(),Fx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),zp=(()=>{class n extends Fx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Ic=new g.OlP("NgValueAccessor"),EO={provide:Ic,useExisting:(0,g.Gpc)(()=>Aw),multi:!0},CO=new g.OlP("CompositionEventMode");let Aw=(()=>{class n extends Fx{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function DO(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(CO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([EO]),g.qOj]}),n})();const Bi=new g.OlP("NgValidators"),Oh=new g.OlP("NgAsyncValidators");function qx(n){return null!=n}function Zx(n){return(0,g.QGY)(n)?(0,hn.D)(n):n}function Kx(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Yx(n,e){return e.map(t=>t(n))}function Qx(n){return n.map(e=>function AO(n){return!n.validate}(e)?e:t=>e.validate(t))}function qT(n){return null!=n?function Jx(n){if(!n)return null;const e=n.filter(qx);return 0==e.length?null:function(t){return Kx(Yx(t,e))}}(Qx(n)):null}function ZT(n){return null!=n?function Xx(n){if(!n)return null;const e=n.filter(qx);return 0==e.length?null:function(t){return function wO(...n){const e=(0,fi.jO)(n),{args:t,keys:r}=Da(n),o=new Sr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let S=0;S<d;S++){let N=!1;(0,As.Xf)(t[S]).subscribe((0,Zn.x)(u,$=>{N||(N=!0,C--),m[S]=$},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?So(r,m):m),u.complete())}))}});return e?o.pipe(ba(e)):o}(Yx(t,e).map(Zx)).pipe((0,ot.U)(Kx))}}(Qx(n)):null}function eM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function KT(n){return n?Array.isArray(n)?n:[n]:[]}function lD(n,e){return Array.isArray(n)?n.includes(e):n===e}function rM(n,e){const t=KT(e);return KT(n).forEach(o=>{lD(t,o)||t.push(o)}),t}function iM(n,e){return KT(e).filter(t=>!lD(n,t))}class sM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ZT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class cs extends sM{get formDirective(){return null}get path(){return null}}class kh extends sM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oM{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let YT=(()=>{class n extends oM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(kh,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})(),QT=(()=>{class n extends oM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(cs,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();const Sw="VALID",hD="INVALID",Ty="PENDING",xw="DISABLED";function tA(n){return(fD(n)?n.validators:n)||null}function uM(n){return Array.isArray(n)?qT(n):n||null}function nA(n,e){return(fD(e)?e.asyncValidators:n)||null}function cM(n){return Array.isArray(n)?ZT(n):n||null}function fD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class hM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=uM(this._rawValidators),this._composedAsyncValidatorFn=cM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Sw}get invalid(){return this.status===hD}get pending(){return this.status==Ty}get disabled(){return this.status===xw}get enabled(){return this.status!==xw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=uM(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=cM(e)}addValidators(e){this.setValidators(rM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iM(e,this._rawAsyncValidators))}hasValidator(e){return lD(this._rawValidators,e)}hasAsyncValidator(e){return lD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ty,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sw||this.status===Ty)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xw:Sw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ty,this._hasOwnPendingAsyncValidator=!0;const t=Zx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?xw:this.errors?hD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ty)?Ty:this._anyControlsHaveStatus(hD)?hD:Sw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class rA extends hM{constructor(e,t,r){super(tA(t),nA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function dM(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new g.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function lM(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Mw(n,e){iA(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function FO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&fM(n,e)})}(n,e),function VO(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function LO(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&fM(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function PO(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function mD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function iA(n,e){const t=function tM(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(eM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function nM(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(eM(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();mD(e._rawValidators,o),mD(e._rawAsyncValidators,o)}function fM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const HO={provide:cs,useExisting:(0,g.Gpc)(()=>Nw)},Rw=(()=>Promise.resolve())();let Nw=(()=>{class n extends cs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new rA({},qT(t),ZT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Rw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Mw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Rw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Rw.then(()=>{const r=this._findContainer(t.path),o=new rA({});(function pM(n,e){iA(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Rw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Rw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function mM(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Bi,10),g.Y36(Oh,10))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([HO]),g.qOj]}),n})();function yM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function vM(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const _M=class extends hM{constructor(e=null,t,r){super(tA(t),nA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=vM(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},WO={provide:kh,useExisting:(0,g.Gpc)(()=>vD)},EM=(()=>Promise.resolve())();let vD=(()=>{class n extends kh{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new _M,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function oA(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Aw?t=u:function jO(n){return Object.getPrototypeOf(n.constructor)===zp}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function sA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Mw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){EM.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,g.D6c)(r);EM.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function pD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(cs,9),g.Y36(Bi,10),g.Y36(Oh,10),g.Y36(Ic,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([WO]),g.qOj,g.TTD]}),n})(),aA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),CM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),mk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[CM]}),n})(),yk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[mk]}),n})();const _k=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}ngOnInit(){}login(){""!==this.email&&""!==this.password&&(this.auth.login(this.email,this.password),this.email="",this.password=""),setTimeout(()=>{this.getuid()},2e3)}getuid(){this.auth.getUid()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(uD))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:31,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","id","exampleInputEmail1","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","id","exampleInputPassword1","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["routerLink","/register",2,"text-decoration","none"],[1,"text-danger"],[1,"col-md-6","text-dark",2,"text-decoration","none"],["type","button",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1),g._UZ(2,"div",2),g.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),g._uU(9," Login "),g.qZA()(),g.TgZ(10,"div",6)(11,"label",8),g._uU(12,"Email address"),g.qZA(),g.TgZ(13,"input",9),g.NdJ("ngModelChange",function(u){return r.email=u}),g.qZA()(),g.TgZ(14,"div",6)(15,"label",10),g._uU(16,"Password"),g.qZA(),g.TgZ(17,"input",11),g.NdJ("ngModelChange",function(u){return r.password=u}),g.qZA()(),g.TgZ(18,"button",12),g.NdJ("click",function(){return r.login()}),g._uU(19,"Login"),g.qZA(),g.TgZ(20,"div",13)(21,"div",14)(22,"a",15),g._uU(23,"Need Account ? "),g.TgZ(24,"span",16),g._uU(25,"Register"),g.qZA()()(),g.TgZ(26,"div",17),g._uU(27,"Forget Password"),g.qZA()()(),g.TgZ(28,"button",18),g.NdJ("click",function(){return r.getuid()}),g._uU(29,"Get uid"),g.qZA()()()(),g._UZ(30,"div",2),g.qZA()()),2&t&&(g.xp6(13),g.Q6J("ngModel",r.email),g.xp6(4),g.Q6J("ngModel",r.password))},dependencies:[_f,aA,Aw,YT,QT,vD,Nw]}),n})()},{path:"dashboard",component:_O},{path:"register",component:(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}ngOnInit(){}register(){""!==this.email&&""!==this.password&&(this.auth.register(this.email,this.password),this.email="",this.password="")}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(uD))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-register"]],decls:27,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["routerLink","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1),g._UZ(2,"div",2),g.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),g._uU(9," Register "),g.qZA()(),g.TgZ(10,"div",6)(11,"label",8),g._uU(12,"Email address"),g.qZA(),g.TgZ(13,"input",9),g.NdJ("ngModelChange",function(u){return r.email=u}),g.qZA()(),g.TgZ(14,"div",6)(15,"label",10),g._uU(16,"Password"),g.qZA(),g.TgZ(17,"input",11),g.NdJ("ngModelChange",function(u){return r.password=u}),g.qZA()(),g.TgZ(18,"button",12),g.NdJ("click",function(){return r.register()}),g._uU(19,"Register"),g.qZA(),g.TgZ(20,"div",13)(21,"div",14)(22,"a",15),g._uU(23,"Have an account ? "),g.TgZ(24,"span",16),g._uU(25,"Login"),g.qZA()()()()()()()(),g._UZ(26,"div",2),g.qZA()()),2&t&&(g.xp6(13),g.Q6J("ngModel",r.email),g.xp6(4),g.Q6J("ngModel",r.password))},dependencies:[_f,aA,Aw,YT,QT,vD,Nw]}),n})()}];let wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[cv.forRoot(_k),cv]}),n})(),Ik=(()=>{class n{constructor(){this.title="ToDo"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[df]}),n})();const Ek_firebaseConfig={apiKey:"AIzaSyAokXTS-uVt1HiJwoIs-Au6-n9c67-WGLM",authDomain:"to-do-cd8fc.firebaseapp.com",projectId:"to-do-cd8fc",storageBucket:"to-do-cd8fc.appspot.com",messagingSenderId:"84877035537",appId:"1:84877035537:web:bbf1031e81124f4a0789b0"};let Dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[Ik]}),n.\u0275inj=g.cJS({imports:[Gc,wk,ao.hO.initializeApp(Ek_firebaseConfig),mO,yk]}),n})();(0,g.G48)(),xu().bootstrapModule(Dk).catch(n=>console.error(n))},5867:(at,be,P)=>{P.d(be,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=P(9681);(0,g.registerVersion)("firebase","9.14.0","app")},127:(at,be,P)=>{P.d(be,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(at,be,P)=>{P.r(be);var g=P(5861),J=P(3942),k=P(2090),ie=P(9681),re=P(1877),le=P(655),ue=P(4859);const we=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new re.Yd("@firebase/auth");function rt(y,...h){Ye.logLevel<=re.in.ERROR&&Ye.error(`Auth (${ie.SDK_VERSION}): ${y}`,...h)}function Ae(y,...h){throw $e(y,...h)}function ve(y,...h){return $e(y,...h)}function Ie(y,h,p){const _=Object.assign(Object.assign({},Xe()),{[h]:p});return new k.LL("auth","Firebase",_).create(h,{appName:y.name})}function je(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ae(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...h){if("string"!=typeof y){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return ge.create(y,...h)}function V(y,h,...p){if(!y)throw $e(h,...p)}function pe(y){const h="INTERNAL ASSERTION FAILED: "+y;throw rt(h),new Error(h)}function z(y,h){y||pe(h)}const Q=new Map;function ne(y){z(y instanceof Function,"Expected a class definition");let h=Q.get(y);return h?(z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Q.set(y,h),h)}function ke(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ut(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class an{constructor(h,p){this.shortDelay=h,this.longDelay=p,z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vn(y,h){z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Zt{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Cr=new an(3e4,6e4);function xt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function dn(y,h,p,_){return ji.apply(this,arguments)}function ji(){return(ji=(0,g.Z)(function*(y,h,p,_,A={}){return ui(y,A,(0,g.Z)(function*(){let R={},G={};_&&("GET"===h?G=_:R={body:JSON.stringify(_)});const oe=(0,k.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),Zt.fetch()(ci(y,y.config.apiHost,p,oe),Object.assign({method:h,headers:Ue,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ui(y,h,p){return br.apply(this,arguments)}function br(){return(br=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Qt),h);try{const A=new Kr(y),R=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw Yr(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const oe=R.ok?G.errorMessage:G.error.message,[Ue,Ke]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw Yr(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===Ue)throw Yr(y,"email-already-in-use",G);if("USER_DISABLED"===Ue)throw Yr(y,"user-disabled",G);const vt=_[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Ie(y,vt,Ke);Ae(y,vt)}}catch(A){if(A instanceof k.ZR)throw A;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Or(y,h,p,_){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,g.Z)(function*(y,h,p,_,A={}){const R=yield dn(y,h,p,_,A);return"mfaPendingCredential"in R&&Ae(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function ci(y,h,p,_){const A=`${h}${p}?${_}`;return y.config.emulator?vn(y.config,A):`${y.config.apiScheme}://${A}`}class Kr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Cr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yr(y,h,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const A=ve(y,h,_);return A.customData._tokenResponse=p,A}function Ze(){return(Ze=(0,g.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function mr(y,h){return ls.apply(this,arguments)}function ls(){return(ls=(0,g.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Hn(y,h){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ei(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function gn(){return(gn=(0,g.Z)(function*(y,h=!1){const p=(0,k.m9)(y),_=yield p.getIdToken(h),A=it(_);V(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,G=R?.sign_in_provider;return{claims:A,token:_,authTime:Ei(ft(A.auth_time)),issuedAtTime:Ei(ft(A.iat)),expirationTime:Ei(ft(A.exp)),signInProvider:G||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function it(y){var h;const[p,_,A]=y.split(".");if(void 0===p||void 0===_||void 0===A)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,k.tV)(_);return R?JSON.parse(R):(rt("Failed to decode base64 JWT payload"),null)}catch(R){return rt("Caught error parsing JWT payload as JSON",null===(h=R)||void 0===h?void 0:h.toString()),null}}function or(y,h){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof k.ZR&&kr(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function kr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Dt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,g.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(p=_)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class ds{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ei(this.lastLoginAt),this.creationTime=Ei(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jt(y){return Di.apply(this,arguments)}function Di(){return(Di=(0,g.Z)(function*(y){var h;const p=y.auth,_=yield y.getIdToken(),A=yield or(y,Hn(p,{idToken:_}));V(A?.users.length,p,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const G=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?Je(R.providerUserInfo):[],oe=Tr(y.providerData,G),vt=!!y.isAnonymous&&!(y.email&&R.passwordHash||oe?.length),dt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:oe,metadata:new ds(R.createdAt,R.lastLoginAt),isAnonymous:vt};Object.assign(y,dt)})).apply(this,arguments)}function Gn(){return(Gn=(0,g.Z)(function*(y){const h=(0,k.m9)(y);yield Jt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Tr(y,h){return[...y.filter(_=>!h.some(A=>A.providerId===_.providerId)),...h]}function Je(y){return y.map(h=>{var{providerId:p}=h,_=(0,le._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Qe(){return(Qe=(0,g.Z)(function*(y,h){const p=yield ui(y,{},(0,g.Z)(function*(){const _=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,G=ci(y,A,"/v1/token",`key=${R}`),oe=yield y._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",Zt.fetch()(G,{method:"POST",headers:oe,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function sn(y){const h=it(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,g.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,g.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:G}=yield function Ce(y,h){return Qe.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(A,R,Number(G))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:A,expirationTime:R}=p,G=new _t;return _&&(V("string"==typeof _,"internal-error",{appName:h}),G.refreshToken=_),A&&(V("string"==typeof A,"internal-error",{appName:h}),G.accessToken=A),R&&(V("number"==typeof R,"internal-error",{appName:h}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return pe("not implemented")}}function mt(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Ot{constructor(h){var{uid:p,auth:_,stsTokenManager:A}=h,R=(0,le._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ds(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const _=yield or(p,p.stsTokenManager.getToken(p.auth,h));return V(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function Fn(y){return gn.apply(this,arguments)}(this,h)}reload(){return function Xt(y){return Gn.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Ot(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,g.Z)(function*(){let A=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),A=!0),p&&(yield Jt(_)),yield _.auth._persistUserIfCurrent(_),A&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield or(h,function ta(y,h){return Ze.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,A,R,G,oe,Ue,Ke,vt;const dt=null!==(_=p.displayName)&&void 0!==_?_:void 0,cn=null!==(A=p.email)&&void 0!==A?A:void 0,ir=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Ni=null!==(G=p.photoURL)&&void 0!==G?G:void 0,vg=null!==(oe=p.tenantId)&&void 0!==oe?oe:void 0,_g=null!==(Ue=p._redirectEventId)&&void 0!==Ue?Ue:void 0,wg=null!==(Ke=p.createdAt)&&void 0!==Ke?Ke:void 0,Sd=null!==(vt=p.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Ig,emailVerified:Qy,isAnonymous:Uo,providerData:ka,stsTokenManager:Eg}=p;V(Ig&&Eg,h,"internal-error");const Jy=_t.fromJSON(this.name,Eg);V("string"==typeof Ig,h,"internal-error"),mt(dt,h.name),mt(cn,h.name),V("boolean"==typeof Qy,h,"internal-error"),V("boolean"==typeof Uo,h,"internal-error"),mt(ir,h.name),mt(Ni,h.name),mt(vg,h.name),mt(_g,h.name),mt(wg,h.name),mt(Sd,h.name);const Pa=new Ot({uid:Ig,auth:h,email:cn,emailVerified:Qy,displayName:dt,isAnonymous:Uo,photoURL:Ni,phoneNumber:ir,tenantId:vg,stsTokenManager:Jy,createdAt:wg,lastLoginAt:Sd});return ka&&Array.isArray(ka)&&(Pa.providerData=ka.map(Fa=>Object.assign({},Fa))),_g&&(Pa._redirectEventId=_g),Pa}static _fromIdTokenResponse(h,p,_=!1){return(0,g.Z)(function*(){const A=new _t;A.updateFromServerResponse(p);const R=new Ot({uid:p.localId,auth:h,stsTokenManager:A,isAnonymous:_});return yield Jt(R),R})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,_){var A=this;return(0,g.Z)(function*(){A.storage[p]=_})()}_get(p){var _=this;return(0,g.Z)(function*(){const A=_.storage[p];return void 0===A?null:A})()}_remove(p){var _=this;return(0,g.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function W(y,h,p){return`firebase:${y}:${h}:${p}`}class _e{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:A,name:R}=this.auth;this.fullUserKey=W(this.userKey,A.apiKey,R),this.fullPersistenceKey=W("persistence",A.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Ot._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,g.Z)(function*(){if(!p.length)return new _e(ne(L),h,_);const A=(yield Promise.all(p.map(function(){var Ke=(0,g.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let R=A[0]||ne(L);const G=W(_,h.config.apiKey,h.name);let oe=null;for(const Ke of p)try{const vt=yield Ke._get(G);if(vt){const dt=Ot._fromJSON(h,vt);Ke!==R&&(oe=dt),R=Ke;break}}catch{}const Ue=A.filter(Ke=>Ke._shouldAllowMigration);return R._shouldAllowMigration&&Ue.length?(R=Ue[0],oe&&(yield R._set(G,oe.toJSON())),yield Promise.all(p.map(function(){var Ke=(0,g.Z)(function*(vt){if(vt!==R)try{yield vt._remove(G)}catch{}});return function(vt){return Ke.apply(this,arguments)}}())),new _e(R,h,_)):new _e(R,h,_)})()}}function K(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(pn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ge(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ve(h))return"Blackberry";if(He(h))return"Webos";if(ct(h))return"Safari";if((h.includes("chrome/")||Kt(h))&&!h.includes("edge/"))return"Chrome";if(zt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function Ge(y=(0,k.z$)()){return/firefox\//i.test(y)}function ct(y=(0,k.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Kt(y=(0,k.z$)()){return/crios\//i.test(y)}function pn(y=(0,k.z$)()){return/iemobile/i.test(y)}function zt(y=(0,k.z$)()){return/android/i.test(y)}function Ve(y=(0,k.z$)()){return/blackberry/i.test(y)}function He(y=(0,k.z$)()){return/webos/i.test(y)}function Lt(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Ls(y=(0,k.z$)()){return Lt(y)||zt(y)||He(y)||Ve(y)||/windows phone/i.test(y)||pn(y)}function hs(y,h=[]){let p;switch(y){case"Browser":p=K((0,k.z$)());break;case"Worker":p=`${K((0,k.z$)())}-${y}`;break;default:p=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ie.SDK_VERSION}/${_}`}class fo{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=R=>new Promise((G,oe)=>{try{G(h(R))}catch(Ue){oe(Ue)}});_.onAbort=p,this.queue.push(_);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){var _;if(p.auth.currentUser===h)return;const A=[];try{for(const R of p.queue)yield R(h),R.onAbort&&A.push(R.onAbort)}catch(R){A.reverse();for(const G of A)try{G()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=R)||void 0===_?void 0:_.message})}})()}}class Mt{constructor(h,p,_){this.app=h,this.heartbeatServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vs(this),this.idTokenSubscription=new Vs(this),this.beforeStateQueue=new fo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=ne(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var A,R;if(!_._deleted&&(_.persistenceManager=yield _e.create(_,h),!_._deleted)){if(null!==(A=_._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var _;const A=yield p.assertedPersistence.getCurrentUser();let R=A,G=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const oe=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Ue=R?._redirectEventId,Ke=yield p.tryRedirectSignIn(h);(!oe||oe===Ue)&&Ke?.user&&(R=Ke.user,G=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(G)try{yield p.beforeStateQueue.runMiddleware(R)}catch(oe){R=A,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(oe))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){var _;try{yield Jt(h)}catch(A){if("auth/network-request-failed"!==(null===(_=A)||void 0===_?void 0:_.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function qe(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const _=h?(0,k.m9)(h):null;return _&&V(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,g.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,g.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ne(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,g.Z)(function*(){const A=yield _.getOrInitRedirectPersistenceManager(p);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&ne(h)||p._popupRedirectResolver;V(_,p,"argument-error"),p.redirectPersistenceManager=yield _e.create(p,[ne(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var _,A;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,A){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,_,A):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=hs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(_["X-Firebase-Client"]=A),_})()}}function Dn(y){return(0,k.m9)(y)}class Vs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ci(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function fs(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class ar{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return pe("not implemented")}_getIdTokenResponse(h){return pe("not implemented")}_linkToIdToken(h,p){return pe("not implemented")}_getReauthenticationResolver(h){return pe("not implemented")}}function Un(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:resetPassword",xt(y,h))})).apply(this,arguments)}function un(y,h){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,g.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Dc(y,h){return Us.apply(this,arguments)}function Us(){return(Us=(0,g.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:update",xt(y,h))})).apply(this,arguments)}function Bs(){return(Bs=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPassword",xt(y,h))})).apply(this,arguments)}function gs(y,h){return li.apply(this,arguments)}function li(){return(li=(0,g.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:sendOobCode",xt(y,h))})).apply(this,arguments)}function ur(y,h){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,g.Z)(function*(y,h){return gs(y,h)})).apply(this,arguments)}function tr(y,h){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(y,h){return gs(y,h)})).apply(this,arguments)}function ru(y,h){return ra.apply(this,arguments)}function ra(){return(ra=(0,g.Z)(function*(y,h){return gs(y,h)})).apply(this,arguments)}function bc(y,h){return yr.apply(this,arguments)}function yr(){return(yr=(0,g.Z)(function*(y,h){return gs(y,h)})).apply(this,arguments)}function Wl(){return(Wl=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithEmailLink",xt(y,h))})).apply(this,arguments)}function Tc(){return(Tc=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithEmailLink",xt(y,h))})).apply(this,arguments)}class Ac extends ar{constructor(h,p,_,A=null){super("password",_),this._email=h,this._password=p,this._tenantId=A}static _fromEmailAndPassword(h,p){return new Ac(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new Ac(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function na(y,h){return Bs.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ph(y,h){return Wl.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ae(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,g.Z)(function*(){switch(_.signInMethod){case"password":return un(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Fh(y,h){return Tc.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:Ae(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Wn(y,h){return ql.apply(this,arguments)}function ql(){return(ql=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithIdp",xt(y,h))})).apply(this,arguments)}class $i extends ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new $i(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ae("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A}=p,R=(0,le._T)(p,["providerId","signInMethod"]);if(!_||!A)return null;const G=new $i(_,A);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(h){return Wn(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Wn(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Wn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,k.xO)(p)}return h}}function Zp(y,h){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,g.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:sendVerificationCode",xt(y,h))})).apply(this,arguments)}function ms(){return(ms=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,h))})).apply(this,arguments)}function Kl(){return(Kl=(0,g.Z)(function*(y,h){const p=yield Or(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,h));if(p.temporaryProof)throw Yr(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Yp={USER_NOT_FOUND:"user-not-found"};function Yl(){return(Yl=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",xt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Yp)})).apply(this,arguments)}class ys extends ar{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new ys({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new ys({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Sc(y,h){return ms.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Kp(y,h){return Kl.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Qp(y,h){return Yl.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:A}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:A,temporaryProof:R}=h;return _||p||A||R?new ys({verificationId:p,verificationCode:_,phoneNumber:A,temporaryProof:R}):null}}class iu{constructor(h){var p,_,A,R,G,oe;const Ue=(0,k.zd)((0,k.pd)(h)),Ke=null!==(p=Ue.apiKey)&&void 0!==p?p:null,vt=null!==(_=Ue.oobCode)&&void 0!==_?_:null,dt=function Ql(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ue.mode)&&void 0!==A?A:null);V(Ke&&vt&&dt,"argument-error"),this.apiKey=Ke,this.operation=dt,this.code=vt,this.continueUrl=null!==(R=Ue.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=Ue.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(oe=Ue.tenantId)&&void 0!==oe?oe:null}static parseLink(h){const p=function Jl(y){const h=(0,k.zd)((0,k.pd)(y)).link,p=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,_=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(_?(0,k.zd)((0,k.pd)(_)).link:null)||_||p||h||y}(h);try{return new iu(p)}catch{return null}}}let bi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return Ac._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const A=iu.parseLink(_);return V(A,"argument-error"),Ac._fromEmailAndCode(p,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Hi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Gi extends Hi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class js extends Gi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),$i._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),$i._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return js.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return js.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:A,pendingToken:R,nonce:G,providerId:oe}=h;if(!_&&!A&&!p&&!R||!oe)return null;try{return new js(oe)._credential({idToken:p,accessToken:_,nonce:G,pendingToken:R})}catch{return null}}}let ia=(()=>{class y extends Gi{constructor(){super("facebook.com")}static credential(p){return $i._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),su=(()=>{class y extends Gi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return $i._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:A}=p;if(!_&&!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),xc=(()=>{class y extends Gi{constructor(){super("github.com")}static credential(p){return $i._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class sa extends ar{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Wn(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Wn(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Wn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:A,pendingToken:R}=p;return _&&A&&R&&_===A?new sa(_,R):null}static _create(h,p){return new sa(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Jr extends Hi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Jr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Jr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=sa.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return sa._create(_,p)}catch{return null}}}let Fr=(()=>{class y extends Gi{constructor(){super("twitter.com")}static credential(p,_){return $i._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:A}=p;if(!_||!A)return null;try{return y.credential(_,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function po(y,h){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signUp",xt(y,h))})).apply(this,arguments)}class cr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,A=!1){return(0,g.Z)(function*(){const R=yield Ot._fromIdTokenResponse(h,_,A),G=Uh(_);return new cr({user:R,providerId:G,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const A=Uh(_);return new cr({user:h,providerId:A,_tokenResponse:_,operationType:p})})()}}function Uh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Sn(){return(Sn=(0,g.Z)(function*(y){var h;const p=Dn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new cr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield po(p,{returnSecureToken:!0}),A=yield cr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class ou extends k.ZR{constructor(h,p,_,A){var R;super(p.code,p.message),this.operationType=_,this.user=A,Object.setPrototypeOf(this,ou.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,A){return new ou(h,p,_,A)}}function jh(y,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?ou._fromErrorAndOperation(y,R,h,_):R})}function Xr(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function au(){return(au=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y);yield Wt(!0,p,h);const{providerUserInfo:_}=yield mr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),A=Xr(_||[]);return p.providerData=p.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function go(y,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(y,h,p=!1){const _=yield or(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return cr._forOperation(y,"link",_)})).apply(this,arguments)}function Wt(y,h,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,g.Z)(function*(y,h,p){yield Jt(h);const A=!1===y?"provider-already-linked":"no-such-provider";V(Xr(h.providerData).has(p)===y,h.auth,A)})).apply(this,arguments)}function $s(y,h){return cu.apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(y,h,p=!1){var _;const{auth:A}=y,R="reauthenticate";try{const G=yield or(y,jh(A,R,h,y),p);V(G.idToken,A,"internal-error");const oe=it(G.idToken);V(oe,A,"internal-error");const{sub:Ue}=oe;return V(y.uid===Ue,A,"user-mismatch"),cr._forOperation(y,R,G)}catch(G){throw"auth/user-not-found"===(null===(_=G)||void 0===_?void 0:_.code)&&Ae(A,"user-mismatch"),G}})).apply(this,arguments)}function di(y,h){return lu.apply(this,arguments)}function lu(){return(lu=(0,g.Z)(function*(y,h,p=!1){const _="signIn",A=yield jh(y,_,h),R=yield cr._fromIdTokenResponse(y,_,A);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Tn(y,h){return It.apply(this,arguments)}function It(){return(It=(0,g.Z)(function*(y,h){return di(Dn(y),h)})).apply(this,arguments)}function du(y,h){return $h.apply(this,arguments)}function $h(){return($h=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y);return yield Wt(!1,p,h.providerId),go(p,h)})).apply(this,arguments)}function hu(y,h){return fu.apply(this,arguments)}function fu(){return(fu=(0,g.Z)(function*(y,h){return $s((0,k.m9)(y),h)})).apply(this,arguments)}function Mc(y,h){return qi.apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithCustomToken",xt(y,h))})).apply(this,arguments)}function oa(){return(oa=(0,g.Z)(function*(y,h){const p=Dn(y),_=yield Mc(p,{token:h,returnSecureToken:!0}),A=yield cr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class De{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?$t._fromServerResponse(h,p):Ae(h,"internal-error")}}class $t extends De{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new $t(p)}}function pu(y,h,p){var _;V((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function xn(){return(xn=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y),A={requestType:"PASSWORD_RESET",email:h};p&&pu(_,A,p),yield tr(_,A)})).apply(this,arguments)}function mo(){return(mo=(0,g.Z)(function*(y,h,p){yield Un((0,k.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function aa(){return(aa=(0,g.Z)(function*(y,h){yield Dc((0,k.m9)(y),{oobCode:h})})).apply(this,arguments)}function ua(y,h){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y),_=yield Un(p,{oobCode:h}),A=_.requestType;switch(V(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,p,"internal-error");default:V(_.email,p,"internal-error")}let R=null;return _.mfaInfo&&(R=De._fromServerResponse(Dn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function ed(){return(ed=(0,g.Z)(function*(y,h){const{data:p}=yield ua((0,k.m9)(y),h);return p.email})).apply(this,arguments)}function Mn(){return(Mn=(0,g.Z)(function*(y,h,p){const _=Dn(y),A=yield po(_,{returnSecureToken:!0,email:h,password:p}),R=yield cr._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,_,"argument-error"),p&&pu(_,A,p),yield ru(_,A)})).apply(this,arguments)}function la(){return(la=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y),A=bi.credentialWithLink(h,p||ke());return V(A._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Tn(_,A)})).apply(this,arguments)}function Xp(y,h){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,g.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:createAuthUri",xt(y,h))})).apply(this,arguments)}function da(){return(da=(0,g.Z)(function*(y,h){const _={identifier:h,continueUri:ut()?ke():"http://localhost"},{signinMethods:A}=yield Xp((0,k.m9)(y),_);return A||[]})).apply(this,arguments)}function ha(){return(ha=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&pu(p.auth,A,h);const{email:R}=yield ur(p.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function vu(){return(vu=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&pu(_.auth,R,p);const{email:G}=yield bc(_.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function _u(y,h){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,g.Z)(function*(y,h){return dn(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Bc(){return(Bc=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,k.m9)(y),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},G=yield or(_,_u(_.auth,R));_.displayName=G.displayName||null,_.photoURL=G.photoUrl||null;const oe=_.providerData.find(({providerId:Ue})=>"password"===Ue);oe&&(oe.displayName=_.displayName,oe.photoURL=_.photoURL),yield _._updateTokensIfNecessary(G)})).apply(this,arguments)}function zs(y,h,p){return wu.apply(this,arguments)}function wu(){return(wu=(0,g.Z)(function*(y,h,p){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const G=yield or(y,un(_,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Lr{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class mn extends Lr{constructor(h,p,_,A){super(h,p,_),this.username=A}}class nd extends Lr{constructor(h,p){super(h,"facebook.com",p)}}class jc extends mn{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Hh extends Lr{constructor(h,p){super(h,"google.com",p)}}class $c extends mn{constructor(h,p,_){super(h,"twitter.com",p,_)}}function Iu(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function qn(y){var h,p;if(!y)return null;const{providerId:_}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const G=null===(p=null===(h=it(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new Lr(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!_)return null;switch(_){case"facebook.com":return new nd(R,A);case"github.com":return new jc(R,A);case"google.com":return new Hh(R,A);case"twitter.com":return new $c(R,A,y.screenName||null);case"custom":case"anonymous":return new Lr(R,null);default:return new Lr(R,_,A)}}(p)}class qs{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new qs("enroll",h,p)}static _fromMfaPendingCredential(h){return new qs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return qs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return qs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Du{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=Dn(h),A=p.customData._serverResponse,R=(A.mfaInfo||[]).map(oe=>De._fromServerResponse(_,oe));V(A.mfaPendingCredential,_,"internal-error");const G=qs._fromMfaPendingCredential(A.mfaPendingCredential);return new Du(G,R,function(){var oe=(0,g.Z)(function*(Ue){const Ke=yield Ue._process(_,G);delete A.mfaInfo,delete A.mfaPendingCredential;const vt=Object.assign(Object.assign({},A),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(p.operationType){case"signIn":const dt=yield cr._fromIdTokenResponse(_,p.operationType,vt);return yield _._updateCurrentUser(dt.user),dt;case"reauthenticate":return V(p.user,_,"internal-error"),cr._forOperation(p.user,p.operationType,vt);default:Ae(_,"internal-error")}});return function(Ue){return oe.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function Cu(y,h){return dn(y,"POST","/v2/accounts/mfaEnrollment:start",xt(y,h))}class Gh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>De._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new Gh(h)}getSession(){var h=this;return(0,g.Z)(function*(){return qs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,g.Z)(function*(){const A=h,R=yield _.getSession(),G=yield or(_.user,A._process(_.user.auth,R,p));return yield _.user._updateTokensIfNecessary(G),_.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){var _;const A="string"==typeof h?h:h.uid,R=yield p.user.getIdToken(),G=yield or(p.user,function od(y,h){return dn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",xt(y,h))}(p.user.auth,{idToken:R,mfaEnrollmentId:A}));p.enrolledFactors=p.enrolledFactors.filter(({uid:oe})=>oe!==A),yield p.user._updateTokensIfNecessary(G);try{yield p.user.reload()}catch(oe){if("auth/user-token-expired"!==(null===(_=oe)||void 0===_?void 0:_.code))throw oe}})()}}const _o=new WeakMap,Zs="__sak";class Tu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Zs,"1"),this.storage.removeItem(Zs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const pa=(()=>{class y extends Tu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fa(){const y=(0,k.z$)();return ct(y)||Lt(y)}()&&function _n(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ls(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const A=this.storage.getItem(_),R=this.localCache[_];A!==R&&p(_,R,A)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((oe,Ue,Ke)=>{this.notifyListeners(oe,Ke)});const A=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(A);if(p.newValue!==oe)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!_)return}const R=()=>{const oe=this.storage.getItem(A);!_&&this.localCache[A]===oe||this.notifyListeners(A,oe)},G=this.storage.getItem(A);!function zn(){return(0,k.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,_){this.localCache[p]=_;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var A=()=>super._set,R=this;return(0,g.Z)(function*(){yield A().call(R,p,_),R.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,A=this;return(0,g.Z)(function*(){const R=yield _().call(A,p);return A.localCache[p]=JSON.stringify(R),R})()}_remove(p){var _=()=>super._remove,A=this;return(0,g.Z)(function*(){yield _().call(A,p),delete A.localCache[p]})()}}return y.type="LOCAL",y})(),Ai=(()=>{class y extends Tu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let cd=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(R=>R.isListeningto(p));if(_)return _;const A=new y(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,g.Z)(function*(){const A=p,{eventId:R,eventType:G,data:oe}=A.data,Ue=_.handlersMap[G];if(!Ue?.size)return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Ke=Array.from(Ue).map(function(){var dt=(0,g.Z)(function*(cn){return cn(A.origin,oe)});return function(cn){return dt.apply(this,arguments)}}()),vt=yield function ma(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(Ke);A.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:vt})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ya(y="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return y+p}class Hc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var A=this;return(0,g.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,oe;return new Promise((Ue,Ke)=>{const vt=ya("",20);R.port1.start();const dt=setTimeout(()=>{Ke(new Error("unsupported_event"))},_);oe={messageChannel:R,onMessage(cn){const ir=cn;if(ir.data.eventId===vt)switch(ir.data.status){case"ack":clearTimeout(dt),G=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Ue(ir.data.response);break;default:clearTimeout(dt),clearTimeout(G),Ke(new Error("invalid_response"))}}},A.handlers.add(oe),R.port1.addEventListener("message",oe.onMessage),A.target.postMessage({eventType:h,eventId:vt,data:p},[R.port2])}).finally(()=>{oe&&A.removeMessageHandler(oe)})})()}}function kn(){return window}function Au(){return typeof kn().WorkerGlobalScope<"u"&&"function"==typeof kn().importScripts}function va(){return(va=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ws="firebaseLocalStorageDb",Is="firebaseLocalStorage",Gc="fbase_key";class Ys{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function _a(y,h){return y.transaction([Is],h?"readwrite":"readonly").objectStore(Is)}function Io(){const y=indexedDB.open(ws,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Is,{keyPath:Gc})}catch(A){p(A)}}),y.addEventListener("success",(0,g.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Is)?h(_):(_.close(),yield function dd(){const y=indexedDB.deleteDatabase(ws);return new Ys(y).toPromise()}(),h(yield Io()))}))})}function Ki(y,h,p){return zc.apply(this,arguments)}function zc(){return(zc=(0,g.Z)(function*(y,h,p){const _=_a(y,!0).put({[Gc]:h,value:p});return new Ys(_).toPromise()})).apply(this,arguments)}function wa(){return(wa=(0,g.Z)(function*(y,h){const p=_a(y,!1).get(h),_=yield new Ys(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Qs(y,h){const p=_a(y,!0).delete(h);return new Ys(p).toPromise()}const Eo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Io()),p.db})()}_withRetries(p){var _=this;return(0,g.Z)(function*(){let A=0;for(;;)try{const R=yield _._openDb();return yield p(R)}catch(R){if(A++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return Au()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=cd._getInstance(function xu(){return Au()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,g.Z)(function*(A,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(A,R){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,g.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var _,A;if(p.activeServiceWorker=yield function Ks(){return va.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Hc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(_=R[0])||void 0===_?void 0:_.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,g.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Su(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Io();return yield Ki(p,Zs,"1"),yield Qs(p,Zs),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,g.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(R=>Ki(R,p,_)),A.localCache[p]=_,A.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,g.Z)(function*(){const A=yield _._withRetries(R=>function Mu(y,h){return wa.apply(this,arguments)}(R,p));return _.localCache[p]=A,A})()}_remove(p){var _=this;return(0,g.Z)(function*(){return _._withPendingWrite((0,g.Z)(function*(){return yield _._withRetries(A=>Qs(A,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const _=yield p._withRetries(G=>{const oe=_a(G,!1).getAll();return new Ys(oe).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:G,value:oe}of _)R.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(oe)&&(p.notifyListeners(G,oe),A.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!R.has(G)&&(p.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(p,_){this.localCache[p]=_;const A=this.listeners[p];if(A)for(const R of Array.from(A))R(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Do(y,h){return dn(y,"POST","/v2/accounts/mfaSignIn:start",xt(y,h))}function Es(){return(Es=(0,g.Z)(function*(y){return(yield dn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bo(y){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=A=>{const R=ve("internal-error");R.customData=A,p(R)},_.type="text/javascript",_.charset="UTF-8",function Co(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Ou(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ia=1e12;class yn{constructor(h){this.auth=h,this.counter=Ia,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new eg(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||Ia;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Ia))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var _;return null===(_=p._widgets.get(h||Ia))||void 0===_||_.execute(),""})()}}class eg{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;V(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ay(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const tg=Ou("rcb"),Sy=new an(3e4,6e4);class zh{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=kn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function kw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(kn().grecaptcha):new Promise((_,A)=>{const R=kn().setTimeout(()=>{A(ve(h,"network-request-failed"))},Sy.get());kn()[tg]=()=>{kn().clearTimeout(R),delete kn()[tg];const oe=kn().grecaptcha;if(!oe)return void A(ve(h,"internal-error"));const Ue=oe.render;oe.render=(Ke,vt)=>{const dt=Ue(Ke,vt);return this.counter++,dt},this.hostLanguage=p,_(oe)},bo(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:tg,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),A(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=kn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qc{load(h){return(0,g.Z)(function*(){return new yn(h)})()}clearedOneInstance(){}}const My="recaptcha",Ry={theme:"light",type:"image"};class rr{constructor(h,p=Object.assign({},Ry),_){this.parameters=p,this.type=My,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;V(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qc:new zh,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(R=>{const G=oe=>{!oe||(h.tokenChangeListeners.delete(G),R(oe))};h.tokenChangeListeners.add(G),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=kn()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){V(ut()&&!Au(),h.auth,"internal-error"),yield function hn(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Vr(y){return Es.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class fi{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=ys._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function ti(){return(ti=(0,g.Z)(function*(y,h,p){const _=Dn(y),A=yield Ds(_,h,(0,k.m9)(p));return new fi(A,R=>Tn(_,R))})).apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y);yield Wt(!1,_,"phone");const A=yield Ds(_.auth,h,(0,k.m9)(p));return new fi(A,R=>du(_,R))})).apply(this,arguments)}function Sr(){return(Sr=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y),A=yield Ds(_.auth,h,(0,k.m9)(p));return new fi(A,R=>hu(_,R))})).apply(this,arguments)}function Ds(y,h,p){return ku.apply(this,arguments)}function ku(){return(ku=(0,g.Z)(function*(y,h,p){var _;const A=yield p.verify();try{let R;if(V("string"==typeof A,y,"argument-error"),V(p.type===My,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const G=R.session;if("phoneNumber"in R)return V("enroll"===G.type,y,"internal-error"),(yield Cu(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,y,"internal-error");const oe=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return V(oe,y,"missing-multi-factor-info"),(yield Do(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Zp(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return G}}finally{p._reset()}})).apply(this,arguments)}function Zc(){return(Zc=(0,g.Z)(function*(y,h){yield go((0,k.m9)(y),h)})).apply(this,arguments)}let Da=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Dn(p)}verifyPhoneNumber(p,_){return Ds(this.auth,p,(0,k.m9)(_))}static credential(p,_){return ys._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:A}=p;return _&&A?ys._fromTokenResponse(_,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ao(y,h){return h?ne(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Cs extends ar{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Wn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Wn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Wn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function ot(y){return di(y.auth,new Cs(y),y.bypassAuthState)}function Ca(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),$s(p,new Cs(y),y.bypassAuthState)}function bs(y){return ba.apply(this,arguments)}function ba(){return(ba=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),go(p,new Cs(y),y.bypassAuthState)})).apply(this,arguments)}class So{constructor(h,p,_,A,R=!1){this.auth=h,this.resolver=_,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(_,A){h.pendingPromise={resolve:_,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,A){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:_,sessionId:A,postBody:R,tenantId:G,error:oe,type:Ue}=h;if(oe)return void p.reject(oe);const Ke={auth:p.auth,requestUri:_,sessionId:A,tenantId:G||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ue)(Ke))}catch(vt){p.reject(vt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return ot;case"linkViaPopup":case"linkViaRedirect":return bs;case"reauthViaPopup":case"reauthViaRedirect":return Ca;default:Ae(this.auth,"internal-error")}}resolve(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zn=new an(2e3,1e4);function xo(){return(xo=(0,g.Z)(function*(y,h,p){const _=Dn(y);je(y,h,Hi);const A=Ao(_,p);return new Ts(_,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Yc(){return(Yc=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y);je(_.auth,h,Hi);const A=Ao(_.auth,p);return new Ts(_.auth,"reauthViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}function Ta(){return(Ta=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y);je(_.auth,h,Hi);const A=Ao(_.auth,p);return new Ts(_.auth,"linkViaPopup",h,A,_).executeNotNull()})).apply(this,arguments)}let Ts=(()=>{class y extends So{constructor(p,_,A,R,G){super(p,_,R,G),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const _=yield p.execute();return V(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,g.Z)(function*(){z(1===p.filter.length,"Popup operations only handle one event");const _=ya();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,A;this.pollId=null!==(A=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Zn.get())};p()}}return y.currentPopupAction=null,y})();const gi=new Map;class Qc extends So{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let _=gi.get(p.auth._key());if(!_){try{const R=(yield function Mo(y,h){return Ur.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(R)}catch(A){_=()=>Promise.reject(A)}gi.set(p.auth._key(),_)}return p.bypassAuthState||gi.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const A=yield _.auth._redirectUserForId(h.eventId);if(A)return _.user=A,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Ur(){return(Ur=(0,g.Z)(function*(y,h){const p=Bn(h),_=Ji(y);if(!(yield _._isAvailable()))return!1;const A="true"===(yield _._get(p));return yield _._remove(p),A})).apply(this,arguments)}function Qi(y,h){return Si.apply(this,arguments)}function Si(){return(Si=(0,g.Z)(function*(y,h){return Ji(y)._set(Bn(h),"true")})).apply(this,arguments)}function Ss(y,h){gi.set(y._key(),h)}function Ji(y){return ne(y._redirectPersistence)}function Bn(y){return W("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,g.Z)(function*(y,h,p){const _=Dn(y);je(y,h,Hi);const A=Ao(_,p);return yield Qi(A,_),A._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y);je(_.auth,h,Hi);const A=Ao(_.auth,p);yield Qi(A,_.auth);const R=yield lt(_);return A._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y);je(_.auth,h,Hi);const A=Ao(_.auth,p);yield Wt(!1,_,h.providerId),yield Qi(A,_.auth);const R=yield lt(_);return A._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function nt(){return(nt=(0,g.Z)(function*(y,h){return yield Dn(y)._initializationPromise,yt(y,h,!1)})).apply(this,arguments)}function yt(y,h){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,g.Z)(function*(y,h,p=!1){const _=Dn(y),A=Ao(_,h),G=yield new Qc(_,A,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield _._persistUserIfCurrent(G.user),yield _._setRedirectUser(null,h)),G})).apply(this,arguments)}function lt(y){return bn.apply(this,arguments)}function bn(){return(bn=(0,g.Z)(function*(y){const h=ya(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Ro{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function xi(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bt(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!bt(h)){const A=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,A))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xs(h))}saveEventToCache(h){this.cachedEventUids.add(xs(h)),this.lastProcessedEventTime=Date.now()}}function xs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function bt({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Ms(y){return ni.apply(this,arguments)}function ni(){return(ni=(0,g.Z)(function*(y,h={}){return dn(y,"GET","/v1/projects",h)})).apply(this,arguments)}const No=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xs=/^https?/;function Wh(){return(Wh=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Ms(y);for(const p of h)try{if(ig(p))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function ig(y){const h=ke(),{protocol:p,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===_}if(!Xs.test(p))return!1;if(No.test(y))return _===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(_)}const sg=new an(3e4,6e4);function Ny(){const y=kn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Mi=null;function qh(y){return Mi=Mi||function Kn(y){return new Promise((h,p)=>{var _,A,R;function G(){Ny(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Ny(),p(ve(y,"network-request-failed"))},timeout:sg.get()})}if(null!==(A=null===(_=kn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==A&&A.Iframe)h(gapi.iframes.getContext());else{if(null===(R=kn().gapi)||void 0===R||!R.load){const oe=Ou("iframefcb");return kn()[oe]=()=>{gapi.load?G():p(ve(y,"network-request-failed"))},bo(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Ue=>p(Ue))}G()}}).catch(h=>{throw Mi=null,h})}(y),Mi}const og=new an(5e3,15e3),Oy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ky=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ag(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?vn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:ie.SDK_VERSION},A=ky.get(y.config.apiHost);A&&(_.eid=A);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${p}?${(0,k.xO)(_).slice(1)}`}function Yh(){return Yh=(0,g.Z)(function*(y){const h=yield qh(y),p=kn().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:ag(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Oy,dontclear:!0},_=>new Promise(function(){var A=(0,g.Z)(function*(R,G){yield _.restyle({setHideOnLeave:!1});const oe=ve(y,"network-request-failed"),Ue=kn().setTimeout(()=>{G(oe)},og.get());function Ke(){kn().clearTimeout(Ue),R(_)}_.ping(Ke).then(Ke,()=>{G(oe)})});return function(R,G){return A.apply(this,arguments)}}()))}),Yh.apply(this,arguments)}const Py={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Fy{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fd(y,h,p,_,A,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:ie.SDK_VERSION,eventId:A};if(h instanceof Hi){h.setDefaultLanguage(y.languageCode),G.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(G.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ue,Ke]of Object.entries(R||{}))G[Ue]=Ke}if(h instanceof Gi){const Ue=h.getScopes().filter(Ke=>""!==Ke);Ue.length>0&&(G.scopes=Ue.join(","))}y.tenantId&&(G.tid=y.tenantId);const oe=G;for(const Ue of Object.keys(oe))void 0===oe[Ue]&&delete oe[Ue];return`${function Xc({config:y}){return y.emulator?vn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,k.xO)(oe).slice(1)}`}const Oo="webStorageSupport";class tl extends class Vy{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new tl(h)}_finalizeEnroll(h,p,_){return function bu(y,h){return dn(y,"POST","/v2/accounts/mfaEnrollment:finalize",xt(y,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Nu(y,h){return dn(y,"POST","/v2/accounts/mfaSignIn:finalize",xt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let nl=(()=>{class y{constructor(){}static assertion(p){return tl._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var rl="@firebase/auth",Jh="0.20.11";class Uy{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{var A;h((null===(A=_)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function eo(){return window}function gd(){return(gd=(0,g.Z)(function*(y,h,p){var _;const{BuildInfo:A}=eo();z(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Bu(h.sessionId),G={};return Lt()?G.ibi=A.packageName:zt()?G.apn=A.packageName:Ae(y,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=R,fd(y,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,G)})).apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(y){const{BuildInfo:h}=eo(),p={};Lt()?p.iosBundleId=h.packageName:zt()?p.androidPackageName=h.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield Ms(y,p)})).apply(this,arguments)}function md(){return(md=(0,g.Z)(function*(y,h,p){const{cordova:_}=eo();let A=()=>{};try{yield new Promise((R,G)=>{let oe=null;function Ue(){var dt;R();const cn=null===(dt=_.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof cn&&cn(),"function"==typeof p?.close&&p.close()}function Ke(){oe||(oe=window.setTimeout(()=>{G(ve(y,"redirect-cancelled-by-user"))},2e3))}function vt(){"visible"===document?.visibilityState&&Ke()}h.addPassiveListener(Ue),document.addEventListener("resume",Ke,!1),zt()&&document.addEventListener("visibilitychange",vt,!1),A=()=>{h.removePassiveListener(Ue),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",vt,!1),oe&&window.clearTimeout(oe)}})}finally{A()}})).apply(this,arguments)}function Bu(y){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,g.Z)(function*(y){const h=ju(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ju(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(0,k.Pz)("authIdTokenMaxAge"),function ug(y){(0,ie._registerComponent)(new ue.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:R,authDomain:G}=_.options;return((oe,Ue)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:oe.name}),V(!G?.includes(":"),"argument-error",{appName:oe.name});const Ke={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hs(y)},vt=new Mt(oe,Ue,Ke);return function Pe(y,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(ne);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(vt,p),vt})(_,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,ie._registerComponent)(new ue.wA("auth-internal",h=>{const p=Dn(h.getProvider("auth").getImmediate());return new Uy(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ie.registerVersion)(rl,Jh,function By(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ie.registerVersion)(rl,Jh,"esm2017")}("Browser");class vd extends Ro{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function lg(y){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,g.Z)(function*(y){const h=yield Ra()._get(to(y));return h&&(yield Ra()._remove(to(y))),h})).apply(this,arguments)}function Wy(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function Ra(){return ne(pa)}function to(y){return W("authEvent",y.config.apiKey,y.name)}function no(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,k.zd)(p.join("?"))}function $u(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function sl(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function tf(y=(0,k.z$)()){return!("file:"!==sl()&&"ionic:"!==sl()&&"capacitor:"!==sl()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function mg(){try{const y=self.localStorage,h=ya();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Ky(y=(0,k.z$)()){return function gg(){return(0,k.w1)()&&11===document?.documentMode}()||function rf(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch{return Id()&&(0,k.hl)()}return!1}function Id(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ed(){return(function Zy(){return"http:"===sl()||"https:"===sl()}()||(0,k.ru)()||tf())&&!function nf(){return(0,k.b$)()||(0,k.UG)()}()&&mg()&&!Id()}function io(){return tf()&&typeof document<"u"}function ol(){return(ol=(0,g.Z)(function*(){return!!io()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const ri={LOCAL:"local",NONE:"none",SESSION:"session"},Mr=V,Oa="persistence";function al(y){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Cd(),p=W(Oa,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Cd(){var y;try{return(null===(y=function sf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const bd=V;class ii{constructor(){this.browserResolver=ne(class Xi{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ai,this._completeRedirectFn=yt,this._overrideRedirectResult=Ss}_openPopup(h,p,_,A){var R=this;return(0,g.Z)(function*(){var G;z(null===(G=R.eventManagers[h._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const oe=fd(h,p,_,ke(),A);return function Uu(y,h,p,_=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-_)/2,0).toString();let oe="";const Ue=Object.assign(Object.assign({},Py),{width:_.toString(),height:A.toString(),top:R,left:G}),Ke=(0,k.z$)().toLowerCase();p&&(oe=Kt(Ke)?"_blank":p),Ge(Ke)&&(h=h||"http://localhost",Ue.scrollbars="yes");const vt=Object.entries(Ue).reduce((cn,[ir,Ni])=>`${cn}${ir}=${Ni},`,"");if(function Pr(y=(0,k.z$)()){var h;return Lt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ke)&&"_self"!==oe)return function Ly(y,h){const p=document.createElement("a");p.href=y,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",oe),new Fy(null);const dt=window.open(h||"",oe,vt);V(dt,y,"popup-blocked");try{dt.focus()}catch{}return new Fy(dt)}(h,oe,ya())})()}_openRedirect(h,p,_,A){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function hi(y){kn().location.href=y}(fd(h,p,_,ke(),A)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:A,promise:R}=this.eventManagers[p];return A?Promise.resolve(A):(z(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const _=yield function Kh(y){return Yh.apply(this,arguments)}(h),A=new Ro(h);return _.register("authEvent",R=>(V(R?.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:A},p.iframes[h._key()]=_,A})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Oo,{type:Oo},A=>{var R;const G=null===(R=A?.[0])||void 0===R?void 0:R[Oo];void 0!==G&&p(!!G),Ae(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function mi(y){return Wh.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ls()||ct()||Lt()}}),this.cordovaResolver=ne(class ef{constructor(){this._redirectPersistence=Ai,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yt,this._overrideRedirectResult=Ss}_initialize(h){var p=this;return(0,g.Z)(function*(){const _=h._key();let A=p.eventManagers.get(_);return A||(A=new vd(h),p.eventManagers.set(_,A),p.attachCallbackListeners(h,A)),A})()}_openPopup(h){Ae(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,A){var R=this;return(0,g.Z)(function*(){!function zy(y){var h,p,_,A,R,G,oe,Ue,Ke,vt;const dt=eo();V("function"==typeof(null===(h=dt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=dt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(A=null===(_=dt?.cordova)||void 0===_?void 0:_.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Ue=null===(oe=null===(G=dt?.cordova)||void 0===G?void 0:G.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(vt=null===(Ke=dt?.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===vt?void 0:vt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const G=yield R._initialize(h);yield G.initialized(),G.resetRedirect(),function _r(){gi.clear()}(),yield R._originValidation(h);const oe=function cg(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:Wy(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,_,A);yield function xa(y,h){return Ra()._set(to(y),h)}(h,oe);const Ue=yield function ko(y,h,p){return gd.apply(this,arguments)}(h,oe,p),Ke=yield function Hy(y){const{cordova:h}=eo();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let A=null;_?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function er(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(A)})})}(Ue);return function Gy(y,h,p){return md.apply(this,arguments)}(h,G,Ke)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Aa(y){return il.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:A,BuildInfo:R}=eo(),G=setTimeout((0,g.Z)(function*(){yield lg(h),p.onEvent($u())}),500),oe=function(){var vt=(0,g.Z)(function*(dt){clearTimeout(G);const cn=yield lg(h);let ir=null;cn&&dt?.url&&(ir=function dg(y,h){var p,_;const A=function fg(y){const h=no(y),p=h.link?decodeURIComponent(h.link):void 0,_=no(p).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return no(A).link||A||_||p||y}(h);if(A.includes("/__/auth/callback")){const R=no(A),G=R.firebaseError?function hg(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,oe=null===(_=null===(p=G?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Ue=oe?ve(oe):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(cn,dt.url)),p.onEvent(ir||$u())});return function(cn){return vt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,oe);const Ue=A,Ke=`${R.packageName.toLowerCase()}://`;eo().handleOpenURL=function(){var vt=(0,g.Z)(function*(dt){if(dt.toLowerCase().startsWith(Ke)&&oe({url:dt}),"function"==typeof Ue)try{Ue(dt)}catch(cn){console.error(cn)}});return function(dt){return vt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ai,this._completeRedirectFn=yt,this._overrideRedirectResult=Ss}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,A){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,_,A)})()}_openRedirect(h,p,_,A){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,_,A)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return io()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function yg(){return ol.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Td(y){return y.unwrap()}function Ad(y){return Po(y)}function Po(y){const{_tokenResponse:h}=y instanceof k.ZR?y.customData:y;if(!h)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Da.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let _;switch(p){case"google.com":_=su;break;case"facebook.com":_=ia;break;case"github.com":_=xc;break;case"twitter.com":_=Fr;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:oe,nonce:Ue}=h;return R||G||A||oe?oe?p.startsWith("saml.")?sa._create(p,oe):$i._fromParams({providerId:p,signInMethod:p,pendingToken:oe,idToken:A,accessToken:R}):new js(p).credential({idToken:A,accessToken:R,rawNonce:Ue}):null}return y instanceof k.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function si(y,h){return h.catch(p=>{throw p instanceof k.ZR&&function cl(y,h){var p,_;const A=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=h)||void 0===_?void 0:_.code))h.resolver=new Yy(y,function Rn(y,h){var p;const _=(0,k.m9)(y),A=h;return V(h.customData.operationType,_,"argument-error"),V(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),Du._fromError(_,A)}(y,h));else if(A){const R=Po(h),G=h;R&&(G.credential=R,G.tenantId=A.tenantId||void 0,G.email=A.email||void 0,G.phoneNumber=A.phoneNumber||void 0)}}(y,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:Ad(p),additionalUserInfo:Iu(p),user:Ri.getOrCreate(A)}})}function Fo(y,h){return uf.apply(this,arguments)}function uf(){return(uf=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>si(y,p.confirm(_))}})).apply(this,arguments)}class Yy{constructor(h,p){this.resolver=p,this.auth=function ul(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return si(Td(this.auth),this.resolver.resolveSignIn(h))}}class Ri{constructor(h){this._delegate=h,this.multiFactor=function wo(y){const h=(0,k.m9)(y);return _o.has(h)||_o.set(h,Gh._fromUser(h)),_o.get(h)}(h)}static getOrCreate(h){return Ri.USER_MAP.has(h)||Ri.USER_MAP.set(h,new Ri(h)),Ri.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return si(p.auth,du(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,g.Z)(function*(){return Fo(_.auth,function Cn(y,h,p){return pi.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return si(p.auth,function Pu(y,h,p){return Ta.apply(this,arguments)}(p._delegate,h,ii))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield al(Dn(p.auth)),function Z(y,h,p){return function ee(y,h,p){return Ee.apply(this,arguments)}(y,h,p)}(p._delegate,h,ii)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return si(p.auth,hu(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Fo(this.auth,function Ea(y,h,p){return Sr.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return si(this.auth,function rg(y,h,p){return Yc.apply(this,arguments)}(this._delegate,h,ii))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield al(Dn(p.auth)),function b(y,h,p){return function x(y,h,p){return F.apply(this,arguments)}(y,h,p)}(p._delegate,h,ii)})()}sendEmailVerification(h){return function Fc(y,h){return ha.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function vr(y,h){return au.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function td(y,h){return zs((0,k.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Gs(y,h){return zs((0,k.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ng(y,h){return Zc.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Uc(y,h){return Bc.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function Lc(y,h,p){return vu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ri.USER_MAP=new WeakMap;const Lo=V;let Hu=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;Lo(A,"invalid-api-key",{appName:p.name}),Lo(A,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?ii:void 0;this._delegate=_.initialize({options:{persistence:Vo(A,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ri.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function tu(y,h,p){const _=Dn(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const A=!!p?.disableWarnings,R=Ci(h),{host:G,port:oe}=function Vn(y){const h=Ci(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(_);if(A){const R=A[1];return{host:R,port:fs(_.substr(R.length+1))}}{const[R,G]=_.split(":");return{host:R,port:fs(G)}}}(h);_.config.emulator={url:`${R}//${G}${null===oe?"":`:${oe}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:G,port:oe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function ps(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function ei(y,h){return aa.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ua(this._delegate,p)}confirmPasswordReset(p,_){return function mu(y,h,p){return mo.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var A=this;return(0,g.Z)(function*(){return si(A._delegate,function ca(y,h,p){return Mn.apply(this,arguments)}(A._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function yu(y,h){return da.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Zi(y,h){return"EMAIL_SIGNIN"===iu.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Lo(Ed(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function Me(y,h){return nt.apply(this,arguments)}(p._delegate,ii);return _?si(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Na(y,h){Dn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,A){const{next:R,error:G,complete:oe}=ll(p,_,A);return this._delegate.onAuthStateChanged(R,G,oe)}onIdTokenChanged(p,_,A){const{next:R,error:G,complete:oe}=ll(p,_,A);return this._delegate.onIdTokenChanged(R,G,oe)}sendSignInLinkToEmail(p,_){return function kc(y,h,p){return Hs.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function gu(y,h,p){return xn.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,g.Z)(function*(){let A;switch(function af(y,h){Mr(Object.values(ri).includes(h),y,"invalid-persistence-type"),(0,k.b$)()?Mr(h!==ri.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?Mr(h===ri.NONE,y,"unsupported-persistence-type"):Id()?Mr(h===ri.NONE||h===ri.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):Mr(h===ri.NONE||mg(),y,"unsupported-persistence-type")}(_._delegate,p),p){case ri.SESSION:A=Ai;break;case ri.LOCAL:A=(yield ne(Eo)._isAvailable())?Eo:pa;break;case ri.NONE:A=L;break;default:return Ae("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return si(this._delegate,function Bh(y){return Sn.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return si(this._delegate,Tn(this._delegate,p))}signInWithCustomToken(p){return si(this._delegate,function Rc(y,h){return oa.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return si(this._delegate,function Ti(y,h,p){return Tn((0,k.m9)(y),bi.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return si(this._delegate,function Jp(y,h,p){return la.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return Fo(this._delegate,function st(y,h,p){return ti.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,g.Z)(function*(){return Lo(Ed(),_._delegate,"operation-not-supported-in-this-environment"),si(_._delegate,function Kc(y,h,p){return xo.apply(this,arguments)}(_._delegate,p,ii))})()}signInWithRedirect(p){var _=this;return(0,g.Z)(function*(){return Lo(Ed(),_._delegate,"operation-not-supported-in-this-environment"),yield al(_._delegate),function wn(y,h,p){return function Fu(y,h,p){return D.apply(this,arguments)}(y,h,p)}(_._delegate,p,ii)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Oc(y,h){return ed.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ri,y})();function ll(y,h,p){let _=y;"function"!=typeof y&&({next:_,error:h,complete:p}=y);const A=_;return{next:G=>A(G&&Ri.getOrCreate(G)),error:h,complete:p}}function Vo(y,h){const p=function so(y,h){const p=Cd();if(!p)return[];const _=W(Oa,y,h);switch(p.getItem(_)){case ri.NONE:return[L];case ri.LOCAL:return[Eo,Ai];case ri.SESSION:return[Ai];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Eo)&&p.push(Eo),typeof window<"u")for(const _ of[pa,Ai])p.includes(_)||p.push(_);return p.includes(L)||p.push(L),p}class cf{constructor(){this.providerId="phone",this._delegate=new Da(Td(J.Z.auth()))}static credential(h,p){return Da.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}cf.PHONE_SIGN_IN_METHOD=Da.PHONE_SIGN_IN_METHOD,cf.PROVIDER_ID=Da.PROVIDER_ID;const dl=V;class lf{constructor(h,p,_=J.Z.app()){var A;dl(null===(A=_.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new rr(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function hf(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Hu(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bi,FacebookAuthProvider:ia,GithubAuthProvider:xc,GoogleAuthProvider:su,OAuthProvider:js,SAMLAuthProvider:Jr,PhoneAuthProvider:cf,PhoneMultiFactorGenerator:nl,RecaptchaVerifier:lf,TwitterAuthProvider:Fr,Auth:Hu,AuthCredential:ar,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(J.Z)},9751:(at,be,P)=>{P.d(be,{y:()=>de});var g=P(2961),J=P(727),k=P(8822),ie=P(9635),re=P(2416),le=P(576),ue=P(2806);let de=(()=>{class q{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const we=new q;return we.source=this,we.operator=Se,we}subscribe(Se,we,Xe){const ge=function B(q){return q&&q instanceof g.Lv||function U(q){return q&&(0,le.m)(q.next)&&(0,le.m)(q.error)&&(0,le.m)(q.complete)}(q)&&(0,J.Nn)(q)}(Se)?Se:new g.Hp(Se,we,Xe);return(0,ue.x)(()=>{const{operator:fe,source:Ye}=this;ge.add(fe?fe.call(ge,Ye):Ye?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Se){try{return this._subscribe(Se)}catch(we){Se.error(we)}}forEach(Se,we){return new(we=he(we))((Xe,ge)=>{const fe=new g.Hp({next:Ye=>{try{Se(Ye)}catch(rt){ge(rt),fe.unsubscribe()}},error:ge,complete:Xe});this.subscribe(fe)})}_subscribe(Se){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Se)}[k.L](){return this}pipe(...Se){return(0,ie.U)(Se)(this)}toPromise(Se){return new(Se=he(Se))((we,Xe)=>{let ge;this.subscribe(fe=>ge=fe,fe=>Xe(fe),()=>we(ge))})}}return q.create=Le=>new q(Le),q})();function he(q){var Le;return null!==(Le=q??re.v.Promise)&&void 0!==Le?Le:Promise}},7579:(at,be,P)=>{P.d(be,{x:()=>ue});var g=P(9751),J=P(727);const ie=(0,P(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=P(8737),le=P(2806);let ue=(()=>{class he extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const q=new de(this,this);return q.operator=B,q}_throwIfClosed(){if(this.closed)throw new ie}next(B){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next(B)}})}error(B){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:q}=this;for(;q.length;)q.shift().error(B)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:q,isStopped:Le,observers:Se}=this;return q||Le?J.Lc:(this.currentObservers=null,Se.push(B),new J.w0(()=>{this.currentObservers=null,(0,re.P)(Se,B)}))}_checkFinalizedStatuses(B){const{hasError:q,thrownError:Le,isStopped:Se}=this;q?B.error(Le):Se&&B.complete()}asObservable(){const B=new g.y;return B.source=this,B}}return he.create=(U,B)=>new de(U,B),he})();class de extends ue{constructor(U,B){super(),this.destination=U,this.source=B}next(U){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===q||q.call(B,U)}error(U){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===q||q.call(B,U)}complete(){var U,B;null===(B=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===B||B.call(U)}_subscribe(U){var B,q;return null!==(q=null===(B=this.source)||void 0===B?void 0:B.subscribe(U))&&void 0!==q?q:J.Lc}}},2961:(at,be,P)=>{P.d(be,{Hp:()=>Xe,Lv:()=>q});var g=P(576),J=P(727),k=P(2416),ie=P(7849);function re(){}const le=he("C",void 0,void 0);function he(Ae,ve,Ie){return{kind:Ae,value:ve,error:Ie}}var U=P(3410),B=P(2806);class q extends J.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,J.Nn)(ve)&&ve.add(this)):this.destination=rt}static create(ve,Ie,je){return new Xe(ve,Ie,je)}next(ve){this.isStopped?Ye(function de(Ae){return he("N",Ae,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ye(function ue(Ae){return he("E",void 0,Ae)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ye(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Se(Ae,ve){return Le.call(Ae,ve)}class we{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(ve)}catch(je){ge(je)}}error(ve){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(ve)}catch(je){ge(je)}else ge(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Ie){ge(Ie)}}}class Xe extends q{constructor(ve,Ie,je){let $e;if(super(),(0,g.m)(ve)||!ve)$e={next:ve??void 0,error:Ie??void 0,complete:je??void 0};else{let V;this&&k.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),$e={next:ve.next&&Se(ve.next,V),error:ve.error&&Se(ve.error,V),complete:ve.complete&&Se(ve.complete,V)}):$e=ve}this.destination=new we($e)}}function ge(Ae){k.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Ae):(0,ie.h)(Ae)}function Ye(Ae,ve){const{onStoppedNotification:Ie}=k.v;Ie&&U.z.setTimeout(()=>Ie(Ae,ve))}const rt={closed:!0,next:re,error:function fe(Ae){throw Ae},complete:re}},727:(at,be,P)=>{P.d(be,{Lc:()=>le,w0:()=>re,Nn:()=>ue});var g=P(576);const k=(0,P(3888).d)(he=>function(B){he(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((q,Le)=>`${Le+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ie=P(8737);class re{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Se of B)Se.remove(this);else B.remove(this);const{initialTeardown:q}=this;if((0,g.m)(q))try{q()}catch(Se){U=Se instanceof k?Se.errors:[Se]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Se of Le)try{de(Se)}catch(we){U=U??[],we instanceof k?U=[...U,...we.errors]:U.push(we)}}if(U)throw new k(U)}}add(U){var B;if(U&&U!==this)if(this.closed)de(U);else{if(U instanceof re){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(U)}}_hasParent(U){const{_parentage:B}=this;return B===U||Array.isArray(B)&&B.includes(U)}_addParent(U){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(U),B):B?[B,U]:U}_removeParent(U){const{_parentage:B}=this;B===U?this._parentage=null:Array.isArray(B)&&(0,ie.P)(B,U)}remove(U){const{_finalizers:B}=this;B&&(0,ie.P)(B,U),U instanceof re&&U._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const le=re.EMPTY;function ue(he){return he instanceof re||he&&"closed"in he&&(0,g.m)(he.remove)&&(0,g.m)(he.add)&&(0,g.m)(he.unsubscribe)}function de(he){(0,g.m)(he)?he():he.unsubscribe()}},2416:(at,be,P)=>{P.d(be,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,be,P)=>{P.d(be,{E:()=>J});const J=new(P(9751).y)(re=>re.complete())},8996:(at,be,P)=>{P.d(be,{D:()=>ve});var g=P(8421),J=P(5363),k=P(9468),le=P(9751),de=P(2202),he=P(576),U=P(9672);function q(Ie,je){if(!Ie)throw new Error("Iterable cannot be null");return new le.y($e=>{(0,U.f)($e,je,()=>{const V=Ie[Symbol.asyncIterator]();(0,U.f)($e,je,()=>{V.next().then(pe=>{pe.done?$e.complete():$e.next(pe.value)})},0,!0)})})}var Le=P(3670),Se=P(8239),we=P(1144),Xe=P(6495),ge=P(2206),fe=P(4532),Ye=P(3260);function ve(Ie,je){return je?function Ae(Ie,je){if(null!=Ie){if((0,Le.c)(Ie))return function ie(Ie,je){return(0,g.Xf)(Ie).pipe((0,k.R)(je),(0,J.Q)(je))}(Ie,je);if((0,we.z)(Ie))return function ue(Ie,je){return new le.y($e=>{let V=0;return je.schedule(function(){V===Ie.length?$e.complete():($e.next(Ie[V++]),$e.closed||this.schedule())})})}(Ie,je);if((0,Se.t)(Ie))return function re(Ie,je){return(0,g.Xf)(Ie).pipe((0,k.R)(je),(0,J.Q)(je))}(Ie,je);if((0,ge.D)(Ie))return q(Ie,je);if((0,Xe.T)(Ie))return function B(Ie,je){return new le.y($e=>{let V;return(0,U.f)($e,je,()=>{V=Ie[de.h](),(0,U.f)($e,je,()=>{let pe,z;try{({value:pe,done:z}=V.next())}catch(Q){return void $e.error(Q)}z?$e.complete():$e.next(pe)},0,!0)}),()=>(0,he.m)(V?.return)&&V.return()})}(Ie,je);if((0,Ye.L)(Ie))return function rt(Ie,je){return q((0,Ye.Q)(Ie),je)}(Ie,je)}throw(0,fe.z)(Ie)}(Ie,je):(0,g.Xf)(Ie)}},8421:(at,be,P)=>{P.d(be,{Xf:()=>Le});var g=P(655),J=P(1144),k=P(8239),ie=P(9751),re=P(3670),le=P(2206),ue=P(4532),de=P(6495),he=P(3260),U=P(576),B=P(7849),q=P(8822);function Le(Ae){if(Ae instanceof ie.y)return Ae;if(null!=Ae){if((0,re.c)(Ae))return function Se(Ae){return new ie.y(ve=>{const Ie=Ae[q.L]();if((0,U.m)(Ie.subscribe))return Ie.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,J.z)(Ae))return function we(Ae){return new ie.y(ve=>{for(let Ie=0;Ie<Ae.length&&!ve.closed;Ie++)ve.next(Ae[Ie]);ve.complete()})}(Ae);if((0,k.t)(Ae))return function Xe(Ae){return new ie.y(ve=>{Ae.then(Ie=>{ve.closed||(ve.next(Ie),ve.complete())},Ie=>ve.error(Ie)).then(null,B.h)})}(Ae);if((0,le.D)(Ae))return fe(Ae);if((0,de.T)(Ae))return function ge(Ae){return new ie.y(ve=>{for(const Ie of Ae)if(ve.next(Ie),ve.closed)return;ve.complete()})}(Ae);if((0,he.L)(Ae))return function Ye(Ae){return fe((0,he.Q)(Ae))}(Ae)}throw(0,ue.z)(Ae)}function fe(Ae){return new ie.y(ve=>{(function rt(Ae,ve){var Ie,je,$e,V;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,g.KL)(Ae);!(je=yield Ie.next()).done;)if(ve.next(je.value),ve.closed)return}catch(pe){$e={error:pe}}finally{try{je&&!je.done&&(V=Ie.return)&&(yield V.call(Ie))}finally{if($e)throw $e.error}}ve.complete()})})(Ae,ve).catch(Ie=>ve.error(Ie))})}},6451:(at,be,P)=>{P.d(be,{T:()=>le});var g=P(8189),J=P(8421),k=P(515),ie=P(7669),re=P(8996);function le(...ue){const de=(0,ie.yG)(ue),he=(0,ie._6)(ue,1/0),U=ue;return U.length?1===U.length?(0,J.Xf)(U[0]):(0,g.J)(he)((0,re.D)(U,de)):k.E}},5403:(at,be,P)=>{P.d(be,{x:()=>J});var g=P(2961);function J(ie,re,le,ue,de){return new k(ie,re,le,ue,de)}class k extends g.Lv{constructor(re,le,ue,de,he,U){super(re),this.onFinalize=he,this.shouldUnsubscribe=U,this._next=le?function(B){try{le(B)}catch(q){re.error(q)}}:super._next,this._error=de?function(B){try{de(B)}catch(q){re.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(B){re.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(at,be,P)=>{P.d(be,{U:()=>k});var g=P(4482),J=P(5403);function k(ie,re){return(0,g.e)((le,ue)=>{let de=0;le.subscribe((0,J.x)(ue,he=>{ue.next(ie.call(re,he,de++))}))})}},8189:(at,be,P)=>{P.d(be,{J:()=>k});var g=P(5577),J=P(4671);function k(ie=1/0){return(0,g.z)(J.y,ie)}},5577:(at,be,P)=>{P.d(be,{z:()=>de});var g=P(4004),J=P(8421),k=P(4482),ie=P(9672),re=P(5403),ue=P(576);function de(he,U,B=1/0){return(0,ue.m)(U)?de((q,Le)=>(0,g.U)((Se,we)=>U(q,Se,Le,we))((0,J.Xf)(he(q,Le))),B):("number"==typeof U&&(B=U),(0,k.e)((q,Le)=>function le(he,U,B,q,Le,Se,we,Xe){const ge=[];let fe=0,Ye=0,rt=!1;const Ae=()=>{rt&&!ge.length&&!fe&&U.complete()},ve=je=>fe<q?Ie(je):ge.push(je),Ie=je=>{Se&&U.next(je),fe++;let $e=!1;(0,J.Xf)(B(je,Ye++)).subscribe((0,re.x)(U,V=>{Le?.(V),Se?ve(V):U.next(V)},()=>{$e=!0},void 0,()=>{if($e)try{for(fe--;ge.length&&fe<q;){const V=ge.shift();we?(0,ie.f)(U,we,()=>Ie(V)):Ie(V)}Ae()}catch(V){U.error(V)}}))};return he.subscribe((0,re.x)(U,ve,()=>{rt=!0,Ae()})),()=>{Xe?.()}}(q,Le,he,B)))}},5363:(at,be,P)=>{P.d(be,{Q:()=>ie});var g=P(9672),J=P(4482),k=P(5403);function ie(re,le=0){return(0,J.e)((ue,de)=>{ue.subscribe((0,k.x)(de,he=>(0,g.f)(de,re,()=>de.next(he),le),()=>(0,g.f)(de,re,()=>de.complete(),le),he=>(0,g.f)(de,re,()=>de.error(he),le)))})}},3099:(at,be,P)=>{P.d(be,{B:()=>re});var g=P(8421),J=P(7579),k=P(2961),ie=P(4482);function re(ue={}){const{connector:de=(()=>new J.x),resetOnError:he=!0,resetOnComplete:U=!0,resetOnRefCountZero:B=!0}=ue;return q=>{let Le,Se,we,Xe=0,ge=!1,fe=!1;const Ye=()=>{Se?.unsubscribe(),Se=void 0},rt=()=>{Ye(),Le=we=void 0,ge=fe=!1},Ae=()=>{const ve=Le;rt(),ve?.unsubscribe()};return(0,ie.e)((ve,Ie)=>{Xe++,!fe&&!ge&&Ye();const je=we=we??de();Ie.add(()=>{Xe--,0===Xe&&!fe&&!ge&&(Se=le(Ae,B))}),je.subscribe(Ie),!Le&&Xe>0&&(Le=new k.Hp({next:$e=>je.next($e),error:$e=>{fe=!0,Ye(),Se=le(rt,he,$e),je.error($e)},complete:()=>{ge=!0,Ye(),Se=le(rt,U),je.complete()}}),(0,g.Xf)(ve).subscribe(Le))})(q)}}function le(ue,de,...he){if(!0===de)return void ue();if(!1===de)return;const U=new k.Hp({next:()=>{U.unsubscribe(),ue()}});return de(...he).subscribe(U)}},9468:(at,be,P)=>{P.d(be,{R:()=>J});var g=P(4482);function J(k,ie=0){return(0,g.e)((re,le)=>{le.add(k.schedule(()=>re.subscribe(le),ie))})}},8505:(at,be,P)=>{P.d(be,{b:()=>re});var g=P(576),J=P(4482),k=P(5403),ie=P(4671);function re(le,ue,de){const he=(0,g.m)(le)||ue||de?{next:le,error:ue,complete:de}:le;return he?(0,J.e)((U,B)=>{var q;null===(q=he.subscribe)||void 0===q||q.call(he);let Le=!0;U.subscribe((0,k.x)(B,Se=>{var we;null===(we=he.next)||void 0===we||we.call(he,Se),B.next(Se)},()=>{var Se;Le=!1,null===(Se=he.complete)||void 0===Se||Se.call(he),B.complete()},Se=>{var we;Le=!1,null===(we=he.error)||void 0===we||we.call(he,Se),B.error(Se)},()=>{var Se,we;Le&&(null===(Se=he.unsubscribe)||void 0===Se||Se.call(he)),null===(we=he.finalize)||void 0===we||we.call(he)}))}):ie.y}},4408:(at,be,P)=>{P.d(be,{o:()=>re});var g=P(727);class J extends g.w0{constructor(ue,de){super()}schedule(ue,de=0){return this}}const k={setInterval(le,ue,...de){const{delegate:he}=k;return he?.setInterval?he.setInterval(le,ue,...de):setInterval(le,ue,...de)},clearInterval(le){const{delegate:ue}=k;return(ue?.clearInterval||clearInterval)(le)},delegate:void 0};var ie=P(8737);class re extends J{constructor(ue,de){super(ue,de),this.scheduler=ue,this.work=de,this.pending=!1}schedule(ue,de=0){var he;if(this.closed)return this;this.state=ue;const U=this.id,B=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(B,U,de)),this.pending=!0,this.delay=de,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(B,this.id,de),this}requestAsyncId(ue,de,he=0){return k.setInterval(ue.flush.bind(ue,this),he)}recycleAsyncId(ue,de,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return de;null!=de&&k.clearInterval(de)}execute(ue,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ue,de);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,de){let U,he=!1;try{this.work(ue)}catch(B){he=!0,U=B||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ue,scheduler:de}=this,{actions:he}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(he,this),null!=ue&&(this.id=this.recycleAsyncId(de,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,be,P)=>{P.d(be,{v:()=>k});var g=P(6063);class J{constructor(re,le=J.now){this.schedulerActionCtor=re,this.now=le}schedule(re,le=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,le)}}J.now=g.l.now;class k extends J{constructor(re,le=J.now){super(re,le),this.actions=[],this._active=!1}flush(re){const{actions:le}=this;if(this._active)return void le.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=le.shift());if(this._active=!1,ue){for(;re=le.shift();)re.unsubscribe();throw ue}}}},4986:(at,be,P)=>{P.d(be,{z:()=>k});var g=P(4408);const k=new(P(7565).v)(g.o)},6063:(at,be,P)=>{P.d(be,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(at,be,P)=>{P.d(be,{z:()=>g});const g={setTimeout(J,k,...ie){const{delegate:re}=g;return re?.setTimeout?re.setTimeout(J,k,...ie):setTimeout(J,k,...ie)},clearTimeout(J){const{delegate:k}=g;return(k?.clearTimeout||clearTimeout)(J)},delegate:void 0}},2202:(at,be,P)=>{P.d(be,{h:()=>J});const J=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,be,P)=>{P.d(be,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,be,P)=>{P.d(be,{_6:()=>le,jO:()=>ie,yG:()=>re});var g=P(576);function k(ue){return ue[ue.length-1]}function ie(ue){return(0,g.m)(k(ue))?ue.pop():void 0}function re(ue){return function J(ue){return ue&&(0,g.m)(ue.schedule)}(k(ue))?ue.pop():void 0}function le(ue,de){return"number"==typeof k(ue)?ue.pop():de}},8737:(at,be,P)=>{function g(J,k){if(J){const ie=J.indexOf(k);0<=ie&&J.splice(ie,1)}}P.d(be,{P:()=>g})},3888:(at,be,P)=>{function g(J){const ie=J(re=>{Error.call(re),re.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}P.d(be,{d:()=>g})},2806:(at,be,P)=>{P.d(be,{O:()=>ie,x:()=>k});var g=P(2416);let J=null;function k(re){if(g.v.useDeprecatedSynchronousErrorHandling){const le=!J;if(le&&(J={errorThrown:!1,error:null}),re(),le){const{errorThrown:ue,error:de}=J;if(J=null,ue)throw de}}else re()}function ie(re){g.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=re)}},9672:(at,be,P)=>{function g(J,k,ie,re=0,le=!1){const ue=k.schedule(function(){ie(),le?J.add(this.schedule(null,re)):this.unsubscribe()},re);if(J.add(ue),!le)return ue}P.d(be,{f:()=>g})},4671:(at,be,P)=>{function g(J){return J}P.d(be,{y:()=>g})},1144:(at,be,P)=>{P.d(be,{z:()=>g});const g=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(at,be,P)=>{P.d(be,{D:()=>J});var g=P(576);function J(k){return Symbol.asyncIterator&&(0,g.m)(k?.[Symbol.asyncIterator])}},576:(at,be,P)=>{function g(J){return"function"==typeof J}P.d(be,{m:()=>g})},3670:(at,be,P)=>{P.d(be,{c:()=>k});var g=P(8822),J=P(576);function k(ie){return(0,J.m)(ie[g.L])}},6495:(at,be,P)=>{P.d(be,{T:()=>k});var g=P(2202),J=P(576);function k(ie){return(0,J.m)(ie?.[g.h])}},8239:(at,be,P)=>{P.d(be,{t:()=>J});var g=P(576);function J(k){return(0,g.m)(k?.then)}},3260:(at,be,P)=>{P.d(be,{L:()=>ie,Q:()=>k});var g=P(655),J=P(576);function k(re){return(0,g.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:de,done:he}=yield(0,g.qq)(ue.read());if(he)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(de)}}finally{ue.releaseLock()}})}function ie(re){return(0,J.m)(re?.getReader)}},4482:(at,be,P)=>{P.d(be,{A:()=>J,e:()=>k});var g=P(576);function J(ie){return(0,g.m)(ie?.lift)}function k(ie){return re=>{if(J(re))return re.lift(function(le){try{return ie(le,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(at,be,P)=>{P.d(be,{U:()=>k,z:()=>J});var g=P(4671);function J(...ie){return k(ie)}function k(ie){return 0===ie.length?g.y:1===ie.length?ie[0]:function(le){return ie.reduce((ue,de)=>de(ue),le)}}},7849:(at,be,P)=>{P.d(be,{h:()=>k});var g=P(2416),J=P(3410);function k(ie){J.z.setTimeout(()=>{const{onUnhandledError:re}=g.v;if(!re)throw ie;re(ie)})}},4532:(at,be,P)=>{function g(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(be,{z:()=>g})},655:(at,be,P)=>{function ie(z,Q){var ne={};for(var te in z)Object.prototype.hasOwnProperty.call(z,te)&&Q.indexOf(te)<0&&(ne[te]=z[te]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(te=Object.getOwnPropertySymbols(z);Pe<te.length;Pe++)Q.indexOf(te[Pe])<0&&Object.prototype.propertyIsEnumerable.call(z,te[Pe])&&(ne[te[Pe]]=z[te[Pe]])}return ne}function de(z,Q,ne,te){return new(ne||(ne=Promise))(function(ke,ut){function Yt(an){try{qe(te.next(an))}catch(vn){ut(vn)}}function Bt(an){try{qe(te.throw(an))}catch(vn){ut(vn)}}function qe(an){an.done?ke(an.value):function Pe(ke){return ke instanceof ne?ke:new ne(function(ut){ut(ke)})}(an.value).then(Yt,Bt)}qe((te=te.apply(z,Q||[])).next())})}function ge(z){return this instanceof ge?(this.v=z,this):new ge(z)}function fe(z,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,te=ne.apply(z,Q||[]),ke=[];return Pe={},ut("next"),ut("throw"),ut("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function ut(Zt){te[Zt]&&(Pe[Zt]=function(Qt){return new Promise(function(Cr,xt){ke.push([Zt,Qt,Cr,xt])>1||Yt(Zt,Qt)})})}function Yt(Zt,Qt){try{!function Bt(Zt){Zt.value instanceof ge?Promise.resolve(Zt.value.v).then(qe,an):vn(ke[0][2],Zt)}(te[Zt](Qt))}catch(Cr){vn(ke[0][3],Cr)}}function qe(Zt){Yt("next",Zt)}function an(Zt){Yt("throw",Zt)}function vn(Zt,Qt){Zt(Qt),ke.shift(),ke.length&&Yt(ke[0][0],ke[0][1])}}function rt(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=z[Symbol.asyncIterator];return Q?Q.call(z):(z=function q(z){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&z[Q],te=0;if(ne)return ne.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&te>=z.length&&(z=void 0),{value:z&&z[te++],done:!z}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ne={},te("next"),te("throw"),te("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function te(ke){ne[ke]=z[ke]&&function(ut){return new Promise(function(Yt,Bt){!function Pe(ke,ut,Yt,Bt){Promise.resolve(Bt).then(function(qe){ke({value:qe,done:Yt})},ut)}(Yt,Bt,(ut=z[ke](ut)).done,ut.value)})}}}P.d(be,{FC:()=>fe,KL:()=>rt,_T:()=>ie,mG:()=>de,qq:()=>ge})},4650:(at,be,P)=>{P.d(be,{$8M:()=>Nu,$Z:()=>m0,AFp:()=>Ym,AaK:()=>de,CHM:()=>pu,CRH:()=>O_,CZH:()=>Dp,CqO:()=>Al,D6c:()=>hw,EJc:()=>_E,EpF:()=>Pi,F4k:()=>zv,FYo:()=>vf,FiY:()=>Me,G48:()=>py,GfV:()=>e0,Gpc:()=>B,JOm:()=>Xi,KtG:()=>gu,LFG:()=>wn,LSH:()=>Md,Lbi:()=>j_,Lck:()=>PI,MAs:()=>cm,MMx:()=>Pm,NdJ:()=>Wv,OlP:()=>yn,PXZ:()=>Ub,Q6J:()=>lm,QGY:()=>pm,QP$:()=>Kt,Qsj:()=>jD,R0b:()=>ss,RDi:()=>y,Rgc:()=>fp,SBq:()=>fl,Sil:()=>Dh,Suo:()=>Hm,TTD:()=>Gi,TgZ:()=>qf,X6Q:()=>X_,XFs:()=>Ze,Xpm:()=>Ce,Xts:()=>Tg,Y36:()=>Qu,YKP:()=>cp,YNc:()=>Hv,Yjl:()=>_e,Yz7:()=>Qt,Z0I:()=>ji,ZZ4:()=>cw,_Bn:()=>hh,_UZ:()=>dm,_Vd:()=>Wu,_c5:()=>Jb,_uU:()=>ks,aQg:()=>_y,c2e:()=>vE,cJS:()=>xt,cg1:()=>Jf,dDg:()=>Pb,dqk:()=>sn,eFA:()=>oy,ekj:()=>wt,eoX:()=>CE,f3M:()=>D,g9A:()=>Xm,h0i:()=>qo,hGG:()=>dw,hij:()=>oc,iGM:()=>R_,ifc:()=>it,ip1:()=>yE,jDz:()=>LI,kL8:()=>n_,lG2:()=>W,lqb:()=>zu,lri:()=>DE,n5z:()=>Yi,oAB:()=>Ot,oxw:()=>J0,q4F:()=>t0,qLn:()=>pl,qOj:()=>rm,qZA:()=>zo,rWj:()=>K_,sBO:()=>ew,sIi:()=>nc,s_b:()=>Um,soG:()=>ey,tb:()=>$_,tp0:()=>yt,uIk:()=>Uv,vHH:()=>we,vpe:()=>Yo,wAp:()=>pt,xp6:()=>a0,z2F:()=>Sp,zSh:()=>sv,zs3:()=>es});var g=P(7579),J=P(727),k=P(9751),ie=P(6451),re=P(3099);function le(i){for(let s in i)if(i[s]===le)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function he(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=le({__forward_ref__:le});function B(i){return i.__forward_ref__=B,i.toString=function(){return de(this())},i}function q(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===B}class we extends Error{constructor(s,a){super(function Xe(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ge(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i,s){throw new we(-201,!1)}function Bt(i,s){null==i&&function qe(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function xt(i){return{providers:i.providers||[],imports:i.imports||[]}}function dn(i){return ui(i,ci)||ui(i,Yr)}function ji(i){return null!==dn(i)}function ui(i,s){return i.hasOwnProperty(s)?i[s]:null}function Fs(i){return i&&(i.hasOwnProperty(Kr)||i.hasOwnProperty(ta))?i[Kr]:null}const ci=le({\u0275prov:le}),Kr=le({\u0275inj:le}),Yr=le({ngInjectableDef:le}),ta=le({ngInjectorDef:le});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let mr;function Hn(i){const s=mr;return mr=i,s}function Qr(i,s,a){const c=dn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ze.Optional?null:void 0!==s?s:void ve(de(i))}function On(i){return{toString:i}.toString()}var Fn=(()=>((Fn=Fn||{})[Fn.OnPush=0]="OnPush",Fn[Fn.Default=1]="Default",Fn))(),it=(()=>{return(i=it||(it={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",it;var i})();const sn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),kr={},Dt=[],ds=le({\u0275cmp:le}),Jt=le({\u0275dir:le}),Di=le({\u0275pipe:le}),Xt=le({\u0275mod:le}),Gn=le({\u0275fac:le}),Tr=le({__NG_ELEMENT_ID__:le});let Je=0;function Ce(i){return On(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Fn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Dt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||it.Emulated,id:"c"+Je++,styles:i.styles||Dt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,v=i.features;return l.inputs=L(i.inputs,c),l.outputs=L(i.outputs),v&&v.forEach(I=>I(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(_t).filter(mt):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(ct).filter(mt):null,l})}function _t(i){return K(i)||Ge(i)}function mt(i){return null!==i}function Ot(i){return On(()=>({type:i.type,bootstrap:i.bootstrap||Dt,declarations:i.declarations||Dt,imports:i.imports||Dt,exports:i.exports||Dt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,s){if(null==i)return kr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=c,s&&(s[l]=f)}return a}const W=Ce;function _e(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function K(i){return i[ds]||null}function Ge(i){return i[Jt]||null}function ct(i){return i[Di]||null}function Kt(i){const s=K(i)||Ge(i)||ct(i);return null!==s&&s.standalone}function pn(i,s){const a=i[Xt]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function tr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ar(i){return Array.isArray(i)&&!0===i[1]}function ru(i){return 0!=(8&i.flags)}function ra(i){return 2==(2&i.flags)}function bc(i){return 1==(1&i.flags)}function yr(i){return null!==i.template}function Ph(i){return 0!=(256&i[2])}function bi(i,s){return i.hasOwnProperty(Gn)?i[Gn]:null}class Hi{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Gi(){return js}function js(i){return i.type.prototype.ngOnChanges&&(i.setInput=su),ia}function ia(){const i=Vh(this),s=i?.current;if(s){const a=i.previous;if(a===kr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function su(i,s,a,c){const l=Vh(i)||function sa(i,s){return i[xc]=s}(i,{previous:kr,current:null}),f=l.current||(l.current={}),v=l.previous,I=this.declaredInputs[a],E=v[I];f[I]=new Hi(E&&E.currentValue,s,v===kr),i[c]=s}Gi.ngInherit=!0;const xc="__ngSimpleChanges__";function Vh(i){return i[xc]||null}function Sn(i){for(;Array.isArray(i);)i=i[0];return i}function Xr(i,s){return Sn(s[i])}function vr(i,s){return Sn(s[i.index])}function go(i,s){return i.data[s]}function Wt(i,s){const a=s[i];return tr(a)?a:a[0]}function $s(i){return 64==(64&i[2])}function di(i,s){return null==s?null:i[s]}function lu(i){i[18]=0}function Tn(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const It={lFrame:Uc(null),bindingsEnabled:!0};function qi(){return It.bindingsEnabled}function De(){return It.lFrame.lView}function $t(){return It.lFrame.tView}function pu(i){return It.lFrame.contextLView=i,i[8]}function gu(i){return It.lFrame.contextLView=null,i}function xn(){let i=mu();for(;null!==i&&64===i.type;)i=i.parent;return i}function mu(){return It.lFrame.currentTNode}function ei(i,s){const a=It.lFrame;a.currentTNode=i,a.isParent=s}function aa(){return It.lFrame.isParent}function Hs(){return It.lFrame.bindingIndex++}function Xp(i,s){const a=It.lFrame;a.bindingIndex=a.bindingRootIndex=i,yu(s)}function yu(i){It.lFrame.currentDirectiveIndex=i}function Fc(){return It.lFrame.currentQueryIndex}function ha(i){It.lFrame.currentQueryIndex=i}function Lc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function vu(i,s,a){if(a&Ze.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&Ze.Host||(l=Lc(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const c=It.lFrame=Vc();return c.currentTNode=s,c.lView=i,!0}function _u(i){const s=Vc(),a=i[1];It.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Vc(){const i=It.lFrame,s=null===i?null:i.child;return null===s?Uc(i):s}function Uc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Bc(){const i=It.lFrame;return It.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const td=Bc;function Gs(){const i=Bc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function qn(){return It.lFrame.selectedIndex}function Lr(i){It.lFrame.selectedIndex=i}function mn(){const i=It.lFrame;return go(i.tView,i.selectedIndex)}function Eu(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Ws(i,s,a){vo(i,s,3,a)}function yo(i,s,a,c){(3&i[2])===a&&vo(i,s,a,c)}function id(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function vo(i,s,a,c){const f=c??-1,v=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<v;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(sd(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function sd(i,s,a,c){const l=a[c]<0,f=a[c+1],I=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class _s{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function wo(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const f=a[c++],v=a[c++],I=a[c++];i.setAttribute(s,v,I,f)}else{const f=l,v=a[++c];Tu(f)?i.setProperty(s,f,v):i.setAttribute(s,f,v),c++}}return c}function Zs(i){return 3===i||4===i||6===i}function Tu(i){return 64===i.charCodeAt(0)}function fa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||ad(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function ad(i,s,a,c,l){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){v=-1;break}if(I>s){v=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==l&&(i[f+1]=l));if(c===i[f+1])return void(i[f+2]=l)}f++,null!==c&&f++,null!==l&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==l&&i.splice(f++,0,l)}function ud(i){return-1!==i}function nr(i){return 32767&i}function ga(i,s){let a=function pa(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Ai=!0;function ma(i){const s=Ai;return Ai=i,s}let kn=0;const hi={};function Ks(i,s){const a=Su(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,va(c.data,i),va(s,null),va(c.blueprint,null));const l=xu(i,s),f=i.injectorIndex;if(ud(l)){const v=nr(l),I=ga(l,s),E=I[1].data;for(let T=0;T<8;T++)s[f+T]=I[v+T]|E[v+T]}return s[f+8]=l,f}function va(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Su(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function xu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=Do(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function ws(i,s,a){!function Au(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Tr)&&(c=a[Tr]),null==c&&(c=a[Tr]=kn++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Is(i,s,a){if(a&Ze.Optional||void 0!==i)return i;ve()}function Gc(i,s,a,c){if(a&Ze.Optional&&void 0===c&&(c=null),0==(a&(Ze.Self|Ze.Host))){const l=i[9],f=Hn(void 0);try{return l?l.get(s,c,a&Ze.Optional):Qr(s,c,a&Ze.Optional)}finally{Hn(f)}}return Is(c,0,a)}function Ys(i,s,a,c=Ze.Default,l){if(null!==i){if(1024&s[2]){const v=function Eo(i,s,a,c,l){let f=i,v=s;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=_a(f,v,a,c|Ze.Self,hi);if(I!==hi)return I;let E=f.parent;if(!E){const T=v[21];if(T){const M=T.get(a,hi,c);if(M!==hi)return M}E=Do(v),v=v[15]}f=E}return l}(i,s,a,c,hi);if(v!==hi)return v}const f=_a(i,s,a,c,hi);if(f!==hi)return f}return Gc(s,a,c,l)}function _a(i,s,a,c,l){const f=function zc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Tr)?i[Tr]:void 0;return"number"==typeof s?s>=0?255&s:Wc:s}(a);if("function"==typeof f){if(!vu(s,i,c))return c&Ze.Host?Is(l,0,c):Gc(s,a,c,l);try{const v=f(c);if(null!=v||c&Ze.Optional)return v;ve()}finally{td()}}else if("number"==typeof f){let v=null,I=Su(i,s),E=-1,T=c&Ze.Host?s[16][6]:null;for((-1===I||c&Ze.SkipSelf)&&(E=-1===I?xu(i,s):s[I+8],-1!==E&&wa(c,!1)?(v=s[1],I=nr(E),s=ga(E,s)):I=-1);-1!==I;){const M=s[1];if(Mu(f,I,M.data)){const O=dd(I,s,a,v,c,T);if(O!==hi)return O}E=s[I+8],-1!==E&&wa(c,s[1].data[I+8]===T)&&Mu(f,I,s)?(v=M,I=nr(E),s=ga(E,s)):I=-1}}return l}function dd(i,s,a,c,l,f){const v=s[1],I=v.data[i+8],M=Io(I,v,a,null==c?ra(I)&&Ai:c!=v&&0!=(3&I.type),l&Ze.Host&&f===I);return null!==M?Ki(s,v,M,I):hi}function Io(i,s,a,c,l){const f=i.providerIndexes,v=s.data,I=1048575&f,E=i.directiveStart,M=f>>20,H=l?I+M:i.directiveEnd;for(let X=c?I:I+M;X<H;X++){const ye=v[X];if(X<E&&a===ye||X>=E&&ye.type===a)return X}if(l){const X=v[E];if(X&&yr(X)&&X.type===a)return E}return null}function Ki(i,s,a,c){let l=i[a];const f=s.data;if(function qs(i){return i instanceof _s}(l)){const v=l;v.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ge(i)}(f[a]));const I=ma(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?Hn(v.injectImpl):null;vu(i,c,Ze.Default);try{l=i[a]=v.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function rd(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(c){const v=js(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&Hn(E),ma(I),v.resolving=!1,td()}}return l}function Mu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function wa(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class Qs{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Ys(this._tNode,this._lView,s,c,a)}}function Wc(){return new Qs(xn(),De())}function Yi(i){return On(()=>{const s=i.prototype.constructor,a=s[Gn]||Ru(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const f=l[Gn]||Ru(l);if(f&&f!==a)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function Ru(i){return Le(i)?()=>{const s=Ru(q(i));return s&&s()}:bi(i)}function Do(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Nu(i){return function ld(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const f=a[l];if(Zs(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(xn(),i)}const Es="__parameters__";function To(i,s,a){return On(()=>{const c=function Ou(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...f){if(this instanceof l)return c.apply(this,f),this;const v=new l(...f);return I.annotation=v,I;function I(E,T,M){const O=E.hasOwnProperty(Es)?E[Es]:Object.defineProperty(E,Es,{value:[]})[Es];for(;O.length<=M;)O.push(null);return(O[M]=O[M]||[]).push(v),E}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class yn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),Cn(c,s)):s!==i&&s.push(c)}return s}function pi(i,s){i.forEach(a=>Array.isArray(a)?pi(a,s):s(a))}function Ea(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Sr(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function ot(i,s,a){let c=bs(i,s);return c>=0?i[1|c]=a:(c=~c,function Zc(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Ca(i,s){const a=bs(i,s);if(a>=0)return i[1|a]}function bs(i,s){return function So(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const f=c+(l-c>>1),v=i[f<<a];if(s===v)return f<<a;v>s?l=f:c=f+1}return~(l<<a)}(i,s,1)}const gi={},Qc="__NG_DI_FLAG__",Mo="ngTempTokenPath",Qi=/\n/gm,_r="__source";let Ss;function Ji(i){const s=Ss;return Ss=i,s}function Bn(i,s=Ze.Default){if(void 0===Ss)throw new we(-203,!1);return null===Ss?Qr(i,void 0,s):Ss.get(i,s&Ze.Optional?null:void 0,s)}function wn(i,s=Ze.Default){return(function ls(){return mr}()||Bn)(q(i),s)}function D(i,s=Ze.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),wn(i,s)}function b(i){const s=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let l,f=Ze.Default;for(let v=0;v<c.length;v++){const I=c[v],E=F(I);"number"==typeof E?-1===E?l=I.token:f|=E:l=I}s.push(wn(l,f))}else s.push(wn(c))}return s}function x(i,s){return i[Qc]=s,i.prototype[Qc]=s,i}function F(i){return i[Qc]}const Me=x(To("Optional"),8),yt=x(To("SkipSelf"),4);var Xi=(()=>((Xi=Xi||{})[Xi.Important=1]="Important",Xi[Xi.DashCase=2]="DashCase",Xi))();const rl=new Map;let Jh=0;const eo="__ngContext__";function dr(i,s){tr(s)?(i[eo]=s[20],function By(i){rl.set(i[20],i)}(s)):i[eo]=s}function vd(i,s){return undefined(i,s)}function Ma(i){const s=i[3];return Ar(s)?s[3]:s}function Ra(i){return hg(i[13])}function to(i){return hg(i[4])}function hg(i){for(;null!==i&&!Ar(i);)i=i[4];return i}function no(i,s,a,c,l){if(null!=c){let f,v=!1;Ar(c)?f=c:tr(c)&&(v=!0,c=c[0]);const I=Sn(c);0===i&&null!==a?null==l?yg(s,a,I):io(s,a,I,l||null,!0):1===i&&null!==a?io(s,a,I,l||null,!0):2===i?function Ad(i,s,a){const c=Mr(i,s);c&&function sf(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,v):3===i&&s.destroyNode(I),null!=f&&function uf(i,s,a,c,l){const f=a[7];f!==Sn(a)&&no(s,i,c,f,l);for(let I=10;I<a.length;I++){const E=a[I];Po(E[1],E,i,s,c,f)}}(s,i,f,a,l)}}function $u(i,s,a){return i.createElement(s,a)}function tf(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,Tn(l,-1)),a.splice(c,1)}function nf(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&tf(l,c),s>0&&(i[a-1][4]=c[4]);const f=Sr(i,10+s);!function Na(i,s){Po(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const v=f[19];null!==v&&v.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function gg(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Po(i,s,a,3,null,null),function qy(i){let s=i[13];if(!s)return rf(i[1],i);for(;s;){let a=null;if(tr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)tr(s)&&rf(s[1],s),s=s[3];null===s&&(s=i),tr(s)&&rf(s[1],s),a=s&&s[4]}s=a}}(s)}}function rf(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function mg(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof _s)){const f=a[c+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const I=l[f[v]],E=f[v+1];try{E.call(I)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function Ky(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+1],I="function"==typeof v?v(s):Sn(s[v]),E=c[l=a[f+2]],T=a[f+3];"boolean"==typeof T?I.removeEventListener(a[f],E,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),f+=2}else{const v=c[l=a[f+1]];a[f].call(v)}if(null!==c){for(let f=l+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Ar(s[3])){a!==s[3]&&tf(a,s);const c=s[19];null!==c&&c.detachView(i)}!function pd(i){rl.delete(i[20])}(s)}}function Id(i,s,a){return function Ed(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===it.None||l===it.Emulated)return null}return vr(c,a)}(i,s.parent,a)}function io(i,s,a,c,l){i.insertBefore(s,a,c,l)}function yg(i,s,a){i.appendChild(s,a)}function ol(i,s,a,c,l){null!==c?io(i,s,a,c,l):yg(i,s,a)}function Mr(i,s){return i.parentNode(s)}let hf,Dd=function al(i,s,a){return 40&i.type?vr(i,a):null};function bd(i,s,a,c){const l=Id(i,c,s),f=s[11],I=function af(i,s,a){return Dd(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let E=0;E<a.length;E++)ol(f,l,a[E],I,!1);else ol(f,l,a,I,!1)}function ii(i,s){if(null!==s){const a=s.type;if(3&a)return vr(s,i);if(4&a)return ul(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return ii(i,c);{const l=i[s.index];return Ar(l)?ul(-1,l):Sn(l)}}if(32&a)return vd(s,i)()||Sn(i[s.index]);{const c=Td(i,s);return null!==c?Array.isArray(c)?c[0]:ii(Ma(i[16]),c):ii(i,s.next)}}return null}function Td(i,s){return null!==s?i[16][6].projection[s.projection]:null}function ul(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return ii(c,l)}return s[7]}function cl(i,s,a,c,l,f,v){for(;null!=a;){const I=c[a.index],E=a.type;if(v&&0===s&&(I&&dr(Sn(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)cl(i,s,a.child,c,l,f,!1),no(s,i,l,I,f);else if(32&E){const T=vd(a,c);let M;for(;M=T();)no(s,i,l,M,f);no(s,i,l,I,f)}else 16&E?Fo(i,s,c,a,l,f):no(s,i,l,I,f);a=v?a.projectionNext:a.next}}function Po(i,s,a,c,l,f){cl(a,c,i.firstChild,s,l,f,!1)}function Fo(i,s,a,c,l,f){const v=a[16],E=v[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)no(s,i,l,E[T],f);else cl(i,s,E,v[3],l,f,!0)}function Ri(i,s,a){i.setAttribute(s,"style",a)}function Lo(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function y(i){hf=i}class oe{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ir(i){return i instanceof oe?i.changingThisBreaksApplicationSecurity:i}const Pa=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Yn=(()=>((Yn=Yn||{})[Yn.NONE=0]="NONE",Yn[Yn.HTML=1]="HTML",Yn[Yn.STYLE=2]="STYLE",Yn[Yn.SCRIPT=3]="SCRIPT",Yn[Yn.URL=4]="URL",Yn[Yn.RESOURCE_URL=5]="RESOURCE_URL",Yn))();function Md(i){const s=function Gu(){const i=De();return i&&i[12]}();return s?s.sanitize(Yn.URL,i)||"":function Ni(i,s){const a=function vg(i){return i instanceof oe&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ir(i):function Fa(i){return(i=String(i)).match(Pa)?i:"unsafe:"+i}(ge(i))}const Tg=new yn("ENVIRONMENT_INITIALIZER"),Rd=new yn("INJECTOR",-1),tv=new yn("INJECTOR_DEF_TYPES");class Gw{get(s,a=gi){if(a===gi){const c=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw c.name="NullInjectorError",c}return a}}function xD(...i){return{\u0275providers:zw(0,i)}}function zw(i,...s){const a=[],c=new Set;let l;return pi(s,f=>{const v=f;nv(v,a,[],c)&&(l||(l=[]),l.push(v))}),void 0!==l&&Ww(l,a),a}function Ww(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];pi(l,f=>{s.push(f)})}}function nv(i,s,a,c){if(!(i=q(i)))return!1;let l=null,f=Fs(i);const v=!f&&K(i);if(f||v){if(v&&!v.standalone)return!1;l=i}else{const E=i.ngModule;if(f=Fs(E),!f)return!1;l=E}const I=c.has(l);if(v){if(I)return!1;if(c.add(l),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of E)nv(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let T;c.add(l);try{pi(f.imports,M=>{nv(M,s,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Ww(T,s)}if(!I){const T=bi(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:Dt},{provide:tv,useValue:l,multi:!0},{provide:Tg,useValue:()=>wn(l),multi:!0})}const E=f.providers;null==E||I||pi(E,M=>{s.push(M)})}}return l!==i&&void 0!==i.providers}const MD=le({provide:String,useValue:le});function iv(i){return null!==i&&"object"==typeof i&&MD in i}function hl(i){return"function"==typeof i}const sv=new yn("Set Injector scope."),mf={},ND={};let Ag;function yf(){return void 0===Ag&&(Ag=new Gw),Ag}class zu{}class ov extends zu{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xg(s,v=>this.processProvider(v)),this.records.set(Rd,Nd(void 0,this)),l.has("environment")&&this.records.set(zu,Nd(void 0,this));const f=this.records.get(sv);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(tv.multi,Dt,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Ji(this),c=Hn(void 0);try{return s()}finally{Ji(a),Hn(c)}}get(s,a=gi,c=Ze.Default){this.assertNotDestroyed();const l=Ji(this),f=Hn(void 0);try{if(!(c&Ze.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function Yw(i){return"function"==typeof i||"object"==typeof i&&i instanceof yn}(s)&&dn(s);I=E&&this.injectableDefInScope(E)?Nd(Sg(s),mf):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&Ze.Self?yf():this.parent).get(s,a=c&Ze.Optional&&a===gi?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Mo]=v[Mo]||[]).unshift(de(s)),l)throw v;return function Z(i,s,a,c){const l=i[Mo];throw s[_r]&&l.unshift(s[_r]),i.message=function ee(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=de(s);if(Array.isArray(s))l=s.map(de).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let I=s[v];f.push(v+":"+("string"==typeof I?JSON.stringify(I):de(I)))}l=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(Qi,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Mo]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{Hn(f),Ji(l)}}resolveInjectorInitializers(){const s=Ji(this),a=Hn(void 0);try{const c=this.get(Tg.multi,Dt,Ze.Self);for(const l of c)l()}finally{Ji(s),Hn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(de(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(s){let a=hl(s=q(s))?s:q(s&&s.provide);const c=function kD(i){return iv(i)?Nd(void 0,i.useValue):Nd(Kw(i),mf)}(s);if(hl(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=Nd(void 0,mf,!0),l.factory=()=>b(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===mf&&(a.value=ND,a.value=a.factory()),"object"==typeof a.value&&a.value&&function FD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=q(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Sg(i){const s=dn(i),a=null!==s?s.factory:bi(i);if(null!==a)return a;if(i instanceof yn)throw new we(204,!1);if(i instanceof Function)return function OD(i){const s=i.length;if(s>0)throw function Ds(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new we(204,!1);const a=function br(i){const s=i&&(i[ci]||i[Yr]);if(s){const a=function Or(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function Kw(i,s,a){let c;if(hl(i)){const l=q(i);return bi(l)||Sg(l)}if(iv(i))c=()=>q(i.useValue);else if(function Zw(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...b(i.deps||[]));else if(function qw(i){return!(!i||!i.useExisting)}(i))c=()=>wn(q(i.useExisting));else{const l=q(i&&(i.useClass||i.provide));if(!function PD(i){return!!i.deps}(i))return bi(l)||Sg(l);c=()=>new l(...b(i.deps))}return c}function Nd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function av(i){return!!i.\u0275providers}function xg(i,s){for(const a of i)Array.isArray(a)?xg(a,s):av(a)?xg(a.\u0275providers,s):s(a)}class LD{}class UD{resolveComponentFactory(s){throw function VD(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Wu=(()=>{class i{}return i.NULL=new UD,i})();function Xw(){return qu(xn(),De())}function qu(i,s){return new fl(vr(i,s))}let fl=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Xw,i})();function BD(i){return i instanceof fl?i.nativeElement:i}class vf{}let jD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function $D(){const i=De(),a=Wt(xn().index,i);return(tr(a)?a:i)[11]}(),i})(),HD=(()=>{class i{}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:()=>null}),i})();class e0{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const t0=new e0("14.2.12"),Mg={};function Rg(i){return i.ngOriginalError}class pl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Rg(s);for(;a&&Rg(a);)a=Rg(a);return a||null}}function Bo(i){return i instanceof Function?i():i}function uv(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===c||i.charCodeAt(l+f)<=32)return l}a=l+1}}const kg="ng-template";function YD(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==uv(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function r0(i){return 4===i.type&&i.value!==kg}function QD(i,s,a){return s===(4!==i.type||a?i.value:kg)}function s0(i,s,a){let c=4;const l=i.attrs||[],f=function o0(i){for(let s=0;s<i.length;s++)if(Zs(i[s]))return s;return i.length}(l);let v=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!v)if(4&c){if(c=2|1&c,""!==E&&!QD(i,E,a)||""===E&&1===s.length){if(oo(c))return!1;v=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!YD(i.attrs,T,a)){if(oo(c))return!1;v=!0}continue}const O=EA(8&c?"class":E,l,r0(i),a);if(-1===O){if(oo(c))return!1;v=!0;continue}if(""!==T){let H;H=O>f?"":l[O+1].toLowerCase();const X=8&c?H:null;if(X&&-1!==uv(X,T,0)||2&c&&T!==H){if(oo(c))return!1;v=!0}}}}else{if(!v&&!oo(c)&&!oo(E))return!1;if(v&&oo(E))continue;v=!1,c=E|1&c}}return oo(c)||v}function oo(i){return 0==(1&i)}function EA(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let f=!1;for(;l<s.length;){const v=s[l];if(v===i)return l;if(3===v||6===v)f=!0;else{if(1===v||2===v){let I=s[++l];for(;"string"==typeof I;)I=s[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=f?1:2}return-1}return function JD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function If(i,s,a=!1){for(let c=0;c<s.length;c++)if(s0(i,s[c],a))return!0;return!1}function cv(i,s){return i?":not("+s.trim()+")":s}function eC(i){let s=i[0],a=1,c=2,l="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];l+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?l+="."+v:4&c&&(l+=" "+v);else""!==l&&!oo(v)&&(s+=cv(f,l),l=""),c=v,f=f||!oo(c);a++}return""!==l&&(s+=cv(f,l)),s}const kt={};function a0(i){lv($t(),De(),qn()+i,!1)}function lv(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Ws(s,f,a)}else{const f=i.preOrderHooks;null!==f&&yo(s,f,0,a)}Lr(a)}function l0(i,s=null,a=null,c){const l=me(i,s,a,c);return l.resolveInjectorInitializers(),l}function me(i,s=null,a=null,c,l=new Set){const f=[a||Dt,xD(i)];return c=c||("object"==typeof i?void 0:de(i)),new ov(f,s||yf(),c||null,l)}let es=(()=>{class i{static create(a,c){if(Array.isArray(a))return l0({name:""},c,a,"");{const l=a.name??"";return l0({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=gi,i.NULL=new Gw,i.\u0275prov=Qt({token:i,providedIn:"any",factory:()=>wn(Rd)}),i.__NG_ELEMENT_ID__=-1,i})();function Qu(i,s=Ze.Default){const a=De();return null===a?wn(i,s):Ys(xn(),a,q(i),s)}function m0(){throw new Error("invalid")}function Ua(i,s){return i<<17|s<<2}function Rs(i){return i>>17&32767}function pv(i){return 2|i}function $o(i){return(131068&i)>>2}function Pd(i,s){return-131069&i|s<<2}function bf(i){return 1|i}function x0(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],f=a[c+1];if(-1!==f){const v=i.data[f];ha(l),v.contentQueries(2,s[f],f)}}}function Wg(i,s,a,c,l,f,v,I,E,T,M){const O=s.blueprint.slice();return O[0]=l,O[2]=76|c,(null!==M||i&&1024&i[2])&&(O[2]|=1024),lu(O),O[3]=O[15]=i,O[8]=a,O[10]=v||i&&i[10],O[11]=I||i&&i[11],O[12]=E||i&&i[12]||null,O[9]=T||i&&i[9]||null,O[6]=f,O[20]=function Uy(){return Jh++}(),O[21]=M,O[16]=2==s.type?i[16]:O,O}function Ba(i,s,a,c,l){let f=i.data[s];if(null===f)f=function Mf(i,s,a,c,l){const f=mu(),v=aa(),E=i.data[s]=function ml(i,s,a,c,l,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=E),null!==f&&(v?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,l),function Jp(){return It.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=l;const v=function mo(){const i=It.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return ei(f,!0),f}function Xu(i,s,a,c){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function qg(i,s,a){_u(s);try{const c=i.viewQuery;null!==c&&em(1,c,a);const l=i.template;null!==l&&Ld(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&x0(i,s),i.staticViewQueries&&em(2,i.viewQuery,a);const f=i.components;null!==f&&function M0(i,s){for(let a=0;a<s.length;a++)Ff(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Gs()}}function Zg(i,s,a,c){const l=s[2];if(128!=(128&l)){_u(s);try{lu(s),function kc(i){return It.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ld(i,s,a,2,c);const v=3==(3&l);if(v){const T=i.preOrderCheckHooks;null!==T&&Ws(s,T,null)}else{const T=i.preOrderHooks;null!==T&&yo(s,T,0,null),id(s,0)}if(function Pf(i){for(let s=Ra(i);null!==s;s=to(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],f=l[3];0==(512&l[2])&&Tn(f,1),l[2]|=512}}}(s),function EC(i){for(let s=Ra(i);null!==s;s=to(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];$s(c)&&Zg(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&x0(i,s),v){const T=i.contentCheckHooks;null!==T&&Ws(s,T)}else{const T=i.contentHooks;null!==T&&yo(s,T,1),id(s,1)}!function Ev(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)Lr(~l);else{const f=l,v=a[++c],I=a[++c];Xp(v,f),I(2,s[f])}}}finally{Lr(-1)}}(i,s);const I=i.components;null!==I&&function Dv(i,s){for(let a=0;a<s.length;a++)F0(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&em(2,E,c),v){const T=i.viewCheckHooks;null!==T&&Ws(s,T)}else{const T=i.viewHooks;null!==T&&yo(s,T,2),id(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Tn(s[3],-1))}finally{Gs()}}}function Ld(i,s,a,c,l){const f=qn(),v=2&c;try{Lr(-1),v&&s.length>22&&lv(i,s,22,!1),a(c,l)}finally{Lr(f)}}function Kg(i,s,a){!qi()||(function O0(i,s,a,c){const l=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ks(a,s),dr(c,s);const v=a.initialInputs;for(let I=l;I<f;I++){const E=i.data[I],T=yr(E);T&&wC(s,a,E);const M=Ki(s,i,I,a);dr(M,s),null!==v&&Ov(0,I-l,M,E,0,v),T&&(Wt(a.index,s)[8]=M)}}(i,s,a,vr(a,s)),128==(128&a.flags)&&function k0(i,s,a){const c=a.directiveStart,l=a.directiveEnd,f=a.index,v=function Pc(){return It.lFrame.currentDirectiveIndex}();try{Lr(f);for(let I=c;I<l;I++){const E=i.data[I],T=s[I];yu(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Ud(E,T)}}finally{Lr(-1),yu(v)}}(i,s,a))}function Yg(i,s,a=vr){const c=s.localNames;if(null!==c){let l=s.index+1;for(let f=0;f<c.length;f+=2){const v=c[f+1],I=-1===v?a(s,i):i[v];i[l++]=I}}}function Rf(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=bv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function bv(i,s,a,c,l,f,v,I,E,T){const M=22+c,O=M+l,H=function yC(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:kt);return a}(M,O),X="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:I,declTNode:s,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:X,incompleteFirstPass:!1}}function R0(i,s,a,c){const l=ec(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&Go(i).push(c,l.length-1))}function Tv(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function Of(i,s){const c=s.directiveEnd,l=i.data,f=s.attrs,v=[];let I=null,E=null;for(let T=s.directiveStart;T<c;T++){const M=l[T],O=M.inputs,H=null===f||r0(s)?null:P0(O,f);v.push(H),I=Tv(O,T,I),E=Tv(M.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=I,s.outputs=E}function Av(i,s){const a=Wt(s,i);16&a[2]||(a[2]|=32)}function Vd(i,s,a,c){let l=!1;if(qi()){const f=function Mv(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let f=0;f<c.length;f++){const v=c[f];If(a,v.selectors,!1)&&(l||(l=[]),ws(Ks(a,s),i,v.type),yr(v)?(Qg(i,a),l.unshift(v)):l.push(v))}return l}(i,s,a),v=null===c?null:{"":-1};if(null!==f){l=!0,Bd(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const O=f[M];O.providersResolver&&O.providersResolver(O)}let I=!1,E=!1,T=Xu(i,s,f.length,null);for(let M=0;M<f.length;M++){const O=f[M];a.mergedAttrs=fa(a.mergedAttrs,O.hostAttrs),Nv(i,a,s,T,O),Jg(T,O,v),null!==O.contentQueries&&(a.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(a.flags|=128);const H=O.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}Of(i,a)}v&&function Rv(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new we(-301,!1);c.push(s[l],f)}}}(a,c,v)}return a.mergedAttrs=fa(a.mergedAttrs,a.attrs),l}function Sv(i,s,a,c,l,f){const v=f.hostBindings;if(v){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function xv(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,l,v)}}function Ud(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Qg(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Jg(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;yr(s)&&(a[""]=i)}}function Bd(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Nv(i,s,a,c,l){i.data[c]=l;const f=l.factory||(l.factory=bi(l.type)),v=new _s(f,yr(l),Qu);i.blueprint[c]=v,a[c]=v,Sv(i,s,0,c,Xu(i,a,l.hostVars,kt),l)}function wC(i,s,a){const c=vr(s,i),l=Rf(a),f=i[10],v=Hd(i,Wg(i,l,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=v}function Ns(i,s,a,c,l,f){const v=vr(i,s);!function jd(i,s,a,c,l,f,v){if(null==f)i.removeAttribute(s,l,a);else{const I=null==v?ge(f):v(f,c||"",l);i.setAttribute(s,l,I,a)}}(s[11],v,f,i.value,a,c,l)}function Ov(i,s,a,c,l,f){const v=f[s];if(null!==v){const I=c.setInput;for(let E=0;E<v.length;){const T=v[E++],M=v[E++],O=v[E++];null!==I?c.setInput(a,O,T,M):a[M]=O}}}function P0(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function kv(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function F0(i,s){const a=Wt(s,i);if($s(a)){const c=a[1];48&a[2]?Zg(c,a,c.template,a[8]):a[5]>0&&$d(a)}}function $d(i){for(let c=Ra(i);null!==c;c=to(c))for(let l=10;l<c.length;l++){const f=c[l];if($s(f))if(512&f[2]){const v=f[1];Zg(v,f,v.template,f[8])}else f[5]>0&&$d(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=Wt(a[c],i);$s(l)&&l[5]>0&&$d(l)}}function Ff(i,s){const a=Wt(s,i),c=a[1];(function yl(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),qg(c,a,a[8])}function Hd(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Pv(i){for(;i;){i[2]|=32;const s=Ma(i);if(Ph(i)&&!s)return i;i=s}return null}function Xg(i,s,a,c=!0){const l=s[10];l.begin&&l.begin();try{Zg(i,s,i.template,a)}catch(v){throw c&&Vf(s,v),v}finally{l.end&&l.end()}}function em(i,s,a){ha(0),s(i,a)}function ec(i){return i[7]||(i[7]=[])}function Go(i){return i.cleanup||(i.cleanup=[])}function Vf(i,s){const a=i[9],c=a?a.get(pl,null):null;c&&c.handleError(s)}function tm(i,s,a,c,l){for(let f=0;f<a.length;){const v=a[f++],I=a[f++],E=s[v],T=i.data[v];null!==T.setInput?T.setInput(E,l,c,I):E[I]=l}}function vl(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const I=s[v];"number"==typeof I?f=I:1==f?l=he(l,I):2==f&&(c=he(c,I+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function tc(i,s,a,c,l=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(Sn(f)),Ar(f))for(let I=10;I<f.length;I++){const E=f[I],T=E[1].firstChild;null!==T&&tc(E[1],E,T,c)}const v=a.type;if(8&v)tc(i,s,a.child,c);else if(32&v){const I=vd(a,s);let E;for(;E=I();)c.push(E)}else if(16&v){const I=Td(s,a);if(Array.isArray(I))c.push(...I);else{const E=Ma(s[16]);tc(E[1],E,I,c,!0)}}a=l?a.projectionNext:a.next}return c}class ja{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return tc(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ar(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(nf(s,c),Sr(a,c))}this._attachedToViewContainer=!1}gg(this._lView[1],this._lView)}onDestroy(s){R0(this._lView[1],this._lView,null,s)}markForCheck(){Pv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Xg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function pg(i,s){Po(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=s}}class CC extends ja{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Xg(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class nm extends Wu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=K(s);return new Uf(a,this.ngModule)}}function L0(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class TC{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,Mg,c);return l!==Mg||a===Mg?l:this.parentInjector.get(s,a,c)}}class Uf extends LD{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function tC(i){return i.map(eC).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return L0(this.componentDef.inputs)}get outputs(){return L0(this.componentDef.outputs)}create(s,a,c,l){let f=(l=l||this.ngModule)instanceof zu?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new TC(s,f):s,I=v.get(vf,null);if(null===I)throw new we(407,!1);const E=v.get(HD,null),T=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",O=c?function vC(i,s,a){return i.selectRootElement(s,a===it.ShadowDom)}(T,c,this.componentDef.encapsulation):$u(T,M,function bC(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),H=this.componentDef.onPush?288:272,X=bv(0,null,null,1,0,null,null,null,null,null),ye=Wg(null,X,null,H,null,null,I,T,E,v,null);let Fe,ze;_u(ye);try{const tt=function U0(i,s,a,c,l,f){const v=a[1];a[22]=i;const E=Ba(v,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(vl(E,T,!0),null!==i&&(wo(l,i,T),null!==E.classes&&Lo(l,i,E.classes),null!==E.styles&&Ri(l,i,E.styles)));const M=c.createRenderer(i,s),O=Wg(a,Rf(s),null,s.onPush?32:16,a[22],E,c,M,f||null,null,null);return v.firstCreatePass&&(ws(Ks(E,a),v,s.type),Qg(v,E),Bd(E,a.length,1)),Hd(a,O),a[22]=O}(O,this.componentDef,ye,I,T);if(O)if(c)wo(T,O,["ng-version",t0.full]);else{const{attrs:gt,classes:Te}=function nC(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++c]):8===l&&a.push(f);else{if(!oo(l))break;l=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);gt&&wo(T,O,gt),Te&&Te.length>0&&Lo(T,O,Te.join(" "))}if(ze=go(X,22),void 0!==a){const gt=ze.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const Et=a[Te];gt.push(null!=Et?Array.from(Et):null)}}Fe=function Gd(i,s,a,c){const l=a[1],f=function kf(i,s,a){const c=xn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Nv(i,c,s,Xu(i,s,1,null),a),Of(i,c));const l=Ki(s,i,c.directiveStart,c);dr(l,s);const f=vr(c,s);return f&&dr(f,s),l}(l,a,s);if(i[8]=a[8]=f,null!==c)for(const I of c)I(f,s);if(s.contentQueries){const I=xn();s.contentQueries(1,f,I.directiveStart)}const v=xn();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Lr(v.index),Sv(a[1],v,0,v.directiveStart,v.directiveEnd,s),Ud(s,f)),f}(tt,this.componentDef,ye,[SC]),qg(X,ye,null)}finally{Gs()}return new V0(this.componentType,Fe,qu(ze,ye),ye,ze)}}class V0 extends class Qw{}{constructor(s,a,c,l,f){super(),this.location=c,this._rootLView=l,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new CC(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const f=this._rootLView;tm(f[1],f,l,s,a),Av(f,this._tNode.index)}}get injector(){return new Qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function SC(){const i=xn();Eu(De()[1],i)}function rm(i){let s=function B0(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(yr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new we(903,!1);l=s.\u0275dir}if(l){if(a){c.push(l);const v=i;v.inputs=im(i.inputs),v.declaredInputs=im(i.declaredInputs),v.outputs=im(i.outputs);const I=l.hostBindings;I&&Lv(i,I);const E=l.viewQuery,T=l.contentQueries;if(E&&j0(i,E),T&&Fv(i,T),ue(i.inputs,l.inputs),ue(i.declaredInputs,l.declaredInputs),ue(i.outputs,l.outputs),yr(l)&&l.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let v=0;v<f.length;v++){const I=f[v];I&&I.ngInherit&&I(i),I===rm&&(a=!1)}}s=Object.getPrototypeOf(s)}!function xC(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=fa(l.hostAttrs,a=fa(a,l.hostAttrs))}}(c)}function im(i){return i===kr?{}:i===Dt?[]:i}function j0(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function Fv(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,f)=>{s(c,l,f),a(c,l,f)}:s}function Lv(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let sm=null;function wl(){if(!sm){const i=sn.Symbol;if(i&&i.iterator)sm=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(sm=c)}}}return sm}function nc(i){return!!$f(i)&&(Array.isArray(i)||!(i instanceof Map)&&wl()in i)}function $f(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function oi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Uv(i,s,a,c){const l=De();return oi(l,Hs(),s)&&($t(),Ns(mn(),l,i,s,a,c)),Uv}function Hv(i,s,a,c,l,f,v,I){const E=De(),T=$t(),M=i+22,O=T.firstCreatePass?function W0(i,s,a,c,l,f,v,I,E){const T=s.consts,M=Ba(s,i,4,v||null,di(T,I));Vd(s,a,M,di(T,E)),Eu(s,M);const O=M.tViews=bv(2,M,c,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),O.queries=s.queries.embeddedTView(M)),M}(M,T,E,s,a,c,l,f,v):T.data[M];ei(O,!1);const H=E[11].createComment("");bd(T,E,H,O),dr(H,E),Hd(E,E[M]=kv(H,E,H,O)),bc(O)&&Kg(T,E,O),null!=v&&Yg(E,O,I)}function cm(i){return function Wi(i,s){return i[s]}(function Oc(){return It.lFrame.contextLView}(),22+i)}function lm(i,s,a){const c=De();return oi(c,Hs(),s)&&function Gr(i,s,a,c,l,f,v,I){const E=vr(s,a);let M,T=s.inputs;!I&&null!=T&&(M=T[c])?(tm(i,a,M,c,l),ra(s)&&Av(a,s.index)):3&s.type&&(c=function N0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=v?v(l,s.value||"",c):l,f.setProperty(E,c,l))}($t(),mn(),c,i,s,c[11],a,!1),lm}function qd(i,s,a,c,l){const v=l?"class":"style";tm(i,a,s.inputs[v],v,c)}function qf(i,s,a,c){const l=De(),f=$t(),v=22+i,I=l[11],E=l[v]=$u(I,s,function Iu(){return It.lFrame.currentNamespace}()),T=f.firstCreatePass?function q0(i,s,a,c,l,f,v){const I=s.consts,T=Ba(s,i,2,l,di(I,f));return Vd(s,a,T,di(I,v)),null!==T.attrs&&vl(T,T.attrs,!1),null!==T.mergedAttrs&&vl(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(v,f,l,0,s,a,c):f.data[v];ei(T,!0);const M=T.mergedAttrs;null!==M&&wo(I,E,M);const O=T.classes;null!==O&&Lo(I,E,O);const H=T.styles;return null!==H&&Ri(I,E,H),64!=(64&T.flags)&&bd(f,l,E,T),0===function hu(){return It.lFrame.elementDepthCount}()&&dr(E,l),function fu(){It.lFrame.elementDepthCount++}(),bc(T)&&(Kg(f,l,T),function Cv(i,s,a){if(ru(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}(f,T,l)),null!==c&&Yg(l,T),qf}function zo(){let i=xn();aa()?function ua(){It.lFrame.isParent=!1}():(i=i.parent,ei(i,!1));const s=i;!function Mc(){It.lFrame.elementDepthCount--}();const a=$t();return a.firstCreatePass&&(Eu(a,i),ru(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function bu(i){return 0!=(16&i.flags)}(s)&&qd(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function od(i){return 0!=(32&i.flags)}(s)&&qd(a,s,De(),s.stylesWithoutHost,!1),zo}function dm(i,s,a,c){return qf(i,s,a,c),zo(),dm}function Pi(){return De()}function pm(i){return!!i&&"function"==typeof i.then}function zv(i){return!!i&&"function"==typeof i.subscribe}const Al=zv;function Wv(i,s,a,c){const l=De(),f=$t(),v=xn();return function Y0(i,s,a,c,l,f,v,I){const E=bc(c),M=i.firstCreatePass&&Go(i),O=s[8],H=ec(s);let X=!0;if(3&c.type||I){const ze=vr(c,s),tt=I?I(ze):ze,gt=H.length,Te=I?on=>I(Sn(on[c.index])):c.index;let Et=null;if(!I&&E&&(Et=function qv(i,s,a,c){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const v=l[f];if(v===a&&l[f+1]===c){const I=s[7],E=l[f+2];return I.length>E?I[E]:null}"string"==typeof v&&(f+=2)}return null}(i,s,l,c.index)),null!==Et)(Et.__ngLastListenerFn__||Et).__ngNextListenerFn__=f,Et.__ngLastListenerFn__=f,X=!1;else{f=Zv(c,s,O,f,!1);const on=a.listen(tt,l,f);H.push(f,on),M&&M.push(l,Te,gt,gt+1)}}else f=Zv(c,s,O,f,!1);const ye=c.outputs;let Fe;if(X&&null!==ye&&(Fe=ye[l])){const ze=Fe.length;if(ze)for(let tt=0;tt<ze;tt+=2){const Pn=s[Fe[tt]][Fe[tt+1]].subscribe(f),eu=H.length;H.push(f,Pn),M&&M.push(l,c.index,eu,-(eu+1))}}}(f,l,l[11],v,i,s,0,c),Wv}function Q0(i,s,a,c){try{return!1!==a(c)}catch(l){return Vf(i,l),!1}}function Zv(i,s,a,c,l){return function f(v){if(v===Function)return c;Pv(2&i.flags?Wt(i.index,s):s);let E=Q0(s,0,c,v),T=f.__ngNextListenerFn__;for(;T;)E=Q0(s,0,T,v)&&E,T=T.__ngNextListenerFn__;return l&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function J0(i=1){return function zs(i){return(It.lFrame.contextLView=function wu(i,s){for(;i>0;)s=s[15],i--;return s}(i,It.lFrame.contextLView))[8]}(i)}function ce(i,s,a,c,l){const f=i[a+1],v=null===s;let I=c?Rs(f):$o(f),E=!1;for(;0!==I&&(!1===E||v);){const M=i[I+1];xe(i[I],s)&&(E=!0,i[I+1]=c?bf(M):pv(M)),I=c?Rs(M):$o(M)}E&&(i[a+1]=c?pv(f):bf(f))}function xe(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&bs(i,s)>=0}function wt(i,s){return function Be(i,s,a,c){const l=De(),f=$t(),v=function Zi(i){const s=It.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function sc(i,s,a,c){const l=i.data;if(null===l[a+1]){const f=l[qn()],v=function vm(i,s){return s>=i.expandoStartIndex}(i,a);(function Yf(i,s){return 0!=(i.flags&(s?16:32))})(f,c)&&null===s&&!v&&(s=!1),s=function VC(i,s,a,c){const l=function da(i){const s=It.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=Kd(a=wm(null,i,s,a,c),s.attrs,c),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==l)if(a=wm(l,i,s,a,c),null===f){let E=function _m(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==$o(c))return i[Rs(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=wm(null,i,s,E[1],c),E=Kd(E,s.attrs,c),function UC(i,s,a,c){i[Rs(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else f=function Kf(i,s,a){let c;const l=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<l;f++)c=Kd(c,i[f].hostAttrs,a);return Kd(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(l,f,s,c),function RC(i,s,a,c,l,f){let v=f?s.classBindings:s.styleBindings,I=Rs(v),E=$o(v);i[c]=a;let M,T=!1;if(Array.isArray(a)){const O=a;M=O[1],(null===M||bs(O,M)>0)&&(T=!0)}else M=a;if(l)if(0!==E){const H=Rs(i[I+1]);i[c+1]=Ua(H,I),0!==H&&(i[H+1]=Pd(i[H+1],c)),i[I+1]=function v0(i,s){return 131071&i|s<<17}(i[I+1],c)}else i[c+1]=Ua(I,0),0!==I&&(i[I+1]=Pd(i[I+1],c)),I=c;else i[c+1]=Ua(E,0),0===I?I=c:i[E+1]=Pd(i[E+1],c),E=c;T&&(i[c+1]=pv(i[c+1])),ce(i,M,c,!0),ce(i,M,c,!1),function We(i,s,a,c,l){const f=l?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&bs(f,s)>=0&&(a[c+1]=bf(a[c+1]))}(s,M,i,c,f),v=Ua(I,E),f?s.classBindings=v:s.styleBindings=v}(l,f,s,a,v,c)}}(f,i,v,c),s!==kt&&oi(l,v,s)&&function Jv(i,s,a,c,l,f,v,I){if(!(3&s.type))return;const E=i.data,T=E[I+1];Yd(function jg(i){return 1==(1&i)}(T)?za(E,s,a,l,$o(T),v):void 0)||(Yd(f)||function Bg(i){return 2==(2&i)}(T)&&(f=za(E,null,a,l,I,v)),function Yy(i,s,a,c,l){if(s)l?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Xi.DashCase;null==l?i.removeStyle(a,c,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=Xi.Important),i.setStyle(a,c,l,f))}}(c,v,Xr(qn(),a),l,f))}(f,f.data[qn()],l,l[11],i,l[v+1]=function se(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(ir(i)))),i}(s,a),c,v)}(i,s,null,!0),wt}function wm(i,s,a,c,l){let f=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(f=s[I],c=Kd(c,f.hostAttrs,l),f!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function Kd(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?l=v:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ot(i,v,!!a||s[++f]))}return void 0===i?null:i}function za(i,s,a,c,l,f){const v=null===s;let I;for(;l>0;){const E=i[l],T=Array.isArray(E),M=T?E[1]:E,O=null===M;let H=a[l+1];H===kt&&(H=O?Dt:void 0);let X=O?Ca(H,c):M===c?H:void 0;if(T&&!Yd(X)&&(X=Ca(E,c)),Yd(X)&&(I=X,v))return I;const ye=i[l+1];l=v?Rs(ye):$o(ye)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(I=Ca(E,c))}return I}function Yd(i){return void 0!==i}function ks(i,s=""){const a=De(),c=$t(),l=i+22,f=c.firstCreatePass?Ba(c,l,1,s,null):c.data[l],v=a[l]=function _d(i,s){return i.createText(s)}(a[11],s);bd(c,a,v,f),ei(f,!1)}function oc(i,s,a){const c=De(),l=function Il(i,s,a,c){return oi(i,Hs(),a)?s+ge(a)+c:kt}(c,i,s,a);return l!==kt&&function ln(i,s,a){const c=Xr(s,i);!function ef(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,qn(),l),oc}const Vi=void 0;var nh=["en",[["a","p"],["AM","PM"],Vi],[["AM","PM"],Vi,Vi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vi,"{1} 'at' {0}",Vi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fI(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let lc={};function Jf(i){const s=function pI(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=r_(s);if(a)return a;const c=s.split("-")[0];if(a=r_(c),a)return a;if("en"===c)return nh;throw new we(701,!1)}function n_(i){return Jf(i)[pt.PluralCase]}function r_(i){return i in lc||(lc[i]=sn.ng&&sn.ng.common&&sn.ng.common.locales&&sn.ng.common.locales[i]),lc[i]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const Rl="en-US";let s_=Rl;function Ps(i,s,a,c,l){if(i=q(i),Array.isArray(i))for(let f=0;f<i.length;f++)Ps(i[f],s,a,c,l);else{const f=$t(),v=De();let I=hl(i)?i:q(i.provide),E=Kw(i);const T=xn(),M=1048575&T.providerIndexes,O=T.directiveStart,H=T.providerIndexes>>20;if(hl(i)||!i.multi){const X=new _s(E,l,Qu),ye=m_(I,s,l?M:M+H,O);-1===ye?(ws(Ks(T,v),f,I),Om(f,i,s.length),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(X),v.push(X)):(a[ye]=X,v[ye]=X)}else{const X=m_(I,s,M+H,O),ye=m_(I,s,M,M+H),Fe=X>=0&&a[X],ze=ye>=0&&a[ye];if(l&&!ze||!l&&!Fe){ws(Ks(T,v),f,I);const tt=function km(i,s,a,c,l){const f=new _s(i,a,Qu);return f.multi=[],f.index=s,f.componentProviders=0,dh(f,l,c&&!a),f}(l?jt:rb,a.length,l,c,E);!l&&ze&&(a[ye].providerFactory=tt),Om(f,i,s.length,0),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(tt),v.push(tt)}else Om(f,i,X>-1?X:ye,dh(a[l?ye:X],E,!l&&c));!l&&c&&ze&&a[ye].componentProviders++}}}function Om(i,s,a,c){const l=hl(s),f=function RD(i){return!!i.useClass}(s);if(l||f){const E=(f?q(s.useClass):s).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[c,E]):T[M+1].push(c,E)}else T.push(a,E)}}}function dh(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function m_(i,s,a,c){for(let l=a;l<c;l++)if(s[l]===i)return l;return-1}function rb(i,s,a,c){return y_(this.multi,[])}function jt(i,s,a,c){const l=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Ki(a,a[1],this.providerFactory.index,c);f=I.slice(0,v),y_(l,f);for(let E=v;E<I.length;E++)f.push(I[E])}else f=[],y_(l,f);return f}function y_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function hh(i,s=[]){return a=>{a.providersResolver=(c,l)=>function kI(i,s,a){const c=$t();if(c.firstCreatePass){const l=yr(i);Ps(a,c.data,c.blueprint,l,!0),Ps(s,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,s)}}class qo{}class cp{}function PI(i,s){return new v_(i,s??null)}class v_ extends qo{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new nm(this);const c=pn(s);this._bootstrapComponents=Bo(c.bootstrap),this._r3Injector=me(s,a,[{provide:qo,useValue:this},{provide:Wu,useValue:this.componentFactoryResolver}],de(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class __ extends cp{constructor(s){super(),this.moduleType=s}create(s){return new v_(this.moduleType,s)}}class FI extends qo{constructor(s,a,c){super(),this.componentFactoryResolver=new nm(this),this.instance=null;const l=new ov([...s,{provide:qo,useValue:this},{provide:Wu,useValue:this.componentFactoryResolver}],a||yf(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Pm(i,s,a=null){return new FI(i,s,a).injector}let sb=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=zw(0,a.type),l=c.length>0?Pm([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Qt({token:i,providedIn:"environment",factory:()=>new i(wn(zu))}),i})();function LI(i){i.getStandaloneInjector=s=>s.get(sb).getOrCreateStandaloneInjector(i)}function T_(i){return s=>{setTimeout(i,void 0,s)}}const Yo=class mb extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,f=a||(()=>null),v=c;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),f=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(f=T_(f),l&&(l=T_(l)),v&&(v=T_(v)));const I=super.subscribe({next:l,error:f,complete:v});return s instanceof J.w0&&s.add(I),I}};function yb(){return this._results[wl()]()}class A_{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=wl(),c=A_.prototype;c[a]||(c[a]=yb)}get changes(){return this._changes||(this._changes=new Yo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=Cn(s);(this._changesDetected=!function ti(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],f=s[c];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let fp=(()=>{class i{}return i.__NG_ELEMENT_ID__=wb,i})();const vb=fp,_b=class extends vb{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=Wg(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(c)),qg(c,l,s),new ja(l)}};function wb(){return Vm(xn(),De())}function Vm(i,s){return 4&i.type?new _b(s,i,qu(i,s)):null}let Um=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ib,i})();function Ib(){return XI(xn(),De())}const QI=Um,JI=class extends QI{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new Qs(this._hostTNode,this._hostLView)}get parentInjector(){const s=xu(this._hostTNode,this._hostLView);if(ud(s)){const a=ga(s,this._hostLView),c=nr(s);return new Qs(a[1].data[c+8],a)}return new Qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=S_(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,f;"number"==typeof c?l=c:null!=c&&(l=c.index,f=c.injector);const v=s.createEmbeddedView(a||{},f);return this.insert(v,l),v}createComponent(s,a,c,l,f){const v=s&&!function fi(i){return"function"==typeof i}(s);let I;if(v)I=a;else{const O=a||{};I=O.index,c=O.injector,l=O.projectableNodes,f=O.environmentInjector||O.ngModuleRef}const E=v?s:new Uf(K(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const H=(v?T:this.parentInjector).get(zu,null);H&&(f=H)}const M=E.create(T,l,void 0,f);return this.insert(M.hostView,I),M}insert(s,a){const c=s._lView,l=c[1];if(function cu(i){return Ar(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const O=c[3],H=new JI(O,O[6],O[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function sl(i,s,a,c){const l=10+c,f=a.length;c>0&&(a[l-1][4]=s),c<f-10?(s[4]=a[l],Ea(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function Zy(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(l,c,v,f);const I=ul(f,v),E=c[11],T=Mr(E,v[7]);return null!==T&&function wd(i,s,a,c,l,f){c[0]=l,c[6]=s,Po(i,c,a,1,l,f)}(l,v[6],E,c,T,I),s.attachToViewContainerRef(),Ea(Bm(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=S_(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=nf(this._lContainer,a);c&&(Sr(Bm(this._lContainer),a),gg(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=nf(this._lContainer,a);return c&&null!=Sr(Bm(this._lContainer),a)?new ja(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function S_(i){return i[8]}function Bm(i){return i[8]||(i[8]=[])}function XI(i,s){let a;const c=s[i.index];if(Ar(c))a=c;else{let l;if(8&i.type)l=Sn(c);else{const f=s[11];l=f.createComment("");const v=vr(i,s);io(f,Mr(f,v),l,function Oa(i,s){return i.nextSibling(s)}(f,v),!1)}s[i.index]=a=kv(c,s,l,i),Hd(s,a)}return new JI(a,i,s)}class pp{constructor(s){this.queryList=s,this.matches=null}clone(){return new pp(this.queryList)}setDirty(){this.queryList.setDirty()}}class gp{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<c;f++){const v=a.getByIndex(f);l.push(this.queries[v.indexInDeclarationView].clone())}return new gp(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==mp(s,a).matches&&this.queries[a].setDirty()}}class Ja{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class jm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,l);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new jm(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class M_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new M_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const f=c[l];this.matchTNodeWithReadOption(s,a,tE(a,f)),this.matchTNodeWithReadOption(s,a,Io(a,s,f,!1,!1))}else c===fp?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Io(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===fl||l===Um||l===fp&&4&a.type)this.addMatch(a.index,-2);else{const f=Io(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function tE(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Fl(i,s,a,c){return-1===a?function $m(i,s){return 11&i.type?qu(i,s):4&i.type?Vm(i,s):null}(s,i):-2===a?function Ll(i,s,a){return a===fl?qu(s,i):a===fp?Vm(s,i):a===Um?XI(s,i):void 0}(i,s,c):Ki(i,i[1],a,s)}function fc(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const f=i.data,v=a.matches,I=[];for(let E=0;E<v.length;E+=2){const T=v[E];I.push(T<0?null:Fl(s,f[T],v[E+1],a.metadata.read))}l.matches=I}return l.matches}function Vl(i,s,a,c){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const v=fc(i,s,l,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(v[I/2]);else{const T=f[I+1],M=s[-E];for(let O=10;O<M.length;O++){const H=M[O];H[17]===H[3]&&Vl(H[1],H,T,c)}if(null!==M[9]){const O=M[9];for(let H=0;H<O.length;H++){const X=O[H];Vl(X[1],X,T,c)}}}}}return c}function R_(i){const s=De(),a=$t(),c=Fc();ha(c+1);const l=mp(a,c);if(i.dirty&&function uu(i){return 4==(4&i[2])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?Vl(a,s,c,[]):fc(a,s,l,c);i.reset(f,BD),i.notifyOnChanges()}return!0}return!1}function Hm(i,s,a,c){const l=$t();if(l.firstCreatePass){const f=xn();(function k_(i,s,a){null===i.queries&&(i.queries=new jm),i.queries.track(new M_(s,a))})(l,new Ja(s,a,c),f.index),function iE(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function rE(i,s,a){const c=new A_(4==(4&a));R0(i,s,c,c.destroy),null===s[19]&&(s[19]=new gp),s[19].queries.push(new pp(c))}(l,De(),a)}function O_(){return function nE(i,s){return i[19].queries[s].queryList}(De(),Fc())}function mp(i,s){return i.queries.getByIndex(s)}function Km(...i){}const yE=new yn("Application Initializer");let Dp=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Km,this.reject=Km,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(pm(f))a.push(f);else if(Al(f)){const v=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(wn(yE,8))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ym=new yn("AppId",{providedIn:"root",factory:function Qm(){return`${Ih()}${Ih()}${Ih()}`}});function Ih(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Xm=new yn("Platform Initializer"),j_=new yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$_=new yn("appBootstrapListener");let vE=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const ey=new yn("LocaleId",{providedIn:"root",factory:()=>D(ey,Ze.Optional|Ze.SkipSelf)||function H_(){return typeof $localize<"u"&&$localize.locale||Rl}()}),_E=new yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Eh{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Dh=(()=>{class i{compileModuleSync(a){return new __(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Bo(pn(a).declarations).reduce((v,I)=>{const E=K(I);return E&&v.push(new Uf(E)),v},[]);return new Eh(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const kb=(()=>Promise.resolve(0))();function Cp(i){typeof Zone>"u"?kb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ss{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yo(!1),this.onMicrotaskEmpty=new Yo(!1),this.onStable=new Yo(!1),this.onError=new Yo(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function IE(){let i=sn.requestAnimationFrame,s=sn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function ty(i){const s=()=>{!function bp(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(sn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Tp(i),i.isCheckStableRunning=!0,Ch(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Tp(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,f,v,I)=>{try{return ny(i),a.invokeTask(l,f,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),ry(i)}},onInvoke:(a,c,l,f,v,I,E)=>{try{return ny(i),a.invoke(l,f,v,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),ry(i)}},onHasTask:(a,c,l,f)=>{a.hasTask(l,f),c===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Tp(i),Ch(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ss.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(ss.isInAngularZone())throw new we(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+l,s,Z_,Km,Km);try{return f.runTask(v,a,c)}finally{f.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const Z_={};function Ch(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Tp(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function ny(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ry(i){i._nesting--,Ch(i)}class EE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yo,this.onMicrotaskEmpty=new Yo,this.onStable=new Yo,this.onError=new Yo}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const DE=new yn(""),K_=new yn("");let iy,Pb=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,iy||(function Fb(i){iy=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ss.assertNotInAngularZone(),Cp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(wn(ss),wn(CE),wn(K_))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac}),i})(),CE=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return iy?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),ho=null;const bh=new yn("AllowMultipleToken"),Ap=new yn("PlatformDestroyListeners");class Ub{constructor(s,a){this.name=s,this.token=a}}function oy(i,s,a=[]){const c=`Platform: ${s}`,l=new yn(c);return(f=[])=>{let v=$l();if(!v||v.injector.get(bh,!1)){const I=[...a,...f,{provide:l,useValue:!0}];i?i(I):function Y_(i){if(ho&&!ho.get(bh,!1))throw new we(400,!1);ho=i;const s=i.get(uy);(function bE(i){const s=i.get(Xm,null);s&&s.forEach(a=>a())})(i)}(function ay(i=[],s){return es.create({name:s,providers:[{provide:sv,useValue:"platform"},{provide:Ap,useValue:new Set([()=>ho=null])},...i]})}(I,c))}return function Th(i){const s=$l();if(!s)throw new we(401,!1);return s}()}}function $l(){return ho?.get(uy)??null}let uy=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function cy(i,s){let a;return a="noop"===i?new EE:("zone.js"===i?void 0:i)||new ss(s),a}(c?.ngZone,function J_(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:ss,useValue:l}];return l.run(()=>{const v=es.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(v),E=I.injector.get(pl,null);if(!E)throw new we(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{dy(this._modules,I),T.unsubscribe()})}),function ly(i,s,a){try{const c=a();return pm(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const T=I.injector.get(Dp);return T.runInitializers(),T.donePromise.then(()=>(function dc(i){Bt(i,"Expected localeId to be defined"),"string"==typeof i&&(s_=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(ey,Rl)||Rl),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const l=Jo({},c);return function Lb(i,s,a){const c=new __(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const c=a.injector.get(Sp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Ap,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(wn(es))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Jo(i,s){return Array.isArray(s)?s.reduce(Jo,i):{...i,...s}}let Sp=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new k.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{ss.assertNotInAngularZone(),Cp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ie.T)(f,v.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof LD;if(!this._injector.get(Dp).done)throw!l&&Kt(a),new we(405,false);let v;v=l?a:this._injector.get(Wu).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function Vb(i){return i.isBoundToModule}(v)?void 0:this._injector.get(qo),T=v.create(es.NULL,[],c||v.selector,I),M=T.location.nativeElement,O=T.injector.get(DE,null);return O?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),dy(this.components,T),O?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;dy(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get($_,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>dy(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(wn(ss),wn(zu),wn(pl))},i.\u0275prov=Qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function dy(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let fy=!0,TE=!1;function X_(){return TE=!0,fy}function py(){if(TE)throw new Error("Cannot enable prod mode after platform setup.");fy=!1}let ew=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hb,i})();function Hb(i){return function Gb(i,s,a){if(ra(i)&&!a){const c=Wt(i.index,s);return new ja(c,c)}return 47&i.type?new ja(s[16],s):null}(xn(),De(),16==(16&i))}class xE{constructor(){}supports(s){return nc(s)}create(s){return new iw(s)}}const rw=(i,s)=>s;class iw{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||rw}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,f=null;for(;a||c;){const v=!c||a&&a.currentIndex<RE(c,l,f)?a:c,I=RE(v,l,f),E=v.currentIndex;if(v===c)l--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)l++;else{f||(f=[]);const T=I-l,M=E-l;if(T!=M){for(let H=0;H<T;H++){const X=H<f.length?f[H]:f[H]=0,ye=X+H;M<=ye&&ye<T&&(f[H]=X+1)}f[v.previousIndex]=M-T}}I!==E&&s(v,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!nc(s))throw new we(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],v=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,f,v,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,I),c=!0),a=a._next}else l=0,function om(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[wl()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{v=this._trackByFn(l,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,l)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new sw(a,c),f,l),s}_verifyReinsertion(s,a,c,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new ME),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ME),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class sw{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ow{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class ME{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new ow,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RE(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class vy{constructor(){}supports(s){return s instanceof Map||$f(s)}create(){return new aw}}class aw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||$f(s)))throw new we(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,v=l._next;return f&&(f._next=v),v&&(v._prev=f),l._next=null,l._prev=null,l}const c=new Kb(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class Kb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function uw(){return new cw([new xE])}let cw=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||uw()),deps:[[i,new yt,new Me]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:uw}),i})();function lw(){return new _y([new vy])}let _y=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||lw()),deps:[[i,new yt,new Me]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Qt({token:i,providedIn:"root",factory:lw}),i})();const Jb=oy(null,"core",[]);let dw=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(wn(Sp))},i.\u0275mod=Ot({type:i}),i.\u0275inj=xt({}),i})();function hw(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(at,be,P)=>{P.d(be,{Z:()=>we});var g=P(2090),J=P(4859),k=P(9681),ie=P(1877);class re{constructor(ge,fe){this._delegate=ge,this.firebase=fe,(0,k._addComponent)(ge,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ge,fe=k._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(ge);return!rt.isInitialized()&&"EXPLICIT"===(null===(Ye=rt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:fe})}_removeServiceInstance(ge,fe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(fe)}_addComponent(ge){(0,k._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,k._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function he(){const Xe=function de(Xe){const ge={},fe={__esModule:!0,initializeApp:function Ae($e,V={}){const pe=k.initializeApp($e,V);if((0,g.r3)(ge,pe.name))return ge[pe.name];const z=new Xe(pe,fe);return ge[pe.name]=z,z},app:rt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ie($e){const V=$e.name,pe=V.replace("-compat","");if(k._registerComponent($e)&&"PUBLIC"===$e.type){const z=(Q=rt())=>{if("function"!=typeof Q[pe])throw ue.create("invalid-app-argument",{appName:V});return Q[pe]()};void 0!==$e.serviceProps&&(0,g.ZB)(z,$e.serviceProps),fe[pe]=z,Xe.prototype[pe]=function(...Q){return this._getService.bind(this,V).apply(this,$e.multipleInstances?Q:[])}}return"PUBLIC"===$e.type?fe[pe]:null},removeApp:function Ye($e){delete ge[$e]},useAsService:function je($e,V){return"serverAuth"===V?null:V},modularAPIs:k}};function rt($e){if(!(0,g.r3)(ge,$e=$e||k._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:$e});return ge[$e]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function ve(){return Object.keys(ge).map($e=>ge[$e])}}),rt.App=Xe,fe}(re);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ge(fe){(0,g.ZB)(Xe,fe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Xe}(),B=new ie.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=U;!function Se(Xe){(0,k.registerVersion)("@firebase/app-compat","0.1.39",Xe)}()},9681:(at,be,P)=>{P.r(be),P.d(be,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Fs,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Zt,_addOrOverwriteComponent:()=>Qt,_apps:()=>an,_clearComponents:()=>ji,_components:()=>vn,_getProvider:()=>xt,_registerComponent:()=>Cr,_removeServiceInstance:()=>dn,deleteApp:()=>ta,getApp:()=>Kr,getApps:()=>Yr,initializeApp:()=>ci,onLog:()=>ls,registerVersion:()=>mr,setLogLevel:()=>Hn});var g=P(5861),J=P(4859),k=P(1877),ie=P(2090),re=P(8766);class le{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(Qe=>{if(function ue(Je){return"VERSION"===Je.getComponent()?.type}(Qe)){const _t=Qe.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(Qe=>Qe).join(" ")}}const de="@firebase/app",U=new k.Yd("@firebase/app"),Bt="[DEFAULT]",qe={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},an=new Map,vn=new Map;function Zt(Je,Ce){try{Je.container.addComponent(Ce)}catch(Qe){U.debug(`Component ${Ce.name} failed to register with FirebaseApp ${Je.name}`,Qe)}}function Qt(Je,Ce){Je.container.addOrOverwriteComponent(Ce)}function Cr(Je){const Ce=Je.name;if(vn.has(Ce))return U.debug(`There were multiple attempts to register component ${Ce}.`),!1;vn.set(Ce,Je);for(const Qe of an.values())Zt(Qe,Je);return!0}function xt(Je,Ce){const Qe=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return Qe&&Qe.triggerHeartbeat(),Je.container.getProvider(Ce)}function dn(Je,Ce,Qe=Bt){xt(Je,Ce).clearInstance(Qe)}function ji(){vn.clear()}const br=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Or{constructor(Ce,Qe,_t){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},Qe),this._name=Qe.name,this._automaticDataCollectionEnabled=Qe.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}const Fs="9.14.0";function ci(Je,Ce={}){let Qe=Je;"object"!=typeof Ce&&(Ce={name:Ce});const _t=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},Ce),mt=_t.name;if("string"!=typeof mt||!mt)throw br.create("bad-app-name",{appName:String(mt)});if(Qe||(Qe=(0,ie.aH)()),!Qe)throw br.create("no-options");const Ot=an.get(mt);if(Ot){if((0,ie.vZ)(Qe,Ot.options)&&(0,ie.vZ)(_t,Ot.config))return Ot;throw br.create("duplicate-app",{appName:mt})}const j=new J.H0(mt);for(const W of vn.values())j.addComponent(W);const L=new Or(Qe,_t,j);return an.set(mt,L),L}function Kr(Je=Bt){const Ce=an.get(Je);if(!Ce&&Je===Bt)return ci();if(!Ce)throw br.create("no-app",{appName:Je});return Ce}function Yr(){return Array.from(an.values())}function ta(Je){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,g.Z)(function*(Je){const Ce=Je.name;an.has(Ce)&&(an.delete(Ce),yield Promise.all(Je.container.getProviders().map(Qe=>Qe.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function mr(Je,Ce,Qe){var _t;let mt=null!==(_t=qe[Je])&&void 0!==_t?_t:Je;Qe&&(mt+=`-${Qe}`);const Ot=mt.match(/\s|\//),j=Ce.match(/\s|\//);if(Ot||j){const L=[`Unable to register library "${mt}" with version "${Ce}":`];return Ot&&L.push(`library name "${mt}" contains illegal characters (whitespace or "/")`),Ot&&j&&L.push("and"),j&&L.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void U.warn(L.join(" "))}Cr(new J.wA(`${mt}-version`,()=>({library:mt,version:Ce}),"VERSION"))}function ls(Je,Ce){if(null!==Je&&"function"!=typeof Je)throw br.create("invalid-log-argument");(0,k.Am)(Je,Ce)}function Hn(Je){(0,k.Ub)(Je)}const On="firebase-heartbeat-store";let Fn=null;function gn(){return Fn||(Fn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(Je,Ce)=>{0===Ce&&Je.createObjectStore(On)}}).catch(Je=>{throw br.create("idb-open",{originalErrorMessage:Je.message})})),Fn}function it(){return(it=(0,g.Z)(function*(Je){var Ce;try{return(yield gn()).transaction(On).objectStore(On).get(Ln(Je))}catch(Qe){if(Qe instanceof ie.ZR)U.warn(Qe.message);else{const _t=br.create("idb-get",{originalErrorMessage:null===(Ce=Qe)||void 0===Ce?void 0:Ce.message});U.warn(_t.message)}}})).apply(this,arguments)}function sn(Je,Ce){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(Je,Ce){var Qe;try{const mt=(yield gn()).transaction(On,"readwrite");return yield mt.objectStore(On).put(Ce,Ln(Je)),mt.done}catch(_t){if(_t instanceof ie.ZR)U.warn(_t.message);else{const mt=br.create("idb-set",{originalErrorMessage:null===(Qe=_t)||void 0===Qe?void 0:Qe.message});U.warn(mt.message)}}})).apply(this,arguments)}function Ln(Je){return`${Je.name}!${Je.options.appId}`}class ds{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const Qe=this.container.getProvider("app").getImmediate();this._storage=new Xt(Qe),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var Ce=this;return(0,g.Z)(function*(){const _t=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mt=Jt();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==mt&&!Ce._heartbeatsCache.heartbeats.some(Ot=>Ot.date===mt))return Ce._heartbeatsCache.heartbeats.push({date:mt,agent:_t}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Ot=>{const j=new Date(Ot.date).valueOf();return Date.now()-j<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,g.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const Qe=Jt(),{heartbeatsToSend:_t,unsentEntries:mt}=function Di(Je,Ce=1024){const Qe=[];let _t=Je.slice();for(const mt of Je){const Ot=Qe.find(j=>j.agent===mt.agent);if(Ot){if(Ot.dates.push(mt.date),Gn(Qe)>Ce){Ot.dates.pop();break}}else if(Qe.push({agent:mt.agent,dates:[mt.date]}),Gn(Qe)>Ce){Qe.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:Qe,unsentEntries:_t}}(Ce._heartbeatsCache.heartbeats),Ot=(0,ie.L)(JSON.stringify({version:2,heartbeats:_t}));return Ce._heartbeatsCache.lastSentHeartbeatDate=Qe,mt.length>0?(Ce._heartbeatsCache.heartbeats=mt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Ot})()}}function Jt(){return(new Date).toISOString().substring(0,10)}class Xt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,g.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function ft(Je){return it.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var Qe=this;return(0,g.Z)(function*(){var _t;if(yield Qe._canUseIndexedDBPromise){const Ot=yield Qe.read();return sn(Qe.app,{lastSentHeartbeatDate:null!==(_t=Ce.lastSentHeartbeatDate)&&void 0!==_t?_t:Ot.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var Qe=this;return(0,g.Z)(function*(){var _t;if(yield Qe._canUseIndexedDBPromise){const Ot=yield Qe.read();return sn(Qe.app,{lastSentHeartbeatDate:null!==(_t=Ce.lastSentHeartbeatDate)&&void 0!==_t?_t:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...Ce.heartbeats]})}})()}}function Gn(Je){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Tr(Je){Cr(new J.wA("platform-logger",Ce=>new le(Ce),"PRIVATE")),Cr(new J.wA("heartbeat",Ce=>new ds(Ce),"PRIVATE")),mr(de,"0.8.4",Je),mr(de,"0.8.4","esm2017"),mr("fire-js","")}("")},4859:(at,be,P)=>{P.d(be,{H0:()=>de,wA:()=>k});var g=P(5861),J=P(2090);class k{constructor(U,B,q){this.name=U,this.instanceFactory=B,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ie="[DEFAULT]";class re{constructor(U,B){this.name=U,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const B=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(B)){const q=new J.BH;if(this.instancesDeferred.set(B,q),this.isInitialized(B)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:B});Le&&q.resolve(Le)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(U){var B;const q=this.normalizeInstanceIdentifier(U?.identifier),Le=null!==(B=U?.optional)&&void 0!==B&&B;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(Se){if(Le)return null;throw Se}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ue(he){return"EAGER"===he.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[B,q]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(B);try{const Se=this.getOrInitializeService({instanceIdentifier:Le});q.resolve(Se)}catch{}}}}clearInstance(U=ie){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,g.Z)(function*(){const B=Array.from(U.instances.values());yield Promise.all([...B.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...B.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ie){return this.instances.has(U)}getOptions(U=ie){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:B={}}=U,q=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:q,options:B});for(const[Se,we]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(Se)&&we.resolve(Le);return Le}onInit(U,B){var q;const Le=this.normalizeInstanceIdentifier(B),Se=null!==(q=this.onInitCallbacks.get(Le))&&void 0!==q?q:new Set;Se.add(U),this.onInitCallbacks.set(Le,Se);const we=this.instances.get(Le);return we&&U(we,Le),()=>{Se.delete(U)}}invokeOnInitCallbacks(U,B){const q=this.onInitCallbacks.get(B);if(q)for(const Le of q)try{Le(U,B)}catch{}}getOrInitializeService({instanceIdentifier:U,options:B={}}){let q=this.instances.get(U);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(he=U,he===ie?void 0:he),options:B}),this.instances.set(U,q),this.instancesOptions.set(U,B),this.invokeOnInitCallbacks(q,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,q)}catch{}var he;return q||null}normalizeInstanceIdentifier(U=ie){return this.component?this.component.multipleInstances?U:ie:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const B=this.getProvider(U.name);if(B.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);B.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const B=new re(U,this);return this.providers.set(U,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(at,be,P)=>{P.d(be,{Am:()=>he,Ub:()=>de,Yd:()=>ue,in:()=>J});const g=[];var J=(()=>{return(U=J||(J={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",J;var U})();const k={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ie=J.INFO,re={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},le=(U,B,...q)=>{if(B<U.logLevel)return;const Le=(new Date).toISOString(),Se=re[B];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Se](`[${Le}]  ${U.name}:`,...q)};class ue{constructor(B){this.name=B,this._logLevel=ie,this._logHandler=le,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in J))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?k[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...B),this._logHandler(this,J.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...B),this._logHandler(this,J.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,J.INFO,...B),this._logHandler(this,J.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,J.WARN,...B),this._logHandler(this,J.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...B),this._logHandler(this,J.ERROR,...B)}}function de(U){g.forEach(B=>{B.setLogLevel(U)})}function he(U,B){for(const q of g){let Le=null;B&&B.level&&(Le=k[B.level]),q.userLogHandler=null===U?null:(Se,we,...Xe)=>{const ge=Xe.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Le??Se.logLevel)&&U({level:J[we].toLowerCase(),message:ge,args:Xe,type:Se.name})}}}},8766:(at,be,P)=>{P.d(be,{Lj:()=>Ae,X3:()=>rt});var g=P(5861);let k,ie;const ue=new WeakMap,de=new WeakMap,he=new WeakMap,U=new WeakMap,B=new WeakMap;let Se={get(V,pe,z){if(V instanceof IDBTransaction){if("done"===pe)return de.get(V);if("objectStoreNames"===pe)return V.objectStoreNames||he.get(V);if("store"===pe)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return fe(V[pe])},set:(V,pe,z)=>(V[pe]=z,!0),has:(V,pe)=>V instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in V};function ge(V){return"function"==typeof V?function Xe(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...pe){return V.apply(Ye(this),pe),fe(ue.get(this))}:function(...pe){return fe(V.apply(Ye(this),pe))}:function(pe,...z){const Q=V.call(Ye(this),pe,...z);return he.set(Q,pe.sort?pe.sort():[pe]),fe(Q)}}(V):(V instanceof IDBTransaction&&function Le(V){if(de.has(V))return;const pe=new Promise((z,Q)=>{const ne=()=>{V.removeEventListener("complete",te),V.removeEventListener("error",Pe),V.removeEventListener("abort",Pe)},te=()=>{z(),ne()},Pe=()=>{Q(V.error||new DOMException("AbortError","AbortError")),ne()};V.addEventListener("complete",te),V.addEventListener("error",Pe),V.addEventListener("abort",Pe)});de.set(V,pe)}(V),((V,pe)=>pe.some(z=>V instanceof z))(V,function re(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Se):V)}function fe(V){if(V instanceof IDBRequest)return function q(V){const pe=new Promise((z,Q)=>{const ne=()=>{V.removeEventListener("success",te),V.removeEventListener("error",Pe)},te=()=>{z(fe(V.result)),ne()},Pe=()=>{Q(V.error),ne()};V.addEventListener("success",te),V.addEventListener("error",Pe)});return pe.then(z=>{z instanceof IDBCursor&&ue.set(z,V)}).catch(()=>{}),B.set(pe,V),pe}(V);if(U.has(V))return U.get(V);const pe=ge(V);return pe!==V&&(U.set(V,pe),B.set(pe,V)),pe}const Ye=V=>B.get(V);function rt(V,pe,{blocked:z,upgrade:Q,blocking:ne,terminated:te}={}){const Pe=indexedDB.open(V,pe),ke=fe(Pe);return Q&&Pe.addEventListener("upgradeneeded",ut=>{Q(fe(Pe.result),ut.oldVersion,ut.newVersion,fe(Pe.transaction))}),z&&Pe.addEventListener("blocked",()=>z()),ke.then(ut=>{te&&ut.addEventListener("close",()=>te()),ne&&ut.addEventListener("versionchange",()=>ne())}).catch(()=>{}),ke}function Ae(V,{blocked:pe}={}){const z=indexedDB.deleteDatabase(V);return pe&&z.addEventListener("blocked",()=>pe()),fe(z).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],je=new Map;function $e(V,pe){if(!(V instanceof IDBDatabase)||pe in V||"string"!=typeof pe)return;if(je.get(pe))return je.get(pe);const z=pe.replace(/FromIndex$/,""),Q=pe!==z,ne=Ie.includes(z);if(!(z in(Q?IDBIndex:IDBObjectStore).prototype)||!ne&&!ve.includes(z))return;const te=function(){var Pe=(0,g.Z)(function*(ke,...ut){const Yt=this.transaction(ke,ne?"readwrite":"readonly");let Bt=Yt.store;return Q&&(Bt=Bt.index(ut.shift())),(yield Promise.all([Bt[z](...ut),ne&&Yt.done]))[0]});return function(ut){return Pe.apply(this,arguments)}}();return je.set(pe,te),te}!function we(V){Se=V(Se)}(V=>({...V,get:(pe,z,Q)=>$e(pe,z)||V.get(pe,z,Q),has:(pe,z)=>!!$e(pe,z)||V.has(pe,z)}))},5861:(at,be,P)=>{function g(k,ie,re,le,ue,de,he){try{var U=k[de](he),B=U.value}catch(q){return void re(q)}U.done?ie(B):Promise.resolve(B).then(le,ue)}function J(k){return function(){var ie=this,re=arguments;return new Promise(function(le,ue){var de=k.apply(ie,re);function he(B){g(de,le,ue,he,U,"next",B)}function U(B){g(de,le,ue,he,U,"throw",B)}he(void 0)})}}P.d(be,{Z:()=>J})}},at=>{at(at.s=1533)}]);